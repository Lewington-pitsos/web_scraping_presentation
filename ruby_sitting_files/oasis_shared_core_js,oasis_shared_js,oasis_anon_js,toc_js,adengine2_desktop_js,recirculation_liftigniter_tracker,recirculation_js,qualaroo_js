(function(context){'use strict';var sloth=function(){var slice=Array.prototype.slice,wTop,wBottom,undef,debounce=(function(element){return element?parseInt(element.getAttribute('data-sloth-debounce'),10):200;})(context.document.querySelector('script[data-sloth-debounce]')),delegate=context.setTimeout,branches=[],Branch=function(element,threshold,callback){this.elem=element;this.threshold=threshold;this.callback=function(){callback(element);};},addEvent=function(){context.addEventListener('scroll',execute);},removeEvent=function(){context.removeEventListener('scroll',execute);},lock=0,execute=function(force){var i=branches.length,branch;if(debounce){removeEvent();}if(i&&(force||!lock)){if(debounce){lock=delegate(function(){lock=0;addEvent();},debounce);}wTop=context.scrollY||context.pageYOffset;wBottom=wTop+context.innerHeight;while(i--){branch=branches[i];if(branch.isVisible()){delegate(branch.callback,0);branches.splice(i,1);}}}};Branch.prototype.isVisible=function(){var elem=this.
elem,mayBeVisible=elem.offsetHeight||elem.offsetWidth,height,threshold,top,bottom;if(mayBeVisible){threshold=this.threshold;height=elem.offsetHeight;top=(elem.offsetTop||elem.y||0)-threshold;bottom=top+height+threshold;return wBottom>=top&&wTop<=bottom;}return false;};Branch.prototype.compare=function(element){return this.elem===element;};return function(params){if(params){var elements=params.on,prune=params.off,threshold=params.threshold!==undef?params.threshold:100,callback=params.callback,i;if(elements&&callback){if(elements.length!==undef){elements=slice.call(elements);i=elements.length;while(i--){branches.push(new Branch(elements[i],threshold,callback));}}else{branches.push(new Branch(elements,threshold,callback));}}if(prune){if(prune.length!==undef){prune=slice.call(prune);i=prune.length;while(i--){branches=branches.filter(function(branch){return!branch.compare(prune[i]);});}}else{branches=branches.filter(function(branch){return!branch.compare(prune);});}}}execute(true);};};if(
context.define&&context.define.amd){context.define('sloth',sloth);}else{context.sloth=sloth();}})(this);;var Mustache=(typeof module!=="undefined"&&module.exports)||{};(function(exports){exports.name="mustache.js";exports.version="0.5.0-dev";exports.tags=["{{","}}"];exports.parse=parse;exports.compile=compile;exports.render=render;exports.clearCache=clearCache;exports.to_html=function(template,view,partials,send){var result=render(template,view,partials);if(typeof send==="function"){send(result);}else{return result;}};var _toString=Object.prototype.toString;var _isArray=Array.isArray;var _forEach=Array.prototype.forEach;var _trim=String.prototype.trim;var isArray;if(_isArray){isArray=_isArray;}else{isArray=function(obj){return _toString.call(obj)==="[object Array]";};}var forEach;if(_forEach){forEach=function(obj,callback,scope){return _forEach.call(obj,callback,scope);};}else{forEach=function(obj,callback,scope){for(var i=0,len=obj.length;i<len;++i){callback.call(scope,obj[i],i,obj);}
};}var spaceRe=/^\s*$/;function isWhitespace(string){return spaceRe.test(string);}var trim;if(_trim){trim=function(string){return string==null?"":_trim.call(string);};}else{var trimLeft,trimRight;if(isWhitespace("\xA0")){trimLeft=/^\s+/;trimRight=/\s+$/;}else{trimLeft=/^[\s\xA0]+/;trimRight=/[\s\xA0]+$/;}trim=function(string){return string==null?"":String(string).replace(trimLeft,"").replace(trimRight,"");};}var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':'&quot;',"'":'&#39;'};function escapeHTML(string){return String(string).replace(/&(?!\w+;)|[<>"']/g,function(s){return escapeMap[s]||s;});}function debug(e,template,line,file){file=file||"<template>";var lines=template.split("\n"),start=Math.max(line-3,0),end=Math.min(lines.length,line+3),context=lines.slice(start,end);var c;for(var i=0,len=context.length;i<len;++i){c=i+start+1;context[i]=(c===line?" >> ":"    ")+context[i];}e.template=template;e.line=line;e.file=file;e.message=[file+":"+line,context.join("\n"),"",e.message].join
("\n");return e;}function lookup(name,stack,defaultValue){if(name==="."){return stack[stack.length-1];}var names=name.split(".");var lastIndex=names.length-1;var target=names[lastIndex];var value,context,i=stack.length,j,localStack;while(i){localStack=stack.slice(0);context=stack[--i];j=0;while(j<lastIndex){context=context[names[j++]];if(context==null){break;}localStack.push(context);}if(context&&typeof context==="object"&&target in context){value=context[target];break;}}if(typeof value==="function"){value=value.call(localStack[localStack.length-1]);}if(value==null){return defaultValue;}return value;}function renderSection(name,stack,callback,inverted){var buffer="";var value=lookup(name,stack);if(inverted){if(value==null||value===false||(isArray(value)&&value.length===0)){buffer+=callback();}}else if(isArray(value)){forEach(value,function(value){stack.push(value);buffer+=callback();stack.pop();});}else if(typeof value==="object"){stack.push(value);buffer+=callback();stack.pop();}else
if(typeof value==="function"){var scope=stack[stack.length-1];var scopedRender=function(template){return render(template,scope);};buffer+=value.call(scope,callback(),scopedRender)||"";}else if(value){buffer+=callback();}return buffer;}function parse(template,options){options=options||{};var tags=options.tags||exports.tags,openTag=tags[0],closeTag=tags[tags.length-1];var code=['var buffer = "";',"\nvar line = 1;","\ntry {",'\nbuffer += "'];var spaces=[],hasTag=!1,nonSpace=!1;var stripSpace=function(){if(hasTag&&!nonSpace&&!options.space){while(spaces.length){code.splice(spaces.pop(),1);}}else{spaces=[];}hasTag=!1;nonSpace=!1;};var sectionStack=[],updateLine,nextOpenTag,nextCloseTag;var setTags=function(source){tags=trim(source).split(/\s+/);nextOpenTag=tags[0];nextCloseTag=tags[tags.length-1];};var includePartial=function(source){code.push('";',updateLine,'\nvar partial = partials["'+trim(source)+'"];','\nif (partial) {',
'\n  buffer += render(partial,stack[stack.length - 1],partials);','\n}','\nbuffer += "');};var openSection=function(source,inverted){var name=trim(source);if(name===""){throw debug(new Error("Section name may not be empty"),template,line,options.file);}sectionStack.push({name:name,inverted:inverted});code.push('";',updateLine,'\nvar name = "'+name+'";','\nvar callback = (function () {','\n  return function () {','\n    var buffer = "";','\nbuffer += "');};var openInvertedSection=function(source){openSection(source,true);};var closeSection=function(source){var name=trim(source);var openName=sectionStack.length!=0&&sectionStack[sectionStack.length-1].name;if(!openName||name!=openName){throw debug(new Error('Section named "'+name+'" was never opened'),template,line,options.file);}var section=sectionStack.pop();code.push('";','\n    return buffer;','\n  };','\n})();');if(section.inverted){code.push("\nbuffer += renderSection(name,stack,callback,true);");}else{code.push(
"\nbuffer += renderSection(name,stack,callback);");}code.push('\nbuffer += "');};var sendPlain=function(source){code.push('";',updateLine,'\nbuffer += lookup("'+trim(source)+'",stack,"");','\nbuffer += "');};var sendEscaped=function(source){code.push('";',updateLine,'\nbuffer += escapeHTML(lookup("'+trim(source)+'",stack,""));','\nbuffer += "');};var line=1,c,callback;for(var i=0,len=template.length;i<len;++i){if(template.slice(i,i+openTag.length)===openTag){i+=openTag.length;c=template.substr(i,1);updateLine='\nline = '+line+';';nextOpenTag=openTag;nextCloseTag=closeTag;hasTag=!0;switch(c){case"!":i++;callback=null;break;case"=":i++;closeTag="="+closeTag;callback=setTags;break;case">":i++;callback=includePartial;break;case"#":i++;callback=openSection;break;case"^":i++;callback=openInvertedSection;break;case"/":i++;callback=closeSection;break;case"{":closeTag="}"+closeTag;case"&":i++;nonSpace=!0;callback=sendPlain;break;default:nonSpace=!0;callback=sendEscaped;}var end=template.
indexOf(closeTag,i);if(end===-1){throw debug(new Error('Tag "'+openTag+'" was not closed properly'),template,line,options.file);}var source=template.substring(i,end);if(callback){callback(source);}var n=0;while(~(n=source.indexOf("\n",n))){line++;n++;}i=end+closeTag.length-1;openTag=nextOpenTag;closeTag=nextCloseTag;}else{c=template.substr(i,1);switch(c){case'"':case"\\":nonSpace=!0;code.push("\\"+c);break;case"\r":break;case"\n":spaces.push(code.length);code.push("\\n");stripSpace();line++;break;default:if(isWhitespace(c)){spaces.push(code.length);}else{nonSpace=!0;}code.push(c);}}}if(sectionStack.length!=0){throw debug(new Error('Section "'+sectionStack[sectionStack.length-1].name+'" was not closed properly'),template,line,options.file);}stripSpace();code.push('";',"\nreturn buffer;","\n} catch (e) { throw {error: e, line: line}; }");var body=code.join("").replace(/buffer \+= "";\n/g,"");if(options.debug){if(typeof console!="undefined"&&console.log){console.log(body);}else if(
typeof print==="function"){print(body);}}return body;}function _compile(template,options){var args="view,partials,stack,lookup,escapeHTML,renderSection,render";var body=parse(template,options);var fn=new Function(args,body);return function(view,partials){partials=partials||{};var stack=[view];try{return fn(view,partials,stack,lookup,escapeHTML,renderSection,render);}catch(e){throw debug(e.error,template,e.line,options.file);}};}var _cache={};function clearCache(){_cache={};}function compile(template,options){options=options||{};if(options.cache!==false){if(!_cache[template]){_cache[template]=_compile(template,options);}return _cache[template];}return _compile(template,options);}function render(template,view,partials){return compile(template)(view,partials);}})(Mustache);(function(context){context.Mustache=Mustache;if(context.define&&context.define.amd){context.define('wikia.mustache',Mustache);}}(window));;define('wikia.browserDetect',['wikia.window'],function(win){'use strict';var
appName=win.navigator.appName,userAgent=win.navigator.userAgent,browser=null,operatingSystem=null;function isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);}function isIE(){var bool=!1;if(appName==='Microsoft Internet Explorer'||(appName==='Netscape'&&userAgent.indexOf('Trident/')!==-1)){bool=!0;}return bool;}function isEdge(){return userAgent.indexOf('Edge')!==-1;}function isFirefox(){return userAgent.toLowerCase().indexOf('firefox')>-1;}function isChrome(){return userAgent.toLowerCase().indexOf('chrome')>-1;}function isIPad(){var bool=!1;if(userAgent.match(/iPad/i)!==null){bool=!0;}return bool;}function isIOS7orLower(){return!!userAgent.match(/iPad.+OS.[6,7].\d.+like.Mac.OS.+Safari/i);}function isAndroid(){return userAgent.toLowerCase().indexOf('android')>-1;}function getOS(){if(null!==operatingSystem){return operatingSystem;}operatingSystem='unknown';if(userAgent.indexOf('Win')!==-1){operatingSystem='Windows';}if(userAgent.
indexOf('Mac')!==-1){operatingSystem='OSX';}if(userAgent.indexOf('Linux')!==-1){operatingSystem='Linux';}if(userAgent.indexOf('Android')!==-1){operatingSystem='Android';}if(userAgent.indexOf('like Mac')!==-1){operatingSystem='iOS';}return operatingSystem;}function getBrowser(){if(null!==browser){return browser;}var appVersion=win.navigator.appVersion,temp,matches=userAgent.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(matches[1])){temp=/\brv[ :]+(\d+)/g.exec(userAgent)||[];browser='IE '+(temp[1]||'');return browser;}if(matches[1]==='Chrome'){temp=userAgent.match(/\b(OPR|Edge)\/(\d+)/);if(temp!==null){browser=temp.slice(1).join(' ').replace('OPR','Opera');return browser;}}matches=matches[2]?[matches[1],matches[2]]:[appName,appVersion,'-?'];temp=userAgent.match(/version\/(\d+)/i);if(temp!==null){matches.splice(1,1,temp[1]);}browser=matches.join(' ');return browser;}function getBrowserVersion(){var browserStringParts=getBrowser().split(' ');
return parseInt(browserStringParts[1],10);}return{getBrowser:getBrowser,getBrowserVersion:getBrowserVersion,getOS:getOS,isChrome:isChrome,isIE:isIE,isFirefox:isFirefox,isIPad:isIPad,isIOS7orLower:isIOS7orLower,isAndroid:isAndroid,isMobile:isMobile,isEdge:isEdge};});;(function(mw,$){function cat(pre,val,post,raw){if(val===undefined||val===null||val===''){return'';}return pre+(raw?val:mw.Uri.encode(val))+post;}var parser={strict:/^(?:([^:\/?#]+):)?(?:\/\/(?:(?:([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?([^:\/?#]*)(?::(\d*))?)?((?:[^?#\/]*\/)*[^?#]*)(?:\?([^#]*))?(?:#(.*))?/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?(?:(?:([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?([^:\/?#]*)(?::(\d*))?((?:\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?[^?#\/]*)(?:\?([^#]*))?(?:#(.*))?/},properties=['protocol','user','password','host','port','path','query','fragment'];mw.UriRelative=function(documentLocation){var defaultUri;function Uri(uri,options){options=typeof options==='object'?options:{strictMode:!!
options};options=$.extend({strictMode:!1,overrideKeys:!1},options);if(uri!==undefined&&uri!==null&&uri!==''){if(typeof uri==='string'){this.parse(uri,options);}else if(typeof uri==='object'){for(var prop in uri){if(uri.hasOwnProperty(prop)){if($.isArray(uri[prop])||$.isPlainObject(uri[prop])){this[prop]=$.extend(true,{},uri[prop]);}else{this[prop]=uri[prop];}}}if(!this.query){this.query={};}}}else{return defaultUri.clone();}if(!this.protocol){this.protocol=defaultUri.protocol;}if(!this.host){this.host=defaultUri.host;if(!this.port){this.port=defaultUri.port;}}if(this.path&&this.path.charAt(0)!=='/'){throw new Error('Bad constructor arguments');}if(!(this.protocol&&this.host&&this.path)){throw new Error('Bad constructor arguments');}}Uri.encode=function(s){return encodeURIComponent(s).replace(/!/g,'%21').replace(/'/g,'%27').replace(/\(/g,'%28').replace(/\)/g,'%29').replace(/\*/g,'%2A').replace(/%20/g,'+');};Uri.decode=function(s){return decodeURIComponent(s.replace(/\+/g,'%20'));}
;Uri.prototype={parse:function(str,options){var q,uri=this,matches=parser[options.strictMode?'strict':'loose'].exec(str);$.each(properties,function(i,property){uri[property]=matches[i+1];});q={};if(uri.query){uri.query.replace(/(?:^|&)([^&=]*)(?:(=)([^&]*))?/g,function($0,$1,$2,$3){var k,v;if($1){k=Uri.decode($1);v=($2===''||$2===undefined)?null:Uri.decode($3);if(options.overrideKeys||q[k]===undefined){q[k]=v;}else{if(typeof q[k]==='string'){q[k]=[q[k]];}if($.isArray(q[k])){q[k].push(v);}}}});}this.query=q;},getUserInfo:function(){return cat('',this.user,cat(':',this.password,''));},getHostPort:function(){return this.host+cat(':',this.port,'');},getAuthority:function(){return cat('',this.getUserInfo(),'@')+this.getHostPort();},getQueryString:function(){var args=[];$.each(this.query,function(key,val){var k=Uri.encode(key),vals=$.isArray(val)?val:[val];$.each(vals,function(i,v){if(v===null){args.push(k);}else if(k==='title'){args.push(k+'='+mw.util.wikiUrlencode(v));}else{args.push(k+'='
+Uri.encode(v));}});});return args.join('&');},getRelativePath:function(){return this.path+cat('?',this.getQueryString(),'',true)+cat('#',this.fragment,'');},toString:function(){return this.protocol+'://'+this.getAuthority()+this.getRelativePath();},clone:function(){return new Uri(this);},extend:function(parameters){$.extend(this.query,parameters);return this;}};defaultUri=new Uri(documentLocation);return Uri;};if(document&&document.location&&document.location.href){mw.Uri=mw.UriRelative(document.location.href);}}(mediaWiki,jQuery));;(function(window,$,mustache){'use strict';var templates={bannerNotification:'<div class="wds-banner-notification {{typeClassName}}">'+'<div class="wds-banner-notification__icon">'+'{{{icon}}}</div>'+'<span class="wds-banner-notification__text">{{{content}}}</span>'+'<svg class="wds-icon wds-icon-tiny wds-banner-notification__close" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">'+
'<path d="M6 4.554L2.746 1.3C2.346.9 1.7.9 1.3 1.3c-.4.4-.4 1.046 0 1.446L4.554 6 1.3 9.254c-.4.4-.4 1.047 0 1.446.4.4 1.046.4 1.446 0L6 7.446 9.254 10.7c.4.4 1.047.4 1.446 0 .4-.4.4-1.046 0-1.446L7.446 6 10.7 2.746c.4-.4.4-1.047 0-1.446-.4-.4-1.046-.4-1.446 0L6 4.554z" fill-rule="evenodd"/>'+'</svg></div>',notifyIcon:'<svg class="wds-icon wds-icon-small" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path d="M8.1 16.5l-7-13C.9 3 1 2.4 1.5 2.1c.5-.2 1.1-.1 1.4.4l7 13c.2.5.1 1.1-.4 1.4-.5.2-1.1.1-1.4-.4zM17 6.7c-2.8 2.5-6.2-.6-8.3 3.1L5.5 4.1C7.6.4 11 3.5 13.7 1L17 6.7z"/></svg>',confirmIcon:
'<svg class="wds-icon wds-icon-small" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill-rule="evenodd" d="M9 17A8 8 0 1 1 9 1a8 8 0 0 1 0 16zm-1.083-5a.73.73 0 0 0 .52-.22l4.33-4.403c.3-.305.312-.81.024-1.13a.722.722 0 0 0-1.062-.026l-3.83 3.895L6.25 8.563a.72.72 0 0 0-1.06.068.835.835 0 0 0 .063 1.13l2.165 2.04a.725.725 0 0 0 .5.2z"/></svg>',errorIcon:'<svg class="wds-icon wds-icon-small" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill-rule="evenodd" d="M10.414 9l1.417-1.416a1.003 1.003 0 0 0-.002-1.412.996.996 0 0 0-1.412-.003L9 7.585 7.584 6.17a1.003 1.003 0 0 0-1.412.002.996.996 0 0 0-.003 1.412L7.585 9 6.17 10.416a1.003 1.003 0 0 0 .002 1.412.996.996 0 0 0 1.412.003L9 10.415l1.416 1.417a1.003 1.003 0 0 0 1.412-.002.996.996 0 0 0 .003-1.412L10.415 9zm1.9-8L17 5.686v6.628L12.314 17H5.686L1 12.314V5.686L5.686 1h6.628z"/></svg>',warnIcon:
'<svg class="wds-icon wds-icon-small" width="18" height="16" viewBox="0 0 18 16" xmlns="http://www.w3.org/2000/svg"><path d="M17.928 15.156c.1.178.096.392-.013.565a.603.603 0 0 1-.515.28H.6a.607.607 0 0 1-.515-.28.544.544 0 0 1-.013-.564L8.472.278c.21-.37.847-.37 1.056 0l8.4 14.878zM8 5.99v4.02A1 1 0 0 0 9 11c.556 0 1-.444 1-.99V5.99A1 1 0 0 0 9 5c-.556 0-1 .444-1 .99zM8 13c0 .556.448 1 1 1 .556 0 1-.448 1-1 0-.556-.448-1-1-1-.556 0-1 .448-1 1z" fill-rule="evenodd"/></svg>'},defaultTimeout=10000,types={notify:{className:'wds-message',svg:templates.notifyIcon},confirm:{className:'wds-success',svg:templates.confirmIcon},error:{className:'wds-alert',svg:templates.errorIcon},warn:{className:'wds-warning',svg:templates.warnIcon}},classes=Object.keys(types).join(' '),closeImageSource=window.stylepath+'/oasis/images/icon_close.png',$container,$header,modal,fadeTime=400,wrapperClass='wds-banner-notification__container',wrapperSelector='.'+wrapperClass,notificationSelector=
'.wds-banner-notification',transparentBannerClass='wds-is-transparent';function BannerNotification(content,type,$parent,timeout){if(content instanceof jQuery&&content.hasClass('wds-banner-notification')){this.content=content.find('.msg').html();this.$element=content;this.$parent=content.parent();this.hidden=!1;}else{this.content=content;this.$element=null;this.$parent=$parent;this.hidden=!0;this.type=type;this.timeout=timeout;}this.onCloseHandler=Function.prototype;}BannerNotification.prototype.show=function(){if(!this.hidden){return this;}if(!this.$element){this.$element=createMarkup(this.content,this.type);}this.setType(this.type);setUpClose(this);if(isModalShown()&&typeof this.timeout!=='number'){this.timeout=defaultTimeout;}addToDOM(this.$element,this.$parent);this.hidden=!1;handleScrolling();if(typeof this.timeout==='number'){setTimeout(function(){this.hide();}.bind(this),this.timeout);}return this;};BannerNotification.prototype.hide=function(){if(!this.hidden){fadeOut(
this.$element,removeFromDOM);this.$element=null;this.hidden=!0;}return this;};BannerNotification.prototype.setType=function(type){if(type!==this.type&&types.hasOwnProperty(type)){this.type=type;if(this.$element){this.$element.removeClass(classes).addClass(type);}}return this;};BannerNotification.prototype.setContent=function(content){if(content&&content!==this.content){this.content=content;if(this.$element){this.$element.find('.msg').html(content);}}return this;};BannerNotification.prototype.showConnectionError=function(){return this.setType('error').setContent(window.mw.message('bannernotifications-general-ajax-failure').escaped()).show();};BannerNotification.prototype.onClose=function(callback){if(typeof callback==='function'){this.onCloseHandler=callback;}return this;};function init(){$header=$('#globalNavigation');$container=getContainer();if(window.skin!=='monobook'){require(['wikia.onScroll'],function(onScroll){onScroll.bind(handleScrolling);});}updatePlaceholderHeight();if(mw.
config.get('wgVisualEditor')&&mw.config.get('wgIsArticle')){mw.hook('ve.activationComplete').add(function(){$(notificationSelector).fadeOut(fadeTime);updatePlaceholderHeight();});mw.hook('ve.deactivate').add(function(){$(notificationSelector).fadeIn(fadeTime);updatePlaceholderHeight();});}createBackendNotifications();}function updatePlaceholderHeight(){if(window.skin!=='monobook'){$container.height($container.find(wrapperSelector).height());}}function createBackendNotifications(){$(notificationSelector).each(function(){var backendNotification=new BannerNotification($(this));setUpClose(backendNotification);});}function handleScrolling(){var containerTop,notificationWrapper=$container.children(wrapperSelector),headerBottom;if(!$container.length||!notificationWrapper.length){return;}containerTop=$container.get(0).getBoundingClientRect().top;headerBottom=$header.length>0?$header.get(0).getBoundingClientRect().bottom:0;if(containerTop<headerBottom){notificationWrapper.css('top',headerBottom
);if(!notificationWrapper.hasClass('float')){notificationWrapper.addClass('float');}}else{notificationWrapper.removeClass('float');}}function getContainer(){if($container&&$container.length){return $container;}else if(window.skin==='monobook'){$container=$('#content');}else{$container=$('.banner-notifications-placeholder');}return $container;}function createMarkup(content,type){type=type||'notify';return $(mustache.render(templates.bannerNotification,{imageSource:closeImageSource,content:content,icon:types[type].svg,typeClassName:types[type].className,})).addClass(type+' '+transparentBannerClass);}function addToDOM($element,$parentElement){var $parent=$parentElement||(isModalShown()?modal:getContainer()),$bannerNotificationsWrapper=$parent.find(wrapperSelector);if(!$bannerNotificationsWrapper.length){$bannerNotificationsWrapper=$('<div></div>').addClass(wrapperClass);$parent.prepend($bannerNotificationsWrapper);}$bannerNotificationsWrapper.prepend($element);setTimeout(function(){
$element.removeClass(transparentBannerClass);},0);}function setUpClose(notification){notification.$element.find('.wds-banner-notification__close').on('click',function(event){notification.hide();notification.onCloseHandler(event);});}function isModalShown(){modal=$('.modalWrapper, .yui-panel, .modal');return modal.is(':visible');}function fadeOut($element,callback){if($element.length){$element.animate({'height':0,'padding':0,'opacity':0},fadeTime,function(){callback($element);});}}function removeFromDOM($element){var $parent=$element.parent();if($parent.hasClass(wrapperSelector)&&$parent.children().length===1){$parent.remove();}else{$element.remove();}updatePlaceholderHeight();}$(init);window.BannerNotification=BannerNotification;define('BannerNotification',function(){return BannerNotification;});})(window,$,window.Mustache);;(function(context){'use strict';function nirvana($){var allowedFormats=['json','html','jsonp'];function getUrl(options){var dataParams=options.data||{},format=(
options.format||'json').toLowerCase(),i,key,sortedDict={},sortedKeys=[],urlParams,url=options.scriptPath||context.wgScriptPath;if((typeof options.controller==='undefined')||(typeof options.method==='undefined')){throw'controller and method are required';}urlParams={controller:options.controller.replace(/Controller$/,''),method:options.method};if(typeof dataParams==='string'){dataParams+='&format='+format;}else{dataParams.format=format;}if(typeof dataParams!=='string'){for(key in dataParams){sortedKeys[sortedKeys.length]=key;}sortedKeys.sort();for(i=0;i<sortedKeys.length;i++){sortedDict[sortedKeys[i]]=dataParams[sortedKeys[i]];}dataParams=$.param(sortedDict);}return url+'/wikia.php?'+$.param(urlParams)+'&'+dataParams;}function sendRequest(attr){var type=(attr.type||'POST').toUpperCase(),format=(attr.format||'json').toLowerCase(),data={},callback=attr.callback||function(){},onErrorCallback=attr.onErrorCallback||function(){},url;if(allowedFormats.indexOf(format)===-1){throw'Only Json,Jsonp and Html format are allowed'
;}if(type==='POST'&&typeof attr.data!=='undefined'){data=attr.data;delete attr.data;}url=getUrl(attr);var settings={url:url,dataType:format,type:type,data:data,success:callback,error:onErrorCallback};if(typeof attr.contentType!='undefined'){settings.contentType=attr.contentType;}if(typeof attr.processData!='undefined'){settings.processData=attr.processData;}return $.ajax(settings);}return{sendRequest:sendRequest,getUrl:getUrl,getJson:function(controller,method,data,callback,onErrorCallback){if(typeof data==='function'){onErrorCallback=callback;callback=data;data={};}return sendRequest({controller:controller,method:method,data:data,type:'GET',callback:callback,onErrorCallback:onErrorCallback});},postJson:function(controller,method,data,callback,onErrorCallback){if(typeof data==='function'){onErrorCallback=callback;callback=data;data={};}return sendRequest({controller:controller,method:method,data:data,callback:callback,onErrorCallback:onErrorCallback});}};}if(context.define&&context.
define.amd){context.define('wikia.nirvana',['jquery'],nirvana);}if(context.jQuery){context.jQuery.nirvana=nirvana(context.jQuery);}}(this));;define('wikia.ui.factory',['wikia.nirvana','wikia.window','wikia.loader','wikia.ui.component','jquery'],function uifactory(nirvana,window,loader,UIComponent,$){'use strict';function getComponentsConfig(components){var deferred=new $.Deferred(),data={components:components,cb:window.wgStyleVersion};nirvana.getJson('Wikia\\UI\\UIFactoryApi','getComponentsConfig',data,function(data){deferred.resolve(data);},function(xhrObject){deferred.reject(JSON.parse(xhrObject.responseText));});return deferred.promise();}function getComponentInstance(){return new UIComponent();}function arrayUnique(array){var o={},uniqueArray=[],i;for(i=0;i<array.length;i++){if(o.hasOwnProperty(array[i])){continue;}uniqueArray.push(array[i]);o[array[i]]=1;}return uniqueArray;}function init(componentName){var deferred=new $.Deferred(),components=[],dependencyObjects={};if(!(
componentName instanceof Array)){componentName=[componentName];}getComponentsConfig(componentName).done(function(data){var jsAssets=[],cssAssets=[],createComponent=function(element){var component=getComponentInstance(),templateVarsConfig=element.templateVarsConfig,assets=element.assets,templates=element.templates,dependencies=element.dependencies,dependencyList={};if(typeof dependencies==='object'){dependencies.forEach(function(name){if(typeof dependencyObjects[name]!=='undefined'){dependencyList[name]=dependencyObjects[name];}else{deferred.reject();throw new Error('Sub component '+name+' not found');}});}if(assets){jsAssets=jsAssets.concat(assets.js);cssAssets=cssAssets.concat(assets.css);}if(templateVarsConfig&&templates){component.setComponentsConfig({name:element.name,jsWrapperModule:element.jsWrapperModule,templates:templates,templateVarsConfig:templateVarsConfig,dependencies:dependencyList});}return component;};if(data.dependencies){Object.keys(data.dependencies).forEach(function
(name){dependencyObjects[name]=createComponent(data.dependencies[name]);});}data.components.forEach(function(element){components.push(createComponent(element));});jsAssets=arrayUnique(jsAssets);cssAssets=arrayUnique(cssAssets);loader({type:loader.CSS,resources:cssAssets});function resolveDeferred(){deferred.resolve.apply(null,components);}if(jsAssets.length>0){loader({type:loader.JS,resources:jsAssets}).done(resolveDeferred);}else{resolveDeferred();}}).fail(function(data){if(data.error){throw new Error(data.error+': '+data.message);}deferred.reject();});return deferred.promise();}return{init:init};});;define('wikia.ui.component',['wikia.mustache'],function uicomponent(mustache){'use strict';function validateComponent(componentConfig,componentType,componentVars){var supportedTypes=componentConfig.templates,variables,requiredVars,missingVars=[];if(!supportedTypes.hasOwnProperty(componentType)){throw new Error('Requested component type is not supported!');}requiredVars=componentConfig.
templateVarsConfig[componentType].required;missingVars=[];requiredVars.forEach(function(element){if(!componentVars.hasOwnProperty(element)){missingVars.push(element);}});if(missingVars.length>0){variables=missingVars.join(', ');throw new Error('Missing required mustache variables: '+variables+'!');}}function UIComponent(){if(!(this instanceof UIComponent)){return new UIComponent();}var componentConfig={},componentType,componentVars;this.render=function(params){componentType=params.type;componentVars=params.vars;validateComponent(componentConfig,componentType,componentVars);return mustache.render(componentConfig.templates[componentType],componentVars);};this.setComponentsConfig=function(config){componentConfig=config;};this.createComponent=function(params,callback){var that=this;if(componentConfig.jsWrapperModule){require([componentConfig.jsWrapperModule],function(object){callback(object.createComponent(params,that));});}else{callback(that,params);}};this.getSubComponent=function(
componentName){if(typeof componentConfig.dependencies[componentName]!=='undefined'){return componentConfig.dependencies[componentName];}throw new Error('Dependency '+componentName+' not found.');};}return UIComponent;});;

jQuery.fn.placeholder=function(){var hasNativeSupport='placeholder'in document.createElement('input');return this.each(function(){if(hasNativeSupport){return;}var input=$(this);var text=input.attr('placeholder');if(input.val()==''){input.addClass('placeholder').val(text);}input.focus(function(){if(input.val()==text){input.val('');}input.removeClass('placeholder');});input.blur(function(){if(input.val()==''){input.addClass('placeholder').val(text);}});input.closest('form').submit(function(){if(input.val()==text){input.val('');}});});};$(function(){$('input[placeholder], textarea[placeholder]').placeholder();});;(function(){'use strict';if(!Array.prototype.indexOf){Array.prototype.indexOf=function(val,fromIndex){var i,l;fromIndex=fromIndex||0;for(i=fromIndex,l=this.length;i<l;i++){if(this[i]===val){return i;}}return-1;};}if(!Array.prototype.filter){Array.prototype.filter=function(fun,t){var i,l,res=[];for(i=0,l=this.length;i<l;i++){if(fun.call(t,this[i],i,this)){res[res.length]=this[i];}
}return res;};}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(searchElement){"use strict";if(this==null)throw new TypeError();var t=Object(this);var len=t.length>>>0;if(len===0)return-1;var n=len;if(arguments.length>1){n=Number(arguments[1]);if(n!=n)n=0;else if(n!=0&&n!=(1/0)&&n!=-(1/0))n=(n>0||-1)*Math.floor(Math.abs(n));}var k=n>=0?Math.min(n,len-1):len-Math.abs(n);for(;k>=0;k--){if(k in t&&t[k]===searchElement)return k;}return-1;};}}());;(function(window,document,jQuery){var head=document.getElementsByTagName('head')[0],loadedCompleteRegExp=/loaded|complete/,callbacks={},callbacksNb=0,timer;jQuery.getCSS=function(url,options,callback){if(jQuery.isFunction(options)){callback=options;options={};}var link=document.createElement('link');link.rel='stylesheet';link.type='text/css';link.media=options.media||'screen';link.href=url;if(options.charset){link.charset=options.charset;}if(options.title){callback=(function(callback){return function(){link.title=options.title
;callback(link,"success");};})(callback);}if(link.readyState){link.onreadystatechange=function(){if(loadedCompleteRegExp.test(link.readyState)){link.onreadystatechange=null;callback(link,"success");}};}else if(link.onload===null&&link.all){link.onload=function(){link.onload=null;callback(link,"success");};}else{callbacks[link.href]=function(){callback(link,"success");};if(!callbacksNb++){timer=window.setInterval(function(){var callback,stylesheet,stylesheets=document.styleSheets,href,i=stylesheets.length;while(i--){stylesheet=stylesheets[i];if((href=stylesheet.href)&&(callback=callbacks[href])){try{callback.r=stylesheet.cssRules;throw'SECURITY';}catch(e){if(/SECURITY/.test(e)||/SECURITY/i.test(e.name)){callback(link,"success");delete callbacks[href];if(!--callbacksNb){timer=window.clearInterval(timer);}}}}}},13);}}head.appendChild(link);};})(this,this.document,this.jQuery);;var jaaulde=window.jaaulde||{};jaaulde.utils=jaaulde.utils||{};jaaulde.utils.cookies=(function(){var cookies=[];
var defaultOptions={hoursToLive:null,path:'/',domain:null,secure:!1};var resolveOptions=function(options){var returnValue;if(typeof options!=='object'||options===null){returnValue=defaultOptions;}else{returnValue={hoursToLive:(typeof options.hoursToLive==='number'&&options.hoursToLive!==0?options.hoursToLive:defaultOptions.hoursToLive),path:(typeof options.path==='string'&&options.path!==''?options.path:defaultOptions.path),domain:(typeof options.domain==='string'&&options.domain!==''?options.domain:defaultOptions.domain),secure:(typeof options.secure==='boolean'&&options.secure?options.secure:defaultOptions.secure)};}return returnValue;};var expiresGMTString=function(hoursToLive){var dateObject=new Date();dateObject.setTime(dateObject.getTime()+(hoursToLive*60*60*1000));return dateObject.toGMTString();};var assembleOptionsString=function(options){options=resolveOptions(options);return((typeof options.hoursToLive==='number'?'; expires='+expiresGMTString(options.hoursToLive):'')+
'; path='+options.path+(typeof options.domain==='string'?'; domain='+options.domain:'')+(options.secure===true?'; secure':''));};var splitCookies=function(){cookies={};var pair,name,value,separated=document.cookie.split(';');for(var i=0;i<separated.length;i=i+1){pair=separated[i].split('=');name=pair[0].replace(/^\s*/,'').replace(/\s*$/,'');value=decodeURIComponent(pair[1]);cookies[name]=value;}return cookies;};var constructor=function(){};constructor.prototype.get=function(cookieName){var returnValue;splitCookies();if(typeof cookieName==='string'){returnValue=(typeof cookies[cookieName]!=='undefined')?cookies[cookieName]:null;}else if(typeof cookieName==='object'&&cookieName!==null){returnValue={};for(var item in cookieName){if(typeof cookies[cookieName[item]]!=='undefined'){returnValue[cookieName[item]]=cookies[cookieName[item]];}else{returnValue[cookieName[item]]=null;}}}else{returnValue=cookies;}return returnValue;};constructor.prototype.filter=function(cookieNameRegExp){var
returnValue={};splitCookies();if(typeof cookieNameRegExp==='string'){cookieNameRegExp=new RegExp(cookieNameRegExp);}for(var cookieName in cookies){if(cookieName.match(cookieNameRegExp)){returnValue[cookieName]=cookies[cookieName];}}return returnValue;};constructor.prototype.set=function(cookieName,value,options){if(typeof value==='undefined'||value===null){if(typeof options!=='object'||options===null){options={};}value='';options.hoursToLive=-8760;}var optionsString=assembleOptionsString(options);document.cookie=cookieName+'='+encodeURIComponent(value)+optionsString;};constructor.prototype.del=function(cookieName,options){var allCookies={};if(typeof options!=='object'||options===null){options={};}if(typeof cookieName==='boolean'&&cookieName===true){allCookies=this.get();}else if(typeof cookieName==='string'){allCookies[cookieName]=!0;}for(var name in allCookies){if(typeof name==='string'&&name!==''){this.set(name,null,options);}}};constructor.prototype.test=function(){var returnValue
=!1,testName='cT',testValue='data';this.set(testName,testValue);if(this.get(testName)===testValue){this.del(testName);returnValue=!0;}return returnValue;};constructor.prototype.setOptions=function(options){if(typeof options!=='object'){options=null;}defaultOptions=resolveOptions(options);};return new constructor();})();(function(){if(window.jQuery){(function($){$.cookies=jaaulde.utils.cookies;var extensions={cookify:function(options){return this.each(function(){var i,resolvedName=!1,resolvedValue=!1,name='',value='',nameAttrs=['name','id'],nodeName,inputType;for(i in nameAttrs){if(!isNaN(i)){name=$(this).attr(nameAttrs[i]);if(typeof name==='string'&&name!==''){resolvedName=!0;break;}}}if(resolvedName){nodeName=this.nodeName.toLowerCase();if(nodeName!=='input'&&nodeName!=='textarea'&&nodeName!=='select'&&nodeName!=='img'){value=$(this).html();resolvedValue=!0;}else{inputType=$(this).attr('type');if(typeof inputType==='string'&&inputType!==''){inputType=inputType.
toLowerCase();}if(inputType!=='radio'&&inputType!=='checkbox'){value=$(this).val();resolvedValue=!0;}}if(resolvedValue){if(typeof value!=='string'||value===''){value=null;}$.cookies.set(name,value,options);}}});},cookieFill:function(){return this.each(function(){var i,resolvedName=!1,name='',value,nameAttrs=['name','id'],iteration=0,nodeName;for(i in nameAttrs){if(!isNaN(i)){name=$(this).attr(nameAttrs[i]);if(typeof name==='string'&&name!==''){resolvedName=!0;break;}}}if(resolvedName){value=$.cookies.get(name);if(value!==null){nodeName=this.nodeName.toLowerCase();if(nodeName==='input'||nodeName==='textarea'||nodeName==='select'){$(this).val(value);}else{$(this).html(value);}}}iteration=0;});},cookieBind:function(options){return this.each(function(){$(this).cookieFill().change(function(){$(this).cookify(options);});});}};$.each(extensions,function(i){$.fn[i]=this;});})(window.jQuery);}})();;(function($){function distance(date){return(new Date().getTime()-date.getTime());}function
inWords(date){return $t.inWords(distance(date));}function refresh(){var data=prepareData(this);if(!isNaN(data.datetime)){$(this).text(inWords(data.datetime));}return this;}function prepareData(element){element=$(element);if(!element.data("timeago")){element.data("timeago",{datetime:$t.datetime(element)});var text=$.trim(element.text());if(text.length>0){element.attr("title",text);}}return element.data("timeago");}$.timeago=function(timestamp){if(timestamp instanceof Date){return inWords(timestamp);}else if(typeof timestamp==="string"){return inWords($.timeago.parse(timestamp));}else{return inWords($.timeago.datetime(timestamp));}};var $t=$.timeago;$.extend($.timeago,{settings:{refreshMillis:60000,allowFuture:!0,strings:window.wgTimeAgoi18n||{}},inWords:function(distanceMillis){var $l=this.settings.strings,isFuture=!1;if(this.settings.allowFuture){if(distanceMillis<0){isFuture=!0;}distanceMillis=Math.abs(distanceMillis);}var seconds=distanceMillis/1000;var minutes=seconds/60;var
hours=minutes/60;var days=hours/24;var years=days/365;function substitute(key,number){var string=$l[isFuture?(key+'-from-now'):key]||'';return string.replace(/%d/i,number);}var words=(seconds<45&&substitute('seconds',Math.round(seconds)))||(seconds<90&&substitute('minute',1))||(minutes<45&&substitute('minutes',Math.round(minutes)))||(minutes<90&&substitute('hour',1))||(hours<24&&substitute('hours',Math.round(hours)))||(hours<48&&substitute('day',1))||(days<30&&substitute('days',Math.floor(days)))||(days<60&&substitute('month',1))||(days<365&&substitute('months',Math.floor(days/30)))||(years<2&&substitute('year',1))||substitute('years',Math.floor(years));return words;},parse:function(iso8601){var s=$.trim(iso8601);s=s.replace(/\.\d\d\d+/,"");s=s.replace(/-/,"/").replace(/-/,"/");s=s.replace(/T/," ").replace(/Z/," UTC");s=s.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");return new Date(s);},datetime:function(elem){var node=$(elem);var isTime=node.get(0).tagName.toLowerCase()==="time";var
iso8601=isTime?node.attr("datetime"):node.attr("title");return $t.parse(iso8601);}});$.fn.timeago=function(){var self=this;self.each(refresh);var $s=$t.settings;if($s.refreshMillis>0){setInterval(function(){self.each(refresh);},$s.refreshMillis);}return self;};document.createElement("abbr");document.createElement("time");}(jQuery));;(function($){$.store=function(driver,serializers){var that=this;this.encoders=[];this.decoders=[];if(typeof driver=='string'){if($.store.drivers[driver]){this.driver=$.store.drivers[driver];}else{throw new Error('Unknown driver '+driver);}}else if(typeof driver=='object'){var invalidAPI=!$.isFunction(driver.init)||!$.isFunction(driver.get)||!$.isFunction(driver.set)||!$.isFunction(driver.del)||!$.isFunction(driver.flush);if(invalidAPI){throw new Error('The specified driver does not fulfill the API requirements');}this.driver=driver;}else{$.each($.store.drivers,function(){if(!$.isFunction(this.available)||!this.available()){return true;}that.driver=this;if(
that.driver.init()===false){that.driver=null;return true;}return false;});}if(!serializers){serializers=$.store.serializers;}this.serializers={};$.each(serializers,function(key,serializer){if(!$.isFunction(this.init)){return true;}that.serializers[key]=this;that.serializers[key].init(that.encoders,that.decoders);});};$.extend($.store.prototype,{get:function(key){var value=this.driver.get(key);return this.driver.encodes?value:this.unserialize(value);},set:function(key,value){this.driver.set(key,this.driver.encodes?value:this.serialize(value));},del:function(key){this.driver.del(key);},flush:function(){this.driver.flush();},driver:undefined,serialize:function(value){var that=this;$.each(this.encoders,function(){var serializer=that.serializers[this+""];if(!serializer||!serializer.encode){return true;}try{value=serializer.encode(value);}catch(e){}});return value;},unserialize:function(value){var that=this;if(!value){return value;}$.each(this.decoders,function(){var serializer=that.
serializers[this+""];if(!serializer||!serializer.decode){return true;}value=serializer.decode(value);});return value;}});$.store.drivers={'localStorage':{ident:"$.store.drivers.localStorage",scope:'browser',available:function(){try{return!!window.localStorage;}catch(e){return false;}},init:$.noop,get:function(key){return window.localStorage.getItem(key);},set:function(key,value){try{window.localStorage.setItem(key,value);}catch(error){}},del:function(key){window.localStorage.removeItem(key);},flush:function(){window.localStorage.clear();}},'userData':{ident:"$.store.drivers.userData",element:null,nodeName:'userdatadriver',scope:'browser',initialized:!1,available:function(){try{return!!(document.documentElement&&document.documentElement.addBehavior);}catch(e){return false;}},init:function(){if(this.initialized){return;}try{this.element=document.createElement(this.nodeName);document.documentElement.insertBefore(this.element,document.getElementsByTagName('title')[0]);this.element.
addBehavior("#default#userData");this.initialized=!0;}catch(e){return false;}},get:function(key){this.element.load(this.nodeName);return this.element.getAttribute(key);},set:function(key,value){this.element.setAttribute(key,value);this.element.save(this.nodeName);},del:function(key){this.element.removeAttribute(key);this.element.save(this.nodeName);},flush:function(){this.element.expires=(new Date()).toUTCString();this.element.save(this.nodeName);}},'windowName':{ident:"$.store.drivers.windowName",scope:'window',cache:{},encodes:!0,available:function(){return true;},init:function(){this.load();},save:function(){window.name=$.store.serializers.json.encode(this.cache);},load:function(){this.cache=$.store.serializers.json.decode(window.name+"");},get:function(key){return this.cache[key];},set:function(key,value){this.cache[key]=value;this.save();},del:function(key){try{delete this.cache[key];}catch(e){this.cache[key]=undefined;}this.save();},flush:function(){window.name="{}";}}};$.
store.serializers={'json':{ident:"$.store.serializers.json",init:function(encoders,decoders){encoders.push("json");decoders.push("json");},encode:function(data){try{return JSON.stringify(data);}catch(e){return'';}},decode:function(data){try{return JSON.parse(data);}catch(e){return{};}}}};})(jQuery);$.storage=new $.store();;(function(window,undefined){'$:nomunge';var $=window.jQuery||window.Cowboy||(window.Cowboy={}),jq_throttle;$.throttle=jq_throttle=function(delay,no_trailing,callback,debounce_mode){var timeout_id,last_exec=0;if(typeof no_trailing!=='boolean'){debounce_mode=callback;callback=no_trailing;no_trailing=undefined;}function wrapper(){var that=this,elapsed=+new Date()-last_exec,args=arguments;function exec(){last_exec=+new Date();callback.apply(that,args);};function clear(){timeout_id=undefined;};if(debounce_mode&&!timeout_id){exec();}timeout_id&&clearTimeout(timeout_id);if(debounce_mode===undefined&&elapsed>delay){exec();}else if(no_trailing!==true){timeout_id=setTimeout(
debounce_mode?clear:exec,debounce_mode===undefined?delay-elapsed:delay);}};if($.guid){wrapper.guid=callback.guid=callback.guid||$.guid++;}return wrapper;};$.debounce=function(delay,at_begin,callback){return callback===undefined?jq_throttle(delay,at_begin,false):jq_throttle(delay,callback,at_begin!==false);};})(this);;(function($,window){'use strict';var win=$(window),elems=$([]),current,previous,scroller=$('<div id="floating-scrollbar"><div/></div>'),scrollerInner=scroller.children();function setState(state){scroller.toggle(!!state);}function scrollCurrent(){if(current){scroller.scrollLeft(current.scrollLeft());}}function update(){previous=current;current=null;elems.each(function(){var elem=$(this),top=elem.offset().top,bottom=top+elem.height(),viewportBottom=win.scrollTop()+win.height()-$.floatingScrollbarOptions.bottom,topOffset=30;if(top+topOffset<viewportBottom&&bottom>viewportBottom){current=elem;return false;}});if(!current){setState();return;}var scroll=current.scrollLeft(),
scrollMax=current.scrollLeft(90019001).scrollLeft(),widthOuter=current.innerWidth(),widthInner=widthOuter+scrollMax;current.scrollLeft(scroll);if(widthInner<=widthOuter){setState();return;}setState(true);if(!previous||previous[0]!==current[0]){if(previous){previous.unbind('scroll',scrollCurrent);}current.scroll(scrollCurrent).after(scroller);}scroller.css({bottom:$.floatingScrollbarOptions.bottom,left:current.offset().left-win.scrollLeft(),width:widthOuter}).scrollLeft(scroll);scrollerInner.width(widthInner);}scroller.hide().css({position:'fixed',bottom:0,height:'30px',overflowX:'auto',overflowY:'hidden'}).scroll(function(){if(current){current.scrollLeft(scroller.scrollLeft());}});scrollerInner.css({border:'1px solid #fff',opacity:0.01});$.fn.floatingScrollbar=function(state){if(state===false){elems=elems.not(this);this.unbind('scroll',scrollCurrent);if(!elems.length){scroller.detach();win.unbind('resize scroll',update);}}else if(this.length){if(!elems.length){win.resize(update).scroll
(update);}elems=elems.add(this);}update();return this;};$.floatingScrollbarUpdate=update;$.floatingScrollbarOptions={bottom:0};})(jQuery,this);;(function(window,$){'use strict';var getAssetManagerUrl=function(elements,params,requesttype){if(typeof elements==='string'){elements=[elements];}params=params||{};if(window.debug===true){params.minify=0;}return wgCdnRootUrl+wgAssetsManagerQuery.replace('%1$s',requesttype).replace('%2$s',elements.join(',')).replace('%3$s',$.isEmptyObject(params)?'-':encodeURIComponent($.param(params))).replace('%4$d',wgStyleVersion);};$.getSassURL=function(rootURL,scssFilePath,params){return rootURL+wgAssetsManagerQuery.replace('%1$s','sass').replace('%2$s',scssFilePath).replace('%3$s',encodeURIComponent($.param(params||window.sassParams))).replace('%4$d',wgStyleVersion);};$.getSassCommonURL=function(scssFilePath,params){return $.getSassURL(wgCdnRootUrl,scssFilePath,params);};$.getSassLocalURL=function(scssFilePath,params){return $.getSassURL(window.
wgScriptPath,scssFilePath,params);};$.getAssetManagerGroupUrl=function(groups,params){return getAssetManagerUrl(groups,params,'groups');};$.getSassesURL=function(sasses,params){return getAssetManagerUrl(sasses,params,'sasses');};$.ajaxSetup({cache:!0});$.getScript=function(url,callback,failureFn){return $.ajax({type:'GET',url:url,success:function(xhr){if(typeof callback==='function'){try{callback();}catch(e){eval(xhr);callback();$().log('eval() fallback applied for '+url,'getScript');}}},error:(typeof failureFn==='function'?failureFn:$.noop),dataType:'script'});};$.fn.log=function(msg,group){Wikia.log(msg,Wikia.log.levels.info,group);return this;};$.fn.exists=function(){return this.length>0;};$.fn.getModal=function(url,id,options){$.get(url,function(html){$('body').append(html);if(typeof options=='object'&&typeof options.callbackBefore==='function'){options.callbackBefore();}if(typeof id==='string'){$(id).makeModal(options);$().log('getModal: '+id+' modal made');}if(typeof options==
'object'&&typeof options.callback==='function'){options.callback();}});};$.showModal=function(title,content,options){options=(typeof options!=='object')?{}:options;var header=$('<h1>').text(title),dialog=$('<div>'),wrapper;if(typeof options.rawHTML!=='undefined'&&options.rawHTML===true){dialog.get(0).innerHTML=content;}else{dialog.html(content);}dialog.prepend(header).appendTo('body');if(typeof options.callbackBefore==='function'){options.callbackBefore();}wrapper=dialog.makeModal(options);if(typeof options.callback==='function'){options.callback(wrapper);}return wrapper;};$.confirm=function(options){var dialog;options=(typeof options!=='object')?{}:options;options.id='WikiaConfirm';var html='';if(options.title){html+='<h1>'+options.title+'</h1>';}html+='<p>'+(options.content||'')+'</p>'+'<div class="neutral modalToolbar">'+'<button id="WikiaConfirmCancel" class="wikia-button secondary">'+(options.cancelMsg||$.msg('cancel'))+'</button>'+
'<button id="WikiaConfirmOk" class="wikia-button">'+(options.okMsg||$.msg('ok'))+'</button>'+'</div>';dialog=$('<div>').appendTo('body').html(html).attr('title',options.title||'');if(typeof options.callbackBefore==='function'){options.callbackBefore();}$('#WikiaConfirmOk').click(function(){$('#WikiaConfirm').closeModal();if(typeof options.onOk==='function'){options.onOk();}});$('#WikiaConfirmCancel').click(function(){$('#WikiaConfirm').closeModal();if(typeof options.onCancel==='function'){options.onCancel();}});dialog.makeModal(options);if(typeof options.callback==='function'){options.callback();}};$.showCustomModal=function(title,content,options){var buttons='',buttonNo,button,dialog,modal;options=(typeof options!=='object')?{}:options;if(options.buttons){buttons=$('<div class="neutral modalToolbar"></div>');for(buttonNo=0;buttonNo<options.buttons.length;buttonNo++){button='<a id="'+options.buttons[buttonNo].id+'" class="wikia-button'+(options.buttons[buttonNo].defaultButton?'':
' secondary')+'">'+options.buttons[buttonNo].message+'</a>';$(button).bind('click',options.buttons[buttonNo].handler).appendTo(buttons);}}dialog=$('<div>').html(content).attr('title',title).append(buttons);$('body').append(dialog);if(typeof options.callbackBefore==='function'){options.callbackBefore();}modal=dialog.makeModal(options);if(typeof options.callback==='function'){options.callback(modal);}return modal;};$.postJSON=function(u,d,callback){return $.post(u,d,callback,'json');};$.extend({_urlVars:null,getUrlVars:function(){if($._urlVars===null){var i,j,hash,hashes=window.location.search.slice(window.location.search.indexOf('?')+1).split('&');$._urlVars={};for(i=0,j=hashes.length;i<j;i++){hash=hashes[i].split('=');$._urlVars[hash[0]]=hash[1];}}return $._urlVars;},getUrlVar:function(name){return $.getUrlVars()[name];}});$.fn.reverse=function(){return this.pushStack(this.get().reverse(),arguments);};$.fn.isChrome=function(){if($.browser.webkit&&!$.browser.opera&&!$.browser.msie&&!$.
browser.mozilla){var userAgent=navigator.userAgent.toLowerCase();if(userAgent.indexOf('chrome')>-1){return true;}}return false;};$.fn.hasParent=function(selector){return this.first().parent().closest(selector).exists();}
$.fn.startThrobbing=function(){return this.append('<div class="wikiaThrobber"></div>');};$.fn.stopThrobbing=function(){this.find('.wikiaThrobber').remove();return this;};$.preloadThrobber=function(){var img=new Image();img.src=stylepath+'/common/images/ajax.gif';};$.thumbUrl2ThumbUrl=function(url,type,width,height){return Wikia.Thumbnailer.getThumbURL(url,type,width,height);}
$.htmlentities=function(s){return String(s).replace(/\&/g,'&'+'amp;').replace(/</g,'&'+'lt;').replace(/>/g,'&'+'gt;').replace(/\'/g,'&'+'apos;').replace(/\"/g,'&'+'quot;');};$.createClass=function(sc,o){var constructor=o.constructor;if(typeof constructor!=='function'||constructor==Object.prototype.constructor){constructor=function(){sc.apply(this,arguments);};}var bc=constructor;var f=function(){};f.prototype=sc.prototype||{};bc.prototype=new f();if(typeof o.statics=='object'){bc=$.extend(bc,o.statics);delete o.statics;}for(var m in o){bc.prototype[m]=o[m];}bc.prototype.constructor=bc;bc.superclass=sc.prototype;return bc;};$.proxyBind=function(fn,thisObject,baseArgs){return function(){var args=baseArgs.slice(0).concat(Array.prototype.call(arguments,0));return fn.apply(thisObject,args);}};var Observable=$.createClass(Object,{constructor:function(){Observable.superclass.constructor.apply(this,arguments);this.events={};},bind:function(e,cb,scope){if(typeof e=='object'){scope=cb;for(var i
in e){if(i!=='scope'){this.bind(i,e[i],e.scope||scope);}}}else if($.isArray(cb)){for(var i=0;i<cb.length;i++){this.bind(e,cb[i],scope);}}else{scope=scope||this;this.events[e]=this.events[e]||[];this.events[e].push({fn:cb,scope:scope});}return true;},unbind:function(e,cb,scope){if(typeof e=='object'){scope=cb;var ret=!1;for(var i in e){if(i!=='scope'){ret=this.unbind(i,e[i],e.scope||scope)||ret;}}return ret;}else if($.isArray(cb)){var ret=!1;for(var i=0;i<cb.length;i++){ret=this.unbind(e,cb[i],scope)||ret;}return ret;}else{if(!this.events[e]){return false;}scope=scope||this;for(var i in this.events[e]){if(this.events[e][i].fn==cb&&this.events[e][i].scope==scope){delete this.events[e][i];return true;}}return false;}},on:function(e,cb){this.bind.apply(this,arguments);},un:function(e,cb){this.unbind.apply(this,arguments);},relayEvents:function(o,e,te){te=te||e;o.bind(e,function(){var a=[te].concat(arguments);this.fire.apply(this,a);},this);},fire:function(e){var a=Array.prototype.
slice.call(arguments,1);if(!this.events[e])return true;var ee=this.events[e];for(var i=0;i<ee.length;i++){if(typeof ee[i].fn=='function'){var scope=ee[i].scope||this;if(ee[i].fn.apply(scope,a)===false){return false;}}}return true;},proxy:function(func){return $.proxy(func,this);},debugEvents:function(list){var fns=list?list:['bind','unbind','fire','relayEvents'];for(var i=0;i<fns.length;i++){(function(fn){if(typeof this['nodebug-'+fn]=='undefined'){var f=this['nodebug-'+fn]=this[fn];this[fn]=function(){window.console&&console.log&&console.log(this,fn,arguments);return f.apply(this,arguments);}}}).call(this,fns[i]);}}});var GlobalTriggers=(function(){var GlobalTriggersClass=$.createClass(Observable,{fired:null,constructor:function(){GlobalTriggersClass.superclass.constructor.apply(this);this.fired={};},bind:function(e,cb,scope){GlobalTriggersClass.superclass.bind.apply(this,arguments);if(typeof e=='object'||$.isArray(cb)){return;}if(typeof this.fired[e]!='undefined'){var a=this.fired[e]
.slice(0);setTimeout(function(){for(i=0;i<a.length;i++){cb.apply(scope||window,a[i]);}},10);}},fire:function(e){var a=Array.prototype.slice.call(arguments,1);this.fired[e]=this.fired[e]||[];this.fired[e].push(a);GlobalTriggersClass.superclass.fire.apply(this,arguments);}});return new GlobalTriggersClass();})();var Timer=$.createClass(Object,{callback:null,timeout:1000,timer:null,constructor:function(callback,timeout){this.callback=callback;this.timeout=(typeof timeout=='number')?timeout:this.timeout;},run:function(){this.callback.apply(window);},start:function(timeout){this.stop();timeout=(typeof timeout=='number')?timeout:this.timeout;this.timer=setTimeout(this.callback,timeout);},stop:function(){if(this.timer!=null){clearTimeout(this.timer);this.timer=null;}}});$.extend(Timer,{create:function(callback,timeout){var timer=new Timer(callback,timeout);return timer;},once:function(callback,timeout){var timer=Timer.create(callback,timeout);timer.start();return timer;}});$(function(){if(
typeof wgNow!='undefined'){var loadTime=(new Date()).getTime()-wgNow.getTime();$().log('DOM ready after '+loadTime+' ms',window.skin);}window.wgWikiaDOMReady=!0;if(typeof $.fn.timeago!='undefined'){$('.timeago').timeago();}});var $window=$(window);$window.bind('load',function(){if(typeof wgNow!='undefined'){var loadTime=(new Date()).getTime()-wgNow.getTime();$().log('window onload after '+loadTime+' ms',window.skin);}});$window.on('scroll',$.debounce(100,function(event){$window.trigger('scrollstop',[event]);}));$.toJSON=JSON.stringify;$.evalJSON=$.secureEvalJSON=JSON.parse;window.GlobalTriggers=GlobalTriggers;window.Observable=Observable;window.Timer=Timer;})(window,jQuery);;(function($,window){$.fn.carousel=function(options){var $this=$(this);var defaults={transitionSpeed:500,itemsShown:3,activeIndex:0,nextClass:"next",prevClass:"previous",attachBlindImages:!1,itemClick:!1,trackProgress:!1,beforeMove:!1,afterMove:!1};options=$.extend(defaults,options);var dom={wrapper
:$this,carousel:$this.find('.carousel'),items:$this.find('.carousel > li'),container:$this.children('div:first'),next:$this.siblings('.'+options.nextClass),previous:$this.siblings('.'+options.prevClass)};var constants={viewPortWidth:$this.outerWidth(),itemWidth:getItemWidth(),carouselWidth:0,minLeft:0};var states={browsing:!1,enable_next:!1,enable_previous:!1,currIndex:0,left:0};function nextImage(){if(states.browsing==false&&states.enable_next==true){states.browsing=!0;moveToIndex(states.currIndex+options.itemsShown);}return false;}function previousImage(){if(states.browsing==false&&states.enable_previous==true){states.browsing=!0;moveToIndex(states.currIndex-1);}return false;}function moveToIndex(idx){if(!isVisible(idx)){if(idx>(dom.items.length-options.itemsShown)){idx=dom.items.length-options.itemsShown;}if(states.currIndex>idx){var leftmost=idx-options.itemsShown+1;if(leftmost<0){leftmost=0;}idx=leftmost;}var left=constants.itemWidth*idx*-1;states.currIndex=idx;doMove
(left);}else{afterMove();}}function doMove(left){states.left=left;if(typeof options.beforeMove=='function'){options.beforeMove();}dom.carousel.animate({left:left},options.transitionSpeed,function(){states.browsing=!1;afterMove();});}function afterMove(){updateArrows();lazyLoadImages();if(typeof options.trackProgress=='function'){trackProgress(options.trackProgress);}if(typeof options.afterMove=='function'){options.afterMove(states.currIndex+options.itemsShown);}}function isVisible(idx){return idx>=states.currIndex&&idx<(states.currIndex+options.itemsShown);}function setAsActive(idx){if(idx>-1){dom.items.removeClass('active');dom.items.eq(idx).addClass('active');moveToIndex(idx);}else{updateArrows();}}function trackProgress(callback){var total=dom.items.length,idx1=Math.floor(states.currIndex)+1,idx2=Math.floor(states.currIndex)+(options.itemsShown>total?total:options.itemsShown);if(idx2>total){idx2=total;}callback(idx1,idx2,total);}function updateArrows(){if(dom.items.length<=
options.itemsShown){disableNext();disablePrevious();return;}var left=parseInt(dom.carousel.css('left'));if(isNaN(left)){left=0;}if(left<constants.minLeft+constants.itemWidth/2){disableNext();enablePrevious();}else if(left==0){disablePrevious();enableNext();}else{enablePrevious();enableNext();}}function lazyLoadImages(){var idx1=states.currIndex-options.itemsShown,idx2=states.currIndex,idx3=states.currIndex+options.itemsShown*2;idx1=idx1<0?0:idx1;var firstImages=dom.items.slice(idx2,idx3).find('img[data-src]'),lastImages=dom.items.slice(idx1,idx2).find('img[data-src]');doImageLoad(firstImages);doImageLoad(lastImages);}function doImageLoad(images){images.each(function(){var image=$(this);image.attr('src',image.attr('data-src')).removeAttr('data-src');});}function setCarouselWidth(){if(!constants.itemWidth){constants.itemWidth=getItemWidth();}var width=constants.itemWidth*dom.items.length;dom.carousel.css('width',width);var minLeft=(width-constants.viewPortWidth)*-1;constants.
carouselWidth=width;constants.minLeft=minLeft;}function attachBlindImages(){if(dom.carousel.find('li').length==5){dom.carousel.append("<li class='blind'></li>");}else if(dom.carousel.find('li').length==4){dom.carousel.append("<li class='blind'></li>");dom.carousel.append("<li class='blind'></li>");}dom.carousel.find('li').first().addClass("first-image");dom.carousel.find('li').last().addClass("last-image");}function disableNext(){states.enable_next=!1;dom.next.addClass('disabled');}function enableNext(){states.enable_next=!0;dom.next.removeClass('disabled');}function disablePrevious(){states.enable_previous=!1;dom.previous.addClass('disabled');}function enablePrevious(){states.enable_previous=!0;dom.previous.removeClass('disabled');}function getItemWidth(){return dom.items.first().outerWidth(true);}this.updateCarouselItems=function(){dom.items=dom.carousel.find('li');lazyLoadImages();};this.updateCarouselWidth=function(){setCarouselWidth();};this.updateCarouselArrows=function
(){updateArrows();};this.resetPosition=function(){dom.carousel.css('left',0);states.currIndex=0;}
return this.each(function(){if(typeof options.attachBlindImages=='function'){attachBlindImages();}dom.next.click(nextImage);dom.previous.click(previousImage);setCarouselWidth();setAsActive(options.activeIndex);if(options.itemClick){dom.carousel.on('click','li',function(e){setAsActive($(this).index());options.itemClick.call(this,e);});}lazyLoadImages();});}})(jQuery,this);;$.fn.extend({getModalTopOffset:function(){var top=Math.max((($(window).height()-this.outerHeight())/2),20);var opts=this.data('settings');if(opts&&typeof opts.topMaximum=="number"){top=Math.min(top,opts.topMaximum);}return $(window).scrollTop()+top;},makeModal:function(options){var settings={showCloseButton:!0,width:400,height:"auto",tabsOutsideContent:!1,topOffset:50,escapeToClose:!0},calculatedZIndex,modalWidth,mainContent;if(options){$.extend(settings,options);}var ts=Math.round((new Date()).getTime()/1000),id=settings.id||($(this).attr('id')||ts)+'Wrapper',wrapper;if(skin==='oasis'||settings.appendToBody){
wrapper=$('<section>',{'class':'modalWrapper','id':id}).append($('<section>',{'class':'modalContent'}).append(this)).appendTo('body');}else{this.wrap('<div class="modalWrapper" id="'+id+'"></div>');wrapper=this.closest(".modalWrapper");wrapper.appendTo('#positioned_elements');}if(settings.className){wrapper.addClass(settings.className);}var zIndex=settings.zIndex?parseInt(settings.zIndex):(5001101+($('body').children('.blackout').length)*2);calculatedZIndex=zIndex+1;wrapper.data('settings',settings);if(!settings.noHeadline){var headline=wrapper.find("h1:first");if(headline.exists()){headline.remove();}else{headline=$('<h1>').html($(this).attr('title')||'');}headline.prependTo(wrapper);}if(settings.tabsOutsideContent||skin==='oasis'){var modalTabs=wrapper.find('.modal-tabs');if(modalTabs.exists()){modalTabs.insertBefore(wrapper.find('.modalContent'));}}if(skin==='oasis'){if(settings.width!=='auto'){if(settings.width!==undefined){modalWidth=settings.width+40;}else{mainContent=$(
"#WikiaMainContent");if(mainContent.length>0){modalWidth=mainContent.width();}}}else{modalWidth='auto';}wrapper.width(modalWidth).css({left:'50%',height:settings.height,'margin-left':-wrapper.outerWidth(false)/2,top:$(window).scrollTop()+settings.topOffset,zIndex:calculatedZIndex});}else if(settings.suppressDefaultStyles){wrapper.css({zIndex:calculatedZIndex,top:$(window).scrollTop()+settings.topOffset});}else{wrapper.width(settings.width).css({marginLeft:-wrapper.outerWidth(false)/2,top:wrapper.getModalTopOffset(),zIndex:calculatedZIndex}).fadeIn("fast");}if(settings.showCloseButton){wrapper.prepend('<button class="close wikia-chiclet-button"><img src="'+stylepath+'/oasis/images/icon_close.png"></button>');}wrapper.log('makeModal: #'+id);this.removeAttr('title');var persistent=(typeof settings.persistent=='boolean')?settings.persistent:!1;var onClose=(typeof settings.onClose=='function')?settings.onClose:!1;var closeOnBlackoutClick=(typeof settings.closeOnBlackoutClick==
'boolean')?settings.closeOnBlackoutClick:!0;wrapper.find('.close').bind("click",function(){var wrapper=$(this).closest('.modalWrapper');var settings=wrapper.data('settings');if(typeof settings.onClose=='function'){if(settings.onClose({click:1})==false){return;}}if(persistent){wrapper.hideModal();}else{wrapper.closeModal();}});if(settings.escapeToClose){$(window).bind("keydown.modal"+id,function(event){if(event.keyCode==27){if(typeof settings.onClose=='function'){if(settings.onClose({keypress:1})==false){return;}}if(persistent){wrapper.hideModal();}else{wrapper.closeModal();}return false;}});}$(window).bind("resize.modal",function(){if(window.skin=='oasis'||!settings.resizeModal){return;}wrapper.css("top",wrapper.getModalTopOffset());$(".blackout:last").height($(document).height());});var blackoutOpacity=0.65;if(settings.blackoutOpacity){blackoutOpacity=settings.blackoutOpacity;}var blackout=$('<div>').addClass('blackout').attr('data-opacity',blackoutOpacity);blackout.css({zIndex:
zIndex}).fadeTo("fast",blackoutOpacity).bind("click",function(){if(!closeOnBlackoutClick){return;}if(typeof settings.onClose=='function'){if(settings.onClose({click:1})==false){return;}}if(persistent){wrapper.hideModal();}else{wrapper.closeModal();}});if(skin=='oasis'||settings.appendToBody){blackout.appendTo("body");}else{blackout.appendTo("#positioned_elements");}wrapper.data('blackout',blackout);if(typeof settings.onCreate=='function'){settings.onCreate(this,wrapper);}$(document.body).addClass('modalShown');return wrapper;},closeModal:function(){$(window).unbind(".modal"+this.attr('id'));this.animate({top:this.offset()["top"]+100,opacity:0},"fast",function(){$(this).remove();});var blackout=$(this).data('blackout'),settings=$(this).data('settings');blackout.fadeOut("fast",function(){$(this).remove();var callback=settings&&settings.onAfterClose;if($.isFunction(callback)){callback();}});$(document.body).removeClass('modalShown');},hideModal:function(){var blackout=$(this).data(
'blackout'),settings=$(this).data('settings');blackout.fadeOut("fast").addClass('blackoutHidden');this.animate({top:this.offset()["top"]+100,opacity:0},"fast",function(){$(this).hide();var callback=settings&&settings.onAfterClose;if($.isFunction(callback)){callback();}});$(document.body).removeClass('modalShown');},showModal:function(){var wrapper=this.closest(".modalWrapper");var zIndex=5001101+($('body').children('.blackout').length)*2;var blackout=$(this).data('blackout');var blackoutOpacity=blackout.attr('data-opacity');if(!blackoutOpacity){blackoutOpacity=0.65;}blackout.css({display:'block',opacity:blackoutOpacity,zIndex:zIndex}).removeClass('blackoutHidden');wrapper.css({top:wrapper.getModalTopOffset(),zIndex:zIndex+1,opacity:1,display:"block"}).log('showModal: #'+this.attr('id'));$(document.body).addClass('modalShown');},resizeModal:function(width){width=parseInt(width);var wrapper=this.closest(".modalWrapper");wrapper.width(width).css('marginLeft',-wrapper.outerWidth(false)>>1)
.log('resizeModal: #'+this.attr('id')+' resized to '+width+'px');},isModalShown:function(){return $(document.body).hasClass('modalShown');},getModalWrapper:function(){return $('.modalWrapper');}});;$.expiryStorage=new $.store();$.expiryStorage.get=function(key){var value=this.driver.get(key);if(!value){return;}var data=this.driver.encodes?value:this.unserialize(value);value=null;var d=new Date();if(data.expires>=d.getTime()){value=data.value;}else{this.del(key);}return value;};$.expiryStorage.set=function(key,value,expires){var d;if(typeof expires=='number'){d=new Date();d.setTime(d.getTime()+(expires));}else if(typeof expires=='object'&&expires.toUTCString){d=expires;}else{throw'expires is not in a valid form';}var data={value:value,expires:d.getTime()};this.driver.set(key,this.driver.encodes?data:this.serialize(data));};;(function($){$.fn.focusNoScroll=function(){var x=$(window).scrollLeft(),y=$(window).scrollTop();$(this).focus();$(window).scrollLeft(x).scrollTop(y);return this;};})
(jQuery);;(function(window,$){'use strict';var getResources=(function(){var rAssetManagerGroup=new RegExp(window.wgAssetsManagerQuery.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,'\\$&').replace(/\//g,'\\/').replace('%1\\$s','groups?').replace(/%\d\\\$(?:s|d)/g,'(.*)')),rAssetManagerGroupType=/(js|s?css)/,rExtension=/\.(js|s?css)$/;return function(resources,success,failure){var l,n,matches,remaining,complete,dfd=new $.Deferred(),resource,type;complete=function(){remaining--;if(remaining<1){if(typeof success==='function'){success();}dfd.resolve();}};if(!$.isArray(resources)){resources=[resources];}if(!(l=remaining=resources.length)){complete();}for(n=0;n<l;n++){resource=resources[n];type=typeof resource;if(type==='object'){if(resource.type&&resource.url){type=resource.type;resource=resource.url;}}else if(type==='string'){matches=resource.match(rAssetManagerGroup);matches=matches?matches[3].match(rAssetManagerGroupType):resource.match(rExtension);type=matches?matches[1]:'unknown';}if(type===
'js'){$.getScript(resource,complete).fail(failure);}else if(type==='css'||type==='scss'){$.getCSS(resource,complete);}else if(type==='function'){resource.call($,complete);}else{$().log('getResources: unknown type '+resource);dfd.reject({error:'Unknown type',resource:resource});}}return dfd.promise();};}());$.getResources=$.getResource=getResources;})(window,jQuery);;(function($){'use strict';$.loadLibrary=function(name,files,typeCheck,callback,failureFn){var dfd=new jQuery.Deferred();if(typeCheck==='undefined'){$().log('loading '+name,'loadLibrary');files=(typeof files==='string')?[files]:files;$.getResources(files,function(){$().log(name+' loaded','loadLibrary');if(typeof callback==='function'){callback();}},failureFn).then(function(){dfd.resolve();}).fail(function(){dfd.reject();});}else{$().log(name+' already loaded','loadLibrary');if(typeof callback==='function'){callback();}dfd.resolve();}return dfd.promise();};$.loadYUI=function(callback){return mw.loader.using('wikia.yui').done(
callback);};$.loadModalJS=function(callback){if(typeof callback==='function'){callback();}};$.loadJQueryUI=function(callback){return mw.loader.using('wikia.jquery.ui').done(callback);};$.loadJQueryAutocomplete=function(callback){return mw.loader.using('jquery.autocomplete').done(callback);};$.loadJQueryAIM=function(callback){return mw.loader.using('wikia.aim').done(callback);};$.loadMustache=function(callback){return mw.loader.using('jquery.mustache').done(callback);};$.loadHandlebars=function(callback){return mw.loader.using('wikia.handlebars').done(callback);};$.loadGoogleMaps=function(callback){var dfd=new jQuery.Deferred(),onLoaded=function(){if(typeof callback==='function'){callback();}dfd.resolve();};if(typeof(window.google&&window.google.maps)!=='undefined'){onLoaded();}else{window.onGoogleMapsLoaded=function(){delete window.onGoogleMapsLoaded;onLoaded();};$.loadLibrary('GoogleMaps',[{url:'https://maps.googleapis.com/maps/api/js?sensor=false&callback=onGoogleMapsLoaded',type:
'js'}],typeof(window.google&&window.google.maps)).fail(function(){dfd.reject();});}return dfd.promise();};$.loadGooglePlusAPI=function(callback){return $.loadLibrary('Google Plus API','//apis.google.com/js/plusone.js',typeof(window.gapi&&window.gapi.plusone),callback);};$.loadTwitterAPI=function(callback){return $.loadLibrary('Twitter API','//platform.twitter.com/widgets.js',typeof(window.twttr&&window.twttr.widgets),callback);};})(jQuery);;(function($){'use strict';function loadExternalLibrary(name,url,typeCheck){var $deferred=$.Deferred();if(window.wgNoExternals){$deferred.reject();}else if(typeCheck==='undefined'){addScriptToPage(url,$deferred);}else{Wikia.log(name+' already loaded',Wikia.log.levels.feedback,'loadExternalLibrary');$deferred.resolve();}return $deferred;}function addScriptToPage(url,$deferred){var firstScriptTag=document.getElementsByTagName('script')[0],scriptTag=document.createElement('script');scriptTag.src=url;scriptTag.onload=function(){$deferred.resolve();};
scriptTag.onerror=function(){$deferred.reject();};firstScriptTag.parentNode.insertBefore(scriptTag,firstScriptTag);}$.loadReCaptcha=function(){var url='https://www.google.com/recaptcha/api.js?hl='+window.wgUserLanguage;return loadExternalLibrary('ReCaptcha',url,typeof window.grecaptcha);};})(jQuery);;(function(window){'use strict';window.Wikia=window.Wikia||{};Wikia.isTouchScreen=function(){return('ontouchstart'in window);};if(Wikia.isTouchScreen()){$.getResources([$.getSassCommonURL('/skins/oasis/css/touchScreen.scss'),window.stylepath+'/oasis/js/touchScreen.js']);}})(window);;jQuery(function($){'use strict';var $article=$('#WikiaArticle'),$tables=$article.find('table'),$wikiaBarWrapper=$('#WikiaBarWrapper'),template='<div class="table-wrapper table-is-wide">'+'<div class="table-scrollable"></div>'+'</div>';function scan(){$tables.each(function(){var $table=$(this),$scrollable=$table.parent('.table-scrollable'),isWide=$table.width()>$article.width();if(isWide&&!$scrollable.length){
$table.wrap(template);$scrollable=$table.parent('.table-scrollable');}else if(!isWide&&$scrollable.length){$table.unwrap().unwrap();}$scrollable.floatingScrollbar(isWide);});}function updateFloatingScrollbar(){var bottom=$wikiaBarWrapper.length&&!$wikiaBarWrapper.hasClass('hidden')?$wikiaBarWrapper.height():0;$('#floating-scrollbar').css('bottom',bottom);$.floatingScrollbarOptions.bottom=bottom;}scan();$(window).on('resize',$.debounce(50,scan)).on('wikiaTabClicked WideTablesScan',scan).on('WikiaBarStateChanged WikiaBarReady UpdateFloatingScrollbar',updateFloatingScrollbar);});;define('wikia.backgroundchanger',function(){'use strict';var loadedCss=[];function load(options){var imagePreload=new Image(),optionsForSass={'background-dynamic':options.backgroundDynamic||!1,'background-image':options.skinImage||'','background-image-width':options.skinImageWidth||0,'background-image-height':options.skinImageHeight||0,'color-body':options.backgroundColor,'color-body-middle':options.
backgroundMiddleColor||options.backgroundColor},settings=$.extend({},window.wgSassParams,optionsForSass),settingsBreakpoints=$.extend({},settings,{widthType:0}),sassUrl=window.wgOasisBreakpoints?$.getSassCommonURL('/skins/oasis/css/core/breakpoints-background.scss',settingsBreakpoints):$.getSassCommonURL('/skins/oasis/css/core/background.scss',settings);imagePreload.src=options.skinImage;var onCssLoadCallBack=function(){if(options.skinImage!==''&&options.skinImageWidth>0&&options.skinImageHeight>0){if((options.backgroundFixed===undefined)||!!options.backgroundFixed){$('body').addClass('background-fixed');}else{$('body').removeClass('background-fixed');}if((options.backgroundTiled!==undefined)&&!!options.backgroundTiled){$('body').removeClass('background-not-tiled');}else{$('body').addClass('background-not-tiled');}if((options.backgroundDynamic===undefined)||!!options.backgroundDynamic){$('body').addClass('background-dynamic');}else{$('body').removeClass('background-dynamic');}if(!!
options.ten64){$('.background-image-gradient').addClass('no-gradients');}}else{$('body').removeClass('background-dynamic background-not-tiled background-fixed');}};var nodeIndex=loadedCss.indexOf(sassUrl);if(nodeIndex>-1){$('link[data-background-changer]').attr('disabled',true);$('link[data-background-changer="'+sassUrl+'"]').attr('disabled',false);onCssLoadCallBack();}else{$.getCSS(sassUrl,function(link){loadedCss.push(sassUrl);$(link).attr('data-background-changer',sassUrl);onCssLoadCallBack();});}}return{load:load};});;define('SearchAbTest.DomUpdater',['jquery','wikia.log'],function($,log){'use strict';var searchPaginationLinksSelector='.wikia-paginator a.paginator-page, .search-tabs a, a.paginator-next, a.paginator-prev',searchFormsSelector='form.WikiaSearch';return{linkUpdater:{update:function(params){if(!params){return;}var self=this;$(searchPaginationLinksSelector).each(function(){var originalLink=$(this).attr('href');if(!!originalLink){var modifiedLink=self.modifyLink(
originalLink,params);log('Modifying link: "'+originalLink+'" to "'+modifiedLink+'"',log.levels.debug,'search');$(this).attr('href',modifiedLink);}});},modifyLink:function(originalLink,params){params=params||{};var modifiedLink=originalLink;var joinCharacter="?";if(originalLink.indexOf('?')>-1){joinCharacter="&";}if(originalLink.indexOf('?')==originalLink.length-1){joinCharacter='';}for(var paramName in params){modifiedLink=modifiedLink+joinCharacter+paramName+'='+params[paramName];joinCharacter="&";}return modifiedLink;}},formUpdater:{update:function(params){if(!params){return;}var $searchForms=$(searchFormsSelector);for(var paramName in params){var newInput='<input type="hidden" name="'+paramName+'" value="'+params[paramName]+'">';$searchForms.append(newInput);log('Add new input: '+newInput,log.levels.debug,'search');}}}};});;define('SearchAbTest.Context',['wikia.window','wikia.log','wikia.querystring'],function(window,log,querystring){'use strict';if(!window||!window.Wikia||!window.
Wikia.AbTest){log('AbTest is not present. Fallback to dummy SearchAbTest.GroupProvider',log.levels.debug,'search');return{getAbTestGroups:function(){return[];},getAbTestParameters:function(){return{};},getQueryParameters:function(){return{};}};}var AbTest=window.Wikia.AbTest;function findSearchRelatedExperiments(){var searchExperiments=[];var experiments=AbTest.getExperiments();for(var i=0;i<experiments.length;i++){var experiment=experiments[i];if(experiment&&experiment.name&&experiment.name.toUpperCase().indexOf('SEARCH')===0){searchExperiments.push(experiment);}}return searchExperiments;}return{getAbTestGroups:function(){var searchRelatedExperiments=findSearchRelatedExperiments();var groupIds=[];for(var i=0;i<searchRelatedExperiments.length;i++){if(searchRelatedExperiments[i].group){groupIds.push(searchRelatedExperiments[i].group.id);}}log('Found A/B groups: '+groupIds.join(','),log.levels.debug,'search');return groupIds;},getQueryParameters:function(){var str=querystring(window.
location.url);return str.getVals();},getAbTestParameters:function(){var parameters={};var allParameters=this.getQueryParameters();for(var parameterName in allParameters){if(parameterName.indexOf('AbTest.')===0||parameterName=='ab'){parameters[parameterName]=allParameters[parameterName];}}return parameters;}};});;require(['wikia.window','SearchAbTest.Context','SearchAbTest.DomUpdater','wikia.log'],function(window,context,domUpdater,log){'use strict';var abGroupParameterName='ab';if(window.Wikia&&window.Wikia.AbTest){log('AbTest is present. Enable Search A/B testing.',log.levels.debug,'search');var updaters=[domUpdater.linkUpdater,domUpdater.formUpdater];var groups=context.getAbTestGroups();var parametersToEnforce={};if(groups.length){parametersToEnforce[abGroupParameterName]=groups.join(',');}var abTestingParameters=context.getAbTestParameters();for(var parameterName in abTestingParameters){parametersToEnforce[parameterName]=abTestingParameters[parameterName];}for(var i=0;i<updaters.
length;i++){updaters[i].update(parametersToEnforce);}}});;require(['jquery','wikia.window','wikia.tracker'],function($,win,tracker){'use strict';var ARTICLE_LENGTH_THRESHOLD=800,SCALE=100,WIDTH_SAMPLING_RATIO=1,$article,labelPrefix,trackFunction,windowWidth;if(Math.random()*100<WIDTH_SAMPLING_RATIO&&win.wgIsArticle){$article=$('.WikiaArticle');trackFunction=tracker.buildTrackingFunction({action:tracker.ACTIONS.IMPRESSION,category:'articleContentLengthTest',trackingMethod:'analytics'});windowWidth=Math.floor($(win).width()/SCALE);if($article.height()>ARTICLE_LENGTH_THRESHOLD){labelPrefix='long-';}else{labelPrefix='short-';}trackFunction({label:labelPrefix+windowWidth})}});;$(function(){'use strict';function getParamsFromUrl(){var params={},paramVal,qs=Wikia.Querystring(),i=0,paramsToPreserve=['noexternals','noads','uselang','mcache','rebuildmessages'],paramsToPreserveLength=paramsToPreserve.length;for(i=0;i<paramsToPreserveLength;i++){paramVal=qs.getVal(paramsToPreserve[i]);if(paramVal
!==undefined){params[paramsToPreserve[i]]=paramVal;}}return params;}var rail=$('#WikiaRail'),LAZY_LOADING_SAMPLING_RATIO=10,params={},lazyLoadingTime;rail.trigger('beginLoad.rail');if(rail.find('.loading').exists()){params={'articleTitle':window.wgTitle,'namespace':window.wgNamespaceNumber,'cb':window.wgStyleVersion};if(typeof wgSassLoadedScss!=='undefined'){params.excludeScss=window.wgSassLoadedScss;}$.extend(params,getParamsFromUrl());$.nirvana.sendRequest({controller:'RailController',method:(window.wgUserName)?'lazy':'lazyForAnons',data:params,type:'get',format:'json',callback:function(data){var loadRailContents=function(data){rail.addClass('loaded').find('.loading').remove().end().append(data.railLazyContent+data.js);if(LAZY_LOADING_SAMPLING_RATIO>=Math.floor((Math.random()*100+1))){lazyLoadingTime=(new Date())-(window.wgNow||0);Wikia.Tracker.track({action:Wikia.Tracker.ACTIONS.IMPRESSION,category:'right-rail',label:'lazy-loaded',trackingMethod:'analytics',value:lazyLoadingTime});}
if(window.ChatWidget&&typeof window.wgWikiaChatUsers!=='undefined'){window.ChatWidget.init();}if(typeof $.fn.timeago!=='undefined'){rail.find('.timeago').timeago();}if(window.Wikia&&window.Wikia.initRailTracking){Wikia.initRailTracking();}require(['wikia.window',require.optional('ext.wikia.adEngine.adContext'),require.optional('ext.wikia.adEngine.slot.floatingMedrec'),],function(win,adContext,floatingMedrec){if(!adContext){return;}if(floatingMedrec){win.wgAfterContentAndJS.push(floatingMedrec.init);}});if(window.wgEnableLightboxExt){window.LightboxLoader.init();}rail.trigger('afterLoad.rail');};if(data.css.length===0){loadRailContents(data);}else{require(['wikia.loader'],function(loader){loader({type:loader.CSS,resources:data.css}).done(function(){loadRailContents(data);});});}}});}});;define('wikia.pageShare',['wikia.window','wikia.tracker','wikia.log','jquery'],function(win,tracker,log,$){'use strict';var trackFunc=tracker.buildTrackingFunction({action:win.Wikia.Tracker.ACTIONS.CLICK
,category:'social-share',trackingMethod:'analytics'});function shareLinkClickHandler(event){event.stopPropagation();event.preventDefault();var service=$(event.target).closest('a'),url=service.prop('href'),title=service.prop('title'),h=Math.floor(win.innerHeight/2),w=Math.floor(win.innerWidth/2);trackFunc({label:service.data('share-service')});win.open(url,title,'width='+w+',height='+h);}function prepareSocialLinks(data){if(data.socialIcons){var url=encodeURIComponent(win.location.origin+win.location.pathname),title=encodeURIComponent(win.document.title),description=encodeURIComponent($('meta[property="og:description"]').attr('content'));data.socialIcons=data.socialIcons.replace(/\$url/g,url).replace(/\$title/g,title).replace(/\$description/g,description);return data;}}function loadShareIcons(){var mCacheQueryStringParam=$.getUrlVar('mcache'),requestData={lang:getShareLang($.getUrlVar('uselang')),isTouchScreen:win.Wikia.isTouchScreen()?1:0,title:win.wgPageName};if(mCacheQueryStringParam
){requestData.mcache=mCacheQueryStringParam;}return $.nirvana.sendRequest({type:'GET',controller:'PageShare',method:'getShareIcons',data:requestData}).then(prepareSocialLinks);}function getShareLang(useLangQueryStringParam){if(useLangQueryStringParam){return useLangQueryStringParam;}else if(win.wgUserName){return win.wgUserLanguage;}else if(win.navigator.languages){return win.navigator.languages[0].substr(0,2);}else if(win.navigator.language){return win.navigator.language.substr(0,2);}else if(win.navigator.userLanguage){return win.navigator.userLanguage.substr(0,2);}else{log('Couldn\'t pick a language for Page Share extension.',log.levels.debug,'PageShare');return null;}}return{loadShareIcons:loadShareIcons,getShareLang:getShareLang,shareLinkClickHandler:shareLinkClickHandler};});;require(['wikia.pageShare','wikia.ui.factory','jquery'],function(pageShare,uiFactory,$){'use strict';$('#ShareEntryPoint').click(function(){$.when(uiFactory.init(['modal']),pageShare.loadShareIcons()).then(
function(uiModal,modalData){uiModal.createComponent({vars:{id:'PageShareModalDialog',classes:['page-share-modal-dialog'],size:'small',title:modalData.modalTitle,content:modalData.socialIcons,}},function(pageShareModal){pageShareModal.$element.find('#PageShareToolbar').on('click','a',pageShare.shareLinkClickHandler);pageShareModal.show();});});});});;window.Wikia=window.Wikia||{};window.Wikia.getMultiTypePackage=function(options){var request={},templates=options.templates,fieldsToCopy=['styles','scripts','messages','mustache','handlebars'],callback=options.callback,params=options.params,send=!1;$.each(fieldsToCopy,function(){if(typeof options[this]==='string'){request[this]=options[this];send=!0;}});if(typeof templates!='undefined'){request.templates=(typeof templates==='object')?JSON.stringify(templates):templates;send=!0;}if(typeof params==='object'){request=$.extend(request,params);}if(send){request.cb=wgStyleVersion;return $.nirvana.getJson('AssetsManagerController',
'getMultiTypePackage',request,function(resources){if(resources.messages){wgMessages=$.extend(wgMessages,resources.messages);}if(typeof callback==='function'){callback(resources);}});}else{throw'No resources to load specified';}};window.Wikia.processScript=function(js){var script=document.createElement('script'),head=document.head||document.getElementsByTagName('head')[0];script.type='text/javascript';script.text=js;head.appendChild(script);};window.Wikia.processStyle=function(css){var style=document.createElement('style'),head=document.head||document.getElementsByTagName('head')[0];style.type='text/css';if(style.styleSheet){style.styleSheet.cssText=css;}else{style.appendChild(document.createTextNode(css));}head.appendChild(style);};window.Wikia.getAMgroups=function(groups,callback){return $.getScript($.getAssetManagerGroupUrl(groups),callback);};;(function(context){var shift=Array.prototype.shift,join=Array.prototype.join;function JSMessages(nirvana,$,window){var JSMessages=function(){
var key=(shift.call(arguments)||'').trim(),ret=key;if(window.wgMessages){ret=window.wgMessages[key]||ret;ret=Plurals.process(ret,arguments,window.wgUserLanguage);if(ret!==key&&arguments.length){for(var i=0,l=arguments.length;i<l;i++){ret=ret.replace(new RegExp('\\$'+(i+1),'g'),arguments[i]);}}}return ret;};JSMessages.get=function(packages,callback,language){var dfd=$.Deferred();if(typeof packages!='string'){packages=join.call(packages,',');}language=language||window.wgUserLanguage;nirvana.sendRequest({type:'GET',controller:'JSMessages',method:'getMessages',data:{packages:packages,uselang:language,cb:window.wgJSMessagesCB}}).then(function(result){window.wgMessages=$.extend(window.wgMessages||{},result.messages);if(typeof callback=='function'){callback();}dfd.resolve();}).fail(function(){dfd.reject();});return dfd.promise();};JSMessages.getForContent=function(packages,callback){return JSMessages.get(packages,callback,window.wgContentLanguage);};return JSMessages;}var Plurals={
defaultPluralRule:function(n){return(n!=1)?1:0;},pluralRules:{'ay bo cgg dz fa id ja jbo ka kk km ko ky lo ms su th tr tt ug uz vi wo zh zh-hans zh-hant zh-tw':function(){return 0;},'ach ak am arn br fil fr gun ln mfe mg mi nso oc pt-br ti wa':function(n){return(n>1)?1:0;},'cs sk':function(n){return(n==1)?0:((n>=2&&n<=4)?1:2);},'be bs ru sr uk':function(n){return(n%10==1&&n%100!=11)?0:((n%10>=2&&n%10<=4&&(n%100<10||n%100>=20))?1:2);},'jv':function(n){return(n!=0)?1:0;},'mk':function(n){return(n==1||n%10==1)?0:1;},'mnk':function(n){return(n==0)?0:n==1?1:2;},'lv':function(n){return(n%10==1&&n%100!=11)?0:((n!=0)?1:2);},'kw':function(n){return(n==1)?0:((n==2)?1:((n==3)?2:3));},'ro':function(n){return(n==1)?0:((n==0||(n%100>0&&n%100<20))?1:2);},'ga':function(n){return(n==1)?0:((n==2)?1:((n<7)?2:((n<11)?3:4)));},'gd':function(n){return(n==1||n==11)?0:(n==2||n==12)?1:(n>2&&n<20)?2:3;},'sl':function(n){return(n%100==1)?0:((n%100==2)?1:((n%100==3||n%100==4)?2:3));},'pl':function(n){return(n==1)
?0:((n%10>=2&&n%10<=4&&(n%100<10||n%100>=20))?1:2);},'csb':function(n){return(n==1)?0:((n%10>=2&&n%10<=4&&(n%100<10||n%100>=20))?1:2);},'lt':function(n){return(n%10==1&&n%100!=11)?0:((n%10>=2&&(n%100<10||n%100>=20))?1:2);},'cy':function(n){return(n==0)?0:((n==1)?1:((n==2)?2:((n==3)?3:((n==6)?4:5))));},'hr':function(n){return(n%10==1&&n%100!=11)?0:((n%10>=2&&n%10<=4&&(n%100<10||n%100>=20))?1:2);},'mt':function(n){return(n==1)?0:((n==0||(n%100>1&&n%100<11))?1:((n%100>10&&n%100<20)?2:3));},'ar':function(n){return(n==0)?0:((n==1)?1:((n==2)?2:((n%100>=3&&n%100<=10)?3:((n%100>=11&&n%100<=99)?4:5))));}},getPluralRuleFunction:function(lang){if(typeof Plurals.pluralRules[lang]==="undefined"){var ruleFunction=Plurals.defaultPluralRule,langs=[lang],mainLanguage=lang.split('-'),i;if(mainLanguage.length>1){langs.push(mainLanguage[0]);}for(i=0;(i<langs.length)&&(ruleFunction===Plurals.defaultPluralRule);i++){var langRegexp=new RegExp('(?:^| )'+langs[i]+'(?: |$)');for(var langKey in Plurals.
pluralRules){if(Plurals.pluralRules.hasOwnProperty(langKey)){if(langRegexp.test(langKey)){ruleFunction=Plurals.pluralRules[langKey];break;}}}}Plurals.pluralRules[lang]=ruleFunction;}return Plurals.pluralRules[lang];},getPlural:function(forms,ruleFunction,n){var plural=isNaN(n)?-1:ruleFunction(n);if((plural<0)||(plural>=forms.length)){plural=forms.length-1;}return forms[plural];},process:function(msg,msgArguments,language){msg=msg.replace(/\{\{PLURAL:\$(\d+)\|([^\{\}]+)\}\}/gi,function(wholeMsg,variable,forms){var cardinality=NaN;if((variable>0)&&(variable<=msgArguments.length)){cardinality=msgArguments[variable-1];if(typeof cardinality!=="number"){cardinality=parseInt(cardinality);}}return Plurals.getPlural(forms.split('|'),Plurals.getPluralRuleFunction(language),cardinality);});return msg;}};if(jQuery){var msg=JSMessages(jQuery.nirvana,jQuery,context);jQuery.extend(jQuery,{msg:msg,getMessages:msg.get,getMessagesForContent:msg.getForContent})}if(context.define&&context.define.amd){
context.define('JSMessages',['wikia.nirvana','jquery','wikia.window'],JSMessages);}})(this);;(function(window,$,mw){var action=window.wgAction,wgCategorySelect=window.wgCategorySelect;if(!wgCategorySelect||(action!='view'&&action!='purge')){return;}$(function(){var articleId=window.wgArticleId,loaded=!1,namespace='categorySelectView',$wrapper=$('#articleCategories');if(!$wrapper.hasClass('userCanEdit')){return;}$wrapper.on('click.'+namespace,'.add',function(){$wrapper.addClass('editMode').find('.input').focus();if(!loaded){loaded=!0;$.when(mw.loader.using('jquery.ui.autocomplete'),mw.loader.using('jquery.ui.sortable'),$.getResources([wgResourceBasePath+'/resources/wikia/libraries/mustache/mustache.js',wgResourceBasePath+'/extensions/wikia/CategorySelect/js/CategorySelect.js',wgResourceBasePath+'/resources/wikia/modules/uifactory.js',wgResourceBasePath+'/resources/wikia/modules/uicomponent.js'])).done(function(response){$wrapper.categorySelect({placement:'right',popover:{hint:!0}
,sortable:{axis:!1,forcePlaceholderSize:!0,items:'.new',revert:200}}).on('add',function(event,cs,data){$wrapper.find('.last').before(data.element);}).on('click.'+namespace,'.cancel',function(){track({label:'cancel-edit'});$wrapper.removeClass('editMode').trigger('reset').find('.category.new').remove();}).on('click.'+namespace,'.save',function(){track({label:'submit-save'});var $container=$wrapper.find('.container').startThrobbing();$(this).attr('disabled',true);$.nirvana.sendRequest({controller:'CategorySelectController',data:{articleId:articleId,categories:$wrapper.data('categorySelect').getData('.new'),token:mw.user.tokens.get('editToken')},method:'save'}).done(function(response){$container.stopThrobbing();if(response.error){throw'Saving error: '+response.error;}else{$wrapper.removeClass('editMode').find('.category').remove();$wrapper.find('.last').before(response.html);$wrapper.find('.input').val('');}}).fail(function(response){$container.stopThrobbing();throw'Saving error: '+
response.responseText});}).on('update',function(){var modified=$wrapper.find('.category.new').length>0;$wrapper.toggleClass('modified',modified).find('.save').prop('disabled',!modified);});});}});var track=Wikia.Tracker.buildTrackingFunction(Wikia.trackEditorComponent,{action:Wikia.Tracker.ACTIONS.CLICK,category:'category-tool',trackingMethod:'analytics'})});})(window,window.jQuery,window.mw);;(function(){'use strict';var WikiaForm=function(el){this.el=$(el);this.form=this.el.is('form')?this.el:this.el.find('form');if(!this.form.length){Wikia.log('WikiaForm with selector "'+this.el.selector+'" doesn\'t include a form element',Wikia.log.levels.error,'WikiaForm');}this.initGenericError();this.initGenericSuccess();this.setInputs();this.inputGroups={};this.el.find('[rel=tooltip]').tooltip();};WikiaForm.prototype.initGenericError=function(){this.genericError=this.el.find('.general-errors');if(this.genericError.length===0){this.el.find('fieldset').prepend(
'<div class="input-group general-errors error"><div class="error-msg"></div></div>');this.genericError=this.el.find('.general-errors');this.genericError.hide();this.genericErrorMsg=this.genericError.find('.error-msg');}};WikiaForm.prototype.initGenericSuccess=function(){this.genericSuccess=this.el.find('.general-success');if(this.genericSuccess.length===0){this.el.find('fieldset').prepend('<div class="input-group general-success success"><div class="success-msg"></div></div>');this.genericSuccess=this.el.find('.general-success');this.genericSuccess.hide();this.genericSuccessMsg=this.genericSuccess.find('.success-msg');}};WikiaForm.prototype.setInputs=function(){var inputs,$input,i,name;this.inputs={};inputs=this.el.find('input, select, textarea');for(i=0;i<inputs.length;i++){$input=$(inputs[i]);name=$input.attr('name');if(name){this.inputs[name]=$input;}}};WikiaForm.prototype.showGenericError=function(msg){this.genericError.show();this.showErrorMsg(this.genericError,msg);};WikiaForm.
prototype.showGenericSuccess=function(msg){this.genericSuccess.show();this.showSuccessMsg(this.genericSuccess,msg);};WikiaForm.prototype.getInputGroup=function(name){var input,inputGroup=this.inputGroups[name];if(!inputGroup){inputGroup=this.inputs[name].closest('.input-group');if(!inputGroup.length){input=this.el.find('input[name='+name+']');if(input.length!==0){inputGroup=input.closest('.input-group');}}if(inputGroup.length!==0){this.inputGroups[name]=inputGroup;}}return inputGroup;};WikiaForm.prototype.showInputError=function(name,msg){var inputGroup=this.getInputGroup(name);if(inputGroup){inputGroup.addClass('error').removeClass('success');this.showErrorMsg(inputGroup,msg);}};WikiaForm.prototype.clearInputError=function(name){var inputGroup=this.getInputGroup(name);inputGroup.removeClass('error').addClass('success');this.clearErrorMsg(inputGroup);};WikiaForm.prototype.showErrorMsg=function(inputGroup,msg){var errorMsg=inputGroup.find('.error-msg');if(!errorMsg.length){errorMsg=
'<div class="error-msg"></div>';inputGroup.append(errorMsg);errorMsg=inputGroup.find('.error-msg');}errorMsg.html(msg);};WikiaForm.prototype.showSuccessMsg=function(inputGroup,msg){var successMsg=inputGroup.find('.success-msg');if(!successMsg.length){successMsg='<div class="success-msg"></div>';inputGroup.append(successMsg);successMsg=inputGroup.find('.success-msg');}successMsg.text(msg);};WikiaForm.prototype.clearErrorMsg=function(inputGroup){inputGroup.find('.error-msg').remove();};WikiaForm.prototype.clearSuccessMsg=function(inputGroup){inputGroup.find('.success-msg').remove();};WikiaForm.prototype.clearGenericError=function(inputGroup){inputGroup.hide().find('.error-msg').remove();};WikiaForm.prototype.clearGenericSuccess=function(inputGroup){inputGroup.hide().find('.success-msg').remove();};WikiaForm.prototype.clearAllInputErrors=function(){for(var key in this.inputGroups){this.clearInputError(key);}};WikiaForm.prototype.disableAll=function(){$.each(this.inputs,function(){this.
attr('disabled',true);});};window.WikiaForm=WikiaForm;})();;define('wikia.csspropshelper',['wikia.document'],function(document){'use strict';var prefixArray=['Moz','webkit','ms','O'],prefixArrayLength=prefixArray.length;function checkForSupportedProp(propArray){var root=document.documentElement,i,length=propArray.length;for(i=0;i<length;i++){var prop=propArray[i];if(prop in root.style){return prop;}}return false;}function createPropArray(prop){var i,result=[prop],formattedProp=prop.charAt(0).toUpperCase()+prop.slice(1);for(i=0;i<prefixArrayLength;i++){var str=prefixArray[i]+formattedProp;result.push(str);}return result;}function formatName(prop){var i,tempArray=prop.split('-'),length=tempArray.length,result=[tempArray[0]];for(i=1;i<length;i++){var tempStr=tempArray[i],str=tempStr.charAt(0).toUpperCase()+tempStr.slice(1);result.push(str)}return result.join('');}function getSupportedProp(prop){var formattedProp=formatName(prop),prefixedPropArray=createPropArray(formattedProp),
supportedProp=checkForSupportedProp(prefixedPropArray);if(supportedProp===false){throw new Error('Requested CSS property - '+prop+' is not supported by your browser!');}return supportedProp;}return{formatName:formatName,getSupportedProp:getSupportedProp}});;define('wikia.fluidlayout',function(){'use strict';var WIDTH_OUTSIDE_MIN=768,WIDTH_OUTSIDE_MAX=1300,WIDTH_OUTSIDE=1030,WIDTH_GUTTER=20,ARTICLE_BORDER_WIDTH=1,WIDTH_ADSKIN=170,BREAKPOINT_SMALL=1023,RIGHT_RAIL_WIDTH=300;function getMinArticleWidth(){return WIDTH_OUTSIDE_MIN;}function getMaxArticleWidth(){return WIDTH_OUTSIDE_MAX;}function getWidthGutter(){return WIDTH_GUTTER;}function getArticleBorderWidth(){return ARTICLE_BORDER_WIDTH;}function getWidthPadding(){return WIDTH_GUTTER/2;}function getBreakpointSmall(){return BREAKPOINT_SMALL;}function getBreakpointContent(){return WIDTH_OUTSIDE;}function getBreakpointFluid(){return WIDTH_OUTSIDE+2*WIDTH_ADSKIN;}function getAdSkinWidth(){return WIDTH_ADSKIN;}function getBreakpointMin(){
return WIDTH_OUTSIDE_MIN;}function getBreakpointMax(){return WIDTH_OUTSIDE_MAX+2*WIDTH_ADSKIN;}function getRightRailWidth(){return RIGHT_RAIL_WIDTH;}return{getMinArticleWidth:getMinArticleWidth,getMaxArticleWidth:getMaxArticleWidth,getWidthGutter:getWidthGutter,getArticleBorderWidth:getArticleBorderWidth,getWidthPadding:getWidthPadding,getBreakpointSmall:getBreakpointSmall,getBreakpointContent:getBreakpointContent,getBreakpointFluid:getBreakpointFluid,getBreakpointMin:getBreakpointMin,getBreakpointMax:getBreakpointMax,getRightRailWidth:getRightRailWidth,getAdSkinWidth:getAdSkinWidth};});;define('wikia.breakpointsLayout',function(){'use strict';var WIDTH_OUTSIDE_MIN=768,CONTENT_BORDER=1,BREAKPOINT_LARGE_CONTENT_WIDTH=1238,BREAKPOINT_LARGE_PADDING_WIDTH=30,BREAKPOINT_MEDIUM_CONTENT_WIDTH=1064,BREAKPOINT_MEDIUM_PADDING_WIDTH=20,BREAKPOINT_MIN_CONTENT_WIDTH=768,BREAKPOINT_MIN_PADDING_WIDTH=24,RIGHT_RAIL_WIDTH_PLUS_SPACING=320;function getArticleContentMaxWidth(isWidePage){var articleWidth=
BREAKPOINT_LARGE_CONTENT_WIDTH-2*BREAKPOINT_LARGE_PADDING_WIDTH;return isWidePage?articleWidth:articleWidth-RIGHT_RAIL_WIDTH_PLUS_SPACING;}function getArticleContentMediumWidth(isWidePage){var articleWidth=BREAKPOINT_MEDIUM_CONTENT_WIDTH-2*BREAKPOINT_MEDIUM_PADDING_WIDTH;return isWidePage?articleWidth:articleWidth-RIGHT_RAIL_WIDTH_PLUS_SPACING;}function getArticleContentMinWidth(){return BREAKPOINT_MIN_CONTENT_WIDTH-2*(BREAKPOINT_MIN_PADDING_WIDTH+CONTENT_BORDER);}function getArticlePadding(){return BREAKPOINT_MEDIUM_PADDING_WIDTH;}function getRailWidthWithSpacing(){return RIGHT_RAIL_WIDTH_PLUS_SPACING;}function getLargeContentWidth(){return BREAKPOINT_LARGE_CONTENT_WIDTH;}function getArticleWidth(breakpoint,isWidePage){switch(breakpoint){case'current':return getArticleContentMediumWidth(isWidePage);case'max':return getArticleContentMaxWidth(isWidePage);case'min':return getArticleContentMinWidth();default:return getArticleContentMinWidth();}}function getArticleMinWidth(){return WIDTH_OUTSIDE_MIN
;}return{getArticleMinWidth:getArticleMinWidth,getArticlePadding:getArticlePadding,getArticleWidth:getArticleWidth,getLargeContentWidth:getLargeContentWidth,getRailWidthWithSpacing:getRailWidthWithSpacing};});;!function($){"use strict";var Tooltip=function(element,options){this.init('tooltip',element,options)}
Tooltip.prototype={constructor:Tooltip,init:function(type,element,options){var eventIn,eventOut
this.type=type
this.$element=$(element)
this.options=this.getOptions(options)
this.enabled=!0
if(this.options.trigger!='manual'){eventIn=this.options.trigger=='hover'?'mouseenter':'focus'
eventOut=this.options.trigger=='hover'?'mouseleave':'blur'
this.$element.on(eventIn,this.options.selector,$.proxy(this.enter,this))
this.$element.on(eventOut,this.options.selector,$.proxy(this.leave,this))}this.options.selector?(this._options=$.extend({},this.options,{trigger:'manual',selector:''})):this.fixTitle()},getOptions:function(options){options=$.extend({},$.fn[this.type].defaults,options,this.$element.data())
if(options.delay&&typeof options.delay=='number'){options.delay={show:options.delay,hide:options.delay}}return options},enter:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type)
if(!self.options.delay||!self.options.delay.show)return self.show()
clearTimeout(this.timeout)
self.hoverState='in'
this.timeout=setTimeout(function(){if(self.hoverState=='in')self.show()},self.options.delay.show)},leave:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type)
if(this.timeout)clearTimeout(this.timeout)
if(!self.options.delay||!self.options.delay.hide)return self.hide()
self.hoverState='out'
this.timeout=setTimeout(function(){if(self.hoverState=='out')self.hide()},self.options.delay.hide)},show:function(){var $tip,inside,pos,actualWidth,actualHeight,placement,tp
if(this.hasContent()&&this.enabled){$tip=this.tip()
this.setContent()
if(this.options.animation){$tip.addClass('fade')}placement=typeof this.options.placement=='function'?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement
inside=/in/.test(placement)
$tip.remove().css({top:0,left:0,display:'block'}).appendTo(inside?this.$element:document.body)
if(this.options&&this.options['z-index']){$tip.css('z-index',this.options['z-index']);}pos=this.getPosition(inside)
actualWidth=$tip[0].offsetWidth
actualHeight=$tip[0].offsetHeight
switch(inside?placement.split(' ')[1]:placement){case'bottom':tp={top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}
break
case'top':tp={top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}
break
case'left':tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}
break
case'right':tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}
break
case'wikiaBar':tp={top:pos.top-actualHeight,right:0}
break
case'wikiaBarMessage':tp={top:pos.top-actualHeight,right:0}
break}$tip.css(tp).addClass(placement).addClass('in')}},isHTML:function(text){return typeof text!='string'||(text.charAt(0)==="<"&&text.charAt(text.length-1)===">"&&text.length>=3)||/^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(text)},setContent:function(){var $tip=this.tip(),title=this.getTitle()
$tip.find('.tooltip-inner')[this.isHTML(title)?'html':'text'](title)
$tip.removeClass('fade in top bottom left right')},hide:function(){var that=this,$tip=this.tip()
$tip.removeClass('in')
function removeWithAnimation(){var timeout=setTimeout(function(){$tip.off($.support.transition.end).remove()},500)
$tip.one($.support.transition.end,function(){clearTimeout(timeout)
$tip.remove()})}$.support.transition&&this.$tip.hasClass('fade')?removeWithAnimation():$tip.remove()
return this;},fixTitle:function(){var $e=this.$element
if($e.attr('title')||typeof($e.attr('data-original-title'))!='string'){$e.attr('data-original-title',$e.attr('title')||'').removeAttr('title')}},hasContent:function(){return this.getTitle()},getPosition:function(inside){return $.extend({},(inside?{top:0,left:0}:this.$element.offset()),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var title,$e=this.$element,o=this.options
title=$e.attr('data-original-title')||(typeof o.title=='function'?o.title.call($e[0]):o.title)
return title},tip:function(){return this.$tip=this.$tip||$(this.options.template)},validate:function(){if(!this.$element[0].parentNode){this.hide()
this.$element=null
this.options=null}},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass('in')?'hide':'show']()}}
$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data('tooltip'),options=typeof option=='object'&&option
if(!data)$this.data('tooltip',(data=new Tooltip(this,options)))
if(typeof option=='string')data[option]()})}
$.fn.tooltip.Constructor=Tooltip
$.fn.tooltip.defaults={animation:!0,placement:'top',selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:'hover',title:'',delay:0}}(window.jQuery);;!function($){"use strict";var Popover=function(element,options){this.init('popover',element,options)}
Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype,{constructor:Popover,setContent:function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent()
$tip.find('.popover-title')[this.isHTML(title)?'html':'text'](title)
$tip.find('.popover-content')[this.isHTML(content)?'html':'text'](content)
$tip.removeClass('fade top bottom left right in')},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var content,$e=this.$element,o=this.options
content=$e.attr('data-content')||(typeof o.content=='function'?o.content.call($e[0]):o.content)
return content},tip:function(){if(!this.$tip){this.$tip=$(this.options.template)}return this.$tip},destroy:function(){this.hide().$element.off('.'+this.type).removeData(this.type)}})
$.fn.popover=function(option){return this.each(function(){var $this=$(this),data=$this.data('popover'),options=typeof option=='object'&&option
if(!data)$this.data('popover',(data=new Popover(this,options)))
if(typeof option=='string')data[option]()})}
$.fn.popover.Constructor=Popover
$.fn.popover.defaults=$.extend({},$.fn.tooltip.defaults,{placement:'right',content:'',template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"></div></div></div>'})}(window.jQuery);;WikiaSearchApp=(function(){function WikiaSearchApp(id){this.id=id;this.searchForm=$(id);this.positionRight=this.searchForm.innerWidth()-this.searchForm.children('input:first-child').outerWidth()+4;this.searchField=this.searchForm.children('input[placeholder]');this.ads=$("[id$='TOP_RIGHT_BOXAD']");if(!this.searchForm.hasClass('noautocomplete')){this.searchField.bind({'suggestShow':$.proxy(this.hideAds,this),'suggestHide':$.proxy(this.showAds,this)});this.searchField.one('focus',$.proxy(this.initSuggest,this));}}WikiaSearchApp.prototype.track=Wikia.Tracker.buildTrackingFunction({trackingMethod:'internal'});WikiaSearchApp.prototype.hideAds=function(){this.ads.each(function(){$(this).children().css('margin-left','-9999px');})
;};WikiaSearchApp.prototype.showAds=function(){this.ads.each(function(){$(this).children().css('margin-left','auto');});};WikiaSearchApp.prototype.initSuggest=function(){$.when($.loadJQueryAutocomplete()).then($.proxy(function(){this.searchField.autocomplete({serviceUrl:wgScript+'?action=ajax&rs=getLinkSuggest&format=json',onSelect:$.proxy(function(value,data,event){var valueEncoded=encodeURIComponent(value.replace(/ /g,'_')),location=wgArticlePath.replace(/\$1/,valueEncoded).replace(encodeURIComponent('/'),'/');this.track({eventName:'search_start_suggest',sterm:valueEncoded,rver:0});if(event.button===1||event.metaKey||event.ctrlKey){window.open(location);return false;}else{window.location.href=location;}},this),appendTo:this.id,deferRequestBy:400,minLength:3,maxHeight:1000,selectedClass:'selected',width:'100%',positionRight:this.positionRight+'px',skipBadQueries:!0});if(window.Wikia.newSearchSuggestions){window.Wikia.newSearchSuggestions.setAsMainSuggestions('search');}},this));};
return WikiaSearchApp;})();$(function(){new WikiaSearchApp('#WikiaSearch');new WikiaSearchApp('#HeaderWikiaSearch');});;var WikiaFooterApp={init:function(){'use strict';if(window.wgEnableWikiaBarExt){this.footer=$('#WikiaBarWrapper').find('.wikia-bar');}else{this.footer=$('#WikiaFooter');}this.toolbar=this.footer.children('.toolbar');this.windowObj=$(window);this.originalWidth=this.toolbar.width();if(this.toolbar.exists()){if(!(navigator.platform in{'iPad':'','iPhone':'','iPod':''}||(navigator.userAgent.match(/android/i)!==null))){this.addScrollEvent();this.addResizeEvent();}this.tcToolbar=new ToolbarCustomize.Toolbar(this.footer.find('.tools'));}},addScrollEvent:function(){'use strict';WikiaFooterApp.windowObj.off('scroll.FooterAp');WikiaFooterApp.windowObj.on('scroll.FooterAp',WikiaFooterApp.resolvePosition).triggerHandler('scroll');},addResizeEvent:function(){'use strict';WikiaFooterApp.windowObj.on('resize',WikiaFooterApp.centerBar).triggerHandler('resize');},centerBar:function(){
'use strict';var w=WikiaFooterApp.windowObj.width();if(w<WikiaFooterApp.originalWidth&&WikiaFooterApp.footer.hasClass('float')){WikiaFooterApp.toolbar.css('width',w+10);if(!WikiaFooterApp.toolbar.hasClass('small')){WikiaFooterApp.toolbar.addClass('small');}}else if(WikiaFooterApp.toolbar.hasClass('small')){WikiaFooterApp.toolbar.css('width',WikiaFooterApp.originalWidth);WikiaFooterApp.toolbar.removeClass('small');}WikiaFooterApp.resolvePosition();},resolvePosition:function(){'use strict';if(window.wgIsEditPage){return;}var scrollTop=WikiaFooterApp.windowObj.scrollTop(),scroll=scrollTop+WikiaFooterApp.windowObj.height(),line=0;if(WikiaFooterApp.footer.offset()){line=WikiaFooterApp.footer.offset().top+WikiaFooterApp.toolbar.outerHeight();}if(scroll>line&&WikiaFooterApp.footer.hasClass('float')){WikiaFooterApp.footer.removeClass('float');WikiaFooterApp.centerBar();}else if(scroll<line&&!WikiaFooterApp.footer.hasClass('float')){WikiaFooterApp.footer.addClass('float');WikiaFooterApp.
centerBar();}}};(function(){'use strict';window.ToolbarCustomize=window.ToolbarCustomize||{};var TC=window.ToolbarCustomize;TC.MenuGroup=$.createClass(window.Observable,{showTimer:!1,hideTimer:!1,showTimeout:300,hideTimeout:350,showing:!1,visible:!1,constructor:function(){TC.MenuGroup.superclass.constructor.call(this);this.showTimer=window.Timer.create($.proxy(this.show,this),this.showTimeout);this.hideTimer=window.Timer.create($.proxy(this.hide,this),this.hideTimeout);},add:function(el){var e=$(el);e.unbind('.menugroup').bind('mouseenter.menugroup',$.proxy(this.delayedShow,this)).bind('mouseleave.menugroup',$.proxy(this.delayedHide,this)).children('a','img').unbind('.menugroup').bind('click.menugroup',$.proxy(this.showOnClick,this));},remove:function(el){$(el).unbind('.menugroup').children('a','img').unbind('.menugroup');},show:function(){this.hideTimer.stop();this.showTimer.stop();if(!this.showing||this.visible===this.showing){return;}if(this.visible){this.hide();}if(this
.showing){this.visible=this.showing;this.showing=!1;this.fire('menushow',this,this.visible,this.visible.children('ul'));this.visible.children('ul').show();}},delayedShow:function(evt){this.showing=$(evt.currentTarget);if(this.visible){this.show(evt);}else{this.hideTimer.stop();this.showTimer.start();}},showOnClick:function(evt){evt.preventDefault();this.showing=$(evt.currentTarget).parent();this.show(evt);},hide:function(){this.hideTimer.stop();this.showTimer.stop();if(this.visible){this.fire('menuhide',this,this.visible,this.visible.children('ul'));this.visible.children('ul').hide();this.visible=!1;}},delayedHide:function(){this.hideTimer.stop();if(this.visible){this.hideTimer.start();}else if(this.showing){this.showing=!1;this.showTimer.start();}}});TC.Toolbar=$.createClass(Object,{el:!1,more:!1,menuGroup:!1,constructor:function(el){TC.Toolbar.superclass.constructor.call(this);this.el=el;this.menuGroup=new TC.MenuGroup();this.menuGroup.bind('menushow',this.
onShowMenu,this);this.initialize();},initialize:function(){this.el.find('.tools-customize').click($.proxy(this.openConfiguration,this));this.menuGroup.add(this.el.find('li.menu'));var that=this;$('body').on('userToolsItemAdded',function(event,data){that.load(data);});require(['wikia.fluidlayout'],function(fluidlayout){that.handleOverflowMenu(fluidlayout.getBreakpointSmall(),2*fluidlayout.getAdSkinWidth(),window.wgOasisResponsive?false:fluidlayout.getBreakpointSmall());});},openConfiguration:function(evt){evt.preventDefault();require(['wikia.toolsCustomization'],function(TC){new TC.ToolsCustomization(this).show();return false;});},buildOveflowItem:function(){return this.el.find('.overflow-menu');},generateMediaQuery:function(moreable,minWidth,breakpoint,gapWidth,nonResponsiveBreakpoint){var firstMediaJSQuery=!0,mediaJSQueries='',moreableCount=moreable.length,alreadyAdded=(minWidth>=breakpoint),lastMediaQuery=!1;moreable.each(function(i,v){var elemWidth=$(v).outerWidth(true);if(
nonResponsiveBreakpoint!==false&&(minWidth+elemWidth>nonResponsiveBreakpoint)){lastMediaQuery=!0;}if(!alreadyAdded&&((minWidth+elemWidth)>=breakpoint)){alreadyAdded=!0;elemWidth+=gapWidth;}mediaJSQueries+='@media screen ';if(!firstMediaJSQuery){mediaJSQueries+='and (min-width:'+minWidth+'px) ';}if(!lastMediaQuery){mediaJSQueries+='and (max-width:'+(minWidth+elemWidth)+'px) ';}mediaJSQueries+='{ .WikiaBarWrapper .tools > .overflow:nth-of-type(n + '+(i+1)+') { display:none; } '+'.WikiaBarWrapper .tools .overflow-menu {  display: block; }'+'.WikiaBarWrapper .tools .overflow-menu .overflow:nth-of-type(-n + '+(moreableCount-i)+') { display:block; }} ';if(lastMediaQuery){return false;}minWidth+=elemWidth;firstMediaJSQuery=!1;});return mediaJSQueries;},getMinWidth:function(all){var arrow=this.el.parents('.wikia-bar:first').find('.arrow'),minWidth=parseInt(this.el.css('padding-left'),10)+parseInt(this.el.css('padding-right'),10)+arrow.outerWidth(true),notMoreable=all.filter(
':not(.overflow)');notMoreable.each(function(i,v){minWidth+=$(v).outerWidth(true);});return minWidth;},generateSubMenu:function(moreable){var where=moreable.last().next(),liMore=this.buildOveflowItem(),more=liMore.children('ul').empty();if(where.exists()){where.before(liMore);}else{this.el.append(liMore);}moreable.each(function(i,v){$(v).clone().prependTo(more);});this.menuGroup.add(liMore,$.proxy(this.onShowMenu,this));},addStyles:function(mediaJsQueries){var id='WikiaFooterMediaQueries',styles='<style id="'+id+'" type"text/css">'+mediaJsQueries+'</style>';$('#'+id).remove();$('head').append(styles);},handleOverflowMenu:function(breakpoint,gapWidth,nonResponsiveBreakpoint){var all=this.el.children('li'),moreable=all.filter('.overflow'),minWidth=this.getMinWidth(all);this.addStyles(this.generateMediaQuery(moreable,minWidth,breakpoint,gapWidth,nonResponsiveBreakpoint));this.generateSubMenu(moreable);},onShowMenu:function(mgroup,li,ul){ul.css('left',(li.offset().left-this.el.offset().
left)+'px');ul.css('right','auto');},load:function(html){this.el.children('li').remove();this.el.prepend($(html));this.initialize();}});})();$(function(){'use strict';WikiaFooterApp.init();});;var WikiaButtons={settings:{delay:350},init:function(limit){if(typeof limit=='object'){WikiaButtons.menuButtons=$(".wikia-menu-button",limit);}else{WikiaButtons.menuButtons=$(".wikia-menu-button");}WikiaButtons.timer=null;WikiaButtons.add(WikiaButtons.menuButtons);},add:function(e,opts){var defaults={click:WikiaButtons.click};var s=$.extend({},defaults,opts||{});e.unbind('.wikiabutton').one("mouseover.wikiabutton",WikiaButtons.setup).bind('mouseenter.wikiabutton',WikiaButtons.mouseover).bind('mouseleave.wikiabutton',WikiaButtons.mouseout);e.filter('.combined').bind('click.wikiabutton',s.click);e.not('.combined').find('.drop').bind('click.wikiabutton',s.click);},setup:function(){$(this).data('menu',$(this).find("ul"));},click:function(event){var button=$(this).closest('.wikia-menu-button');if(!
button.attr('disabled')){if(event.target.tagName!=='A'){var width=button.outerWidth();if(width!==button.data('prevWidth')){button.data('prevWidth',width);var menu=button.data('menu');width=width-(parseInt(menu.css('padding-left'))+parseInt(menu.css('padding-right'))+parseInt(menu.css('border-left-width'))+parseInt(menu.css('border-right-width')));menu.css("min-width",width);}button.toggleClass("active");}}else{event.preventDefault();return false;}},mouseover:function(){clearTimeout(WikiaButtons.timer);},mouseout:function(event){var dalay=$(event.target).closest('.wikia-menu-button').attr('data-delay');if((typeof dalay)!='string'){dalay=WikiaButtons.settings.delay;}WikiaButtons.timer=setTimeout(function(){$(event.currentTarget).removeClass("active");},dalay);}};$(function(){WikiaButtons.init();});;var WikiaNotificationsApp={purgeCurrentPage:function(){$.post(wgScript,{action:'purge',title:wgPageName});},track:Wikia.Tracker.buildTrackingFunction({category:'sitewidemessages',
trackingMethod:'analytics'}),init:function(){var self=this,notifications=$('#WikiaNotifications');notifications.find('.close-notification').click(function(ev){var notification=$(this).parent();var notificationType=parseInt(notification.attr('data-type'));switch(notificationType){case 1:$.post(wgScript,{action:'ajax',rs:'wfDismissWikiaNewtalks'},WikiaNotificationsApp.purgeCurrentPage);notification.parent().remove();break;case 2:$.post(wgScript,{action:'ajax',rs:'CommunityMessagesAjax',method:'dismissMessage'},WikiaNotificationsApp.purgeCurrentPage);notification.parent().remove();break;case 5:var messageId=parseInt(notification.attr('id').substr(4));var nextNotification=notification.next();$.post(wgScript,{title:'Special:SiteWideMessages',action:'dismiss',mID:messageId},WikiaNotificationsApp.purgeCurrentPage);self.track({action:Wikia.Tracker.ACTIONS.CLICK_LINK_BUTTON,browserEvent:ev,label:'swm-dismiss',value:messageId});notification.remove();nextNotification.css("display","block");if(
nextNotification.length){var nextMessageId=parseInt(nextNotification.attr('id').substr(4));self.track({action:Wikia.Tracker.ACTIONS.IMPRESSION,label:'swm-impression',value:nextMessageId});}break;case 10:$.post($(this).attr('data-url'),WikiaNotificationsApp.purgeCurrentPage);notification.parent().remove();break;default:notification.parent().remove();break;}});}};$(function(){WikiaNotificationsApp.init();});;(function($){var FirefoxFindFix={scrollThreshold:30,lastScroll:0,init:function(){$(window).scroll($.proxy(this.analyze,this)).mousedown($.proxy(this.cancelTimer,this));},analyze:function(){if(window.getSelection().toString()){var currentScroll=$(window).scrollTop();if(currentScroll>this.lastScroll+this.scrollThreshold){this.adjust();}this.lastScroll=currentScroll;}},adjust:function(){$(window).scrollTop($(window).scrollTop()+this.scrollThreshold);this.anchorOffset=window.getSelection().anchorOffset;if(!this.timer){this.timer=setInterval(this.monitorHighlight,250);}},monitorHighlight:
function(){if(window.getSelection().anchorOffset!=this.anchorOffset){if(this.timer){this.adjust();}}},cancelTimer:function(){if(this.timer){clearInterval(this.timer);this.timer=null;}}};if($.browser.mozilla){$(function(){if($("#WikiaFooter .toolbar").exists()){FirefoxFindFix.init();}});}}(jQuery));;jQuery(function($){$('body').on('click','.tabs a',function(evt){if($(this).parent().hasClass('disabled')){return;}var newTabName=$(this).parent().data('tab');if($('[data-tab-body="'+newTabName+'"]').length>0){evt.preventDefault();var previousTabName=$(this).closest('ul').find('.selected').removeClass('selected').data('tab');$(this).closest('li').addClass('selected');$('[data-tab-body="'+previousTabName+'"]').removeClass('selected');$('[data-tab-body="'+newTabName+'"]').addClass('selected');$(window).trigger('wikiaTabClicked',[newTabName]);}else{$().log("Tried to switch to tab but could not find data-tab-body: \""+newTabName+"\"");}});});;jQuery(function($){'use strict';var $body=$('body'),
$wikiaArticle=$('#WikiaArticle'),$wikiaRail=$('#WikiaRail'),$interlang=$('.WikiaArticleInterlang'),rHrefDiff=/&diff=\d+/,rHrefHistory=/&action=history/,track,trackWithEventData,trackEditorComponent;track=Wikia.Tracker.buildTrackingFunction({action:Wikia.Tracker.ACTIONS.CLICK,trackingMethod:'analytics'});trackWithEventData=function(event){if(window.veTrack&&event.data.label==='section-edit'){veTrack({action:($('#ca-ve-edit').exists()?'ve-section-edit':'other-section-edit')+'-click'});}if(event.type==='mousedown'&&event.which!==1){return;}track({browserEvent:event},event.data);};trackEditorComponent=(function(){var slice=Array.prototype.slice;return function(){var wikiaEditor=window.WikiaEditor&&WikiaEditor.getInstance(),track=Wikia.Tracker.track;if(wikiaEditor&&(!wikiaEditor.config.isMiniEditor||wikiaEditor.plugins.MiniEditor.hasFocus)){track=WikiaEditor.track;}track.apply(track,slice.call(arguments));};})();(function(){var category='article';if($body.hasClass('ns-special')){return;}
$wikiaArticle.on('mousedown','a',function(event){var label,el=$(event.currentTarget);if(event.which!==1){return;}if(el.hasClass('video')){label='video';}else if(el.hasClass('image')){label='image';}else if(el.parents('.infobox, .wikia-infobox').length>0){label='infobox';}else if(el.hasClass('external')){label='link-external';}else if(el.hasClass('wikia-photogallery-add')){label='add-photo-to-gallery';}else if(el.prop('className')===''){label='link-internal';}if(label!==undefined){track({browserEvent:event,category:category,label:label});}}).on('mousedown','.editsection a',{category:category,label:'section-edit'},trackWithEventData);$('#articleCategories').on('mousedown','a',{category:category,label:'category-name'},trackWithEventData).on('mousedown','.add',{category:category,label:'add-category'},trackWithEventData);})();(function(){var category='category';$wikiaArticle.on('mousedown','.category-gallery a',{category:category,label:'category-gallery'},trackWithEventData);$('#mw-pages').
on('mousedown','a',{category:category,label:'category-item'},trackWithEventData);})();(function(){var alliance=$('.alliance-module',$wikiaArticle),category='Alliance',label,suffix;if(alliance.length){alliance.on('mousedown','a',function(event){suffix='-click';if($(this).attr('href').indexOf('http://www.wikia.com/Alliance')!==-1){suffix='-logo-click';}label=$(event.delegateTarget).attr('data-label');if(label!==undefined){label+=suffix;track({category:category,label:label});}});alliance.each(function(){suffix='-impression';label=$(this).attr('data-label');if(label!==undefined){label+=suffix;track({action:Wikia.Tracker.ACTIONS.IMPRESSION,category:category,label:label});}});}})();if($body.hasClass('page-Special_RecentChanges')){$wikiaArticle.on('mousedown','a',function(event){var $el=$(event.target),label=$el.attr('data-action'),href=$el.attr('href');if(event.which!==1){return;}if(!label){if(rHrefDiff.test(href)){label='diff';}else if(rHrefHistory.test(href)){label='history';}else if($el.
hasClass('mw-userlink')){label='username';}else if(!$el.parent().is('span')){label='title';}}if(label!==undefined){track({browserEvent:event,category:'recent-changes',label:label});}});}$wikiaArticle.find('.diff-header').on('mousedown','a',function(e){var $el=$(e.target),action=$el.attr('data-action');if(action){track({browserEvent:e,category:'oasis-diff',label:action});}});(function(){var category='search',suggestionShowed=!1,$topModule=$('.top-wiki-articles'),$exactWikiMatchModule=$('.exact-wiki-match'),$fandomStoriesModule=$('.fandom-stories'),$categoryModule=$('.category-articles'),$wikiaSearch=$('.search-tracking'),$noResults=$('.results-wrapper .no-result');if($body.hasClass('page-Special_Search')){category='special-search';}$wikiaSearch.on('mousedown','.autocomplete',{category:category,label:'search-suggest'},trackWithEventData).on('mousedown','.wikia-button',function(event){if(event.which===1&&event.clientX>0){var label=!suggestionShowed?'search-button':
'search-after-suggest-button';track({category:category,label:label});}}).on('keypress','[name=search]',function(event){if(event.which===13&&$(this).is(':focus')){var label=!suggestionShowed?'search-enter':'search-after-suggest-enter';track({category:category,label:label});}}).on('suggestEnter',{category:category,label:'search-suggest-enter'},trackWithEventData).one('suggestShow',{action:Wikia.Tracker.ACTIONS.VIEW,category:category,label:'search-suggest-show'},function(event){suggestionShowed=!0;trackWithEventData(event);});if($body.hasClass('page-Special_Search')){if($noResults.length){track({action:Wikia.Tracker.ACTIONS.VIEW,category:category,label:'empty-page'});}$wikiaSearch.on('mousedown','.search-tabs a',function(event){track({browserEvent:event,category:category,label:'sidebar-'+$(event.currentTarget).prop('className')});}).on('mousedown','.Results .result-link',function(event){var el=$(event.currentTarget),label='result-'+(el.data('event')==='search_click_match'?'push-top':
'item-'+el.data('pos'));track({browserEvent:event,category:category,label:label});}).on('mousedown','.Results .wiki-thumb-tracking',function(event){var el=$(event.currentTarget),label='result-item-'+el.data('pos')+'-image'+(el.data('event')==='search_click_wiki-no-thumb'?'-placeholder':'');track({browserEvent:event,category:category,label:label});}).on('mousedown','.thumb-tracking',function(event){var el=$(event.currentTarget),label='result-item-'+'image-'+(el.data('event')==='search_click_match'?'push-top':el.data('pos'));track({browserEvent:event,category:category,label:label});}).on('mousedown','.image',function(event){var $currentTarget=$(event.currentTarget),label='result-'+($currentTarget.hasClass('video')?'video':'photo')+(($currentTarget.parents('.video-addon-results').length>0)?'-video-addon':'');track({browserEvent:event,category:category,label:label});}).on('mousedown','.video-addon-seach-video',function(event){track({browserEvent:event,category:category,label:
'video-addon-results-header'});});}if($exactWikiMatchModule.length){track({action:Wikia.Tracker.ACTIONS.IMPRESSION,category:category,label:'exact-wiki-match'});$exactWikiMatchModule.on('mousedown','a',function(event){var el=$(event.currentTarget);track({browserEvent:event,category:category,label:'exact-wiki-match-'+el.data('event')});});}if($fandomStoriesModule.length){track({action:Wikia.Tracker.ACTIONS.IMPRESSION,category:category,label:'fandom-stories'});$fandomStoriesModule.on('mousedown','.fandom-story-link',function(event){track({browserEvent:event,category:category,label:'fandom-story-link-'+$(event.currentTarget).data('pos')});}).on('mousedown','.fandom-story-image',function(event){track({browserEvent:event,category:category,label:'fandom-story-image-'+$(event.currentTarget).data('pos')});});}if($topModule.length){track({action:Wikia.Tracker.ACTIONS.IMPRESSION,category:category,label:'top-wiki-articles'});$topModule.on('mousedown','.top-wiki-article-link',function(event){track(
{browserEvent:event,category:category,label:'top-wiki-article-link-'+$(event.currentTarget).data('pos')});}).on('mousedown','.top-wiki-article-image',function(event){track({browserEvent:event,category:category,label:'top-wiki-article-image-'+$(event.currentTarget).data('pos')});});}if($categoryModule.length){$categoryModule.on('mousedown','.category-articles-thumb a',function(event){var el=$(event.currentTarget);track({browserEvent:event,category:category,label:'category-module-thumb-'+el.data('pos')});}).on('mousedown','.category-articles-text a',function(event){var el=$(event.currentTarget);track({browserEvent:event,category:category,label:'category-module-title-'+el.data('pos')});});}})();$('#RelatedForumDiscussion').on('mousedown','a',function(event){var label,el=$(event.target);if(event.which!==1){return;}if(el.hasClass('forum-thread-title')){label='title';}else if(el.hasClass('forum-new-post')){label='start-discussion';}else if(el.parent().hasClass('forum-see-more')){label=
'see-more';}if(label!==undefined){track({browserEvent:event,category:'thread-module',label:label});}});$('#WikiaBarWrapper').on('mousedown','.toolbar a',function(event){var label,el=$(event.target),name=el.data('name');if(event.which!==1){return;}switch(name){case'customize':case'follow':case'history':case'whatlinkshere':label=name;break;default:label='custom';break;}if(label!==undefined){track({browserEvent:event,category:'toolbar',label:label});}});(function(){var category='top-nav';$('#wall-notifications-markasread').on('mousedown','span',function(event){var label,el=$(event.target),id=el.attr('id');if(event.which!==1){return;}switch(id){case'wall-notifications-markasread-this-wiki':case'wall-notifications-markasread-all-wikis':label=id;break;}if(label!==undefined){track({browserEvent:event,category:category,label:label});}});})();if($body.hasClass('page-Special_WikiActivity')){$wikiaArticle.find('.activityfeed').on('mousedown','a',function(event){var label,type,el=$(event.target),
parent=el.parent();if(event.which!==1){return;}if(el.hasClass('title')){label='title';}else if(el.hasClass('username')||el.hasClass('real-name')||parent.hasClass('wall-owner')||parent.hasClass('subtle')){label='username';}else if(parent.hasClass('activityfeed-diff')){label='diff';}else{type=el.closest('tr').data('type');if(type==='inserted-image'){label='thumbnail-photo';}else if(type==='inserted-video'){label='thumbnail-video';}}if(label!==undefined){track({browserEvent:event,category:'wiki-activity',label:label});}});}$interlang.on('click','a',function(){var data=$(this).data('tracking');track({category:'interwiki-links',label:data});});function initRailTracking(){$wikiaRail.find('.chat-module').on('mousedown','.start-a-chat-button',{category:'chat-module',label:'chat-join'},trackWithEventData);$wikiaRail.find('#ForumRelatedThreadsModule').on('mousedown','a',function(event){var label=event.target.getAttribute('data-tracking');if(event.which!==1){return;}if(label){track({browserEvent:
event,category:'related-threads-module',label:label});}});$wikiaRail.find('#ForumActivityModule').on('mousedown','a',function(event){var label=event.target.getAttribute('data-tracking');if(event.which!==1){return;}if(label){track({browserEvent:event,category:'forum-activity-module',label:label});}});$wikiaRail.find('#wikia-recent-activity .page-title-link, #wikia-recent-activity .edit-info-user').on('mousedown',function(event){var label=event.target.getAttribute('data-tracking');if(event.which!==1){return;}if(label){track({browserEvent:event,category:'recent-wiki-activity-module',label:label});}});}Wikia.trackEditorComponent=trackEditorComponent;Wikia.initRailTracking=initRailTracking;});;define('wikia.onScroll',['jquery','wikia.window'],function($,window){'use strict';var handlers=[],delay=5;function bind(handler){if(typeof handler==='function'){handlers.push(handler);}}function unbind(handler){var index=handlers.indexOf(handler);if(index>-1){handlers.splice(index,1);}}function trigger
(event){handlers.forEach(function(handler){handler(event);});}function init(){window.addEventListener('scroll',$.throttle(delay,trigger));}return{bind:bind,unbind:unbind,init:init};});require(['wikia.onScroll'],function(onScroll){'use strict';onScroll.init();});;define('wikia.toolsCustomization',['wikia.window','wikia.browserDetect','jquery','wikia.ui.factory','mw','BannerNotification'],function(win,browserDetect,$,uiFactory,mw,BannerNotification){'use strict';win.ToolbarCustomize=win.ToolbarCustomize||{};var TC=win.ToolbarCustomize,isIPad=!1,wgBlankImgUrl=win.wgBlankImgUrl,bannerNotification=new BannerNotification().setType('error');isIPad=browserDetect.isIPad();TC.OptionsTree=$.createClass(win.Observable,{constructor:function(el){TC.OptionsTree.superclass.constructor.call(this);this.el=el;if(!isIPad){this.el.sortable({axis:'y',handle:'.drag',opacity:0.8,update:$.proxy(this.updateLevels,this)});}},updateLevels:function(){var $all=this.el.children('li'),level=0,$ind;$all.removeClass
('list-item-indent-1');$all.each(function(index,element){if($(element).hasClass('list-item-menu')){level++;}else if(level>0){$(element).addClass('list-item-indent-'+level);}});this.el.find('.tree-visual').remove();$ind=this.el.children('li.list-item-indent-1');$ind.prepend('<span class="tree-visual tree-line"></span><span class="tree-visual tree-dash"></span>');$ind.last().find('.tree-visual').remove();$ind.last().prepend('<span class="tree-visual tree-line-last"></span><span class="tree-visual tree-dash"></span>');this.fire('update',this);},buildItem:function(item,level){var type=(item.id.substr(0,5)==='Menu:')?'menu':'item',cl=level?'list-item-indent-'+level:'',html,itemEl;if(type==='menu'){cl+=' list-item-menu';}html='<li'+' data-tool-id="'+$.htmlentities(item.id)+'"'+' data-default-caption="'+$.htmlentities(item.defaultCaption)+'"'+' data-caption="'+$.htmlentities(item.caption)+'"'+(cl?' class="'+cl+'"':'')+'>';if(type==='menu'){html+='<img src="'+wgBlankImgUrl+
'" class="folder-icon" height="16" width="16" />';}html+='<span class="name">'+$.htmlentities(item.caption)+'</span>';if(type==='item'){html+=this.addIcons();}html+='</li>';itemEl=$(html);this.fire('itembuild',this,item,itemEl);return itemEl;},addIcons:function(){var html=['<img src="'+wgBlankImgUrl+'" class="sprite edit-pencil">','<img src="'+wgBlankImgUrl+'" class="sprite trash">'];if(!isIPad){html.push('<img src="'+wgBlankImgUrl+'" class="sprite drag">');}return html.join('');},loadLevel:function(els,level){var i;for(i=0;i<els.length;i++){this.el.append(this.buildItem(els[i],level));if(els[i].items){this.loadLevel(els[i].items,level+1);}}},load:function(data){this.el.empty();this.loadLevel(data,0);this.updateLevels();},save:function(){var $all=this.el.children('li'),stack=[[]],level=0;$all.each(function(index,element){element=$(element);var o={id:element.attr('data-tool-id'),defaultCaption:element.attr('data-default-caption'),caption:element.attr('data-caption')};stack[level].push(o
);if(element.hasClass('list-item-menu')){level=1;o.items=[];o.isMenu=!0;stack[level]=o.items;}});return stack[0];},update:function(){this.updateLevels();},add:function(item,level){var itemEl=this.buildItem(item,level||0),$mytools;if(level===0){$mytools=this.el.children('.list-item-menu');if($mytools){$mytools.before(itemEl);}else{this.el.append(itemEl);}}else{this.el.append(itemEl);}this.scrollToItem(itemEl);this.updateLevels();},scrollToItem:function(itemEl){var scroll=this.el.scrollTop(),delta=itemEl.offset().top-this.el.offset().top,max=this.el.innerHeight()-itemEl.outerHeight(),move=0;if(delta>max){move=delta-max;}if(delta<0){move=delta;}if(move!==0){this.el.scrollTop(scroll+move);}}});TC.OptionLinks=$.createClass(win.Observable,{constructor:function(el){TC.OptionLinks.superclass.constructor.call(this);this.el=el;},onItemClick:function(event){event.preventDefault();this.fire('itemclick',this,$(event.target).attr('data-tool-id'));return false;},buildItem:function(item){var html=
'<li>'+'<a href="#" data-tool-id="'+$.htmlentities(item.id)+'">'+$.htmlentities(item.defaultCaption)+'</a></li>',itemEl=$(html);itemEl.find('a').click($.proxy(this.onItemClick,this));return itemEl;},load:function(els){var i;this.el.empty();for(i=0;i<els.length;i++){this.el.append(this.buildItem(els[i]));}}});TC.Toggle=$.createClass(Object,{constructor:function(target,buttons,cls){this.target=target;this.buttons=buttons;this.cls=cls;this.state=!1;this.hide();this.buttons.bind('click.toggle',$.proxy(this.toggle,this));},hide:function(){this.target.hide();this.buttons.hide();this.buttons.filter('.'+this.cls).show();},show:function(){this.target.show();this.buttons.hide();this.buttons.not('.'+this.cls).show();},toggle:function(event){if($(event.currentTarget).hasClass(this.cls)){this.show();}else{this.hide();}}});TC.Configuration=$.createClass(Object,{toolbar:!1,data:!1,w:!1,tree:!1,popular:!1,toggle:!1,constructor:function(toolbar){TC.Configuration.superclass.
constructor.call(this);this.toolbar=toolbar;},show:function(){$.when($.loadJQueryAutocomplete(),$.loadJQueryUI(),$.getResources([$.getSassCommonURL('extensions/wikia/UserTools/styles/UserTools.scss')]),$.nirvana.sendRequest({controller:'UserTools',method:'ToolbarConfiguration',callback:$.proxy(this.onDataLoaded,this)})).done($.proxy(this.checkLoad,this)).fail($.proxy(this.onLoadFailure,this));},onDataLoaded:function(data){this.data=data;},onLoadFailure:function(req,textStatus,errorThrown){bannerNotification.setContent(errorThrown).show();},checkLoad:function(){var self=this;uiFactory.init(['modal']).then(function(uiModal){var messages=self.data.messages,toolsConfigurationConfig={vars:{id:'MyToolsConfigurationWrapper',size:'small',content:self.data.configurationHtml,title:messages['user-tools-edit-title'],buttons:[{vars:{value:messages['user-tools-edit-save'],classes:['button','primary'],data:[{key:'event',value:'save'}]}},{vars:{value:messages['user-tools-edit-cancel'],data:[{key:
'event',value:'close'}]}}]}};uiModal.createComponent(toolsConfigurationConfig,function(toolsConfigModal){self.w=toolsConfigModal.$content;self.modal=toolsConfigModal;var $optionList=self.w.find('.options-list'),$group=self.w.find('.popular-tools-group'),$searchInput=self.w.find('.search');self.tree=new TC.OptionsTree($optionList);if(isIPad){$optionList.addClass('on-ipad');}else{$optionList.addClass('no-ipad');}self.tree.on('itembuild',$.proxy(self.initItem,self));self.tree.load(self.data.options);self.w.find('.reset-defaults a').click($.proxy(self.loadDefaults,self));$searchInput.placeholder();$searchInput.pluginAutocomplete({lookup:self.getAutocompleteData(),onSelect:$.proxy(self.addItemFromSearch,self),selectedClass:'selected',appendTo:self.w.find('.search-box'),width:'300px',maxHeight:'auto'});self.w.find('.advanced-tools a').attr('target','_blank');self.popular=new TC.OptionLinks(self.w.find('.popular-list'));self.popular.load(self.data.popularOptions);self.popular.on('itemclick',$
.proxy(self.addPopularOption,self));self.toggle=new TC.Toggle($group.children('.popular-list'),$group.children('.popular-toggle'),'toggle-1');self.w.find('.popular-toggle').click($.proxy(self.togglePopular,self));toolsConfigModal.bind('save',function(event){event.preventDefault();toolsConfigModal.deactivate();self.save(toolsConfigModal);});toolsConfigModal.show();});});},getAutocompleteData:function(){var suggestions=[],data=[],length=this.data.allOptions.length,i;for(i=0;i<length;i++){suggestions.push(this.data.allOptions[i].caption);data.push(this.data.allOptions[i].id);}return{suggestions:suggestions,data:data};},findOptionByName:function(id){var length=this.data.allOptions.length,i;for(i=0;i<length;i++){if(this.data.allOptions[i].id===id){return this.data.allOptions[i];}}return false;},findOptionByCaption:function(caption){var length=this.data.allOptions.length,i;for(i=0;i<length;i++){if(this.data.allOptions[i].caption===caption){return this.data.allOptions[i];}}return false;},
addItemFromSearch:function(value,data){var item=this.findOptionByName(data);if(item){this.tree.add(item,0);}this.w.find('.search').val('');},addPopularOption:function(popular,id){var item=this.findOptionByName(id);if(item){this.tree.add(item,0);}return false;},loadDefaults:function(){this.tree.load(this.data.defaultOptions);return false;},initItem:function(tree,item,el){if(isIPad){el.click(function(event){tree.el.children().removeClass('hover');$(event.currentTarget).addClass('hover');});}el.find('.edit-pencil').click($.proxy(this.renameItem,this));el.find('.trash').click($.proxy(this.deleteItem,this));},renameItem:function(event){var self=this,$item=$(event.currentTarget).closest('li');event.preventDefault();uiFactory.init(['modal']).then(function(uiModal){var messages=self.data.messages,renameItemConfig={vars:{id:'MyToolsRenameItem',size:'small',content:self.data.renameItemHtml,title:messages['user-tools-edit-rename'],buttons:[{vars:{value:messages['user-tools-edit-save'],classes:[
'button','primary'],data:[{key:'event',value:'save'}]}},{vars:{value:messages['user-tools-edit-cancel'],data:[{key:'event',value:'close'}]}}]}};uiModal.createComponent(renameItemConfig,function(renameItemModal){var $inputBox=renameItemModal.$content.find('.input-box');$inputBox.val($item.data('caption'));renameItemModal.bind('save',function(event){event.preventDefault();var value=$inputBox.val();$item.attr('data-caption',value);$item.find('.name').text(value);renameItemModal.trigger('close');});renameItemModal.show();});});return false;},deleteItem:function(event){$(event.currentTarget).closest('li').remove();this.tree.update();return false;},save:function(toolsConfigModal){var toolbar=this.tree.save();$.nirvana.sendRequest({controller:'UserTools',method:'ToolbarSave',data:{title:win.wgPageName,toolbar:toolbar,token:mw.user.tokens.get('editToken')},callback:$.proxy(function(data,status){this.afterSave(toolsConfigModal,data,status);},this)});},afterSave:function(toolsConfigModal,data,
status){toolsConfigModal.activate();if(status==='success'){$('body').trigger('userToolsItemAdded',[data.toolbar]);this.modal.trigger('close');}else{bannerNotification.setContent(status).show();}}});win.ToolbarCustomize=TC;return{ToolsCustomization:TC.Configuration};});;var WeppyImpl;(function(WeppyImpl){var protocolVersion=3,pathDelimiter='.',namespaceDelimiter='::',active=!1,options={"host":'/weppy',"transport":'url',"active":!0,"sample":0.01,"aggregationInterval":1000,"maxInterval":5000,"decimalPrecision":3,"page":'index',"context":{},"debug":!1},initTime=+(new Date),queue,aggregationTimeout,maxTimeout,sentPerformanceData,now=function(){return window.performance&&window.performance.now?window.performance.now():+(new Date);},log=function(){if(options.debug){if(typeof options.debug==='function'){options.debug.apply(window,arguments);}else{window.console&&window.console.log&&window.console.log.apply?window.console.log.apply(window.console,arguments):void 0;}}},logError=function(
){window.console&&window.console.error&&window.console.error.apply&&window.console.error.apply(window.console,arguments);};function round(num,precision){if(precision===void 0){precision=options.decimalPrecision;}return Math.round(num*Math.pow(10,precision))/Math.pow(10,precision);}function buildPath(path,subpath,glue){if(glue===void 0){glue=pathDelimiter;}return path+((path!=''&&subpath!='')?glue:'')+subpath;}function updateActive(){active=options.active&&Math.random()<options.sample;}function extend(first,second){var key;if(first&&second){for(key in second){if(second.hasOwnProperty(key)){first[key]=second[key];}}}return first||second;}function sortedJson(obj){var keys=Object.keys(obj).sort(),i,ret={};for(i=0;i<keys.length;i++){ret[keys[i]]=obj[keys[i]];}return JSON.stringify(ret);}(function(MetricType){MetricType[MetricType["Counter"]=0]="Counter";MetricType[MetricType["Gauge"]=1]="Gauge";MetricType[MetricType["Timer"]=2]="Timer";})(WeppyImpl.MetricType||(WeppyImpl.MetricType={}));var
MetricType=WeppyImpl.MetricType;var Queue=(function(){function Queue(){this.clear();}Queue.prototype.clear=function(){this.all={};this._empty=!0;};Queue.prototype.empty=function(){return this._empty;};Queue.prototype.add=function(name,value,rollingAverage,annotations){var data=this.find(name,annotations);if(rollingAverage){data.count=data.count||0;data.count++;data.value+=(value-data.value)/data.count;data.rollingAverage=!0;}else{data.value+=value;}this._empty=!1;};Queue.prototype.find=function(name,annotations){var serializedAnnotations=annotations?sortedJson(annotations):!1,scope=this.all[name]=this.all[name]||{},data;if(serializedAnnotations){scope=scope.annotated=scope.annotated||{};scope=scope[serializedAnnotations]=scope[serializedAnnotations]||{};}data=scope.data=scope.data||{value:0};return data;};Queue.prototype.get=function(){var measurements={},value,measurement,names,data,annotated,i,k;function addMeasurement(name,data,annotations){if(data){value=data.value;if(
data.rollingAverage){value=round(value);}measurement=[value];if(annotations){measurement.push(annotations);}measurements[name].push(measurement);}}names=Object.keys(this.all);for(i=0;i<names.length;i++){measurements[names[i]]=[];data=this.all[names[i]].data;annotated=this.all[names[i]].annotated;if(data){addMeasurement(names[i],data,null);}if(annotated){for(k in annotated){if(annotated.hasOwnProperty(k)){addMeasurement(names[i],annotated[k].data,JSON.parse(k));}}}}return measurements;};return Queue;})();queue=new Queue();function enqueue(type,name,value,annotations){var rollingAverage;if(!active){return;}rollingAverage=type!=0;queue.add(name,value,rollingAverage,annotations);scheduleSending();}function scheduleSending(){clearTimeout(aggregationTimeout);aggregationTimeout=setTimeout(sendQueue,options.aggregationInterval);if(!maxTimeout){maxTimeout=setTimeout(sendQueue,options.maxInterval);}}function clearSchedule(){clearTimeout(aggregationTimeout);clearTimeout(maxTimeout);
aggregationTimeout=null;maxTimeout=null;}function sendQueue(){var allMeasurements,allData;clearSchedule();if(queue.empty()){return;}if(!active){log("Weppy: would send queue but inactive");return;}if(!window.JSON||!JSON.stringify){queue.clear();return;}allMeasurements=queue.get();queue.clear();allData={context:options.context,data:allMeasurements};log('Weppy: sending',allData);sendData(allData);}function sendData(data){var url;if(typeof options.transport=='function'){options.transport(data);return;}url=options.host+'/v'+protocolVersion+'/send';if(options.transport=='url'){url+='?p='+encodeURIComponent(JSON.stringify(data));sendRequest(url,null);}else if(options.transport=='post'){sendRequest(url,JSON.stringify(data));}}function sendRequest(url,data){var corsSupport=window.XMLHttpRequest&&(XMLHttpRequest['defake']||(new XMLHttpRequest()).withCredentials),sameOrigin=!0,match,req,contentType;match=/^(https?:\/\/[^\/]+)/i.exec(url);if(match&&match[1]!=document.location.protocol+'//'+
document.location.host){sameOrigin=!1;}if(!sameOrigin&&!corsSupport&&window.XDomainRequest){req=new XDomainRequest();}else{req=new XMLHttpRequest();}contentType=data==null?'text/plain':'application/json';req.weppy=req.bucky={track:!1};req.open('POST',url,true);req.setRequestHeader('Content-Type',contentType);req.send(data);return req;}var Namespace=(function(){function Namespace(_root,_path){this._root=_root;this._path=_path;this.timer=new NamespaceTimer(this);}Namespace.prototype.namespace=function(root,path){return new Namespace(root,path||'');};Namespace.prototype.into=function(subpath){return new Namespace(this._root,buildPath(this._path,subpath));};Namespace.prototype.key=function(name){return buildPath(this._root,buildPath(this._path,name),namespaceDelimiter);};Namespace.prototype.send=function(type,name,value,annotations){name=this.key(name);enqueue(type,name,value,annotations);log('Weppy: queued',{type:MetricType[type],name:name,value:value,annotations:annotations});};
Namespace.prototype.count=function(name,value,annotations){if(value===void 0){value=1;}this.send(0,name,value,annotations);};Namespace.prototype.store=function(name,value,annotations){this.send(1,name,value,annotations);};Namespace.prototype.flush=function(){sendQueue();};Namespace.prototype.setOptions=function(opts){var key;for(key in opts){if(opts.hasOwnProperty(key)){options[key]=opts[key];}}if('sample'in opts||'active'in opts){updateActive();}};Namespace.prototype.sendPagePerformance=function(){var self,readyState,timing,start,key,time,data={},name;if(!window.performance||!window.performance.timing||sentPerformanceData){return false;}self=this;readyState=document.readyState;if(readyState=='uninitialized'||readyState=='loading'){if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){self.sendPagePerformance();},false);}return false;}sentPerformanceData=!0;timing=window.performance.timing;start=timing.navigationStart;for(key in timing){time=timing[key
];if(time&&typeof time=='number'){data[key]=(time-start);}}delete data['navigationStart'];name=options.page;self.namespace('PAGELOAD').timer.send(name,start,data);return true;};return Namespace;})();WeppyImpl.Namespace=Namespace;var NamespaceTimer=(function(){function NamespaceTimer(_namespace){this._namespace=_namespace;this.PARTIALS={};}NamespaceTimer.prototype.send=function(name,duration,annotations){this._namespace.send(2,name,duration,annotations);};NamespaceTimer.prototype.start=function(name,annotations){this.PARTIALS[name]=[now(),annotations];return new Timer(this,name);};NamespaceTimer.prototype.stop=function(name,annotations){var duration;if(!this.PARTIALS[name]){logError("Timer "+name+" ended without having been started");return;}duration=now()-this.PARTIALS[name][0];annotations=extend(annotations,this.PARTIALS[name][1]);this.PARTIALS[name]=!1;this.send(name,duration,annotations);};NamespaceTimer.prototype.annotate=function(name,annotations){if(!this.PARTIALS[name]){
logError("Timer "+name+" received annotation without having been started");return;}this.PARTIALS[name][1]=annotations;};NamespaceTimer.prototype.time=function(name,action,scope,args,annotations){var self=this,done=function(annotations){self.stop(name,annotations);};this.start(name,annotations);args=args?args.slice(0):[];args.splice(0,0,done);return action.apply(scope,args);};NamespaceTimer.prototype.timeSync=function(name,action,scope,args,annotations){var ret;this.start(name,annotations);ret=action.apply(scope,args);this.stop(name);return ret;};NamespaceTimer.prototype.wrap=function(name,action,scope,annotations){var _this=this;var self=this;return function(){return self.timeSync(name,action,scope||_this,arguments,annotations);};};NamespaceTimer.prototype.mark=function(name,annotations){this.send(name,now()-this.navigationStart(),annotations);};NamespaceTimer.prototype.navigationStart=function(){return(window.performance&&window.performance.timing&&window.performance.timing.
navigationStart)||initTime;};return NamespaceTimer;})();WeppyImpl.NamespaceTimer=NamespaceTimer;var Timer=(function(){function Timer(_timer,name){this._timer=_timer;this.name=name;}Timer.prototype.stop=function(annotations){this._timer.stop(this.name,annotations);};Timer.prototype.annotate=function(annotations){this._timer.annotate(this.name,annotations);};return Timer;})();WeppyImpl.Timer=Timer;function bindNamespaceFunction(fn,scope,callWrapNamespace){return callWrapNamespace?function(){return wrapNamespaceObject(fn.apply(scope,arguments));}:function(){return fn.apply(scope,arguments);};}function wrapNamespaceObject(obj){var weppyObject=(function(subpath){return subpath?weppyObject.into(subpath):weppyObject;}),k;for(k in obj){if(typeof obj[k]=='function'){weppyObject[k]=bindNamespaceFunction(obj[k],obj,k=='into'||k=='namespace');}else{weppyObject[k]=obj[k];}}return weppyObject;}function getRootObject(){return wrapNamespaceObject(new Namespace('',''));}WeppyImpl.getRootObject=
getRootObject;updateActive();})(WeppyImpl||(WeppyImpl={}));var Weppy=WeppyImpl.getRootObject();;(function(context){'use strict';context.Bucky=context.Weppy;if(context.define&&context.define.amd){context.define('bucky',[],function(){return context.Weppy;});context.define('weppy',[],function(){return context.Weppy;});}$(function(){var config=$.extend({},context.wgWeppyConfig,{'context':context.wgTransactionContext});Weppy.setOptions(config);$(context).on('load',function(){setTimeout(function(){Weppy.sendPagePerformance();},0);});});})(window);;define('bucky.resourceTiming',['jquery','wikia.window','wikia.log','bucky'],function($,window,log,bucky){'use strict';var assetIdx=0,wikiaAssetRegex=/^https?:\/\/([^\/]+)(\.wikia-dev\.(us|pl|com)|\.wikia\.com|\.wikia\.nocookie\.net)\//;function isSupported(){return('performance'in window)&&(typeof window.performance.getEntriesByType==='function');}function isWikiaAsset(url){return wikiaAssetRegex.test(url);}function getDomain(url){var matches=url.
match(/\/\/([^/]+)/);return!!matches&&matches[1].split('.').slice(-2).join('.');}function debug(msg,data){log(msg+': '+JSON.stringify(data),log.levels.debug,'ResourceTiming');}function getResourcesStats(resources){var dnsTime,domain,len,res,stats={};function initStatsEntry(type){stats[type]={count:0,time:0};}function initStatsEntryIfEmpty(type){if(typeof stats[type]==='undefined'){initStatsEntry(type);}}function addStatsEntry(type,time){if(typeof stats[type]!=='undefined'){stats[type].count++;stats[type].time+=time;}}['total','cached','dns','dns-cached','3rdparty','css','link','iframe','img','script','xmlhttprequest'].map(function(item){initStatsEntry(item);});for(len=resources.length;assetIdx<len;assetIdx++){res=resources[assetIdx];if(isWikiaAsset(res.name)){addStatsEntry(res.initiatorType,res.duration);dnsTime=res.domainLookupStart?res.domainLookupEnd-res.domainLookupStart:!1;if(dnsTime!==false){if(dnsTime===0){addStatsEntry('dns-cached',dnsTime);}else{addStatsEntry('dns',dnsTime)
;}debug('DNS',{dnsTime:dnsTime,url:res.name});}if(res.duration===0){addStatsEntry('cached',0);}}else{addStatsEntry('3rdparty',res.duration);domain=getDomain(res.name);if(domain){debug(domain,res.duration);initStatsEntryIfEmpty('domain-'+domain);addStatsEntry('domain-'+domain,res.duration);}}addStatsEntry('total',res.duration);}return stats;}function reportToBucky(eventName){var key,value,subkey,sink,stats;stats=getResourcesStats(window.performance.getEntriesByType('resource')||[]);sink=bucky('resource_timing::'+eventName);debug('Sending stats',eventName);sink.flush();for(key in stats){for(subkey in stats[key]){value=Math.round(stats[key][subkey]);if(value>=0){sink.store(key+'.'+subkey,value);debug(key+'.'+subkey,value);}}}}return{isSupported:isSupported,isWikiaAsset:isWikiaAsset,getDomain:getDomain,reportToBucky:reportToBucky};});;require(['jquery','wikia.geo','wikia.window','bucky.resourceTiming'],function($,geo,window,resourceTiming){'use strict';$(function(){var wgTransactionContext
=window.wgTransactionContext||{};wgTransactionContext.country=geo.getCountryCode();wgTransactionContext.url=window.location.href.split('#')[0];wgTransactionContext.userAgent=window.navigator.userAgent;wgTransactionContext.os=window.navigator.platform;wgTransactionContext.bodySize=document.getElementsByTagName('body')[0].innerHTML.length;});if(!resourceTiming.isSupported()){return;}$(function(){resourceTiming.reportToBucky('DomReady');});$(window).on('load',function(){resourceTiming.reportToBucky('WindowLoad');setTimeout(function(){resourceTiming.reportToBucky('AfterWindowLoad');},5000);});});;define('wikia.scrollToLink',['wikia.window','wikia.querystring','wikia.history','jquery'],function(win,qs,hist,$){'use strict';function getOffsetTop(element){var offsetTop=$(element).offset().top;return offsetTop|0;}function scrollToElement(element,offsetToScroll){var targetOffset=getOffsetTop(element);win.setTimeout(function(){win.scrollTo(win.pageXOffset,targetOffset+offsetToScroll);},1);}
function handleScrollTo(href,offsetToScroll){offsetToScroll=offsetToScroll||0;var sanitizedHref=qs().sanitizeHref(href),doc=win.document,target;if(!!sanitizedHref){target=doc.getElementById(sanitizedHref);if(!!target){scrollToElement(target,offsetToScroll);return hist.pushState({},doc.title,win.location.pathname+'#'+sanitizedHref);}}return false;}return{handleScrollTo:handleScrollTo,scrollToElement:scrollToElement};});;$(function($){'use strict';var globalNavigationTracker=Wikia.Tracker.buildTrackingFunction({action:Wikia.Tracker.ACTIONS.CLICK,category:'navigation',trackingMethod:'analytics'}),globalFooterTracker=Wikia.Tracker.buildTrackingFunction({action:Wikia.Tracker.ACTIONS.CLICK,category:'footer',trackingMethod:'analytics'});function addTrackingToSelector(selector,tracker){$(selector).click(function(event){var label=$(event.target).closest('a, button').data('tracking-label')||!1;if(label!==false){tracker({label:label});}});}addTrackingToSelector('.wds-global-navigation',
globalNavigationTracker);addTrackingToSelector('.wds-global-footer',globalFooterTracker);});;$(function($){'use strict';var className='is-clicked',dropdownsSelector='.wds-dropdown, .wds-dropdown-level-2';if(window.Wikia.isTouchScreen()){$('body').on('click',dropdownsSelector,function(event){if(!$(this).hasClass(className)){event.preventDefault();}}).on('mouseenter',dropdownsSelector,function(){var $this=$(this);setTimeout(function(){$this.addClass(className);},0);}).on('mouseleave',dropdownsSelector,function(){$(this).removeClass(className);});}});;require(['wikia.scrollToLink','wikia.window','jquery','wikia.browserDetect'],function(scrollToLink,win,$,browserDetect){'use strict';var offset=0;function scrollToAnchor(event){if(scrollToLink.handleScrollTo(win.location.hash,offset)||browserDetect.isIOS7orLower()){event.preventDefault();return false;}}win.GlobalNavigationScrollToElement=function(element){scrollToLink.scrollToElement(element,offset);};$(function(){var $win=$(win),
spacingBelowGlobalNav=10,globalNavigationHeight=$('#globalNavigation').outerHeight(true);offset=-(globalNavigationHeight+spacingBelowGlobalNav);$win.on('hashchange load',scrollToAnchor);});});;$(function($){'use strict';function onAuthSuccess(){var redirect=this.url.replace(/.*?redirect=([^&]+).*/,'$1');window.location.href=decodeURIComponent(redirect);}$('#global-navigation-anon-sign-in, #global-navigation-anon-register').click(function(event){var url=event.currentTarget.href;if(event.which!==1||event.shiftKey||event.altKey||event.metaKey||event.ctrlKey){return;}event.preventDefault();$(event.currentTarget).closest('.wds-dropdown').removeClass('wds-is-active');window.wikiaAuthModal.load({url:url,origin:'global-nav',onAuthSuccess:onAuthSuccess.bind({url:url})});});});;$(function($){'use strict';var $globalNav=$('.wds-global-navigation'),$searchInput=$globalNav.find('.wds-global-navigation__search-input'),$searchSubmit=$globalNav.find('.wds-global-navigation__search-submit'),
placeholderText=$searchInput.attr('placeholder'),activeSearchClass='wds-search-is-active';function activateSearch(){if(!$globalNav.hasClass(activeSearchClass)){$globalNav.addClass(activeSearchClass);$searchInput.attr('placeholder',$searchInput.data('active-placeholder'));$(this).click();}}function deactivateSearch(){$searchSubmit.prop('disabled',true);$globalNav.removeClass(activeSearchClass);$searchInput.attr('placeholder',placeholderText).val('');}$searchInput.on('focus',activateSearch);$searchInput.on('input',function(){var textLength=this.value.length;if(textLength>0&&$searchSubmit.prop('disabled')){$searchSubmit.prop('disabled',false);}else if(textLength===0){$searchSubmit.prop('disabled',true);}});$searchInput.on('keydown',function(event){if(event.which===27){this.blur();deactivateSearch();}});$globalNav.find('.wds-global-navigation__search-close').on('click',deactivateSearch);if($searchInput.is(':focus')){activateSearch();}if($searchInput.val().length===0){$searchSubmit.prop(
'disabled',true);}});;$(function(){'use strict';var $searchInput=$('#searchInput'),$searchInputWrapper=$('#searchInputWrapper'),searchSuggestionsUrl=$searchInput.data('suggestions-url');function initSuggestions(){mw.loader.using('jquery.autocomplete').then(function(){var autocompleteReEscape=new RegExp('(\\'+['/','.','*','+','?','|','(',')','[',']','{','}','\\'].join('|\\')+')','g');$searchInput.on({suggestShow:function(){$searchInputWrapper.addClass('wds-is-active');},suggestHide:function(){$searchInputWrapper.removeClass('wds-is-active');}}).autocomplete({serviceUrl:searchSuggestionsUrl,queryParamName:$searchInput.data('suggestions-param-name'),appendTo:'.wds-global-navigation__search-input-wrapper',deferRequestBy:200,minLength:3,maxHeight:1000,onSelect:function(value,data,event){var valueEncoded=encodeURIComponent(value.replace(/ /g,'_')),location=window.wgArticlePath.replace(/\$1/,valueEncoded).replace(encodeURIComponent('/'),'/');window.Wikia.Tracker.track({eventName:
'search_start_suggest',sterm:valueEncoded,rver:0,trackingMethod:'internal'});if(event.button===1||event.metaKey||event.ctrlKey){window.open(location);return false;}else{window.Wikia.Tracker.track({action:Wikia.Tracker.ACTIONS.CLICK,category:'navigation',trackingMethod:'analytics',label:$searchInput.data('suggestions-tracking-label')});window.location.href=location;}},selectedClass:'wds-is-selected',skipBadQueries:!0,setPosition:!1,suggestionWrapperElement:'li',fnContainerMarkup:function(mainContainerId,autocompleteElId){return'<div id="'+mainContainerId+'" class="wds-dropdown__content wds-global-navigation__search-suggestions">'+'<ul id="'+autocompleteElId+'" class="wds-list wds-has-ellipsis wds-is-linked"></ul>'+'</div>';},fnFormatResult:function(value,data,currentValue){var pattern='('+currentValue.replace(autocompleteReEscape,'\\$1')+')';return'<a class="wds-global-navigation__dropdown-link">'+value.replace(new RegExp(pattern,'gi'),'<strong>$1<\/strong>')+'</a>';}});});}if(
searchSuggestionsUrl){$searchInput.one('focus',initSuggestions);if($searchInput.is(':focus')){initSuggestions();}}});;(function(exports){'use strict';var factory=function($){function Ellipses($el,opts){this.$el=$el;if(opts){$.extend(this.settings,opts);}this.cleanUp();this.render();}Ellipses.prototype={settings:{marginLeft:-3,maxLines:2,wordsHidden:1},cleanUp:function(){this.$el.find('.ellipses').remove();},render:function(){var oText=this.$el.text(),words=oText.split(' '),len=words.length,i,$spans,lineCount=0,maxLines=this.settings.maxLines,$tar,spanTop=null,currSpanTop,self;self=this;for(i=0;i<len;i++){words[i]='<span>'+words[i]+'</span>';}this.$el.html(words.join(' '));$spans=this.$el.find('span');for(i=0;i<$spans.length;i++){$tar=$($spans[i]);currSpanTop=$tar.offset().top;if(spanTop===null){spanTop=currSpanTop;}else if(lineCount===maxLines){$tar.hide();}else{if(spanTop!==currSpanTop){lineCount+=1;spanTop=currSpanTop;}if(lineCount===maxLines){$tar.hide().prevUntil(':nth-child( '+(i-
self.settings.wordsHidden)+' )').hide().eq(0).before('<span class="ellipses" style="">...</span>');self.trim();}}}},trim:function(){var $ellipses,$prev;$ellipses=this.$el.find('.ellipses');$prev=$ellipses.prev('span');$ellipses.css({marginLeft:this.settings.marginLeft});if($prev.text()==='-'){$prev.hide();}}};$.fn.ellipses=function(opts){return this.each(function(){var $this=$(this);$this.data('ellipses',new Ellipses($this,opts));});};};factory(exports.jQuery);})(this);;var CreatePage={pageLayout:null,options:{},loading:!1,context:null,wgArticlePath:mw.config.get('wgArticlePath'),redlinkParam:'',flowName:'',canUseVisualEditor:function(){return mw.libs&&mw.libs.ve?mw.libs.ve.canCreatePageUsingVE():!1;},checkTitle:function(title,trackingCategory){'use strict';$.getJSON(CreatePage.context.wgScript,{action:'ajax',rs:'wfCreatePageAjaxCheckTitle',title:title},function(response){var articlePath;var flowParam=(CreatePage.flowName==='')?'':'&flow='+CreatePage.flowName;if(response.result
==='ok'){CreatePage.track({category:trackingCategory,action:Wikia.Tracker.ACTIONS.SUCCESS,label:'open-editor'});if(CreatePage.canUseVisualEditor()&&mw.libs.ve.isInValidNamespace(title)){articlePath=CreatePage.wgArticlePath.replace('$1',encodeURIComponent(title));location.href=articlePath+'?veaction=edit'+CreatePage.redlinkParam+flowParam;}else{location.href=CreatePage.options[CreatePage.canUseVisualEditor()?'blank':CreatePage.pageLayout].submitUrl.replace('$1',encodeURIComponent(title))+CreatePage.redlinkParam+flowParam;}CreatePage.flowName='';}else{CreatePage.track({category:trackingCategory,action:Wikia.Tracker.ACTIONS.ERROR,label:response.error});CreatePage.displayError(response.msg,trackingCategory);}});},requestDialog:function(e,titleText){'use strict';var rs,dialogCallback;if(Boolean(window.WikiaEnableNewCreatepage)===false){return;}if(e&&e.which===2){return;}if(e&&e.preventDefault){e.preventDefault();}if(CreatePage.canUseVisualEditor()&&$(e.target).hasClass('createboxButton')){
CreatePage.checkTitle(titleText);return;}if(false===CreatePage.loading){CreatePage.loading=!0;if(CreatePage.canUseVisualEditor()&&titleText){rs='wfCreatePageAjaxGetVEDialog';dialogCallback=CreatePage.openVEDialog;}else{rs='wfCreatePageAjaxGetDialog';dialogCallback=CreatePage.openDialog;}$.getJSON(CreatePage.context.wgScript,{action:'ajax',rs:rs,article:titleText},dialogCallback);}},openVEDialog:function(data){var trackingCategory='redlink-page-create-title-modal';require(['wikia.ui.factory'],function(uiFactory){uiFactory.init(['modal']).then(function(uiModal){var createPageModalConfig={vars:{id:'CreatePageModalDialog',size:'small',title:data.title,content:data.html,classes:['modalContent'],buttons:[{vars:{value:data.addPageLabel,classes:['normal','primary'],data:[{key:'event',value:'create'}]}},{vars:{value:data.cancelLabel,classes:['normal','secondary'],data:[{key:'event',value:'cancel'}]}}]}};uiModal.createComponent(createPageModalConfig,function(createPageModal){CreatePage.track({
category:trackingCategory,action:Wikia.Tracker.ACTIONS.IMPRESSION,label:'modal'});createPageModal.bind('create',function(){CreatePage.submitDialog(trackingCategory);});createPageModal.bind('cancel',function(event){event.stopPropagation();CreatePage.track({category:trackingCategory,action:Wikia.Tracker.ACTIONS.CLICK,label:'cancel'});createPageModal.trigger('close');});createPageModal.$blackout.add(createPageModal.$close).on('click',function(event){if(event.target===event.delegateTarget){CreatePage.track({category:trackingCategory,action:Wikia.Tracker.ACTIONS.CLOSE,label:'close'});}});CreatePage.loading=!1;createPageModal.show();});});});},openDialog:function(data){var trackingCategory='page-create-title-modal';require(['wikia.ui.factory'],function(uiFactory){uiFactory.init(['modal']).then(function(uiModal){var createPageModalConfig={vars:{id:'CreatePageModalDialog',size:'medium',title:data.title,content:data.html,classes:['modalContent'],buttons:[{vars:{value:data.addPageLabel,
classes:['normal','primary'],data:[{key:'event',value:'create'}]}}]}};uiModal.createComponent(createPageModalConfig,function(createPageModal){var idToken,elm,onElementClick,name,titleText,inputChangeTracked=!1,redLinks;CreatePage.track({category:trackingCategory,action:Wikia.Tracker.ACTIONS.IMPRESSION,label:'modal'});redLinks=createPageModal.$element.find('.create-page-dialog__proposals .new');if(redLinks.length){CreatePage.track({category:'page-create-title-modal',action:Wikia.Tracker.ACTIONS.IMPRESSION,label:'redlinks'});redLinks.on('click',function(){CreatePage.track({category:'page-create-title-modal',action:Wikia.Tracker.ACTIONS.CLICK,label:'redlink'});});}createPageModal.bind('create',function(event){event.preventDefault();inputChangeTracked=!1;CreatePage.submitDialog(trackingCategory);});createPageModal.bind('cancel',function(event){event.stopPropagation();CreatePage.track({category:trackingCategory,action:Wikia.Tracker.ACTIONS.CLICK,label:'cancel'});createPageModal.
trigger('close');});onElementClick=function(){CreatePage.setPageLayout($(this).data('optionName'));};for(name in CreatePage.options){idToken=name.charAt(0).toUpperCase()+name.substring(1);elm=$('#CreatePageDialog'+idToken+'Container');elm.data('optionName',name);elm.click(onElementClick);}titleText=data.article;if(typeof titleText==='number'){titleText=titleText.toString();}if(titleText){$('#wpCreatePageDialogTitle').val(decodeURIComponent(titleText));}CreatePage.setPageLayout(data.defaultOption);$('#wpCreatePageDialogTitle').focus().on('change type keypress',function(){if(!inputChangeTracked){inputChangeTracked=!0;CreatePage.track({category:trackingCategory,action:Wikia.Tracker.ACTIONS.KEYPRESS,label:'title'});}});if(CreatePage.canUseVisualEditor()){$('#CreatePageDialogChoose, #CreatePageDialogChoices').hide();}CreatePage.loading=!1;createPageModal.show();});});});},submitDialog:function(trackingCategory){'use strict';CreatePage.track({category:trackingCategory,action:Wikia.
Tracker.ACTIONS.SUBMIT,label:'submit'});CreatePage.checkTitle($('#wpCreatePageDialogTitle').val(),trackingCategory);},displayError:function(errorMsg,trackingCategory){'use strict';var box=$('#CreatePageDialogTitleErrorMsg');box.html('<span id="createPageErrorMsg">'+errorMsg+'</span>');box.find('a').click(function(){CreatePage.track({category:trackingCategory,action:Wikia.Tracker.ACTIONS.CLICK,label:'conflict-link'});});box.removeClass('hiddenStructure');},setPageLayout:function(layout){'use strict';CreatePage.pageLayout=layout;var idToken=layout.charAt(0).toUpperCase()+layout.substring(1);$('#CreatePageDialog'+idToken).attr('checked','checked');$('#CreatePageDialogChoices').children('li').removeClass('accent');$('#CreatePageDialog'+idToken+'Container').addClass('accent');},getTitleFromUrl:function(url){'use strict';var uri=new mw.Uri(url);return uri.path.replace(CreatePage.wgArticlePath.replace('$1',''),'').replace(/_/g,' ');},redLinkClick:function(e,titleText){'use strict';var title=
new mw.Title.newFromText(decodeURIComponent(titleText)),namespace=title.getNamespacePrefix().replace(':',''),visualEditorActive=$('html').hasClass('ve-activated'),redLinkFlowName=CreatePage.getRedLinkFlowName();CreatePage.redlinkParam='&redlink=1';CreatePage.flowName=redLinkFlowName;if(CreatePage.canUseVisualEditor()){CreatePage.track({category:'article',action:Wikia.Tracker.ACTIONS.CLICK,label:'ve-redlink-click'});}if(visualEditorActive||mw.config.get('wgNamespaceIds')[namespace.toLowerCase()]&&window.ContentNamespacesText&&window.ContentNamespacesText.indexOf(title[0])===-1){return false;}else{CreatePage.requestDialog(e,titleText);}},init:function(context){'use strict';CreatePage.context=context;$('.createpage').click(function(){CreatePage.trackCreatePageStart(window.wgFlowTrackingFlows.CREATE_PAGE_CONTRIBUTE_BUTTON);CreatePage.flowName=window.wgFlowTrackingFlows.CREATE_PAGE_CONTRIBUTE_BUTTON;});if(window.WikiaEnableNewCreatepage){$().log('init','CreatePage');if(!window.
WikiaDisableDynamicLinkCreatePagePopup){$('#dynamic-links-write-article-link, #dynamic-links-write-article-icon').click(function(e){CreatePage.requestDialog(e,null);});$('.noarticletext a[href*="redlink=1"]').click(function(e){CreatePage.requestDialog(e,CreatePage.context.wgPageName);return false;});}$('.createpage').click(CreatePage.requestDialog);var addRecipeTab=$('#add_recipe_tab'),addRecipeLink;if(addRecipeTab.exists()){addRecipeLink=addRecipeTab.find('a');if(addRecipeLink.attr('href').match(/CreatePage$/)){addRecipeLink.click(CreatePage.requestDialog);}}$('#WikiaArticle').on('click','a.new',function(e){CreatePage.redLinkClick(e,CreatePage.getTitleFromUrl(this.href));});$('.createboxButton').bind('click',function(e){var form=$(e.target).parent(),prefix,field,preloadField;if(form.attr('class')==='createboxForm'){prefix=form.children('input[name=\'prefix\']').val()||'';field=form.children('.createboxInput');preloadField=form.children('input[name=\'preload\']');if((typeof preloadField
.val()==='undefined')||(preloadField.val()==='')){CreatePage.flowName=window.wgFlowTrackingFlows.CREATE_PAGE_CREATE_BOX;CreatePage.requestDialog(e,prefix+field.val());}else{return true;}}});}},getRedLinkFlowName:function(){return mw.config.get('wgNamespaceNumber')===-1?window.wgFlowTrackingFlows.CREATE_PAGE_SPECIAL_REDLINK:window.wgFlowTrackingFlows.CREATE_PAGE_ARTICLE_REDLINK;},trackCreatePageStart:function(flowName){require(['wikia.flowTracking'],function(flowTrack){flowTrack.beginFlow(flowName,{});});},track:function(data){var defaultData;if(Wikia.Tracker&&data.category){defaultData={trackingMethod:'analytics'};$.extend(defaultData,data);Wikia.Tracker.track(defaultData);}}};jQuery(function(){'use strict';CreatePage.init(window);});;define('wikia.videoBootstrap',['wikia.loader','wikia.nirvana','wikia.log','wikia.tracker'],function videoBootstrap(loader,nirvana,log,tracker){'use strict';var trackingTimeout=0;function VideoBootstrap(element,json,clickSource){var self=this,init=json.
init,html=json.html,scripts=json.scripts,jsParams=json.jsParams;this.element=element;this.clickSource=clickSource;this.title=json.title;this.provider=json.provider;this.width=json.width;this.height=json.height;function insertHtml(){if(html&&!json.htmlPreloaded){element.innerHTML=html;}}function loadFromScriptsCallback(){insertHtml();if(init){require([init],function(init){self.clearTimeoutTrack();init(jsParams,self);});}}function loadFromScripts(){var i,args=[];for(i=0;i<scripts.length;i++){args.push({type:loader.JS,resources:scripts[i]});}loader.apply(loader,args).done(loadFromScriptsCallback);}if(scripts){loadFromScripts();}else{insertHtml();}if(!init){self.timeoutTrack();}}VideoBootstrap.prototype={reload:function(title,width,autoplay,clickSource){var element=this.element,fileTitle=title||this.title,fileClickSource=clickSource||this.clickSource,fileWidth=width||this.width;this.clearTimeoutTrack();nirvana.getJson('VideoHandler','getEmbedCode',{fileTitle:fileTitle,width:fileWidth,
autoplay:autoplay?1:0}).done(function(data){return new VideoBootstrap(element,data.embedCode,fileClickSource);});},track:function(action){log('tracking '+action,3,'VideoBootstrap');tracker.track({action:action,category:'video-player-stats',label:this.provider,trackingMethod:'analytics',value:0},{title:this.title,clickSource:this.clickSource});},timeoutTrack:function(){var self=this;this.clearTimeoutTrack();trackingTimeout=setTimeout(function(){self.track('content-begin');},3000);},clearTimeoutTrack:function(){log('clearing tracking timeout',3,'VideoBootstrap');clearTimeout(trackingTimeout);},timeStampId:function(id){var container=document.getElementById(id),newId=id+'-'+new Date().getTime();if(container){container.id=newId;}return newId;},destroy:function(){this.element.innerHTML='';}};return VideoBootstrap;});;(function(window,$){'use strict';var LightboxLoader,LightboxTracker,bucky;LightboxLoader={cache:{articleMedia:[],wikiPhotos:[],videosModule:[],details:{},share:{},to:0},
inlineVideoLinks:$(),lightboxLoading:!1,inlineVideoLoading:[],videoInstance:null,pageAds:$('#TOP_RIGHT_BOXAD'),reloadOnClose:!1,lightboxSettings:{id:'LightboxModal',className:'LightboxModal',width:970,noHeadline:!0,topOffset:25,height:628,videoHeight:360,onClose:function(){$(window).off('.Lightbox');Lightbox.openModal.find('.video-media').children().remove();LightboxLoader.lightboxLoading=!1;Lightbox.updateUrlState(true);Lightbox.current.thumbs=[];Lightbox.current.thumbTypesAdded=[];Lightbox.to=LightboxLoader.cache.to;LightboxLoader.pageAds.css('visibility','visible');Lightbox.clearTrackingTimeouts();if(LightboxLoader.videoInstance){LightboxLoader.videoInstance.clearTimeoutTrack();}if(LightboxLoader.reloadOnClose){window.location.reload();}}},videoThumbWidthThreshold:400,init:function(customSettings){var self=this,$article,$comments,$footer,$videosModule,$videoHomePage,$recommendations;bucky=window.Bucky('LightboxLoader');bucky.timer.start('init');$article=$('#WikiaArticle')
;$comments=$('#WikiaArticleComments');$footer=$('#WikiaArticleFooter');$videosModule=$('.videos-module-rail');$videoHomePage=$('#latest-videos-wrapper');$recommendations=$('#recommendations');$.extend(self.lightboxSettings,customSettings);$article.add($footer).add($videosModule).add($recommendations).off('.lightbox').on('click.lightbox','.lightbox, a.image',function(e){var $this=$(this),$thumb=$this.find('img').first(),fileKey=$thumb.attr('data-image-key')||$thumb.attr('data-video-key'),$parent,isVideo,trackingInfo,$slideshowImg,clickSource;if(!LightboxLoader.hasLightbox($this,$thumb,e)){return;}e.preventDefault();if($this.closest($videoHomePage).length){$parent=$videoHomePage;}else if($this.closest($article).length){$parent=$article;}else if($this.closest($comments).length){$parent=$comments;}else if($this.closest($recommendations).length){$parent=$recommendations;}else if($this.closest('#videosModule').length){$parent=$('#videosModule');}trackingInfo={target:$this,parent:$parent};if(
$this.hasClass('wikia-slideshow-popout')){$slideshowImg=$this.parents('.wikia-slideshow-toolbar').siblings('.wikia-slideshow-images-wrapper').find('li:visible').find('img').first();fileKey=$slideshowImg.attr('data-image-name')||$slideshowImg.attr('data-video-name');}if(!fileKey){fileKey=$this.attr('data-image-name')||$this.attr('data-video-name');fileKey=fileKey?fileKey.replace(/ /g,'_'):fileKey;}if(!fileKey){Wikia.log('No file key found on this image or video',3,'LightboxLoader');return;}isVideo=$this.children('.thumbnail-play-icon-container').length;if(isVideo&&$thumb.width()>=self.videoThumbWidthThreshold&&!$this.hasClass('force-lightbox')){clickSource=window.wgWikiaHubType?LightboxTracker.clickSource.HUBS:LightboxTracker.clickSource.EMBED;LightboxLoader.displayInlineVideo($this,$thumb,fileKey,clickSource);return;}self.loadLightbox(fileKey,trackingInfo);});$article.off('.slideshowLightbox').on('click.slideshowLightbox',
'.wikia-slideshow-images .thumbimage, .wikia-slideshow-images .wikia-slideshow-image',function(e){var $this=$(this);if(LightboxLoader.hasLightbox($this,null,e)){e.preventDefault();$this.closest('.wikia-slideshow-wrapper').find('.wikia-slideshow-popout').click();}});bucky.timer.stop('init');setTimeout(LightboxLoader.loadFromURL,0);},loadLightbox:function(mediaTitle,trackingInfo){var openModal,lightboxParams,deferredList,resources,deferredTemplate;bucky.timer.start('loadLightbox');LightboxLoader.removeInlineVideos();LightboxLoader.lightboxLoading=!0;LightboxLoader.pageAds.css('visibility','hidden');openModal=$('<div>').makeModal(LightboxLoader.lightboxSettings);openModal.find('.modalContent').startThrobbing();lightboxParams={key:mediaTitle,modal:openModal};$.extend(lightboxParams,trackingInfo);deferredList=[];if(!LightboxLoader.assetsLoaded){deferredList.push($.loadMustache());resources=[$.getSassCommonURL('/extensions/wikia/Lightbox/styles/Lightbox.scss'),window.wgExtensionsPath+
'/wikia/Lightbox/scripts/Lightbox.js'];deferredList.push($.getResources(resources));deferredTemplate=$.Deferred();$.nirvana.sendRequest({controller:'Lightbox',method:'lightboxModalContent',type:'GET',format:'html',data:{lightboxVersion:window.wgStyleVersion,userLang:window.wgUserLanguage},callback:function(html){LightboxLoader.templateHtml=html;deferredTemplate.resolve();}});deferredList.push(deferredTemplate);}deferredList.push(LightboxLoader.getMediaDetailDeferred({fileTitle:mediaTitle}));$.when.apply(this,deferredList).done(function(){LightboxLoader.assetsLoaded=!0;Lightbox.initialFileDetail=arguments[arguments.length-1];Lightbox.makeLightbox(lightboxParams);bucky.timer.stop('loadLightbox');});},displayInlineVideo:function(target,targetChildImg,mediaTitle,clickSource){var self=this;if($.inArray(mediaTitle,LightboxLoader.inlineVideoLoading)>-1){return;}LightboxLoader.inlineVideoLoading.push(mediaTitle);LightboxLoader.getMediaDetail({fileTitle:mediaTitle,isInline:!0,height:
targetChildImg.height(),width:targetChildImg.width()},function(json){var embedCode=json.videoEmbedCode,inlineDiv=$('<div class="inline-video"></div>').insertAfter(target.hide()),videoIndex;target.closest('.article-thumb').addClass('inline-video-playing');require(['wikia.videoBootstrap'],function(VideoBootstrap){self.videoInstance=new VideoBootstrap(inlineDiv[0],embedCode,clickSource);});LightboxLoader.inlineVideoLinks=target.add(LightboxLoader.inlineVideoLinks);LightboxTracker.inlineVideoTrackingTimeout=setTimeout(function(){LightboxTracker.track(Wikia.Tracker.ACTIONS.VIEW,'video-inline',null,{title:json.title,provider:json.providerName,clickSource:clickSource});},1000);videoIndex=$.inArray(mediaTitle,LightboxLoader.inlineVideoLoading);LightboxLoader.inlineVideoLoading.splice(videoIndex,1);},true);},removeInlineVideos:function(){clearTimeout(LightboxTracker.inlineVideoTrackingTimeout);LightboxLoader.inlineVideoLinks.show().parent().removeClass('inline-video-playing').end().next().
remove();},getMediaDetail:function(mediaParams,callback,nocache){var title=mediaParams.fileTitle;if(!nocache&&LightboxLoader.cache.details[title]){callback(LightboxLoader.cache.details[title]);}else{bucky.timer.start('getMediaDetail.request');$.nirvana.sendRequest({controller:'Lightbox',method:'getMediaDetail',type:'get',format:'json',data:mediaParams,callback:function(json){bucky.timer.stop('getMediaDetail.request');if(!nocache){LightboxLoader.cache.details[title]=json;}callback(json);}});}},getMediaDetailDeferred:function(mediaParams){var deferred=$.Deferred();LightboxLoader.getMediaDetail(mediaParams,function(json){deferred.resolve(json);});return deferred;},loadFromURL:function(){var fileTitle=window.Wikia.Querystring().getVal('file'),openModal=$('#LightboxModal'),trackingInfo;if(fileTitle){if(openModal.length){LightboxLoader.getMediaDetail({fileTitle:fileTitle},function(data){Lightbox.current.key=data.title.replace(/ /g,'_');Lightbox.current.type=data.mediaType;Lightbox.
setCarouselIndex();Lightbox.openModal.carousel.find('li').eq(Lightbox.current.index).click();});}else{trackingInfo={parent:$('#WikiaArticle'),clickSource:LightboxTracker.clickSource.SHARE};LightboxLoader.loadLightbox(fileTitle,trackingInfo);}}else{if(openModal.length){openModal.closeModal();}}},hasLightbox:function($link,$thumb,event){var modalPadding=40;return!($(window).width()<LightboxLoader.lightboxSettings.width+modalPadding||$link.hasClass('link-internal')||$link.hasClass('link-external')||$thumb&&$thumb.attr('data-shared-help')||$link.hasClass('no-lightbox')||event.metaKey||event.ctrlKey);}};LightboxTracker={inlineVideoTrackingTimeout:0,track:function(action,label,value,data){Wikia.Tracker.track({action:action,category:'lightbox',label:label||'',trackingMethod:'analytics',value:value||0},data);},clickSource:{EMBED:'embed',SEARCH:'search',SV:'specialVideos',LB:'lightbox',SHARE:'share',HUBS:'hubs',OTHER:'other',VIDEOS_MODULE_RAIL:'railVideosModule',VIDEO_HOME_PAGE:'videoHomePage'}
};$(function(){if(window.wgEnableLightboxExt){LightboxLoader.init();}});window.LightboxLoader=LightboxLoader;window.LightboxTracker=LightboxTracker;})(window,jQuery);;define('wikia.ImgLzy',['jquery','wikia.window'],function($,window){'use strict';var ImgLzy;ImgLzy={prefetchDistance:700,loadQueue:[],init:function(){var proxy=this.onScroll.bind(this),throttled=$.throttle(250,proxy);this.loadQueue=Array.prototype.slice.call(document.querySelectorAll('img.lzy'));this.onScroll();$(window).on('scroll',throttled);document.addEventListener('tablesorter_sortComplete',proxy);},load:function(image){var dataSrc=image.getAttribute('data-src');image.onload=function(){};if(dataSrc){image.src=dataSrc;}image.classList.remove('lzy','lzyPlcHld');},isVisibleInViewport:function(element){if(!element.offsetParent){return false;}var boundingClientRect=element.getBoundingClientRect();return boundingClientRect.top-this.prefetchDistance<window.innerHeight&&boundingClientRect.bottom+this.prefetchDistance>0;},
onScroll:function(){var self=this;this.loadQueue=this.loadQueue.filter(function(image){if(!self.isVisibleInViewport(image)){return true;}image.onload=self.onImageLoaded;var dataSrc=image.getAttribute('data-src');if(dataSrc){image.src=dataSrc;}image.classList.add('lzyTrns');image.classList.remove('lzy');return false;});},onImageLoaded:function(){this.classList.add('lzyLoaded');}};return ImgLzy;});;require(['jquery','wikia.ImgLzy','wikia.browserDetect'],function($,ImgLzy,browserDetect){'use strict';window.ImgLzy=ImgLzy;$(function(){ImgLzy.init();if(browserDetect.isIPad()){window.addEventListener('pageshow',function(){window.setTimeout(ImgLzy.onScroll.bind(ImgLzy),0);});}});});;(function(window,$,undefined){if(window.wgIsEditPage){return;}var MiniEditor={assetsLoaded:!1,loadingAssets:!1,wrapperSelector:'.MiniEditorWrapper',initTime:0,initTimer:null,loadTime:0,loadTimer:null,ckeditorEnabled:!1,editorSuite:'mweditorsuite',editorIsLoading:!1,config:{animations:{},isMiniEditor:
!0,mode:'source',toolbars:{tabs:[],toolbar:['FormatMiniEditorSource','InsertMiniEditor'],rail:[]}},plugins:['MiniEditor','loadingstatus'],configure:function(){if(!this.assetsLoaded){return;}if(typeof RTE!='undefined'){this.ckeditorEnabled=!0;this.editorSuite='ckeditorsuite';this.config.mode=window.RTEInitMode||'wysiwyg';this.config.toolbars.toolbar=['ModeSwitch','FormatMiniEditor'].concat(this.config.toolbars.toolbar);RTE.config.contentsCss.push($.getSassLocalURL('extensions/wikia/MiniEditor/css/core/content.scss'));RTE.overlayNode.bind('click.MiniEditor',function(){RTE.overlayNode.data('wikiaEditor').setAsActiveInstance();});}this.plugins.unshift(this.editorSuite);this.config.uiElements=window.wgEditorExtraButtons||{};GlobalTriggers.fire('MiniEditorReady');},loadAssets:function(callback){var self=this;if(this.loadingAssets||this.assetsLoaded){if($.isFunction(callback)){callback();}return;}this.loadTimer=new Date();$().log('Start resource loading','MiniEditor');this.loadingAssets=
!0;$.nirvana.sendRequest({controller:'MiniEditorController',method:'makeGlobalVariables',data:{'useeditor':$.getUrlVar('useeditor')},type:'POST',callback:function(data){var assets=window.wgMiniEditorAssets;for(var v in data){window[v]=data[v];}if(typeof assets!='undefined'&&$.isArray(assets)){$.each(assets,function(i,path){assets[i]=window.wgResourceBasePath+path;});assets=window.wgMiniEditorAssets=data.wgMiniEditorAssets.concat(assets);}$.getResources(assets,$.proxy(function(){this.loadTime=(new Date().getTime()-this.loadTimer.getTime());$().log('End resource loading ('+this.loadTime+'ms)','MiniEditor');this.assetsLoaded=!0;this.loadingAssets=!1;this.configure();if($.isFunction(callback)){callback();}},self),function(jqXHR,status,error){$().log(arguments,'MiniEditor');});}});},loading:function(element,preloading){$(element).closest(this.wrapperSelector).addClass(preloading?'preloading':'loading');this.editorIsLoading=!0;},initEditor:function(element,options,event){var $element
=$(element),$wrapper=$element.closest(this.wrapperSelector),preloading=event&&event.target&&event.target!=$element.get(0);if(this.loadingAssets){return;}if(!this.assetsLoaded){this.loading($element,preloading);return this.loadAssets($.proxy(function(){this.initEditor(element,options);},this));}var wikiaEditor=$element.data('wikiaEditor');if(wikiaEditor&&wikiaEditor.ready){wikiaEditor.fire('editorActivated',(wikiaEditor.event=event));}else if((wikiaEditor||(wikiaEditor=WikiaEditor.getInstance()))&&!wikiaEditor.ready){this.loading($element,preloading);wikiaEditor.fire('editorBeforeReady',(wikiaEditor.event=event));}else{this.initTimer=new Date();$().log('Start initialization','MiniEditor');options=$.extend(true,{},$.fn.miniEditor.options,options);var self=this,events=$.extend({},options.events);this.loading($element,preloading);events.editorReady=function(){self.editorIsLoading=!1;if($.isFunction(options.events.editorReady)){options.events.editorReady.apply(self,arguments);}}
$element.bind(events);if(options.content!==undefined){$element.html(options.content);}wikiaEditor=WikiaEditor.create(this.plugins,$.extend(true,{},this.config,{body:$element,element:$wrapper.addClass(this.editorSuite),minHeight:$element.data('min-height')||200,mode:$.isArray(options.edgeCases)&&options.edgeCases.length?'source':this.config.mode,maxHeight:$element.data('max-height')||400,startupFocus:!preloading},options.config),event);if(window.wgEnableMiniEditorLinkSuggest){if(this.config.editorSuite==='ckeditor'){wikiaEditor.on('ck-mode',function(){if(wikiaEditor.ck.mode!=='wysiwyg'){MiniEditor.initLinkSuggest($wrapper,'textarea.cke_source');}});}else{this.initLinkSuggest($wrapper,'#'+wikiaEditor.instanceId);}}$element.addClass('wikiaEditor').triggerHandler('editorInit',[wikiaEditor,event]);}},initLinkSuggest:function($wrapper,selector){mw.loader.using('ext.wikia.LinkSuggest',function(){$wrapper.find(selector).linksuggest();});},getStartupMode:function(element){var $element=$(element
);if($element.length){var wikiaEditor=$element.data('wikiaEditor');if(wikiaEditor){return wikiaEditor.mode;}}return this.config.mode;},getLoadConversionFormat:function(element){return WikiaEditor.modeToFormat(this.getStartupMode(element))=='richtext'?'richtext':'';},getSaveConversionFormat:function(element){return this.getLoadConversionFormat(element)=='richtext'?'wikitext':'';}};$.fn.miniEditor=function(options,event){return this.each(function(){MiniEditor.initEditor(this,options,event);});};$.fn.miniEditor.options={config:{},events:{}};$(function(){if(!window.wgMiniEditorLoadOnDemand){MiniEditor.assetsLoaded=!0;MiniEditor.configure();}});window.MiniEditor=MiniEditor;})(this,jQuery);;(function(window,$){'use strict';if(!window.wgIsArticle){return;}var $window=$(window),ArticleComments;ArticleComments={animations:{},processing:!1,mostRecentCount:0,messagesLoaded:!1,miniEditorEnabled:window.wgEnableMiniEditorExt,loadOnDemand:window.wgArticleCommentsLoadOnDemand,initCompleted:
!1,wrapperSelector:'#WikiaArticleComments',bucky:window.Bucky('ArticleComments'),init:function(){ArticleComments.bucky.timer.start('init');var $articleComments=$('#article-comments'),$articleCommFbMonit=$('#article-comm-fbMonit'),$fbCommentMessage=$('#fbCommentMessage'),newComment;mw.hook('wikipage.content').fire($articleComments);if(!ArticleComments.$wrapper){ArticleComments.$wrapper=$(ArticleComments.wrapperSelector);}ArticleComments.$commentsList=$('#article-comments-ul');ArticleComments.$actionButtons=ArticleComments.$wrapper.find('.actionButton');if(ArticleComments.miniEditorEnabled){newComment=$('#article-comm');newComment.bind('focus',function(){ArticleComments.editorInit(this);});if(newComment.is(':focus')){ArticleComments.editorInit(newComment);}}if(window.wgDisableAnonymousEditing&&!window.wgUserName){$('.article-comm-reply').hide();}else{$articleComments.on('click','.article-comm-edit',ArticleComments.actionProxy(ArticleComments.edit));$articleComments.on('click',
'.article-comm-reply',ArticleComments.actionProxy(ArticleComments.reply));$('#article-comm-submit').on('click',{source:'#article-comm'},ArticleComments.actionProxy(ArticleComments.postComment));}$articleCommFbMonit.mouseenter(function(){$fbCommentMessage.fadeIn('slow');});$articleCommFbMonit.mouseleave(function(){$fbCommentMessage.fadeOut('slow');});ArticleComments.addHover();ArticleComments.initCompleted=!0;ArticleComments.bucky.timer.stop('init');},actionProxy:function(callback){return function(e){e.preventDefault();if(ArticleComments.miniEditorEnabled&&MiniEditor.editorIsLoading){$().log('Event cancelled because editor is loading: ',e);return true;}callback.apply(this,arguments);};},edit:function(e){e.preventDefault();if(ArticleComments.processing){return;}if(ArticleComments.miniEditorEnabled&&!MiniEditor.assetsLoaded){MiniEditor.loadAssets(makeRequest);}else{makeRequest();}function makeRequest(){ArticleComments.bucky.timer.start('edit.makeRequest');var commentId=e.target.id.
replace(/^comment/,''),$textfield=$('#article-comm-textfield-'+commentId);$.getJSON(wgScript,{action:'ajax',article:wgArticleId,convertToFormat:ArticleComments.getLoadConversionFormat($textfield),id:commentId,method:'axEdit',rs:'ArticleCommentsAjax',useskin:window.skin},function(json){if(!json.error){var $buttons=$(e.target).closest('.buttons'),divFormSelector='#article-comm-div-form-'+json.id,textfieldSelector='#article-comm-textfield-'+json.id,$commentTextDiv=$('#comm-text-'+json.id).hide(),$editDivForm=$(divFormSelector),$blockquote=$commentTextDiv.parent(),$editTemplate=$(json.text).hide(),content=$editTemplate.find(textfieldSelector).val(),$textfield;if(!$editDivForm.length){$blockquote.append($editTemplate.attr('id',divFormSelector.substr(1)));$editDivForm=$(divFormSelector);}$textfield=$(textfieldSelector);if(ArticleComments.miniEditorEnabled){ArticleComments.editorInit($textfield,content,json.edgeCases);}else{$textfield.val(content);}$editDivForm.show();$buttons.hide();$(
'#article-comm-submit-'+json.id).bind('click',{id:json.id,emptyMsg:json.emptyMsg},ArticleComments.actionProxy(ArticleComments.saveEdit));$('#article-comm-edit-cancel-'+json.id).bind('click',{id:json.id,target:e.target,text:json.text},ArticleComments.actionProxy(ArticleComments.cancelEdit));}ArticleComments.processing=!1;ArticleComments.bucky.timer.stop('edit.makeRequest');});}ArticleComments.processing=!0;},cancelEdit:function(e){var commentId=e.data.id;e.preventDefault();if(ArticleComments.miniEditorEnabled){$('#article-comm-textfield-'+commentId).data('wikiaEditor').fire('editorDeactivated');}$('#article-comm-div-form-'+commentId).hide();$(e.data.target).closest('.buttons').show();$('#comm-text-'+commentId).show();},saveEdit:function(e){var commentId,commentFormDiv,$throbber,$submitButton,$textfield,content;ArticleComments.bucky.timer.start('saveEdit');e.preventDefault();if(ArticleComments.processing){return;}commentId=e.data.id;commentFormDiv=$('#article-comm-form-'+commentId);
if(commentFormDiv.length){$throbber=$(e.target).siblings('.throbber');$submitButton=$('#article-comm-submit-'+commentId);$textfield=$('#article-comm-textfield-'+commentId);content=ArticleComments.getContent($textfield);$submitButton.parent().find('.info').remove();if($.trim(content)===''){$submitButton.after($('<span>').addClass('info').html(e.data.emptyMsg));return;}$('#article-comm-info').html('');$throbber.css('visibility','visible');$textfield.attr('readonly','readonly');$.postJSON(wgScript,{action:'ajax',article:wgArticleId,convertToFormat:ArticleComments.getSaveConversionFormat($textfield),id:commentId,method:'axSave',rs:'ArticleCommentsAjax',title:wgPageName,wpArticleComment:content,token:window.mw.user.tokens.get('editToken')},function(json){$throbber.css('visibility','hidden');if(!json.error){if(json.commentId&&json.commentId!==0){var comment=$('#comm-'+json.commentId),commentText=comment.find('.article-comm-text'),saveTemplate=$(json.text),saveTemplateText=saveTemplate.find(
'.article-comm-text');$('#article-comm-div-form-'+json.commentId).hide();if(ArticleComments.miniEditorEnabled){$textfield.data('wikiaEditor').fire('editorReset');}commentText.html(saveTemplateText.html()).show();mw.hook('wikipage.content').fire(commentText);comment.find('.edited-by').html(saveTemplate.find('.edited-by').html());}}else{$('#article-comm-info').html(json.msg);}$textfield.removeAttr('readonly');ArticleComments.processing=!1;ArticleComments.bucky.timer.stop('saveEdit');});ArticleComments.processing=!0;}},reply:function(e){ArticleComments.bucky.timer.start('reply');e.preventDefault();if(ArticleComments.processing){return;}$.getJSON(wgScript,{action:'ajax',article:wgArticleId,id:$(this).closest('.comment').attr('id').replace(/^comm-/,''),method:'axReply',rs:'ArticleCommentsAjax',title:wgPageName,useskin:window.skin},function(json){var $blockquote=$('#comm-text-'+json.id).parent(),$editbox=$blockquote.find('.article-comm-edit-box'),$buttons=$blockquote.find('.buttons').
hide(),$textfield;$blockquote.find('.info').remove();if($editbox.length){$editbox.show();}else if(!json.error){$blockquote.append(json.html);$('#article-comm-reply-submit-'+json.id).bind('click',{source:'#article-comm-reply-textfield-'+json.id,parentId:json.id},ArticleComments.actionProxy(ArticleComments.postComment));}else if(json.error===2){$blockquote.find('.tools').after($('<span>').addClass('info').html(json.msg));}else{require(['wikia.ui.factory'],function(uiFactory){uiFactory.init(['modal']).then(function(uiModal){var moduleConfig={vars:{id:'general_error',size:'small',content:json.msg}};uiModal.createComponent(moduleConfig,function(errorModal){errorModal.show();});});});}$textfield=$('#article-comm-reply-textfield-'+json.id);if(ArticleComments.miniEditorEnabled){ArticleComments.editorInit($textfield,{editorActivated:function(){$blockquote.find('.article-comm-edit-box').show();},editorDeactivated:function(event,wikiaEditor){if(!wikiaEditor.getContent()){$blockquote.find(
'.article-comm-edit-box').hide();$buttons.show();}}});}else{$textfield.focus();}ArticleComments.processing=!1;ArticleComments.bucky.timer.stop('reply');});ArticleComments.processing=!0;},postComment:function(e){var $source,$target,$throbber,content,showall,data;e.preventDefault();if(ArticleComments.processing){return;}$source=$(e.data.source);content=ArticleComments.getContent($source);if($.trim(content)===''){return;}$target=$(e.target);$throbber=$target.siblings('.throbber');showall=$.getUrlVar('showall');$throbber.css('visibility','visible');$source.attr('readonly','readonly');$target.attr('disabled',true);data={action:'ajax',article:wgArticleId,convertToFormat:ArticleComments.getSaveConversionFormat($source),method:'axPost',rs:'ArticleCommentsAjax',title:wgPageName,wpArticleComment:content,useskin:window.skin,token:window.mw.user.tokens.get('editToken')};if(e.data.parentId){data.parentId=e.data.parentId;data.page=$('.article-comments-pagination-link-active').eq(0).attr('page')
;}if(showall){data.showall=1;}function requestCallback(json){var $parent,$subcomments,parentId,nodes;ArticleComments.bucky.timer.start('postComment.requestCallback');$throbber.css('visibility','hidden');if(ArticleComments.miniEditorEnabled){$source.data('wikiaEditor').fire('editorReset');}else{$source.val('');}if(!json.error){parentId=json.parentId;nodes=$(json.text);mw.hook('wikipage.content').fire(nodes);if(parentId){$parent=$('#comm-'+parentId);$subcomments=$parent.next();if(!$subcomments.hasClass('sub-comments')){$parent.after($subcomments=$('<ul class="sub-comments"></ul>'));}$subcomments.append(nodes);$parent.find('.article-comm-edit-box').hide();$parent.find('.buttons').show();}else{nodes.prependTo(ArticleComments.$commentsList);}if(window.skin==='oasis'){$('#WikiaUserPagesHeader').find('.commentsbubble').html(json.counter);if(!parentId){ArticleComments.mostRecentCount=ArticleComments.mostRecentCount?ArticleComments.mostRecentCount+1:ArticleComments.$commentsList.children('li').
length;$('#article-comments-counter-recent').html($.msg('oasis-comments-showing-most-recent',ArticleComments.mostRecentCount));}}ArticleComments.addHover();}else{new BannerNotification(json.msg,'error').show();}$source.removeAttr('readonly');$target.removeAttr('disabled');ArticleComments.processing=!1;ArticleComments.bucky.timer.stop('postComment.requestCallback');}function makeRequest(){$.postJSON(wgScript,data,requestCallback);ArticleComments.processing=!0;}if(!ArticleComments.messagesLoaded){$.getMessages('ArticleCommentsCounter',function(){ArticleComments.messagesLoaded=!0;makeRequest();});}else{makeRequest();}},setPage:function(e){ArticleComments.bucky.timer.start('setPage');var page=parseInt($(this).attr('page'));e.preventDefault();ArticleComments.$commentsList.addClass('loading');$.getJSON(wgScript+'?action=ajax&rs=ArticleCommentsAjax&method=axGetComments',{article:wgArticleId,order:$('#article-comm-order').attr('value'),page:page,useskin:window.skin},function(json){
ArticleComments.$commentsList.removeClass('loading');if(!json.error){ArticleComments.$commentsList.html(json.text);var $articleCommentsPagination=$('.article-comments-pagination');if($articleCommentsPagination.exists()){$articleCommentsPagination.html(json.pagination);}ArticleComments.addHover();}ArticleComments.processing=!1;ArticleComments.bucky.timer.stop('setPage');});},addHover:function(){var linkSelectors=['.article-comments-pagination-link-active','#article-comments-pagination-link-prev','#article-comments-pagination-link-next'];$('.article-comments-pagination-link').bind('click',ArticleComments.setPage).not(linkSelectors.join(', ')).hover(function(){$(this).addClass('accent');},function(){$(this).removeClass('accent');});},editorInit:function(element,events,content,edgeCases){ArticleComments.bucky.timer.start('editorInit');var $element=$(element),wikiaEditor=$element.data('wikiaEditor'),editorActivated,hasEdgeCases;if(typeof events==='string'){edgeCases=content;content=
events;events={};}hasEdgeCases=$.isArray(edgeCases)&&edgeCases.length;function initEditor(){events=events||{};editorActivated=events.editorActivated;events.editorActivated=function(){ArticleComments.$actionButtons.removeClass('disabled').removeAttr('disabled');if($.isFunction(editorActivated)){editorActivated.apply(this,arguments);}};$element.miniEditor({config:{animations:MiniEditor.Wall.Animations,mode:hasEdgeCases?'source':MiniEditor.config.mode},events:events});}if(wikiaEditor){wikiaEditor.fire('editorActivated');if(content!==undefined){if(hasEdgeCases){wikiaEditor.ck.setMode('source');}wikiaEditor.setContent(content);}}else{ArticleComments.$actionButtons.addClass('disabled').attr('disabled',true);if(content!==undefined){$element.val(content);}if(!MiniEditor.assetsLoaded){MiniEditor.loading($element);MiniEditor.loadAssets(initEditor);}else{initEditor();}}ArticleComments.bucky.timer.stop('editorInit');},getContent:function(element){return ArticleComments.miniEditorEnabled?element.
data('wikiaEditor').getContent():element.val();},getLoadConversionFormat:function(element){return ArticleComments.miniEditorEnabled?MiniEditor.getLoadConversionFormat(element):'';},getSaveConversionFormat:function(element){return ArticleComments.miniEditorEnabled?MiniEditor.getSaveConversionFormat(element):'';},scrollToElement:function(element){var $element=$(element),docViewTop=$window.scrollTop(),docViewBottom=docViewTop+$window.height(),elementTop=$element.offset().top;$element.find('blockquote').addClass('current');if($('#globalNavigation').css('position')==='fixed'){window.GlobalNavigationScrollToElement(element);}else{if(elementTop<docViewTop||elementTop>docViewBottom){$('html, body').animate({scrollTop:elementTop},1);}}},showMoreComments:function(){var $nodesToHide=this.$wrapper.find('.comments').children().slice(3),$pagination=$('.article-comments-pagination',this.$wrapper),showMoreButton=this.$wrapper.find('.comments-show-more');if($nodesToHide.length===0){return;}$nodesToHide
.hide();$pagination.hide();showMoreButton.css('display','block');showMoreButton.click(function(){$nodesToHide.show();$pagination.show();showMoreButton.hide();});}};if(ArticleComments.loadOnDemand){$(function(){var content,hash,permalink,styleAssets=[],belowTheFold,loadAssets;ArticleComments.$wrapper=$(ArticleComments.wrapperSelector);if(!ArticleComments.$wrapper.length){return;}hash=window.location.hash;permalink=/^#comm-/.test(hash);styleAssets.push($.getSassCommonURL('skins/oasis/css/core/ArticleComments.scss'));belowTheFold=function(){return ArticleComments.$wrapper.offset().top>=($window.scrollTop()+$window.height());};if(ArticleComments.miniEditorEnabled){styleAssets.push($.getSassCommonURL('extensions/wikia/MiniEditor/css/MiniEditor.scss'));styleAssets.push($.getSassCommonURL('extensions/wikia/MiniEditor/css/ArticleComments/ArticleComments.scss'));}loadAssets=function(){ArticleComments.bucky.timer.start('loadAssets');$.when($.getResources(styleAssets),$.nirvana.sendRequest({
controller:'ArticleCommentsController',method:'Content',format:'html',type:'GET',data:{articleId:window.wgArticleId,page:ArticleComments.$wrapper.data('page'),useskin:window.skin},callback:function(response){content=response;}})).then(function(){ArticleComments.$wrapper.removeClass('loading').html(content);ArticleComments.init();if(permalink){ArticleComments.scrollToElement(hash);}ArticleComments.bucky.timer.stop('loadAssets');});};if(!permalink&&belowTheFold()){$window.on('scrollstop.ArticleCommentsLoadOnDemand',function(){if(!belowTheFold()){ArticleComments.$wrapper.addClass('loading');$window.off('scrollstop.ArticleCommentsLoadOnDemand');loadAssets();}});}else{loadAssets();}});}else{wgAfterContentAndJS.push(ArticleComments.init);}window.ArticleComments=ArticleComments;})(this,jQuery);;var GlobalModal={init:function(){var modal=$.getUrlVar('modal');if(modal){var f=GlobalModal['show'+modal];if(typeof f==='function'){f();}}},showUploadImage:function(){if(!wgUserName){$('.ajaxLogin').
trigger('click');}else{$('.upphotos').trigger('click');}},showAddPage:function(){if(!wgUserName){$('.ajaxLogin').trigger('click');}else{$('.createpage').trigger('click');}},showLogin:function(){if(!wgUserName){$('.ajaxLogin').trigger('click');}}};$(function(){GlobalModal.init();});;(function(){'use strict';var UserLogin={forceLoggedIn:!1,refreshIfAfterForceLogin:function(){if(this.forceLoggedIn){Wikia.Querystring().addCb().goTo();}},rteForceLogin:function(){window.onbeforeunload=function(){};window.wikiaAuthModal.load({forceLogin:!0,origin:'editor',onAuthSuccess:function(){if(window.WikiaEditor){WikiaEditor.reloadEditor();}}});},isForceLogIn:function(){if(window.wgUserName===null){window.onbeforeunload=function(){};window.wikiaAuthModal.load({forceLogin:!0,origin:'editor'});return true;}return false;}};window.UserLogin=UserLogin;})();;var WikiaBar={WIKIA_BAR_STATE_ANON_ML_KEY:'AnonMainLangWikiaBar_0.0001',WIKIA_BAR_STATE_ANON_NML_KEY:'AnonNotMainLangWikiaBar_0.0001',
WIKIA_BAR_HIDDEN_ANON_ML_TTL:24*60*1000,WIKIA_BAR_HIDDEN_ANON_NML_TTL:180*24*60*1000,WIKIA_BAR_STATE_USER_KEY_SUFFIX:'UserWikiaBar_1.0004',WIKIA_BAR_MAX_MESSAGE_PARTS:5,WIKIA_BAR_SAMPLING_RATIO:10,WIKIA_BAR_SHOWN_STATE_VALUE:'shown',WIKIA_BAR_HIDDEN_STATE_VALUE:'hidden',cutMessagePrecision:20,messageConfig:{index:0,container:null,attributeName:'wikiabarcontent',content:null,speed:500,delay:10000,prevMsgNumber:-1,doTrackImpression:!1},wikiaBarHidden:!0,wikiaBarWrapperObj:null,wikiaBarCollapseWrapperObj:null,isSampledEvent:function(){return this.WIKIA_BAR_SAMPLING_RATIO>=Math.floor((Math.random()*100+1));},bindTracking:function(){this.wikiaBarWrapperObj.click($.proxy(this.clickTrackingHandler,this));this.wikiaBarCollapseWrapperObj.click($.proxy(this.clickTrackingHandler,this));},init:function(){this.$window=$(window);this.wikiaBarWrapperObj=$('#WikiaBarWrapper');this.wikiaBarCollapseWrapperObj=$('.WikiaBarCollapseWrapper');this.bindTracking();var wikiaBarWrapperArrow=this.
wikiaBarWrapperObj.find('.arrow');wikiaBarWrapperArrow.click($.proxy(this.onShownClick,this));this.wikiaBarCollapseWrapperObj.find('.wikia-bar-collapse').click($.proxy(this.onHiddenClick,this));if(!this.isUserAnon()){this.handleLoggedInUsersWikiaBar();}else if(this.isUserAnon()&&this.hasAnonHiddenWikiaBar()===false){this.handleLoggedOutUsersWikiaBar();}wikiaBarWrapperArrow.popover({placement:"wikiaBar",content:wikiaBarWrapperArrow.data('tooltip')});$('.wikia-bar-collapse').popover({placement:"wikiaBar",content:wikiaBarWrapperArrow.data('tooltipshow')});this.$window.triggerHandler('WikiaBarReady');return true;},getAdIfNeeded:function(){var isEnabled=window.ads&&window.ads.context&&window.ads.context.opts&&window.ads.context.opts.showAds&&window.wgEnableWikiaBarAds;if(isEnabled){window.Wikia.reviveQueue=window.Wikia.reviveQueue||[];window.Wikia.reviveQueue.push({zoneId:28,slotName:'WIKIA_BAR_BOXAD_1'});}},cutMessageIntoSmallPieces:function(messageArray,container,cutMessagePrecision){var
returnArray=[],currentMessageArray,originalMessageArray,originalCurrentDiffArray,messageArrayText,messageLoops=0;for(var i=0,length=messageArray.length;i<length;i++){messageArrayText=messageArray[i].text;if(typeof messageArrayText=='string'){originalMessageArray=messageArrayText.split('');do{currentMessageArray=this.checkMessageWidth(originalMessageArray,container,cutMessagePrecision);originalCurrentDiffArray=originalMessageArray.slice(currentMessageArray.length,originalMessageArray.length);returnArray.push({'anchor':$.trim(currentMessageArray.join('')),'href':messageArray[i].href,'messageNumber':i});originalMessageArray=originalCurrentDiffArray;messageLoops++;}while(originalCurrentDiffArray.length>0&&messageLoops<this.WIKIA_BAR_MAX_MESSAGE_PARTS);}}container.text('');return returnArray;},checkMessageWidth:function(messageArray,container,cutMessagePrecision){var tempMessage='',tempMessageObject,tempMessageArray,cutIndex=-1;for(var j=0,length=messageArray.length;j<length;j+=
cutMessagePrecision){tempMessage=tempMessage+messageArray.join("").substr(j,cutMessagePrecision);tempMessageObject=$('<span></span>').text(tempMessage);container.html(tempMessageObject);if(tempMessageObject.width()>=this.messageConfig.container.width()){cutIndex=j-cutMessagePrecision;break;}}if(cutIndex==-1){tempMessageArray=messageArray;}else{tempMessageArray=messageArray.slice(0,cutIndex);var lastIndexOfSpace=tempMessageArray.lastIndexOf(" ");if((lastIndexOfSpace>-1)&&(lastIndexOfSpace<cutIndex)){tempMessageArray=messageArray.slice(0,lastIndexOfSpace);}}return tempMessageArray;},messageFadeIn:function(){var currentMsgIndex=this.messageConfig.index,messageConfig=this.messageConfig;if(currentMsgIndex==(messageConfig.content.length-1)){this.messageConfig.index=0;}else{this.messageConfig.index++;}setTimeout($.proxy(this.messageSlideShow,this),messageConfig.delay);return true;},messageSlideShow:function(){var messageData=this.messageConfig.content[this.messageConfig.index],
messageContainer=this.messageConfig.container,link=$('<a></a>').attr('href',messageData.href).data('index',messageData.messageNumber).text(messageData.anchor);messageContainer.fadeOut(this.messageConfig.speed,$.proxy(function(){messageContainer.html(link);if(this.messageConfig.prevMsgNumber!=messageData.messageNumber){this.messageConfig.prevMsgNumber=messageData.messageNumber;this.messageConfig.doTrackImpression=!0;}else{this.messageConfig.doTrackImpression=!1;}messageContainer.fadeIn(this.messageConfig.speed,$.proxy(this.messageFadeIn,this));},this));return true;},startSlideShow:function(){this.messageConfig.content=this.cutMessageIntoSmallPieces(this.messageConfig.container.data(this.messageConfig.attributeName),this.messageConfig.container,this.cutMessagePrecision);if(typeof this.messageConfig.content=='object'){this.messageConfig.container.popover({placement:"wikiaBarMessage",content:this.messageConfig.container.data('messagetooltip')});this.messageSlideShow();}},show:function
(){$('#WikiaNotifications').removeClass('hidden');this.wikiaBarCollapseWrapperObj.addClass('hidden');this.wikiaBarWrapperObj.removeClass('hidden');this.wikiaBarHidden=!1;this.toggleVisibilityClassOnBody(true);},hide:function(){$('#WikiaNotifications').addClass('hidden');this.wikiaBarCollapseWrapperObj.removeClass('hidden');this.wikiaBarWrapperObj.addClass('hidden');this.wikiaBarHidden=!0;this.toggleVisibilityClassOnBody(false);},isWikiaBarHidden:function(){return this.wikiaBarHidden;},showContainer:function(){$('#WikiaBar').show();this.toggleVisibilityClassOnBody(true);},hideContainer:function(){$('#WikiaBar').hide();this.toggleVisibilityClassOnBody(false);},toggleVisibilityClassOnBody:function(state){if(this.wikiaBarWrapperObj.length){$('body').toggleClass('wikia-bar-visible',state);}},isContainerHidden:function(){return $('#WikiaBar').is(":visible");},onShownClick:function(e){this.changeBarStateData();e.preventDefault();},onHiddenClick:function(e){this.changeBarStateData();e.
preventDefault();},changeBarStateData:function(){if(this.isUserAnon()){this.changeAnonBarStateData();}else{this.changeLoggedInUserStateBar();}this.$window.triggerHandler('WikiaBarStateChanged');},changeAnonBarStateData:function(){var isHidden=this.hasAnonHiddenWikiaBar();if(isHidden===false){this.setCookieData(true);this.hide();}else{this.setCookieData(false);this.getAdIfNeeded();this.show();}},hasAnonHiddenWikiaBar:function(){return this.getAnonData();},handleLoggedOutUsersWikiaBar:function(){this.show();this.messageConfig.container=this.wikiaBarWrapperObj.find('.message');var dataContent=this.messageConfig.container.data(this.messageConfig.attributeName);if(this.messageConfig.container.exists()&&dataContent&&(typeof dataContent=='object')&&(dataContent.length>0)){this.startSlideShow();}this.getAdIfNeeded();},handleLoggedInUsersWikiaBar:function(){var cachedState=this.getLocalStorageData();if(cachedState===null){this.getLoggedInUserStateBarAndChangeLocalStorage();}else{this.
doWikiaBarAnimationDependingOnState(cachedState);}},getLoggedInUserStateBarAndChangeLocalStorage:function(){$.nirvana.sendRequest({controller:'WikiaUserPropertiesController',method:'performPropertyOperation',data:{handlerName:'WikiaBarUserPropertiesHandler',methodName:'getWikiaBarState'},type:'get',format:'json',callback:$.proxy(this.onGetLoggedInUserStateBarAndChangeLocalStorage,this),onErrorCallback:$.proxy(this.onGetLoggedInUserStateBarAndChangeLocalStorageError,this)});},changeLoggedInUserStateBar:function(){var changeState=this.isWikiaBarHidden()?this.WIKIA_BAR_SHOWN_STATE_VALUE:this.WIKIA_BAR_HIDDEN_STATE_VALUE;this.doWikiaBarAnimationDependingOnState(changeState);this.setLocalStorageData(changeState);$.nirvana.sendRequest({controller:'WikiaUserPropertiesController',method:'performPropertyOperation',data:{handlerName:'WikiaBarUserPropertiesHandler',methodName:'changeWikiaBarState',callParams:{changeTo:changeState}},type:'post',format:'json'});},
onGetLoggedInUserStateBarAndChangeLocalStorage:function(response){var state=response.results.propertyValue||this.WIKIA_BAR_SHOWN_STATE_VALUE;this.setLocalStorageData(state);this.doWikiaBarAnimationDependingOnState(state);},onGetLoggedInUserStateBarAndChangeLocalStorageError:function(){},doWikiaBarAnimationDependingOnState:function(state){if(state===this.WIKIA_BAR_SHOWN_STATE_VALUE){this.show();}else{this.hide();}if(window.wgAction=='edit'&&!window.wgEnableCodePageEditor){var WE=window.WikiaEditor=window.WikiaEditor||(new Observable()),editorInstance=WE.getInstance();if(typeof(editorInstance)!=='undefined'){editorInstance.fire('sizeChanged');}}},getLocalStorageDataKey:function(){var key=undefined;if(window.wgUserName){key=window.wgUserName+'_'+this.WIKIA_BAR_STATE_USER_KEY_SUFFIX;}else{$().log('WikiaBar notice: No user name found');}return key;},getLocalStorageData:function(){return $.storage.get(this.getLocalStorageDataKey());},setLocalStorageData:function(state){$.storage.set(this.
getLocalStorageDataKey(),state);},getAnonData:function(defaultState){var key=this.getCookieKey(),data=$.cookie(key),hidden=null;if(data===null&&!this.isMainWikiaBarLang()){hidden=(typeof defaultState!=='undefined')?defaultState:!0;}else if(data===null&&this.isMainWikiaBarLang()){hidden=(typeof defaultState!=='undefined')?defaultState:!1;}else{hidden=(data==='true');}return hidden;},setCookieData:function(hiddenState){var key=this.getCookieKey(),now=new Date(),expireDate=new Date(now.getTime()+this.WIKIA_BAR_HIDDEN_ANON_ML_TTL),cookieData={expires:expireDate,path:'/',domain:window.wgCookieDomain};if(this.isUserAnon()&&!this.isMainWikiaBarLang()){cookieData.expires=this.WIKIA_BAR_HIDDEN_ANON_NML_TTL;}else if(!this.isUserAnon){cookieData.expires=this.WIKIA_BAR_HIDDEN_USER_TTL;}$.cookie(key,hiddenState,cookieData);},getCookieKey:function(){var key=this.WIKIA_BAR_STATE_ANON_ML_KEY;if(this.isUserAnon()&&!this.isMainWikiaBarLang()){key=this.WIKIA_BAR_STATE_ANON_NML_KEY;}return key;},
isUserAnon:function(){return(window.wgUserName===null);},isMainWikiaBarLang:function(){var result=-1;if(window.wgContentLanguage&&window.wgWikiaBarMainLanguages){result=$.inArray(window.wgContentLanguage,window.wgWikiaBarMainLanguages);}return(result>=0);},getWikiaBarOffset:function(){var wikiaBarHeight=$("#WikiaBarWrapper").outerHeight(true)||0;return(this.wikiaBarHidden)?0:wikiaBarHeight;},trackClick:function(category,action,label,value,params,event){if(this.isSampledEvent()){Wikia.Tracker.track({action:action,category:category,label:label,trackingMethod:'analytics',value:value},params);}},clickTrackingHandler:function(e){var node=$(e.target),parent=node.parent(),startTime=new Date();if(node.hasClass('arrow')){this.trackClick('wikia-bar',Wikia.Tracker.ACTIONS.CLICK_LINK_BUTTON,'arrow-hide',null,{},e);}else if(node.hasClass('wikia-bar-collapse')){this.trackClick('wikia-bar',Wikia.Tracker.ACTIONS.CLICK_LINK_BUTTON,'arrow-show',null,{},e);}else if(parent.hasClass('wikiabar-button')){var
buttonIdx=parent.data('index');this.trackClick('wikia-bar',Wikia.Tracker.ACTIONS.CLICK_LINK_BUTTON,'wikiabar-button-'+buttonIdx,null,{},e);}else if(parent.hasClass('message')){var messageIdx=node.data('index');this.trackClick('wikia-bar',Wikia.Tracker.ACTIONS.CLICK_LINK_TEXT,'message-'+messageIdx+'-clicked',null,{},e);}$().log('tracking took '+(new Date()-startTime)+' ms');}};if(window.wgEnableWikiaBarExt){$(function(){WikiaBar.init();});};var ChatWidget={loading:!1,chatLaunchModal:null,bindComplete:!1,isWideChat:null,widgetUserElementTemplate:'',wideChatThreshold:280,resizeDebounceTime:1000,init:function(){if(!ChatWidget.bindComplete){$('body').on('click','.WikiaChatLink, .chat-module .start-a-chat-button, .chat-module .more-users-count',this.openChat);ChatWidget.bindComplete=!0;}if($('.chat-module').not('.rail-module').length){if(!ChatWidget.loading){ChatWidget.loading=!0;ChatWidget.loadDataAndInitializeModules();}}ChatWidget.initializeChatModules();},openChat:function(
event){event.preventDefault();event.stopPropagation();ChatWidget.onClickChatButton(this.href);},loadDataAndInitializeModules:function(){$.when(ChatWidget.loadChatUsers(),ChatWidget.loadWidgetUserElementTemplate()).then(function(usersData,templateData){if(usersData[1]==='success'&&templateData[1]==='success'){var users=usersData[0].users,hasUsers=usersData[0].hasUsers;ChatWidget.widgetUserElementTemplate=templateData[0].mustache[0];if(users.length){ChatWidget.updateUsersList(users,hasUsers);}ChatWidget.users=users;}});},loadChatUsers:function(){return $.nirvana.sendRequest({controller:'ChatRailController',method:'GetUsers',type:'GET',format:'json'});},loadWidgetUserElementTemplate:function(){return Wikia.getMultiTypePackage({mustache:'extensions/wikia/Chat2/templates/widgetUserElement.mustache'});},updateUsersList:function(users,hasUsers){var output=Mustache.render(ChatWidget.widgetUserElementTemplate,{viewedUsersInfo:users,hasUsers:hasUsers,blankImageUrl:window.wgBlankImageUrl}),
$chatModule=$('.chat-module');if(hasUsers){$chatModule.find('.chat-contents.chat-room-empty').each(function(){$(this).eq(0).removeClass('chat-room-empty').addClass('chat-room-active');});}$chatModule.find('.wds-avatar-stack').each(function(){$(this).get(0).innerHTML=output;});},initializeChatModules:function(){$('.ChatModuleUninitialized').each(function(){var $module=$(this);ChatWidget.isWideChat=ChatWidget.computeIsWideChat($module.width());ChatWidget.processModuleTemplate($module);$module.removeClass('ChatModuleUninitialized');$(window).resize($.debounce(ChatWidget.resizeDebounceTime,function(){ChatWidget.afterResize($module);}));});},afterResize:function($module){var wideAfterResize=ChatWidget.computeIsWideChat($module.width());if(wideAfterResize!==ChatWidget.isWideChat){ChatWidget.isWideChat=wideAfterResize;ChatWidget.processModuleTemplate($module);}},computeIsWideChat:function(width){return width>ChatWidget.wideChatThreshold;},processModuleTemplate:function($t){ChatWidget.
initPopover($t);$t.find('[data-msg-id]').each(function(){var $e=$(this);$e.text(mw.message($e.data('msg-id'),$e.data('msg-param')).text());});},initPopover:function($el){var popoverTimeout=0;function setPopoverTimeout(elem){popoverTimeout=setTimeout(function(){elem.popover('hide');},300);}$el.find('.chatter').popover({trigger:'manual',placement:'bottom',content:function(){var userStatsMenu=$el.find('.UserStatsMenu').eq($(this).index());return userStatsMenu.clone().wrap('<div>').parent().html();}}).on('mouseenter',function(){clearTimeout(popoverTimeout);$('body > .popover').remove();$el.find('.UserStatsMenu img[data-src]').each(function(){var image=$(this);image.attr('src',image.attr('data-src')).removeAttr('data-src');});$(this).popover('show');}).on('mouseleave',function(){var $this=$(this);setPopoverTimeout($this);$('.popover').mouseenter(function(){clearTimeout(popoverTimeout);}).mouseleave(function(){setPopoverTimeout($this);});});},onClickChatButton:function(linkToSpecialChat){
'use strict';if(window.wgUserName){window.open(linkToSpecialChat,'wikiachat',window.wgWikiaChatWindowFeatures);}else{window.wikiaAuthModal.load({forceLogin:!0,origin:'chat',onAuthSuccess:ChatWidget.onSuccessfulLogin});}},onSuccessfulLogin:function(){$.nirvana.sendRequest({controller:'ChatRail',method:'AnonLoginSuccess',type:'GET',format:'html',callback:ChatWidget.onJoinChatFormLoaded});},onJoinChatFormLoaded:function(html){require(['wikia.ui.factory'],function(uiFactory){uiFactory.init('modal').then(function(uiModal){var joinModalConfig={vars:{id:'JoinChatModal',size:'small',content:html,title:mw.message('chat-start-a-chat').escaped()}};uiModal.createComponent(joinModalConfig,function(joinModal){joinModal.bind('chat',function(event){ChatWidget.launchChatWindow(event,joinModal);});joinModal.bind('close',function(){ChatWidget.reloadPage();});joinModal.show();});});});},reloadPage:function(){Wikia.Querystring().addCb().goTo();},launchChatWindow:function(event,chatLaunchModal){var
pageLink=$('#modal-join-chat-button').data('chat-page');window.open(pageLink,'wikiachat',window.wgWikiaChatWindowFeatures);if(chatLaunchModal){chatLaunchModal.trigger('close');}ChatWidget.reloadPage();}};if(typeof wgWikiaChatUsers!=='undefined'){$(function(){ChatWidget.init();});};(function(window,$){'use strict';if(window.vetLoader){return;}var resourcesLoaded=!1,modalOnScreen=!1,vetLoader={},template='';function loadResources(){var deferredList=[];deferredList.push($.nirvana.sendRequest({controller:'VideoEmbedToolController',method:'modal',type:'get',format:'html'}));deferredList.push($.getResources([$.getAssetManagerGroupUrl('VET_js'),$.getSassCommonURL('/extensions/wikia/VideoEmbedTool/css/VET.scss'),$.getSassCommonURL('/extensions/wikia/WikiaStyleGuide/css/Dropdown.scss')]));deferredList.push($.getMessages('VideoEmbedTool'));return deferredList;}vetLoader.load=function(options,$elem){var resourceList=[];$elem=$elem||$();if(window.wgUserName===null&&!window.UserLogin.
forceLoggedIn&&window.wgAction==='edit'){window.UserLogin.rteForceLogin();$elem.stopThrobbing();return;}else if(window.wgUserName===null&&!window.UserLogin.forceLoggedIn){window.wikiaAuthModal.load({forceLogin:!0,origin:'vet',onAuthSuccess:function(){window.UserLogin.forceLoggedIn=!0;vetLoader.load(options);}});$elem.stopThrobbing();return;}if(modalOnScreen){$elem.stopThrobbing();return;}modalOnScreen=!0;if(!resourcesLoaded){resourceList=loadResources();}$.when.apply($,resourceList).done(function(templateResp){if(!resourcesLoaded){template=templateResp[0];}$elem.stopThrobbing();require(['wikia.vet'],function(vet){vetLoader.modal=$(template).makeModal({width:939,onClose:function(){vet.close();},onAfterClose:function(){modalOnScreen=!1;}});vet.show(options);resourcesLoaded=!0;});});};$.fn.addVideoButton=function(options){$.preloadThrobber();return this.each(function(){var $this=$(this);$this.off('click.VETLoader').on('click.VETLoader',function(e){e.preventDefault();$this.
startThrobbing();vetLoader.load(options,$this);});});};window.vetLoader=vetLoader;})(window,jQuery);;define('thumbnails.templates.mustache',[],function(){'use strict';return{"Thumbnail_articleBlock":'<figure class="article-thumb {{figureClass}}" style="width: {{width}}px">{{{thumbnail}}}<figcaption><a href="{{url}}" class="sprite details" title="{{thumbnailMore}}"></a>{{#title}}<p class="title">{{title}}</p>{{/title}}{{#caption}}<p class="caption">{{{caption}}}</p>{{/caption}}{{#addedBy}}<p class="attribution">{{{addedBy}}}</p>{{/addedBy}}</figcaption></figure>',"Thumbnail_title":'{{{thumbnail}}}<div class="title" title="{{title}}"><a href="{{url}}">{{title}}</a></div>',"done":"true"};});;window.JSSnippets=(function(){'use strict';var stack,fullUrlRegex=new RegExp('^(http|https):\\/\\/','i'),extensionRegex=new RegExp('\\.([^.]+)$'),cacheBusterRegex=new RegExp('\\?cb=[0-9]+$','i'),slashRegex=new RegExp('^\\/'),debugMode=window.mw&&mw.config?mw.config.get('debug'):window.debug;function
init(){if(!window.JSSnippetsStack||!JSSnippetsStack.length){window.JSSnippetsStack=[];afterInit();return;}stack=JSSnippetsStack;var dependencies=[],callbacks={},options={},entry,x,len=stack.length;for(x=0;x<len;x++){entry=stack[x];if(entry.dependencies){pushDependencies(dependencies,entry);}if(typeof entry.getLoaders==='function'){pushLoaders(dependencies,entry);}if(dependencies.length===0){continue;}if(typeof entry.callback==='function'){callbacks[entry.id]=entry.callback;options[entry.id]=options[entry.id]||[];options[entry.id].push(entry.options);}}if(dependencies.length===0){afterInit();return;}dependencies=unique(dependencies);require(['wikia.loader','wikia.log'],function(loader,log){loader.apply(loader,dependencies).done(function(){try{for(var id in callbacks){for(x=0,len=options[id].length;x<len;x++){callbacks[id](options[id][x]);}}}catch(e){log('Skipping running callback, cause: '+e,log.levels.error);}});});afterInit();}function afterInit(){clearStack();updatePush();}function
unique(origArr){var newArr=[],origLen=origArr.length,found,x,y,l,elm;for(x=0;x<origLen;x++){found=undefined;elm=origArr[x].url||origArr[x];for(y=0,l=newArr.length;y<l;y++){if(elm===(newArr[y].url?newArr[y].url:newArr[y])){found=!0;break;}}if(!found){newArr.push(origArr[x]);}}return newArr;}function clearStack(){window.JSSnippetsStack.length=0;}function updatePush(){window.JSSnippetsStack.push=function(callback){Array.prototype.push.apply(JSSnippetsStack,[callback]);init();};}function formatDependency(dependency){var ext;if(fullUrlRegex.test(dependency)||cacheBusterRegex.test(dependency)){return dependency;}ext=dependency.match(extensionRegex);if(ext&&ext.length>0){if(ext[1]==='scss'){dependency=$.getSassCommonURL(dependency);}else if(slashRegex.test(dependency)){if(debugMode){dependency=wgResourceBasePath+dependency;}else{dependency=wgCdnRootUrl+wgAssetsManagerQuery.replace('%1$s','one').replace('%2$s',dependency.replace(slashRegex,'')).replace('%3$s','-').replace('%4$d',
wgStyleVersion);}}}return dependency;}function pushDependencies(dependencies,entry){var dependency,y,len=entry.dependencies.length;for(y=0;y<len;y++){dependency=entry.dependencies[y];if(typeof dependency==='string'&&dependency!==''){dependency=formatDependency(dependency);}dependencies.push(dependency);}}function pushLoaders(dependencies,entry){var loaders=entry.getLoaders(),loaderFn,y,len=loaders.length;for(y=0;y<len;y++){loaderFn=loaders[y];if(typeof loaderFn==='function'){dependencies.push(loaderFn);}}}$(init);return{init:init,clear:clearStack};})();;(function(context){'use strict';function nirvana($){var allowedFormats=['json','html','jsonp'];function getUrl(options){var dataParams=options.data||{},format=(options.format||'json').toLowerCase(),i,key,sortedDict={},sortedKeys=[],urlParams,url=options.scriptPath||context.wgScriptPath;if((typeof options.controller==='undefined')||(typeof options.method==='undefined')){throw'controller and method are required';}urlParams={controller:
options.controller.replace(/Controller$/,''),method:options.method};if(typeof dataParams==='string'){dataParams+='&format='+format;}else{dataParams.format=format;}if(typeof dataParams!=='string'){for(key in dataParams){sortedKeys[sortedKeys.length]=key;}sortedKeys.sort();for(i=0;i<sortedKeys.length;i++){sortedDict[sortedKeys[i]]=dataParams[sortedKeys[i]];}dataParams=$.param(sortedDict);}return url+'/wikia.php?'+$.param(urlParams)+'&'+dataParams;}function sendRequest(attr){var type=(attr.type||'POST').toUpperCase(),format=(attr.format||'json').toLowerCase(),data={},callback=attr.callback||function(){},onErrorCallback=attr.onErrorCallback||function(){},url;if(allowedFormats.indexOf(format)===-1){throw'Only Json,Jsonp and Html format are allowed';}if(type==='POST'&&typeof attr.data!=='undefined'){data=attr.data;delete attr.data;}url=getUrl(attr);var settings={url:url,dataType:format,type:type,data:data,success:callback,error:onErrorCallback};if(typeof attr.contentType!='undefined'){
settings.contentType=attr.contentType;}if(typeof attr.processData!='undefined'){settings.processData=attr.processData;}return $.ajax(settings);}return{sendRequest:sendRequest,getUrl:getUrl,getJson:function(controller,method,data,callback,onErrorCallback){if(typeof data==='function'){onErrorCallback=callback;callback=data;data={};}return sendRequest({controller:controller,method:method,data:data,type:'GET',callback:callback,onErrorCallback:onErrorCallback});},postJson:function(controller,method,data,callback,onErrorCallback){if(typeof data==='function'){onErrorCallback=callback;callback=data;data={};}return sendRequest({controller:controller,method:method,data:data,callback:callback,onErrorCallback:onErrorCallback});}};}if(context.define&&context.define.amd){context.define('wikia.nirvana',['jquery'],nirvana);}if(context.jQuery){context.jQuery.nirvana=nirvana(context.jQuery);}}(this));;define('wikia.ui.factory',['wikia.nirvana','wikia.window','wikia.loader','wikia.ui.component','jquery']
,function uifactory(nirvana,window,loader,UIComponent,$){'use strict';function getComponentsConfig(components){var deferred=new $.Deferred(),data={components:components,cb:window.wgStyleVersion};nirvana.getJson('Wikia\\UI\\UIFactoryApi','getComponentsConfig',data,function(data){deferred.resolve(data);},function(xhrObject){deferred.reject(JSON.parse(xhrObject.responseText));});return deferred.promise();}function getComponentInstance(){return new UIComponent();}function arrayUnique(array){var o={},uniqueArray=[],i;for(i=0;i<array.length;i++){if(o.hasOwnProperty(array[i])){continue;}uniqueArray.push(array[i]);o[array[i]]=1;}return uniqueArray;}function init(componentName){var deferred=new $.Deferred(),components=[],dependencyObjects={};if(!(componentName instanceof Array)){componentName=[componentName];}getComponentsConfig(componentName).done(function(data){var jsAssets=[],cssAssets=[],createComponent=function(element){var component=getComponentInstance(),templateVarsConfig=element.
templateVarsConfig,assets=element.assets,templates=element.templates,dependencies=element.dependencies,dependencyList={};if(typeof dependencies==='object'){dependencies.forEach(function(name){if(typeof dependencyObjects[name]!=='undefined'){dependencyList[name]=dependencyObjects[name];}else{deferred.reject();throw new Error('Sub component '+name+' not found');}});}if(assets){jsAssets=jsAssets.concat(assets.js);cssAssets=cssAssets.concat(assets.css);}if(templateVarsConfig&&templates){component.setComponentsConfig({name:element.name,jsWrapperModule:element.jsWrapperModule,templates:templates,templateVarsConfig:templateVarsConfig,dependencies:dependencyList});}return component;};if(data.dependencies){Object.keys(data.dependencies).forEach(function(name){dependencyObjects[name]=createComponent(data.dependencies[name]);});}data.components.forEach(function(element){components.push(createComponent(element));});jsAssets=arrayUnique(jsAssets);cssAssets=arrayUnique(cssAssets);loader({type:loader
.CSS,resources:cssAssets});function resolveDeferred(){deferred.resolve.apply(null,components);}if(jsAssets.length>0){loader({type:loader.JS,resources:jsAssets}).done(resolveDeferred);}else{resolveDeferred();}}).fail(function(data){if(data.error){throw new Error(data.error+': '+data.message);}deferred.reject();});return deferred.promise();}return{init:init};});;define('wikia.ui.component',['wikia.mustache'],function uicomponent(mustache){'use strict';function validateComponent(componentConfig,componentType,componentVars){var supportedTypes=componentConfig.templates,variables,requiredVars,missingVars=[];if(!supportedTypes.hasOwnProperty(componentType)){throw new Error('Requested component type is not supported!');}requiredVars=componentConfig.templateVarsConfig[componentType].required;missingVars=[];requiredVars.forEach(function(element){if(!componentVars.hasOwnProperty(element)){missingVars.push(element);}});if(missingVars.length>0){variables=missingVars.join(', ');throw new Error(
'Missing required mustache variables: '+variables+'!');}}function UIComponent(){if(!(this instanceof UIComponent)){return new UIComponent();}var componentConfig={},componentType,componentVars;this.render=function(params){componentType=params.type;componentVars=params.vars;validateComponent(componentConfig,componentType,componentVars);return mustache.render(componentConfig.templates[componentType],componentVars);};this.setComponentsConfig=function(config){componentConfig=config;};this.createComponent=function(params,callback){var that=this;if(componentConfig.jsWrapperModule){require([componentConfig.jsWrapperModule],function(object){callback(object.createComponent(params,that));});}else{callback(that,params);}};this.getSubComponent=function(componentName){if(typeof componentConfig.dependencies[componentName]!=='undefined'){return componentConfig.dependencies[componentName];}throw new Error('Dependency '+componentName+' not found.');};}return UIComponent;});;

define('usersignup.marketingOptIn',['wikia.geo'],function(geo){'use strict';function init(wikiaForm){var $optInField=wikiaForm.inputs.wpMarketingOptIn,$optInGroup=wikiaForm.getInputGroup('wpMarketingOptIn'),isEurope=geo.getContinentCode()==='EU',isCanada=geo.getCountryCode()==='CA',isJapan=geo.getCountryCode()==='JP';if(!$optInField.length||!$optInGroup.length){throw'Wikia Form must contain a field called wpMarketingOptIn';}if(!isCanada&&!isJapan){$optInField.attr('checked',true);}if(isEurope||isCanada||isJapan){$optInGroup.add($optInField).removeClass('hidden');}}return{init:init};});;(function(){'use strict';var UserBaseAjaxForm=function(el,options){if(!(el instanceof HTMLElement||el instanceof jQuery||typeof el==='string')){throw new Error('This module requires an element or selector as its first argument');}this.el=$(el);this.options=options||{};this.init();};UserBaseAjaxForm.prototype.init=function(){this.wikiaForm=new WikiaForm(this.el.find('form'));this.inputs=this.wikiaForm.
inputs;this.cacheDOM();this.bindEvents();if(!this.options.skipFocus){this.inputs.username.focus();}};UserBaseAjaxForm.prototype.cacheDOM=function(){this.form=this.wikiaForm.form;this.forgotPasswordLink=this.form.find('.forgot-password');this.submitButton=this.el.find('input[type=submit]');};UserBaseAjaxForm.prototype.bindEvents=function(){this.form.on('submit',this.submitLogin.bind(this));};UserBaseAjaxForm.prototype.submitLogin=function(e){$(window).trigger('UserLoginSubmit');this.submitButton.attr('disabled','disabled');if(this.options.ajaxLogin){e.preventDefault();this.ajaxLogin();}};UserBaseAjaxForm.prototype.ajaxLogin=function(){$.nirvana.postJson('UserLoginSpecial','login',{loginToken:this.loginToken,username:this.inputs.username.val(),password:this.inputs.password.val(),keeploggedin:this.inputs.keeploggedin.is(':checked')},this.submitLoginHandler.bind(this));};UserBaseAjaxForm.prototype.submitLoginHandler=function(json){this.resetValidation();if(json.result==='ok'){this.
onOkayResponse(json);}else if(json.result==='error'){this.onErrorResponse(json);}else if(json.result==='unconfirm'){this.onUnconfirmedEmailResponse();}};UserBaseAjaxForm.prototype.resetValidation=function(){this.form.find('.error-msg').remove();this.form.find('.input-group').removeClass('error');};UserBaseAjaxForm.prototype.onOkayResponse=function(json){var callback=this.options.callback||'';window.wgUserName=json.wgUserName;if(callback&&typeof callback==='function'){callback.bind(this,json)();}else{this.reloadPage();}};UserBaseAjaxForm.prototype.onErrorResponse=function(json){this.submitButton.removeAttr('disabled');this.errorValidation(json);};UserBaseAjaxForm.prototype.onUnconfirmedEmailResponse=function(){$.get(window.wgScriptPath+'/wikia.php',{controller:'UserLoginSpecial',method:'getUnconfirmedUserRedirectUrl',format:'json',username:this.inputs.username.val()},function(json){window.location=json.redirectUrl;});};UserBaseAjaxForm.prototype.errorValidation=function(json){if(json.
errParam){this.wikiaForm.showInputError(json.errParam,json.msg);}else{this.wikiaForm.showGenericError(json.msg);}};UserBaseAjaxForm.prototype.reloadPage=function(){require(['wikia.querystring'],function(QuerySring){var qs=new QuerySring();qs.addCb().goTo();});};window.UserBaseAjaxForm=UserBaseAjaxForm;})();;(function(){'use strict';var UserSignupMixin=function(){this.initOptIn=function(wikiaForm){require(['usersignup.marketingOptIn'],function(optIn){optIn.init(wikiaForm);});};this.setCountryValue=function(wikiaForm){var country=Wikia.geo.getCountryCode();wikiaForm.inputs.wpRegistrationCountry.val(country);};};window.UserSignupMixin=UserSignupMixin;})();;(function(){'use strict';var UserSignupAjaxValidation=function(options){this.wikiaForm=options.wikiaForm;this.submitButton=$(options.submitButton);this.deferred=!1;this.passwordInputName=options.passwordInputName||'password';};UserSignupAjaxValidation.prototype.validateInput=function(e){var $el=$(e.target),data={},inputName=$el.attr(
'name'),value=$el.val(),usernameAlias='userloginext01';if(inputName===this.passwordInputName){this.validatePassword(value);}else{if(inputName==='username'){data.field=usernameAlias;data[usernameAlias]=value;}else{data.field=inputName;data[inputName]=value;}this.sendValidationRequest(data).done(this.validationHandler.bind(this,inputName));}};UserSignupAjaxValidation.prototype.validatePassword=function(password){var pwLength=password.length,msg='',inputName=this.passwordInputName,response={};if(pwLength<wgMinimalPasswordLength){msg=mw.message('userlogin-error-wrongpasswordempty').escaped();}else if(pwLength>wgWikiaMaxNameChars){msg=mw.message('usersignup-error-password-length').escaped();}if(msg!==''){response.msg=msg;response.result='error';}else{response.result='ok';}this.validationHandler(inputName,response);};UserSignupAjaxValidation.prototype.validateBirthdate=function(e){var $el,inputName,data;if(this.deferred&&typeof this.deferred.reject==='function'){this.deferred.reject();}$el=$
(e.target);inputName=$el.attr('name');data={field:'birthdate',birthyear:this.wikiaForm.inputs.birthyear.val(),birthmonth:this.wikiaForm.inputs.birthmonth.val(),birthday:this.wikiaForm.inputs.birthday.val()};this.deferred=this.sendValidationRequest(data).done(this.validationHandler.bind(this,inputName));};UserSignupAjaxValidation.prototype.validationHandler=function(inputName,response){if(response.result==='ok'){this.wikiaForm.clearInputError(inputName);}else{this.wikiaForm.showInputError(inputName,response.msg);}};UserSignupAjaxValidation.prototype.sendValidationRequest=function(data){return $.nirvana.sendRequest({controller:'UserSignupSpecial',method:'formValidation',type:'GET',data:data});};window.UserSignupAjaxValidation=UserSignupAjaxValidation;})();;(function(){'use strict';var UserLoginAjaxForm=function(el,options){UserBaseAjaxForm.call(this,el,options);};UserLoginAjaxForm.prototype=Object.create(UserBaseAjaxForm.prototype);UserLoginAjaxForm.prototype.init=function(){
UserBaseAjaxForm.prototype.init.call(this);this.retrieveLoginToken();};UserLoginAjaxForm.prototype.submitLoginHandler=function(json){var result=json.result;UserBaseAjaxForm.prototype.submitLoginHandler.call(this,json);if(result==='resetpass'){this.onResetPasswordResponse(json);}else if(result==='closurerequested'){this.onAccountClosureRequestResponse();}else{this.onErrorResponse();}};UserLoginAjaxForm.prototype.onResetPasswordResponse=function(){$.nirvana.sendRequest({controller:'UserLoginSpecial',method:'changePassword',format:'html',data:{username:this.inputs.username.val(),password:this.inputs.password.val(),loginToken:this.inputs.loginToken.val(),returnto:this.inputs.returnto.val(),fakeGet:1},callback:this.setupChangePasswordForm.bind(this)});};UserLoginAjaxForm.prototype.setupChangePasswordForm=function(html){var content,form,heading,modal,contentBlock,duration;content=$('<div>').hide().append(html);duration=400;if(this.options.modal){heading=content.find('h1');modal=this.options.
modal;contentBlock=modal.$element.find('.UserLoginModal');modal.setTitle(heading.text());heading.remove();contentBlock.slideUp(duration,function(){contentBlock.html('').html(content);content.show();contentBlock.slideDown(duration);});}else{form=this.form;form.slideUp(duration,(function(){var newForm=content.find('form');form.replaceWith(content);content.slideDown(duration);newForm.on('submit',this.submitLoginAfterResetPass.bind(this));this.wikiaForm=new WikiaForm(newForm);this.inputs=this.wikiaForm.inputs;}).bind(this));}};UserLoginAjaxForm.prototype.onAccountClosureRequestResponse=function(){$.post(wgScriptPath+'/wikia.php',{controller:'UserLoginSpecial',method:'getCloseAccountRedirectUrl',format:'json'},function(data){window.location=data.redirectUrl;});};UserLoginAjaxForm.prototype.retrieveLoginToken=function(params){params=params||{};if(!this.loginToken||params.clearCache){this.loginToken='retrieving';$.nirvana.postJson('UserLoginSpecial','retrieveLoginToken',function(res){this.
loginToken=res.loginToken;this.inputs.loginToken.val(res.loginToken);}.bind(this));}};UserLoginAjaxForm.prototype.submitLoginAfterResetPass=function(e){this.submitButton.attr('disabled','disabled');if(this.options.ajaxLogin){e.preventDefault();this.ajaxLoginAfterResetPass();}};UserLoginAjaxForm.prototype.ajaxLoginAfterResetPass=function(){$.nirvana.postJson('UserLoginSpecial','loginForm',{loginToken:this.loginToken,username:this.inputs.username.val(),password:this.inputs.password.val(),newpassword:this.inputs.newpassword.val(),retype:this.inputs.retype.val(),action:this.inputs.action.val(),editToken:this.inputs.editToken.val()},this.submitLoginHandler.bind(this));};window.UserLoginAjaxForm=UserLoginAjaxForm;})();;(function(){'use strict';var UserLoginModal={loginAjaxForm:!1,isInitializationStarted:!1,uiFactory:!1,packagesData:!1,$modal:!1,bucky:window.Bucky('UserLoginModal'),initModal:function(options){var self=this;this.bucky.timer.start('initModal');require([
'wikia.tracker'],function(tracker){self.trackerActions=tracker.ACTIONS;self.track=tracker.buildTrackingFunction({category:'force-login-modal',trackingMethod:'analytics'});});$.when(Wikia.getMultiTypePackage({templates:[{controller:'UserLoginSpecial',method:'modal',params:{uselang:window.wgUserLanguage}}],styles:'/extensions/wikia/UserLogin/css/UserLoginModal.scss',messages:'UserLogin'})).done(function(packagesData){require(['wikia.ui.factory','wikia.loader'],function(uiFactory,loader){loader.processStyle(packagesData.styles);self.uiFactory=uiFactory;self.packagesData=packagesData;self.buildModal(options);self.bucky.timer.stop('initModal');});});},buildModal:function(options){var self=this,origin='',clickAction=this.trackerActions.CLICK;this.bucky.timer.start('buildModal');this.uiFactory.init('modal').then(function(uiModal){var modalTemplateName='UserLoginSpecial_modal',modalConfig={type:'default',vars:{id:'userForceLoginModal',size:'medium',content:self.packagesData.templates[
modalTemplateName],title:$.msg('userlogin-login-heading'),closeButton:!0}};uiModal.createComponent(modalConfig,function(loginModal){UserLoginModal.$modal=loginModal;var $loginModal=loginModal.$element;UserLoginModal.loginAjaxForm=new window.UserLoginAjaxForm($loginModal,{ajaxLogin:!0,modal:loginModal,callback:function(res){window.wgUserName=res.username;var callback=options.callback;if(callback&&typeof callback==='function'){if(!options.persistModal){UserLoginModal.$modal.trigger('close');}callback();}else{this.reloadPage();}}});if(options.modalInitCallback&&typeof options.modalInitCallback==='function'){options.modalInitCallback();}if(options.origin){origin=options.origin;}self.track({action:self.trackerActions.OPEN,label:'from-'+origin});$loginModal.on('click','.forgot-password',function(){self.track({action:clickAction,label:'forgot-password'});}).on('click','input.keep-logged-in',function(){self.track({action:clickAction,label:'keep-me-logged-in'});}).on('click',
'.get-account a',function(){self.track({action:clickAction,label:'sign-up-from-'+origin});}).on('click','input.login-button',function(){self.track({action:clickAction,label:'login-from-'+origin});});self.bucky.timer.stop('buildModal');});});},show:function(options){options=options||{};options.modalInitCallback=$.proxy(function(){this.$modal.show();},this);this.initModal(options);return true;},isPreventingForceLogin:function(element){if(!(element.closest('span').hasClass('drop'))&&!(element.closest('ul').hasClass('WikiaMenuElement'))){return false;}return true;},init:function(){var editpromptable=$('#te-editanon, .loginToEditProtectedPage, .upphotoslogin');if(window.wgDisableAnonymousEditing){editpromptable=editpromptable.add('.editsection');}editpromptable.click($.proxy(function(ev){ev.stopPropagation();if(!this.isPreventingForceLogin($(ev.target))&&window.UserLogin.isForceLogIn()){ev.preventDefault();}},this));$('body').delegate('.ajaxLogin','click',function(e){UserLoginModal.show();e
.preventDefault();});}};window.UserLoginModal=UserLoginModal;$(function(){UserLoginModal.init();});})();;var LatestActivity={wikiaRecentActivityContainer:null,init:function(){this.wikiaRecentActivityContainer=$('#wikia-recent-activity');if(this.wikiaRecentActivityContainer.exists()){this.lazyLoadContent();}},lazyLoadContent:function(){$.nirvana.sendRequest({controller:'LatestActivity',method:'Index',format:'html',type:'GET',callback:$.proxy(function(html){if($.browser.msie){this.wikiaRecentActivityContainer.empty().append($(html).children());}else{this.wikiaRecentActivityContainer.replaceWith(html);}},this)});}};$(window).load(function(){$('.WikiaRail').on('afterLoad.rail',function(){LatestActivity.init();});});;

var Mustache=(typeof module!=="undefined"&&module.exports)||{};(function(exports){exports.name="mustache.js";exports.version="0.5.0-dev";exports.tags=["{{","}}"];exports.parse=parse;exports.compile=compile;exports.render=render;exports.clearCache=clearCache;exports.to_html=function(template,view,partials,send){var result=render(template,view,partials);if(typeof send==="function"){send(result);}else{return result;}};var _toString=Object.prototype.toString;var _isArray=Array.isArray;var _forEach=Array.prototype.forEach;var _trim=String.prototype.trim;var isArray;if(_isArray){isArray=_isArray;}else{isArray=function(obj){return _toString.call(obj)==="[object Array]";};}var forEach;if(_forEach){forEach=function(obj,callback,scope){return _forEach.call(obj,callback,scope);};}else{forEach=function(obj,callback,scope){for(var i=0,len=obj.length;i<len;++i){callback.call(scope,obj[i],i,obj);}};}var spaceRe=/^\s*$/;function isWhitespace(string){return spaceRe.test(string);}var trim;if(_trim){trim
=function(string){return string==null?"":_trim.call(string);};}else{var trimLeft,trimRight;if(isWhitespace("\xA0")){trimLeft=/^\s+/;trimRight=/\s+$/;}else{trimLeft=/^[\s\xA0]+/;trimRight=/[\s\xA0]+$/;}trim=function(string){return string==null?"":String(string).replace(trimLeft,"").replace(trimRight,"");};}var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':'&quot;',"'":'&#39;'};function escapeHTML(string){return String(string).replace(/&(?!\w+;)|[<>"']/g,function(s){return escapeMap[s]||s;});}function debug(e,template,line,file){file=file||"<template>";var lines=template.split("\n"),start=Math.max(line-3,0),end=Math.min(lines.length,line+3),context=lines.slice(start,end);var c;for(var i=0,len=context.length;i<len;++i){c=i+start+1;context[i]=(c===line?" >> ":"    ")+context[i];}e.template=template;e.line=line;e.file=file;e.message=[file+":"+line,context.join("\n"),"",e.message].join("\n");return e;}function lookup(name,stack,defaultValue){if(name==="."){return stack[stack.length-1];}
var names=name.split(".");var lastIndex=names.length-1;var target=names[lastIndex];var value,context,i=stack.length,j,localStack;while(i){localStack=stack.slice(0);context=stack[--i];j=0;while(j<lastIndex){context=context[names[j++]];if(context==null){break;}localStack.push(context);}if(context&&typeof context==="object"&&target in context){value=context[target];break;}}if(typeof value==="function"){value=value.call(localStack[localStack.length-1]);}if(value==null){return defaultValue;}return value;}function renderSection(name,stack,callback,inverted){var buffer="";var value=lookup(name,stack);if(inverted){if(value==null||value===false||(isArray(value)&&value.length===0)){buffer+=callback();}}else if(isArray(value)){forEach(value,function(value){stack.push(value);buffer+=callback();stack.pop();});}else if(typeof value==="object"){stack.push(value);buffer+=callback();stack.pop();}else if(typeof value==="function"){var scope=stack[stack.length-1];var scopedRender=function(template){
return render(template,scope);};buffer+=value.call(scope,callback(),scopedRender)||"";}else if(value){buffer+=callback();}return buffer;}function parse(template,options){options=options||{};var tags=options.tags||exports.tags,openTag=tags[0],closeTag=tags[tags.length-1];var code=['var buffer = "";',"\nvar line = 1;","\ntry {",'\nbuffer += "'];var spaces=[],hasTag=!1,nonSpace=!1;var stripSpace=function(){if(hasTag&&!nonSpace&&!options.space){while(spaces.length){code.splice(spaces.pop(),1);}}else{spaces=[];}hasTag=!1;nonSpace=!1;};var sectionStack=[],updateLine,nextOpenTag,nextCloseTag;var setTags=function(source){tags=trim(source).split(/\s+/);nextOpenTag=tags[0];nextCloseTag=tags[tags.length-1];};var includePartial=function(source){code.push('";',updateLine,'\nvar partial = partials["'+trim(source)+'"];','\nif (partial) {','\n  buffer += render(partial,stack[stack.length - 1],partials);','\n}','\nbuffer += "');};var openSection=function(source,inverted){var name=trim(
source);if(name===""){throw debug(new Error("Section name may not be empty"),template,line,options.file);}sectionStack.push({name:name,inverted:inverted});code.push('";',updateLine,'\nvar name = "'+name+'";','\nvar callback = (function () {','\n  return function () {','\n    var buffer = "";','\nbuffer += "');};var openInvertedSection=function(source){openSection(source,true);};var closeSection=function(source){var name=trim(source);var openName=sectionStack.length!=0&&sectionStack[sectionStack.length-1].name;if(!openName||name!=openName){throw debug(new Error('Section named "'+name+'" was never opened'),template,line,options.file);}var section=sectionStack.pop();code.push('";','\n    return buffer;','\n  };','\n})();');if(section.inverted){code.push("\nbuffer += renderSection(name,stack,callback,true);");}else{code.push("\nbuffer += renderSection(name,stack,callback);");}code.push('\nbuffer += "');};var sendPlain=function(source){code.push('";',updateLine,'\nbuffer += lookup("'+trim(
source)+'",stack,"");','\nbuffer += "');};var sendEscaped=function(source){code.push('";',updateLine,'\nbuffer += escapeHTML(lookup("'+trim(source)+'",stack,""));','\nbuffer += "');};var line=1,c,callback;for(var i=0,len=template.length;i<len;++i){if(template.slice(i,i+openTag.length)===openTag){i+=openTag.length;c=template.substr(i,1);updateLine='\nline = '+line+';';nextOpenTag=openTag;nextCloseTag=closeTag;hasTag=!0;switch(c){case"!":i++;callback=null;break;case"=":i++;closeTag="="+closeTag;callback=setTags;break;case">":i++;callback=includePartial;break;case"#":i++;callback=openSection;break;case"^":i++;callback=openInvertedSection;break;case"/":i++;callback=closeSection;break;case"{":closeTag="}"+closeTag;case"&":i++;nonSpace=!0;callback=sendPlain;break;default:nonSpace=!0;callback=sendEscaped;}var end=template.indexOf(closeTag,i);if(end===-1){throw debug(new Error('Tag "'+openTag+'" was not closed properly'),template,line,options.file);}var source=template.substring(i,end);
if(callback){callback(source);}var n=0;while(~(n=source.indexOf("\n",n))){line++;n++;}i=end+closeTag.length-1;openTag=nextOpenTag;closeTag=nextCloseTag;}else{c=template.substr(i,1);switch(c){case'"':case"\\":nonSpace=!0;code.push("\\"+c);break;case"\r":break;case"\n":spaces.push(code.length);code.push("\\n");stripSpace();line++;break;default:if(isWhitespace(c)){spaces.push(code.length);}else{nonSpace=!0;}code.push(c);}}}if(sectionStack.length!=0){throw debug(new Error('Section "'+sectionStack[sectionStack.length-1].name+'" was not closed properly'),template,line,options.file);}stripSpace();code.push('";',"\nreturn buffer;","\n} catch (e) { throw {error: e, line: line}; }");var body=code.join("").replace(/buffer \+= "";\n/g,"");if(options.debug){if(typeof console!="undefined"&&console.log){console.log(body);}else if(typeof print==="function"){print(body);}}return body;}function _compile(template,options){var args="view,partials,stack,lookup,escapeHTML,renderSection,render";var body=
parse(template,options);var fn=new Function(args,body);return function(view,partials){partials=partials||{};var stack=[view];try{return fn(view,partials,stack,lookup,escapeHTML,renderSection,render);}catch(e){throw debug(e.error,template,e.line,options.file);}};}var _cache={};function clearCache(){_cache={};}function compile(template,options){options=options||{};if(options.cache!==false){if(!_cache[template]){_cache[template]=_compile(template,options);}return _cache[template];}return _compile(template,options);}function render(template,view,partials){return compile(template)(view,partials);}})(Mustache);(function(context){context.Mustache=Mustache;if(context.define&&context.define.amd){context.define('wikia.mustache',Mustache);}}(window));;define('wikia.toc',function(){'use strict';function getData(headers,createSection,checkHeader){var toc={sections:[]},levels=[toc.sections],headersLength=headers.length,hToLevel=[],level=-1,lastHeader=-1,headerLevel,i,obj,header;for(i=0;i<
headersLength;i++){header=headers[i];headerLevel=parseInt(header.nodeName.slice(1),10);if(checkHeader){header=checkHeader(header);}if(!header){continue;}if(headerLevel>lastHeader){level+=1;}else if(headerLevel<lastHeader&&level>0){level=0;if(typeof hToLevel[headerLevel]!=='undefined'){level=hToLevel[headerLevel];}}obj=createSection(header,level+1);hToLevel[headerLevel]=level;lastHeader=headerLevel;levels[level].push(obj);levels[level+1]=obj.sections;}return toc;}return{getData:getData};});;require(['jquery','wikia.toc','wikia.mustache',require.optional('wikia.toc.mustache')],function($,toc,mustache,tocTemplate){'use strict';var containerHasTOC={},cacheKey='TOCAssets';function wrapper(){return function(text,render){if(text!==''){return'<ol>'+render(text)+'</ol>';}else{return false;}};}function getHeader(rawHeader){rawHeader=$(rawHeader).children('.mw-headline');if(rawHeader.length===0||rawHeader.is(':hidden')){return false;}rawHeader=rawHeader.clone();rawHeader.find('noscript').remove()
;return rawHeader;}function createTOCSection(header,tocLevel){return{title:header.text(),id:header.attr('id'),class:'toclevel-'+tocLevel,sections:[]};}function loadTemplate(){var dfd=new $.Deferred();require(['wikia.loader','wikia.cache'],function(loader,cache){var template=cache.getVersioned(cacheKey);if(template){dfd.resolve(template);}else{require(['wikia.throbber'],function(throbber){var toc=$('#toc');throbber.show(toc);loader({type:loader.MULTI,resources:{mustache:'extensions/wikia/TOC/templates/TOC_articleContent.mustache'}}).done(function(data){template=data.mustache[0];dfd.resolve(template);cache.setVersioned(cacheKey,template,604800);throbber.remove(toc);});});}});return dfd.promise();}function renderTOC($target){var $tocContainer=$target.parents('#toc'),$container=$tocContainer.children('ol'),$contentContainer=getContentContainer($target),$headers=$contentContainer.find('h1, h2, h3, h4, h5, h6'),data=toc.getData($headers,createTOCSection,getHeader);function render(template){
$container.append(mustache.render(template,data));$tocContainer.trigger('afterLoad.toc').data('loaded',true);setHasTOC($target,true);}data.wrapper=wrapper;if(tocTemplate){render(tocTemplate);}else{loadTemplate().done(render);}}function setTOCCookie(isHidden){$.cookie('mw_hidetoc',isHidden,{expires:30,path:'/'});}function showHideTOC($target){var tocWrapper=$target.parents('#toc'),targetLabel,tocCookie;tocWrapper.toggleClass('show');if(tocWrapper.hasClass('show')){targetLabel=$target.data('hide');tocCookie=null;}else{targetLabel=$target.data('show');tocCookie=1;}$target.text(targetLabel);$target.attr('title',targetLabel);setTOCCookie(tocCookie);}function isNewTOC(){return $('#toc').is('nav');}function initTOC(){var $showLink=$('#togglelink');if(!hasTOC($showLink)){renderTOC($showLink);}showHideTOC($showLink);}function hasTOC($target){var containerIdentifier=getContainerIdentifier($target);return typeof containerHasTOC[containerIdentifier]!=='undefined'&&containerHasTOC[
containerIdentifier];}function setHasTOC($target,value){var containerIdentifier=getContainerIdentifier($target);containerHasTOC[containerIdentifier]=value;}function getContentContainer($target){return $target.parents('.tabBody, #mw-content-text').first();}function getContainerIdentifier($target){return getContentContainer($target).data('tab-body')||'main';}$(function(){$('body').on('click','#togglelink',function(event){event.preventDefault();if(isNewTOC()){var $target=$(event.target);if(!hasTOC($target)){renderTOC($target);}showHideTOC($target);}});$(window).on('EditPageAfterRenderPreview',function(){containerHasTOC={};if(isNewTOC()&&window.wgUserName!==null){initTOC();}});if(isNewTOC()&&window.wgUserName!==null&&$.cookie('mw_hidetoc')===null){initTOC();}});});;

define('wikia.browserDetect',['wikia.window'],function(win){'use strict';var appName=win.navigator.appName,userAgent=win.navigator.userAgent,browser=null,operatingSystem=null;function isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);}function isIE(){var bool=!1;if(appName==='Microsoft Internet Explorer'||(appName==='Netscape'&&userAgent.indexOf('Trident/')!==-1)){bool=!0;}return bool;}function isEdge(){return userAgent.indexOf('Edge')!==-1;}function isFirefox(){return userAgent.toLowerCase().indexOf('firefox')>-1;}function isChrome(){return userAgent.toLowerCase().indexOf('chrome')>-1;}function isIPad(){var bool=!1;if(userAgent.match(/iPad/i)!==null){bool=!0;}return bool;}function isIOS7orLower(){return!!userAgent.match(/iPad.+OS.[6,7].\d.+like.Mac.OS.+Safari/i);}function isAndroid(){return userAgent.toLowerCase().indexOf('android')>-1;}function getOS(){if(null!==operatingSystem){return operatingSystem;}operatingSystem=
'unknown';if(userAgent.indexOf('Win')!==-1){operatingSystem='Windows';}if(userAgent.indexOf('Mac')!==-1){operatingSystem='OSX';}if(userAgent.indexOf('Linux')!==-1){operatingSystem='Linux';}if(userAgent.indexOf('Android')!==-1){operatingSystem='Android';}if(userAgent.indexOf('like Mac')!==-1){operatingSystem='iOS';}return operatingSystem;}function getBrowser(){if(null!==browser){return browser;}var appVersion=win.navigator.appVersion,temp,matches=userAgent.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(matches[1])){temp=/\brv[ :]+(\d+)/g.exec(userAgent)||[];browser='IE '+(temp[1]||'');return browser;}if(matches[1]==='Chrome'){temp=userAgent.match(/\b(OPR|Edge)\/(\d+)/);if(temp!==null){browser=temp.slice(1).join(' ').replace('OPR','Opera');return browser;}}matches=matches[2]?[matches[1],matches[2]]:[appName,appVersion,'-?'];temp=userAgent.match(/version\/(\d+)/i);if(temp!==null){matches.splice(1,1,temp[1]);}browser=matches.join(' ');return browser
;}function getBrowserVersion(){var browserStringParts=getBrowser().split(' ');return parseInt(browserStringParts[1],10);}return{getBrowser:getBrowser,getBrowserVersion:getBrowserVersion,getOS:getOS,isChrome:isChrome,isIE:isIE,isFirefox:isFirefox,isIPad:isIPad,isIOS7orLower:isIOS7orLower,isAndroid:isAndroid,isMobile:isMobile,isEdge:isEdge};});;define('wikia.iframeWriter',['wikia.document','wikia.log'],function(doc,log){'use strict';var logGroup='wikia.iframeWriter',iframeStyle='<style>* {margin: 0; padding: 0;}</style>',iframeHeader='<html><body>',iframeFooter='</body></html>';function getIframe(params){log(['getIframe',params],'debug',logGroup);var code=iframeHeader+iframeStyle+params.code+iframeFooter,loaded=!1,iframe=doc.createElement('iframe');iframe.frameBorder='no';iframe.scrolling='no';iframe.width=params.width;iframe.height=params.height;if(params.classes){iframe.className=params.classes;}iframe.onload=function(){if(loaded){return;}loaded=!0;iframe.contentWindow.document.
write(code);iframe.contentWindow.document.close();};return iframe;}return{getIframe:getIframe};});;define('wikia.scriptwriter',['wikia.document','wikia.lazyqueue','wikia.log','wikia.window','wikia.loader'],function(doc,lazyQueue,log,win,loader){'use strict';var logGroup='wikia.scriptwriter',library='ghostwriter',queue=[],loading=!1;function gwFlushLoadHandlersAndCall(callback){return function(){win.ghostwriter.flushloadhandlers();callback();};}function noop(){return;}function processItem(params){log(['processItem',library,params],'debug',logGroup);var text=params.gwScriptText||'document.write('+JSON.stringify(params.html)+');';win.ghostwriter(params.element,{insertType:'append',script:{text:text},done:gwFlushLoadHandlersAndCall(params.callback)});}function processQueue(){log('processQueue','debug',logGroup);lazyQueue.makeQueue(queue,processItem);queue.start();}function loadLibrary(){var url;if(loading){return;}loading=!0;log(['loadLibrary',library],'debug',logGroup);url=
'/resources/wikia/libraries/ghostwriter/gw.min.js';loader(url).done(processQueue);}function getElement(elementOrElementId){if(elementOrElementId&&elementOrElementId.getElementsByTagName){return elementOrElementId;}if(typeof elementOrElementId==='string'){var el=doc.getElementById(elementOrElementId);if(el){return el;}}throw'wikia.scriptwriter: Not a valid element or element id '+elementOrElementId;}function queueHtmlInjection(params){log(['queueHtmlInjection',params],'debug',logGroup);queue.push(params);loadLibrary();}function escapeHtml(str){return str.replace(/"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}function injectHtml(elementOrElementId,html,callback){queueHtmlInjection({element:getElement(elementOrElementId),html:html,callback:callback||noop});}function injectScriptByUrl(elementOrElementId,url,callback){queueHtmlInjection({element:getElement(elementOrElementId),html:'<script src="'+escapeHtml(url)+'"></script>',callback:callback||noop});}function injectScriptByText
(elementOrElementId,text,callback){queueHtmlInjection({element:getElement(elementOrElementId),html:'<script src="data:text/javascript,'+encodeURIComponent(text)+'"></script>',gwScriptText:text,callback:callback||noop});}return{injectHtml:injectHtml,injectScriptByUrl:injectScriptByUrl,injectScriptByText:injectScriptByText};});;define('ext.wikia.adEngine.adDecoratorLegacyParamFormat',['wikia.log'],function(log){'use strict';var logGroup='ext.wikia.adEngine.adDecoratorLegacyParamFormat';function convertSimpleParamsForFillInSlot(slot){if(slot instanceof Array){slot=slot[0];}if(typeof slot==='string'){slot={slotName:slot};}if(slot&&slot.slotName){return slot;}}function decorator(fillInSlot){function enhancedFillInSlot(slot){var param=convertSimpleParamsForFillInSlot(slot);if(param){fillInSlot(param);}else{log(['Incorrect fillInSlot param:',param],'error',logGroup);}}return enhancedFillInSlot;}return decorator;});;define('ext.wikia.adEngine.adDecoratorPageDimensions',[
'ext.wikia.adEngine.adLogicPageDimensions','wikia.log'],function(adLogicPageDimensions,log){'use strict';var logGroup='ext.wikia.adEngine.adDecoratorPageDimensions';function decorator(fillInSlot){log(['decorator',fillInSlot],'debug',logGroup);return function(slot){log(['decorated',slot],'debug',logGroup);var slotname=slot.slotName;if(adLogicPageDimensions.isApplicable(slotname)){adLogicPageDimensions.addSlot(slotname,function(){fillInSlot(slot);});log(['decorated',slot,'deferred'],'debug',logGroup);return function(){return;};}log(['decorated',slot,'return same'],'debug',logGroup);return fillInSlot(slot);};}return decorator;});;define('ext.wikia.adEngine.adEngine',['ext.wikia.adEngine.adDecoratorLegacyParamFormat','ext.wikia.adEngine.utils.eventDispatcher','ext.wikia.adEngine.slot.adSlot','ext.wikia.adEngine.slot.service.slotRegistry','ext.wikia.adEngine.slotTracker','ext.wikia.adEngine.slotTweaker','ext.wikia.adEngine.tracking.viewabilityTracker','ext.wikia.adEngine.utils.hooks',
'wikia.document','wikia.lazyqueue','wikia.log'],function(adDecoratorLegacyParamFormat,eventDispatcher,adSlot,slotRegistry,slotTracker,slotTweaker,viewabilityTracker,registerHooks,doc,lazyQueue,log){'use strict';var logGroup='ext.wikia.adEngine.adEngine';function decorate(func,decorators){log(['decorate',func,decorators],log.levels.debug,logGroup);var i,len;if(decorators&&decorators.length){for(i=0,len=decorators.length;i<len;i+=1){func=decorators[i](func);}}return func;}function cleanProviderContainers(slotName){var slotContainer=doc.getElementById(slotName),containers,i;if(!slotContainer){return;}containers=slotContainer.childNodes;for(i=containers.length-1;i>=0;i-=1){if(containers[i].tagName!=='SCRIPT'){slotContainer.removeChild(containers[i]);}}}function prepareAdProviderContainer(providerName,slotName){var providerContainerId=providerName+'_'+slotName,adContainer=doc.getElementById(slotName),providerContainer=doc.getElementById(providerContainerId);if(!providerContainer&&
adContainer){providerContainer=doc.createElement('div');providerContainer.classList.add('provider-container');providerContainer.id=providerContainerId;adContainer.appendChild(providerContainer);}log(['prepareAdProviderContainer',providerName,slotName,providerContainer],log.levels.debug,logGroup);return providerContainer;}function initializeProviderOnce(provider){if(!provider.fillInSlotQueue){provider.fillInSlotQueue=[];lazyQueue.makeQueue(provider.fillInSlotQueue,function(args){provider.fillInSlot.apply(provider,args);});if(provider.initialize){provider.initialize(provider.fillInSlotQueue.start);}else{provider.fillInSlotQueue.start();}}}function createSlot(queuedSlot,container,callbacks){var slot=adSlot.create(queuedSlot.slotName,container,callbacks);registerHooks(slot,['success','collapse','hop','renderEnded','viewed']);slot.post('success',queuedSlot.onSuccess);return slot;}function run(adConfig,adslots,queueName){log(['run',adslots,queueName],log.levels.debug,logGroup);function
fillInSlotUsingProvider(queuedSlot,provider,nextProvider){log(['fillInSlotUsingProvider',provider.name,queuedSlot],log.levels.debug,logGroup);var slotName=queuedSlot.slotName,container=prepareAdProviderContainer(provider.name,slotName),tracker=slotTracker(provider.name,slotName,queueName),slot=createSlot(queuedSlot,container,{success:function(adInfo){log(['success',provider.name,slotName,adInfo],log.levels.debug,logGroup);slotTweaker.show(slotName);eventDispatcher.dispatch('adengine.slot.status',{slot:slot,status:'success',adInfo:adInfo});tracker.track('success',adInfo);slot.container.setAttribute('data-slot-result','success');},collapse:function(adInfo){log(['collapse',provider.name,slotName,adInfo],log.levels.debug,logGroup);slotTweaker.hide(slotName);eventDispatcher.dispatch('adengine.slot.status',{slot:slot,status:'collapse',adInfo:adInfo});tracker.track('collapse',adInfo);slot.container.setAttribute('data-slot-result','collapse');},isEnabled:function(){log(['isEnabled',provider.
name,slotName],log.levels.debug,logGroup);return slot.enabled;},disable:function(){log(['disable',provider.name,slotName],log.levels.debug,logGroup);slot.enabled=!1;},enable:function(){log(['disable',provider.name,slotName],log.levels.debug,logGroup);slot.enabled=!0;},hop:function(adInfo){log(['hop',provider.name,slotName,adInfo],log.levels.debug,logGroup);slotTweaker.hide(container.id);eventDispatcher.dispatch('adengine.slot.status',{slot:slot,status:'hop',adInfo:adInfo});tracker.track('hop',adInfo);slot.container.setAttribute('data-slot-result','hop');nextProvider();},renderEnded:function(){log(['renderEnded',provider.name,slotName],log.levels.debug,logGroup);if(!slot.container.getAttribute('data-slot-result')){slot.container.setAttribute('data-slot-result','loading');}},viewed:function(){log(['viewed',provider.name,slotName],log.levels.debug,logGroup);slot.container.setAttribute('data-slot-viewed','true');viewabilityTracker.track(slot);}});slot.post('viewed',function(){slot.
isViewed=!0;});slotRegistry.add(slot,provider.name);initializeProviderOnce(provider);provider.fillInSlotQueue.push([slot]);}function fillInSlot(slot){log(['fillInSlot',slot],log.levels.debug,logGroup);var slotName=slot.slotName,providerList=adConfig.getProviderList(slotName).slice();log(['fillInSlot',slot,'provider list',JSON.stringify(providerList)],log.levels.debug,logGroup);function handleNoAd(){log(['handleNoAd',slot],log.levels.debug,logGroup);slotTweaker.hide(slotName);if(typeof slot.onError==='function'){slot.onError(slot);}}function nextProvider(){var provider;do{provider=providerList.shift();if(!provider){handleNoAd();return;}if(provider.canHandleSlot(slotName)){fillInSlotUsingProvider(slot,provider,nextProvider);return;}log(['fillInSlot',slot,'skipping provider, cannot handle slot',provider],log.levels.debug,logGroup);}while(provider);}slotRegistry.reset(slotName);cleanProviderContainers(slotName);nextProvider();}var decorators=adConfig.getDecorators()||[];if(
adDecoratorLegacyParamFormat){decorators.push(adDecoratorLegacyParamFormat);}log(['run','initializing lazyQueue on the queue'],log.levels.debug,logGroup);lazyQueue.makeQueue(adslots,decorate(fillInSlot,decorators));log(['run','launching queue on adslots ('+adslots.length+')'],log.levels.debug,logGroup);adslots.start();log(['run','initial queue handled'],log.levels.debug,logGroup);}return{run:run};});;define('ext.wikia.adEngine.adEngineRunner',['ext.wikia.adEngine.adEngine','ext.wikia.adEngine.adTracker','wikia.instantGlobals','wikia.log','wikia.window',require.optional('ext.wikia.adEngine.lookup.a9'),require.optional('ext.wikia.adEngine.lookup.prebid'),require.optional('ext.wikia.aRecoveryEngine.adBlockRecovery')],function(adEngine,adTracker,instantGlobals,log,win,a9,prebid,adBlockRecovery){'use strict';var logGroup='ext.wikia.adEngine.adEngineRunner',supportedModules=[a9,prebid,adBlockRecovery],timeout=instantGlobals.wgAdDriverDelayTimeout||2000;function delayRun(runAdEngine){var
modulesQueue=[],enabledModules=[],startedByModules=!1;function markModule(name){log(name+' responded',log.levels.debug,logGroup);if(modulesQueue.indexOf(name)===-1){modulesQueue.push(name);}if(modulesQueue.length===enabledModules.length){log('All modules responded',log.levels.info,logGroup);startedByModules=!0;adTracker.measureTime('adengine_runner/modules_responded',modulesQueue.join(',')).track();runAdEngine();}}function registerModules(){log(['Register modules',enabledModules.length],log.levels.debug,logGroup);enabledModules.forEach(function(module){var name=module.getName();module.addResponseListener(function(){markModule(name);});});}function getTimeoutModules(){var timeoutModules=[];enabledModules.forEach(function(enabledModule){var enabledModuleName=enabledModule.getName();if(modulesQueue.indexOf(enabledModuleName)===-1){timeoutModules.push(enabledModuleName);}});return timeoutModules.join(',');}supportedModules.forEach(function(module){if(module&&module.wasCalled()){
enabledModules.push(module);}});if(enabledModules.length===0){log('All modules are disabled',log.levels.info,logGroup);runAdEngine();}else{registerModules();win.setTimeout(function(){if(!startedByModules){log(['Timeout exceeded',timeout],log.levels.info,logGroup);adTracker.measureTime('adengine_runner/modules_timeout',getTimeoutModules()).track();runAdEngine();}},timeout);}}function run(config,slots,queueName,delayEnabled){var engineStarted=!1;function runAdEngine(){if(engineStarted){return;}engineStarted=!0;log('Running AdEngine',log.levels.info,logGroup);adTracker.measureTime('adengine.init',queueName).track();adEngine.run(config,slots,queueName);}if(delayEnabled){delayRun(runAdEngine);}else{log('Run AdEngine without delay',log.levels.info,logGroup);runAdEngine();}}return{run:run};});;define('ext.wikia.adEngine.adLogicDartSubdomain',['wikia.geo'],function(Geo){'use strict';function getSubdomain(){switch(Geo.getContinentCode()){case'AF':case'EU':return'ad-emea';case'AS':switch(
Geo.getCountryCode()){case'AE':case'CY':case'BH':case'IL':case'IQ':case'IR':case'JO':case'KW':case'LB':case'OM':case'PS':case'QA':case'SA':case'SY':case'TR':case'YE':return'ad-emea';default:return'ad-apac';}case'OC':return'ad-apac';default:return'ad';}}return{getSubdomain:getSubdomain};});;define('ext.wikia.adEngine.adLogicPageDimensions',['ext.wikia.adEngine.slotTweaker','wikia.document','wikia.log','wikia.throttle','wikia.window'],function(slotTweaker,doc,log,throttle,win){'use strict';var logGroup='ext.wikia.adEngine.adLogicPageDimensions',initCalled=!1,wrappedAds={},slotsToHideOnMediaQuery={TOP_RIGHT_BOXAD:'oneColumn',INCONTENT_BOXAD_1:'oneColumn'},mediaQueriesToCheck={twoColumns:'screen and (min-width: 1024px)',oneColumn:'screen and (max-width: 1023px)',noTopButton:'screen and (max-width: 1063px)',},mediaQueriesMet,matchMedia;function matchMediaMoz(query){return win.matchMedia(query).matches;}function matchMediaIe(query){return win.styleMedia.matchMedium(query);}matchMedia=win.
matchMedia&&matchMediaMoz;matchMedia=matchMedia||(win.styleMedia&&win.styleMedia.matchMedium&&matchMediaIe);matchMedia=matchMedia||(win.media&&win.media.matchMedium);if(!matchMedia){log('No working matchMedia implementation found','user',logGroup);}function shouldBeShown(slotname){var wideEnough=!1,conflictingMediaQuery;if(mediaQueriesMet){if(slotsToHideOnMediaQuery[slotname]){conflictingMediaQuery=slotsToHideOnMediaQuery[slotname];wideEnough=!mediaQueriesMet[conflictingMediaQuery];}else{wideEnough=!0;}}return wideEnough;}function refresh(ad){if(shouldBeShown(ad.slotname)){if(ad.state==='none'||ad.state==='ready'){log(['Loading ad in slot '+ad.slotname,ad],'info',logGroup);slotTweaker.show(ad.slotname,true);ad.loadCallback();ad.state='shown';}else if(ad.state==='hidden'){log(['Reshowing slot '+ad.slotname,ad],'info',logGroup);slotTweaker.show(ad.slotname,true);ad.state='shown';}}else{if(ad.state==='none'){log(['Hiding empty slot '+ad.slotname,ad],'info',logGroup);slotTweaker.hide(
ad.slotname);slotTweaker.hackChromeRefresh(ad.slotname);ad.state='ready';}else if(ad.state==='shown'){log(['Hiding slot '+ad.slotname,ad],'info',logGroup);slotTweaker.hide(ad.slotname);slotTweaker.hackChromeRefresh(ad.slotname);ad.state='hidden';}}}function updateVars(){var mediaQueryIndex;if(win.wgOasisResponsive||win.wgOasisBreakpoints){if(matchMedia){mediaQueriesMet={};for(mediaQueryIndex in mediaQueriesToCheck){if(mediaQueriesToCheck.hasOwnProperty(mediaQueryIndex)){mediaQueriesMet[mediaQueryIndex]=matchMedia(mediaQueriesToCheck[mediaQueryIndex]);}}}}else{mediaQueriesMet={};for(mediaQueryIndex in mediaQueriesToCheck){if(mediaQueriesToCheck.hasOwnProperty(mediaQueryIndex)){mediaQueriesMet[mediaQueryIndex]=!1;}}}}function refreshAll(){var slotname;for(slotname in wrappedAds){if(wrappedAds.hasOwnProperty(slotname)){refresh(wrappedAds[slotname]);}}}function onResize(){updateVars();refreshAll();}function init(){log('init','debug',logGroup);if(win.addEventListener){win.
addEventListener('orientationchange',throttle(onResize,100));win.addEventListener('resize',throttle(onResize,100));}else{log('No support for addEventListener. No dimension-dependent ads will be shown','error',logGroup);}initCalled=!0;}function add(slotname,loadCallback){log(['add',slotname,loadCallback],'debug',logGroup);if(!initCalled){init();}updateVars();wrappedAds[slotname]={slotname:slotname,state:'none',loadCallback:loadCallback};refresh(wrappedAds[slotname]);}function isApplicable(slotname){log(['isApplicable',slotname],'debug',logGroup);return!!slotsToHideOnMediaQuery[slotname];}return{addSlot:add,isApplicable:isApplicable,shouldBeShown:shouldBeShown};});;define('ext.wikia.adEngine.adLogicPageParams',['ext.wikia.adEngine.adContext','ext.wikia.adEngine.utils.adLogicZoneParams','wikia.document','wikia.geo','wikia.location','wikia.log','wikia.window',require.optional('wikia.abTest'),require.optional('wikia.krux')],function(adContext,zoneParams,doc,geo,loc,log,win,abTest,krux){
'use strict';var context={},logGroup='ext.wikia.adEngine.adLogicPageParams',runtimeParams={};function updateContext(){context=adContext.getContext();}function getAb(){var experiments,experimentsNumber,i,ab=[];if(abTest){experiments=abTest.getExperiments();experimentsNumber=experiments.length;for(i=0;i<experimentsNumber;i+=1){ab.push(experiments[i].id+'_'+experiments[i].group.id);}}return ab;}function extend(target,obj){var key;for(key in obj){if(obj.hasOwnProperty(key)){target[key]=obj[key];}}return target;}function addParam(key,value){runtimeParams[key]=value;}function decodeLegacyDartParams(dartString){var params={},kvs,kv,key,value,i,len;log(['decodeLegacyDartParams',dartString],9,logGroup);if(typeof dartString==='string'){kvs=dartString.split(';');for(i=0,len=kvs.length;i<len;i+=1){kv=kvs[i].split('=');key=kv[0];value=kv[1];if(key&&value&&key!=='esrb'){params[key]=params[key]||[];params[key].push(value);}}}return params;}function getRefParam(){var hostnameMatch,ref=doc.referrer,
refHostname,searchDomains=/(google|search\.yahooo|bing|baidu|ask|yandex)/,wikiDomains=['wikia.com','ffxiclopedia.org','jedipedia.de','memory-alpha.org','uncyclopedia.org','websitewiki.de','wowwiki.com','yoyowiki.org'],wikiDomainsRegex=new RegExp('(^|\\.)('+wikiDomains.join('|').replace(/\./g,'\\.')+')$');if(!ref||typeof ref!=='string'){return'direct';}refHostname=ref.match(/\/\/([^\/]+)\//);if(refHostname){refHostname=refHostname[1];}hostnameMatch=refHostname===loc.hostname;if(hostnameMatch&&(ref.indexOf('search=')>-1||ref.indexOf('query=')>-1)){return'wiki_search';}if(hostnameMatch){return'wiki';}hostnameMatch=wikiDomainsRegex.test(refHostname);if(hostnameMatch&&(ref.indexOf('search=')>-1||ref.indexOf('query=')>-1||ref.indexOf('s=')>-1)){return'wikia_search';}if(hostnameMatch){return'wikia';}if(searchDomains.test(refHostname)){return'external_search';}return'external';}function getAspectRatio(){return win.innerWidth>win.innerHeight?'4:3':'3:4';}function getPageLevelParams(options){log
('getPageLevelParams',9,logGroup);var params,targeting=context.targeting;options=options||{};params={s0:zoneParams.getSite(),s0v:zoneParams.getVertical(),s0c:zoneParams.getWikiCategories(),s1:zoneParams.getName(),s2:zoneParams.getPageType(),ab:getAb(),ar:getAspectRatio(),artid:targeting.pageArticleId&&targeting.pageArticleId.toString(),cat:zoneParams.getPageCategories(),dmn:zoneParams.getDomain(),hostpre:zoneParams.getHostnamePrefix(),skin:targeting.skin,lang:zoneParams.getLanguage(),wpage:targeting.pageName&&targeting.pageName.toLowerCase(),ref:getRefParam(),esrb:targeting.esrbRating,geo:geo.getCountryCode()||'none'};if(win.pvNumber){params.pv=win.pvNumber.toString();}if(options.includeRawDbName){params.rawDbName=zoneParams.getRawDbName();}if(krux&&targeting.enableKruxTargeting){params.u=krux.getUser();params.ksgmnt=krux.getSegments();}if(targeting.wikiIsTop1000){params.top='1k';}extend(params,decodeLegacyDartParams(targeting.wikiCustomKeyValues));extend(params,runtimeParams);log(
params,9,logGroup);return params;}updateContext();adContext.addCallback(updateContext);return{add:addParam,getPageLevelParams:getPageLevelParams};});;define('ext.wikia.adEngine.adLogicPageViewCounter',['wikia.cache','wikia.window'],function(cache,window){'use strict';var cacheKey='adEngine_pageViewCounter',cacheTtl=24*3600*1000,now=window.wgNow||new Date(),initialValue={since:now.getTime(),pvs:0};function isValidValue(val){if(!val||isNaN(val.since)||isNaN(val.pvs)){return false;}var pvs=val.pvs,age=now.getTime()-val.since;if(pvs<0||age<0||age>cacheTtl){return false;}return true;}function get(){var val=cache.get(cacheKey,now);if(!isValidValue(val)){val=initialValue;}return val.pvs;}function increment(){var val,age,ttlLeft;val=cache.get(cacheKey,now);if(!isValidValue(val)){val=initialValue;}age=now.getTime()-val.since;ttlLeft=cacheTtl-age;val.pvs+=1;cache.set(cacheKey,val,ttlLeft,now);}return{get:get,increment:increment};});;(function(){'use strict';var availableTemplates=['bfaa','bfab',
'floatingRail','floor','floorAdhesion','interstitial','modal','playwire','porvata','roadblock','skin'],dependencies=['wikia.log'];function getAdModule(name,allModules){return allModules[availableTemplates.indexOf(name)];}define('ext.wikia.adEngine.customAdsLoader',dependencies.concat(availableTemplates.map(function(templateName){return require.optional('ext.wikia.adEngine.template.'+templateName);})),function(log){var logGroup='ext.wikia.adEngine.customAdsLoader',allModules=Array.prototype.slice.call(arguments).slice(dependencies.length);function loadCustomAd(params){log('loadCustomAd: module '+params.type+' required','debug',logGroup);var adModule=getAdModule(params.type,allModules);if(adModule){log('loadCustomAd: module '+params.type+' found','debug',logGroup);return adModule.show(params);}else{log('loadCustomAd: module '+params.type+' not found','error',logGroup);}}return{loadCustomAd:loadCustomAd};});})();;define('ext.wikia.adEngine.utils.sampler',['wikia.querystring'],function(
QueryString){'use strict';var qs=new QueryString(),queryStringParam='ignored_samplers';function samplerIsIgnored(name){var ignored=qs.getVal(queryStringParam,'').split(',');return ignored.indexOf(name)>-1;}function sample(name,partToSample,all){return samplerIsIgnored(name)?true:getRandomInt(0,all)<partToSample;}function getRandomInt(min,max){return Math.floor(Math.random()*(max-min))+min;}return{sample:sample};});;define('ext.wikia.adEngine.adContext',['wikia.browserDetect','wikia.cookies','wikia.document','wikia.geo','wikia.instantGlobals','ext.wikia.adEngine.utils.sampler','wikia.window','wikia.querystring'],function(browserDetect,cookies,doc,geo,instantGlobals,sampler,w,Querystring){'use strict';instantGlobals=instantGlobals||{};var context,callbacks=[],qs=new Querystring();function getContext(){return context;}function getMercuryCategories(){if(!context.targeting.mercuryPageCategories){return;}return context.targeting.mercuryPageCategories.map(function(item){return item.title;});}
function isUrlParamSet(param){return!!parseInt(qs.getVal(param,'0'),10);}function isPageType(pageType){return context.targeting.pageType===pageType;}function isInstartLogicSupportedBrowser(){return browserDetect.isChrome()&&browserDetect.getBrowserVersion()>45;}function isPageFairDetectionEnabled(){var isSupportedGeo=geo.isProperGeo(instantGlobals.wgAdDriverPageFairDetectionCountries);return isUrlParamSet('pagefairdetection')||(isSupportedGeo&&sampler.sample('pageFairDetection',1,10));}function isBabDetectionDesktopEnabled(){return geo.isProperGeo(instantGlobals.wgAdDriverBabDetectionDesktopCountries);}function isBabDetectionMobileEnabled(){return geo.isProperGeo(instantGlobals.wgAdDriverBabDetectionMobileCountries);}function updateDetectionServicesAdContext(context,noExternals){context.opts.pageFairDetection=!noExternals&&isPageFairDetectionEnabled();context.opts.babDetectionDesktop=!noExternals&&isBabDetectionDesktopEnabled();context.opts.babDetectionMobile=!noExternals&&
isBabDetectionMobileEnabled();}function updateAdContextRecoveryServices(context,noExternals){var isRecoveryServiceAlreadyEnabled=!1,serviceCanBeEnabled=!noExternals&&context.opts.showAds!==!1;context.opts.instartLogicRecovery=serviceCanBeEnabled&&!isRecoveryServiceAlreadyEnabled&&context.opts.instartLogicRecovery&&geo.isProperGeo(instantGlobals.wgAdDriverInstartLogicRecoveryCountries)&&isInstartLogicSupportedBrowser();isRecoveryServiceAlreadyEnabled|=context.opts.instartLogicRecovery;context.opts.pageFairRecovery=serviceCanBeEnabled&&!isRecoveryServiceAlreadyEnabled&&context.opts.pageFairRecovery&&geo.isProperGeo(instantGlobals.wgAdDriverPageFairRecoveryCountries)&&!browserDetect.isEdge();context.opts.babRecovery=serviceCanBeEnabled&&geo.isProperGeo(instantGlobals.wgAdDriverBabRecoveryCountries);}function updateAdContextBidders(context){var hasFeaturedVideo=context.targeting.hasFeaturedVideo;context.bidders.rubiconDisplay=geo.isProperGeo(instantGlobals.
wgAdDriverRubiconDisplayPrebidCountries);context.bidders.rubicon=geo.isProperGeo(instantGlobals.wgAdDriverRubiconPrebidCountries)&&!hasFeaturedVideo;context.bidders.beachfront=geo.isProperGeo(instantGlobals.wgAdDriverBeachfrontBidderCountries)&&!hasFeaturedVideo;context.bidders.appnexusAst=geo.isProperGeo(instantGlobals.wgAdDriverAppNexusAstBidderCountries)&&!hasFeaturedVideo;context.bidders.a9Video=geo.isProperGeo(instantGlobals.wgAdDriverA9VideoBidderCountries);}function referrerIsSonySite(){return doc&&doc.referrer&&doc.referrer.match(/info\.tvsideview\.sony\.net/);}function isMOATTrackingForFVEnabled(){var samplingForMoatFV=instantGlobals.wgAdDriverMoatTrackingForFeaturedVideoAdSampling||1;return sampler.sample('moatTrackingForFeaturedVideo',samplingForMoatFV,100)&&geo.isProperGeo(instantGlobals.wgAdDriverMoatTrackingForFeaturedVideoAdCountries);}function setContext(newContext){var i,len,fvAdsFrequency=instantGlobals.wgAdDriverPlayAdsOnNextFVFrequency,noExternals=w.wgNoExternals||
isUrlParamSet('noexternals');context=newContext;context.opts=context.opts||{};context.slots=context.slots||{};context.targeting=context.targeting||{};context.providers=context.providers||{};context.bidders=context.bidders||{};context.forcedProvider=qs.getVal('forcead',null)||context.forcedProvider||null;context.opts.noExternals=noExternals;if(referrerIsSonySite()){context.opts.showAds=!1;}if(geo.isProperGeo(instantGlobals.wgAdDriverDelayCountries)){context.opts.delayEngine=!0;}context.opts.premiumOnly=context.targeting.hasFeaturedVideo&&geo.isProperGeo(instantGlobals.wgAdDriverSrcPremiumCountries);context.opts.isMoatTrackingForFeaturedVideoEnabled=isMOATTrackingForFVEnabled();updateDetectionServicesAdContext(context,noExternals);updateAdContextRecoveryServices(context,noExternals);updateAdContextBidders(context);if(cookies.get('mock-ads')==='NlfdjR5xC0'){context.opts.showcase=!0;}if(context.targeting.enablePageCategories){context.targeting.pageCategories=w.wgCategories||
getMercuryCategories();}if(context.providers.evolve2){context.providers.evolve2=geo.isProperGeo(instantGlobals.wgAdDriverEvolve2Countries);}if(geo.isProperGeo(instantGlobals.wgAdDriverTurtleCountries)){context.providers.turtle=!0;}context.opts.enableRemnantNewAdUnit=geo.isProperGeo(instantGlobals.wgAdDriverMEGACountries);context.slots.invisibleHighImpact=(context.slots.invisibleHighImpact&&geo.isProperGeo(instantGlobals.wgAdDriverHighImpactSlotCountries))||isUrlParamSet('highimpactslot');context.opts.kikimoraViewabilityTracking=geo.isProperGeo(instantGlobals.wgAdDriverKikimoraViewabilityTrackingCountries);context.opts.enableAdInfoLog=geo.isProperGeo(instantGlobals.wgAdDriverKikimoraTrackingCountries);context.opts.playerTracking=geo.isProperGeo(instantGlobals.wgAdDriverKikimoraPlayerTrackingCountries);context.targeting.enableKruxTargeting=!!(context.targeting.enableKruxTargeting&&geo.isProperGeo(instantGlobals.wgAdDriverKruxCountries)&&!instantGlobals.wgSitewideDisableKrux);context.
opts.floatingMedrec=!!(context.opts.showAds&&context.opts.adsInContent&&(isPageType('article')||isPageType('search'))&&!context.targeting.wikiIsCorporate);context.opts.outstreamVideoFrequencyCapping=instantGlobals.wgAdDriverOutstreamVideoFrequencyCapping;context.opts.porvataMoatTrackingEnabled=geo.isProperGeo(instantGlobals.wgAdDriverPorvataMoatTrackingCountries);context.opts.porvataMoatTrackingSampling=instantGlobals.wgAdDriverPorvataMoatTrackingSampling||0;context.opts.megaAdUnitBuilderEnabled=context.targeting.hasFeaturedVideo&&geo.isProperGeo(instantGlobals.wgAdDriverMegaAdUnitBuilderForFVCountries);context.opts.isFVMidrollEnabled=geo.isProperGeo(instantGlobals.wgAdDriverFVMidrollCountries);context.opts.isFVPostrollEnabled=geo.isProperGeo(instantGlobals.wgAdDriverFVPostrollCountries);context.opts.replayAdsForFV=geo.isProperGeo(instantGlobals.wgAdDriverPlayAdsOnNextFVCountries);context.opts.fvAdsFrequency=fvAdsFrequency!==undefined?fvAdsFrequency:3;context.opts.disableSra=geo.
isProperGeo(instantGlobals.wgAdDriverDisableSraCountries);context.opts.isBLBOnMobileEnabled=geo.isProperGeo(instantGlobals.wgAdDriverBottomLeaderBoardOnMobileCountries);if(w.ads&&w.ads.context){w.ads.context=context;}for(i=0,len=callbacks.length;i<len;i+=1){callbacks[i](context);}}function addCallback(callback){callbacks.push(callback);}function get(path){var isPathValid=path!==undefined&&path!=='',nextElement=getContext(),nodes=(path||'').split('.');while(isPathValid&&nodes.length>0&&typeof nextElement==='object'){nextElement=nextElement[nodes.shift()];}return nextElement;}setContext((w.ads&&w.ads.context)?w.ads.context:{});return{get:get,addCallback:addCallback,getContext:getContext,setContext:setContext};});;define('ext.wikia.adEngine.context.slotsContext',['ext.wikia.adEngine.adContext','ext.wikia.adEngine.video.videoFrequencyMonitor','wikia.document','wikia.geo','wikia.instantGlobals','wikia.log'],function(adContext,videoFrequencyMonitor,doc,geo,instantGlobals,log){'use strict';
var logGroup='ext.wikia.adEngine.context.slotsContext',slots={};function setStatus(slotName,status){log(['setStatus',slotName,status],log.levels.info,logGroup);slots[slotName]=!!status;}function isInContentApplicable(){var header=doc.querySelectorAll('#mw-content-text > h2')[1];return header&&header.offsetWidth>=header.parentNode.offsetWidth;}function setupSlots(){var context=adContext.getContext(),isHome=context.targeting.pageType==='home',isOasis=context.targeting.skin==='oasis',isIncontentEnabled=!isHome&&isOasis&&!context.targeting.hasFeaturedVideo&&isInContentApplicable()&&videoFrequencyMonitor.videoCanBeLaunched();setStatus('TOP_LEADERBOARD',true);setStatus('TOP_RIGHT_BOXAD',true);setStatus('BOTTOM_LEADERBOARD',context.targeting.skin==='oasis');setStatus('INCONTENT_BOXAD_1',!isHome);setStatus('INVISIBLE_HIGH_IMPACT_2',!context.targeting.hasFeaturedVideo&&geo.isProperGeo(instantGlobals.wgAdDriverHighImpact2SlotCountries));setStatus('INCONTENT_PLAYER',isIncontentEnabled);setStatus(
'FEATURED',context.targeting.hasFeaturedVideo);log(['Slots:',slots],log.levels.info,logGroup);}function isApplicable(slotName){return slots[slotName]!==!1;}function filterSlotMap(slotMap){var map={};if(!slotMap){return map;}Object.keys(slotMap).forEach(function(slotName){if(isApplicable(slotName)){map[slotName]=slotMap[slotName];}});return map;}setupSlots();return{filterSlotMap:filterSlotMap,isApplicable:isApplicable,setStatus:setStatus};});;define('ext.wikia.adEngine.context.uapContext',['ext.wikia.adEngine.bridge','ext.wikia.adEngine.utils.eventDispatcher','wikia.log'],function(adEngineBridge,eventDispatcher,log){'use strict';var context={},logGroup='ext.wikia.adEngine.context.uapContext',mainSlotName='TOP_LEADERBOARD',uapTypes=['uap','vuap'];function setUapStateBasedOnBridge(){setUapId(adEngineBridge.universalAdPackage.getUapId());setType(adEngineBridge.universalAdPackage.getType());}function setUapId(uap){context.uapId=uap;}function getUapId(){return context.uapId;}function
setType(type){context.type=type;}function getType(){return context.type;}function isUapLoaded(){var isUapType=uapTypes.indexOf(context.type)!==-1;return!!context.uapId&&isUapType;}function isBfaaLoaded(){return!!context.uapId;}function isRoadblockLoaded(){return!!context.uapId&&context.type==='ruap';}function reset(){context={};}function shouldDispatchEvent(slotName){return!context.eventDispatched&&slotName.indexOf(mainSlotName)!==-1;}function dispatchEvent(){var eventName=isUapLoaded()?'wikia.uap':'wikia.not_uap';eventDispatcher.dispatch(eventName);context.eventDispatched=!0;log(['dispatchEvent',eventName],'info',logGroup);}adEngineBridge.context.onChange('slots.TOP_LEADERBOARD.targeting.uap',setUapStateBasedOnBridge);adEngineBridge.context.onChange('slots.MOBILE_TOP_LEADERBOARD.targeting.uap',setUapStateBasedOnBridge);return{dispatchEvent:dispatchEvent,getType:getType,getUapId:getUapId,isBfaaLoaded:isBfaaLoaded,isUapLoaded:isUapLoaded,isRoadblockLoaded:isRoadblockLoaded,reset:reset
,setType:setType,setUapId:setUapId,shouldDispatchEvent:shouldDispatchEvent};});;define('ext.wikia.adEngine.dartUrl',function(){'use strict';var logGroup='DartUrlUtils';function trimParam(kvs,limit){if(!limit||limit===true){limit=500;}kvs=kvs||'';kvs=kvs.substr(0,limit).replace(/;[^;]*$/,';');if(!kvs.match(/;$/)){kvs='';}return kvs;}function decorateParam(key,value){var ret='',i;if(value){if(!(value instanceof Array)){value=[value];}for(i=0;i<value.length;i+=1){if(value[i]){ret+=key+'='+encodeURIComponent(value[i]+'')+';';}}}return ret;}function urlBuilder(domain,path){var params='';function toString(){return'http://'+domain+'/'+path+';'+params;}function addString(str,limit){if(limit){str=trimParam(str,limit);}params+=str;}function addParam(key,value,limit){addString(decorateParam(key,value),limit);}return{addParam:addParam,addString:addString,toString:toString};}return{decorateParam:decorateParam,trimParam:trimParam,urlBuilder:urlBuilder};});;define(
'ext.wikia.adEngine.domElementTweaker',['wikia.log','wikia.window'],function(log,win){'use strict';var hiddenElementClass='hidden',logGroup='ext.wikia.adEngine.domElementTweaker';function hide(element,useInline){if(element&&useInline){element.style.display='none';}else if(element){element.classList.add(hiddenElementClass);}}function show(element,useInline){if(element&&useInline){element.style.display='block';}else if(element){element.classList.remove(hiddenElementClass);}}function addClass(element,cls){log(['addClass '+cls,element],8,logGroup);element.classList.add(cls);}function removeClass(element,cls){log(['removeClass '+cls,element],8,logGroup);element.classList.remove(cls);}function isElement(obj){return obj instanceof win.HTMLElement;}function rewriteStylesToElement(computedStyles,targetElement){var i,styleName;for(i=0;i<computedStyles.length;i++){styleName=computedStyles[i];targetElement.style[styleName]=computedStyles[styleName];}}function moveStylesToInline(sourceElement,
targetElement,ignoredStyles){var computedStyles,tmpStyles={};if(!isElement(sourceElement)){log(['Can\'t copy styles because parameter isn\'t element',sourceElement],4,logGroup);return;}computedStyles=document.defaultView.getComputedStyle(sourceElement,'');ignoredStyles.forEach(function(styleName){tmpStyles[styleName]=targetElement.style[styleName];});if(win.CSS2Properties!==undefined&&computedStyles instanceof win.CSS2Properties){rewriteStylesToElement(computedStyles,targetElement);}else if(win.CSSStyleDeclaration!==undefined&&computedStyles instanceof win.CSSStyleDeclaration){targetElement.style.cssText=computedStyles.cssText;}else{log(['Can\'t copy styles from element',computedStyles.cssText],4,logGroup);return;}Object.keys(tmpStyles).forEach(function(key){targetElement.style[key]=tmpStyles[key];});}function forceRepaint(domElement){return domElement.offsetWidth;}return{addClass:addClass,forceRepaint:forceRepaint,hide:hide,isElement:isElement,moveStylesToInline:moveStylesToInline,
removeClass:removeClass,show:show};});;define('ext.wikia.adEngine.lookup.services',['ext.wikia.adEngine.adContext','wikia.log',require.optional('ext.wikia.adEngine.lookup.prebid'),require.optional('ext.wikia.adEngine.lookup.a9')],function(adContext,log,prebid,a9){'use strict';var logGroup='ext.wikia.adEngine.lookup.services',bidders=[a9,prebid],bidIndex={a9:{pos:2,char:'9'},prebid:{pos:4,char:'P'}},bidMarker=['x','x','x','x','x'],realSlotPrices={},slotAliases={mercury:{BOTTOM_LEADERBOARD:'MOBILE_PREFOOTER',MOBILE_BOTTOM_LEADERBOARD:'MOBILE_PREFOOTER'}};function addParameters(providerName,slotName,slotTargeting){var params={},floorPrice=0,prebidPrices,skin=adContext.getContext().targeting.skin;if(slotAliases[skin]&&slotAliases[skin][slotName]){slotName=slotAliases[skin][slotName];}if(prebid&&prebid.wasCalled()){prebidPrices=prebid.getBestSlotPrice(slotName);floorPrice=Math.max.apply(null,Object.keys(prebidPrices).filter(function(key){return!isNaN(parseFloat(prebidPrices[key]))&&
parseFloat(prebidPrices[key])>0;}).map(function(key){return parseFloat(prebidPrices[key]);}));}if(!Object.keys){return;}bidders.forEach(function(bidder){if(bidder&&bidder.wasCalled()){params=bidder.getSlotParams(slotName,floorPrice);bidder.trackState(providerName,slotName,params);Object.keys(params).forEach(function(key){slotTargeting[key]=params[key];});if(bidder.hasResponse()){bidMarker=updateBidderMarker(bidder.getName(),bidMarker);}}});slotTargeting.bid=bidMarker.join('');}function updateBidderMarker(bidderName,bidMarker){var bidder;if(!bidIndex[bidderName]){return bidMarker;}bidder=bidIndex[bidderName];bidMarker[bidder.pos]=bidder.char;return bidMarker;}function extendSlotTargeting(slotName,slotTargeting,providerName){log(['extendSlotTargeting',slotName,slotTargeting],'debug',logGroup);providerName=providerName.toLowerCase().replace('gpt','');addParameters(providerName,slotName,slotTargeting);}function getCurrentSlotPrices(slotName){var slotPrices={};bidders.forEach(function(
bidder){if(bidder&&bidder.isSlotSupported(slotName)){var priceFromBidder=bidder.getBestSlotPrice(slotName);Object.keys(priceFromBidder).forEach(function(bidderName){slotPrices[bidderName]=priceFromBidder[bidderName];});}});return slotPrices;}function storeRealSlotPrices(slotName){realSlotPrices[slotName]=getCurrentSlotPrices(slotName);}function getDfpSlotPrices(slotName){return realSlotPrices[slotName]||{};}return{extendSlotTargeting:extendSlotTargeting,getCurrentSlotPrices:getCurrentSlotPrices,storeRealSlotPrices:storeRealSlotPrices,getDfpSlotPrices:getDfpSlotPrices};});;define('ext.wikia.adEngine.messageListener',['ext.wikia.adEngine.adContext','wikia.log','wikia.window'],function(adContext,log,window){'use strict';var logGroup='ext.wikia.adEngine.messageListener',callbacks=[],unhandledMessages=[];function isInterestingMessage(msg){try{return!!JSON.parse(msg.data).hasOwnProperty('AdEngine');}catch(e){return false;}}function eventMatch(match,msg){var matching=!0,matchingFrame=!1,
msgFrame;if(match.dataKey){matching=JSON.parse(msg.data).AdEngine.hasOwnProperty(match.dataKey);}if(match.source){for(msgFrame=msg.source;msgFrame!==window;msgFrame=msgFrame.parent){if(msgFrame===match.source){matchingFrame=!0;}}matching=matching&&matchingFrame;}return matching;}function processMessage(msg){var i,len,callback;log(['Received message',msg.data],'debug',logGroup);for(i=0,len=callbacks.length;i<len;i+=1){callback=callbacks[i];if(eventMatch(callback.match,msg)){log(['Event matching',msg,callback],'debug',logGroup);callback.fn(JSON.parse(msg.data).AdEngine);if(!callback.match.infinite){callbacks.splice(i,1);}return;}}log(['Event not matching (pushed to unhandled messages)',msg],'debug',logGroup);unhandledMessages.push(msg);}function receiveMessage(msg){if(isInterestingMessage(msg)){processMessage(msg);}}function init(){log('Initialized ads message listener','debug',logGroup);window.addEventListener('message',receiveMessage);}function register(match,callback){var i,len,msg;
log(['Register callback',match,callback],'debug',logGroup);for(i=0,len=unhandledMessages.length;i<len;i+=1){msg=unhandledMessages[i];if(eventMatch(match,msg)){unhandledMessages.splice(i,1);log(['Some event matches',msg,callback],'debug',logGroup);callback(JSON.parse(msg.data).AdEngine);return;}}log(['No events matching (pushing to callbacks)',callback],'debug',logGroup);callbacks.push({match:match,fn:callback});}adContext.addCallback(function(){callbacks=[];unhandledMessages=[];});return{init:init,register:register};});;define('ext.wikia.adEngine.slotTracker',['ext.wikia.adEngine.adContext','ext.wikia.adEngine.adTracker'],function(adContext,adTracker){'use strict';var timeCheckpoints=[2.0,5.0,8.0,20.0],context=adContext.getContext(),stats={allEvents:0,interestingEvents:0},slotTypes={INCONTENT_BOXAD_1:'medrec',INCONTENT_PLAYER:'incontent',INVISIBLE_SKIN:'pixel',MOBILE_IN_CONTENT:'mobile_content',MOBILE_PREFOOTER:'mobile_prefooter',MOBILE_TOP_LEADERBOARD:'mobile_leaderboard',
TOP_LEADERBOARD:'leaderboard',TOP_RIGHT_BOXAD:'medrec'};function isInteresting(eventName,data){if(data.provider==='Null'||data.provider==='Later'){return false;}if(data.slotname.match(/_FLUSH$/)){return false;}if(!context.opts.trackSlotState&&eventName.match(/^state/)){return false;}return true;}function trackEvent(eventName,data,value){var slotname=data.slotname,slotType=slotTypes[slotname]||'other',extraParams=data.extraParams||{},forcedLabel=data.state,productChosen=[eventName,data.provider,slotType].join('/');extraParams.pos=data.slotname;stats.allEvents+=1;if(isInteresting(eventName,data)){stats.interestingEvents+=1;adTracker.track(productChosen,extraParams,value,forcedLabel);}}function slotTracker(provider,slotname,source){var timeStart=new Date().getTime(),eventsTracked=[],lastEventTime,i,len;function trackState(timeCheckPoint){var eventName='state/'+timeCheckPoint+'s';setTimeout(function(){trackEvent(eventName,{provider:provider,slotname:slotname,state:eventsTracked.join(',')},
lastEventTime*1000);},timeCheckPoint*1000);}function track(eventName,extraParams){var timeEnd=new Date().getTime(),timeElapsed=(timeEnd-timeStart)/1000;eventsTracked.push(eventName);lastEventTime=timeElapsed;trackEvent(eventName,{provider:provider,slotname:slotname,extraParams:extraParams},timeElapsed*1000);}track('register',{source:source});for(i=0,len=timeCheckpoints.length;i<len;i+=1){trackState(timeCheckpoints[i]);}return{track:track};}function getStats(){return stats;}slotTracker.getStats=getStats;return slotTracker;});;define('ext.wikia.adEngine.slotTweaker',['ext.wikia.adEngine.domElementTweaker','ext.wikia.adEngine.slot.adSlot','wikia.document','wikia.log','wikia.window'],function(DOMElementTweaker,adSlot,doc,log,win){'use strict';var logGroup='ext.wikia.adEngine.slotTweaker',defaultHeightClass='default-height',standardLeaderboardSizeClass='standard-leaderboard';function hide(slotname,useInline){log('hide '+slotname+' using class hidden',6,logGroup);DOMElementTweaker.hide(doc.
getElementById(slotname),useInline);}function show(slotname){log('show '+slotname+' removing class hidden',6,logGroup);var slot=doc.getElementById(slotname);if(slot){DOMElementTweaker.removeClass(slot,'hidden');}}function removeDefaultHeight(slotname){var slot=doc.getElementById(slotname);log('removeDefaultHeight '+slotname,6,logGroup);if(slot){DOMElementTweaker.removeClass(slot,defaultHeightClass);}}function addDefaultHeight(slotname){var slot=doc.getElementById(slotname);log('addDefaultHeight '+slotname,6,logGroup);if(slot){slot.className+=' '+defaultHeightClass;}}function onReady(slotName,callback){var iframe=adSlot.getIframe(slotName);if(!iframe){log('onIframeReady - iframe does not exist','debug',logGroup);return;}if(iframe.contentWindow.document.readyState==='complete'){callback(iframe);}else{iframe.addEventListener('load',function(){callback(iframe);});}}function isBlockedElement(original){return original.style.display==='none';}function tweakRecoveredSlot(originalIframe,iframe)
{var original=originalIframe,target=iframe;while(isBlockedElement(original)){DOMElementTweaker.moveStylesToInline(original,target,['paddingBottom','opacity']);target.style.display='block';original=original.parentNode;target=target.parentNode;}}function makeResponsive(slotName,aspectRatio){var slot=doc.getElementById(slotName),providerContainer=adSlot.getProviderContainer(slotName);log(['makeResponsive',slotName,aspectRatio],'info',logGroup);slot.classList.add('slot-responsive');onReady(slotName,function(iframe){log(['makeResponsive',slotName],'debug',logGroup);if(!aspectRatio){var height=iframe.contentWindow.document.body.scrollHeight,width=iframe.contentWindow.document.body.scrollWidth;aspectRatio=width/height;}log(['Slot ratio',aspectRatio],'debug',logGroup);providerContainer.style.paddingBottom=100/aspectRatio+'%';});}function adjustIframeByContentSize(slotName){onReady(slotName,function(iframe){var height=iframe.contentWindow.document.body.scrollHeight,width=iframe.contentWindow.
document.body.scrollWidth;iframe.width=width;iframe.height=height;log(['adjustIframeByContentSize',slotName,width,height],'debug',logGroup);});}function collapse(slotName,skipAnimation){var slot=doc.getElementById(slotName);if(!skipAnimation){slot.style.maxHeight=2*slot.scrollHeight+'px';DOMElementTweaker.forceRepaint(slot);}DOMElementTweaker.removeClass(slot,'expanded');DOMElementTweaker.addClass(slot,'collapsed');DOMElementTweaker.addClass(slot,'slot-animation');slot.style.maxHeight='0';}function expand(slotName){var slot=doc.getElementById(slotName);slot.style.maxHeight=slot.offsetHeight+'px';DOMElementTweaker.removeClass(slot,'hidden');DOMElementTweaker.removeClass(slot,'collapsed');DOMElementTweaker.addClass(slot,'expanded');DOMElementTweaker.addClass(slot,'slot-animation');slot.style.maxHeight=2*slot.scrollHeight+'px';}function hackChromeRefresh(slotId){var slot=doc.getElementById(slotId),parent=slot&&slot.parentElement;if(parent&&slotId.match(/^INCONTENT/)){parent.style.display=
'none';DOMElementTweaker.forceRepaint(parent);parent.style.display='';}}return{addDefaultHeight:addDefaultHeight,adjustIframeByContentSize:adjustIframeByContentSize,collapse:collapse,expand:expand,hackChromeRefresh:hackChromeRefresh,hide:hide,makeResponsive:makeResponsive,onReady:onReady,removeDefaultHeight:removeDefaultHeight,show:show,tweakRecoveredSlot:tweakRecoveredSlot};});;define('ext.wikia.adEngine.pageFairDetection',['ext.wikia.adEngine.utils.scriptLoader','wikia.browserDetect','wikia.document','wikia.log','wikia.window'],function(scriptLoader,browserDetect,doc,log,win){'use strict';var context=null,logGroup='ext.wikia.adEngine.pageFairDetection';function isMobileSkin(){return context.targeting.skin==='mercury';}function getWebsiteCode(){var websiteKeys={mobile:'EFB8C00E91C84764',desktop:'954076792F3C4693'};return isMobileSkin()||browserDetect.isMobile()?websiteKeys.mobile:websiteKeys.desktop;}function dispatchDetectionEvent(eventName){var event=doc.createEvent('Event');event.
initEvent(eventName,true,false);doc.dispatchEvent(event);}function setRuntimeParams(isAdBlockDetected){win.ads.runtime=win.ads.runtime||{};win.ads.runtime.pf=win.ads.runtime.pf||{};win.ads.runtime.pf.blocking=isAdBlockDetected;}function detector(isAdBlockDetected){var eventName=isAdBlockDetected?'pf.blocking':'pf.not_blocking';if(!context.opts.pageFairDetection){log('PageFair disabled','debug',logGroup);return null;}log(['PageFair detection, adBlock detected:',isAdBlockDetected],'debug',logGroup);setRuntimeParams(isAdBlockDetected);dispatchDetectionEvent(eventName);}function initDetection(injectedContext){var node=doc.getElementsByTagName('script')[0];context=injectedContext;win.bm_website_code=getWebsiteCode();win.pf_notify=detector;scriptLoader.loadAsync(context.opts.pageFairDetectionUrl,{node:node});}return{initDetection:initDetection};});;define('ext.wikia.adEngine.babDetection',['wikia.document','wikia.log','wikia.window'],function(doc,log,win){'use strict';var logGroup=
'ext.wikia.adEngine.babDetection';function dispatchDetectionEvent(eventName){var event=doc.createEvent('Event');event.initEvent(eventName,true,false);doc.dispatchEvent(event);}function setRuntimeParams(isAdBlockDetected){win.ads.runtime=win.ads.runtime||{};win.ads.runtime.bab=win.ads.runtime.bab||{};win.ads.runtime.bab.blocking=isAdBlockDetected;}function initDetection(isAdBlockDetected){var eventName=isAdBlockDetected?'bab.blocking':'bab.not_blocking';log(['BlockAdBlock detection, adBlock detected:',isAdBlockDetected],'debug',logGroup);setRuntimeParams(isAdBlockDetected);dispatchDetectionEvent(eventName);}return{initDetection:initDetection};});;define('ext.wikia.adEngine.dartHelper',['wikia.log','ext.wikia.adEngine.adLogicPageParams','ext.wikia.adEngine.dartUrl','ext.wikia.adEngine.adLogicDartSubdomain'],function(log,adLogicPageParams,dartUrl,adLogicDartSubdomain){'use strict';var logGroup='ext.wikia.adEngine.dartHelper',getUrl,ord=Math.round(Math.random()*23456787654),tile=1,
categoryStrMaxLength=300;getUrl=function(params){var slotname=params.slotname,size=params.slotsize,adType=params.adType||'adj',src=params.src||'driver',localTile,localOrd=params.ord||ord,url,subdomain=params.subdomain||(adLogicDartSubdomain&&adLogicDartSubdomain.getSubdomain()),pageParams=adLogicPageParams.getPageLevelParams(),name,value;if(adType==='jwplayer'){adType='pfadx';}if(params.tile){localTile=params.tile;}else{localTile=tile;tile+=1;}log(['getUrl',slotname,size],5,logGroup);url=dartUrl.urlBuilder(subdomain+'.doubleclick.net',adType+'/'+'wka.'+pageParams.s0+'/'+pageParams.s1+'/'+pageParams.s2);for(name in pageParams){if(pageParams.hasOwnProperty(name)){value=pageParams[name];if(value){if(name==='cat'){url.addParam(name,value,categoryStrMaxLength);}else if(name==='ksgmnt'){url.addParam(name,value,true);}else{url.addParam(name,value);}}}}url.addParam('src',src);url.addString('mtfIFPath=/extensions/wikia/AdEngine/;');url.addParam('mtfInline','true');url.addParam('pos',params.
slotname);url.addParam('loc',params.loc);url.addParam('dcopt',params.dcopt);url.addParam('sz',size);url.addParam('tile',localTile);url.addString('endtag=$;');url.addString('ord='+localOrd+'?');log(url.toString(),5,logGroup);return url.toString();};return{getUrl:getUrl};});;define('ext.wikia.adEngine.config.desktop',['wikia.log','wikia.window','wikia.instantGlobals','wikia.geo','ext.wikia.adEngine.adContext','ext.wikia.adEngine.adDecoratorPageDimensions','ext.wikia.adEngine.provider.directGpt','ext.wikia.adEngine.provider.evolve2','ext.wikia.adEngine.provider.remnantGpt','ext.wikia.adEngine.provider.turtle'],function(log,window,instantGlobals,geo,adContext,adDecoratorPageDimensions,adProviderDirectGpt,adProviderEvolve2,adProviderRemnantGpt,adProviderTurtle){'use strict';var logGroup='ext.wikia.adEngine.adConfigLate',context=adContext.getContext(),gptEnabled=!instantGlobals.wgSitewideDisableGpt,forcedProviders={evolve2:[adProviderEvolve2],turtle:[adProviderTurtle]};function getDecorators
(){return[adDecoratorPageDimensions];}function getProviderList(slotName){var providerList=[];log('getProvider',5,logGroup);log(slotName,5,logGroup);if(!context.opts.showAds){return[];}if(context.forcedProvider&&!!forcedProviders[context.forcedProvider]){log(['getProvider',slotName,context.forcedProvider+' (wgAdDriverForcedProvider)'],'info',logGroup);return forcedProviders[context.forcedProvider];}if(context.providers.turtle&&adProviderTurtle.canHandleSlot(slotName)){providerList.push(adProviderTurtle);}else if(context.providers.evolve2&&adProviderEvolve2.canHandleSlot(slotName)){providerList.push(adProviderEvolve2);}else if(gptEnabled){providerList.push(adProviderDirectGpt);if(context.opts.premiumOnly){return providerList;}}if(gptEnabled){providerList.push(adProviderRemnantGpt);}return providerList;}return{getDecorators:getDecorators,getProviderList:getProviderList};});;define('ext.wikia.adEngine.provider.btfBlocker',['ext.wikia.adEngine.adContext',
'ext.wikia.adEngine.context.uapContext','ext.wikia.adEngine.messageListener','wikia.lazyqueue','wikia.log','wikia.window'],function(adContext,uapContext,messageListener,lazyQueue,log,win){'use strict';var logGroup='ext.wikia.adEngine.provider.btfBlocker',unblockedSlots=[];win.ads=win.ads||{};win.ads.runtime=win.ads.runtime||{};win.ads.runtime.disableBtf=!1;win.ads.runtime.unblockHighlyViewableSlots=!1;messageListener.register({dataKey:'disableBtf',infinite:!0},function(msg){win.ads.runtime.disableBtf=Boolean(msg.disableBtf);});function unblock(slotName){log(['unblocking',slotName],log.levels.info,logGroup);unblockedSlots.push(slotName);}function isBTFDisabledByCreative(){return win.ads.runtime.disableBtf;}var btfQueue=[],btfQueueStarted=!1,pendingAtfSlots=[];var fillInSlotCallbacks={};function decorate(fillInSlot,config){adContext.addCallback(function(){btfQueue=[];btfQueueStarted=!1;pendingAtfSlots=[];win.ads.runtime.disableBtf=!1;win.ads.runtime.
unblockHighlyViewableSlots=!1;unblockedSlots=[];});win.addEventListener('wikia.blocking',startBtfQueue);function processBtfSlot(slot){if(uapContext.isUapLoaded()&&slot.name==='INVISIBLE_HIGH_IMPACT_2'){log(['IHI2 disabled when UAP on page'],log.levels.info,logGroup);return;}if(win.ads.runtime.unblockHighlyViewableSlots&&config.highlyViewableSlots){log(['Unblocking HiVi slots',slot.name],log.levels.info,logGroup);config.highlyViewableSlots.map(unblock);}if(unblockedSlots.indexOf(slot.name)>-1||!isBTFDisabledByCreative()){log(['Filling slot',slot.name],log.levels.info,logGroup);fillInSlotCallbacks[slot.name](slot);return;}log(['Collapsing slot',slot.name],log.levels.info,logGroup);if(slot.collapse){slot.collapse({adType:'blocked'});}}function startBtfQueue(){log('startBtfQueue',log.levels.info.debug,logGroup);if(btfQueueStarted){return;}lazyQueue.makeQueue(btfQueue,processBtfSlot);btfQueue.start();btfQueueStarted=!0;}function onSlotResponse(slotName){log(['onSlotResponse',slotName],
log.levels.info.debug,logGroup);var index=pendingAtfSlots.indexOf(slotName);if(index>-1){pendingAtfSlots.splice(index,1);log(['remove from pendingAtfSlots',pendingAtfSlots,slotName],log.levels.debug,logGroup);if(pendingAtfSlots.length===0){startBtfQueue();}}}function shouldDelaySlotFillIn(slotName){var shouldDelay=adContext.getContext().opts.delayBtf;log(['shouldDelaySlotFillIn',shouldDelay,slotName],log.levels.debug,logGroup);return shouldDelay;}function fillInSlotWithDelay(slot){log(['fillInSlotWithDelay',slot.name],log.levels.info.debug,logGroup);function fillInSlotOnResponse(){onSlotResponse(slot.name);}if(!shouldDelaySlotFillIn(slot.name)){fillInSlot(slot);return;}if(config&&config.atfSlots&&config.atfSlots.indexOf(slot.name)>-1){pendingAtfSlots.push(slot.name);slot.pre('renderEnded',fillInSlotOnResponse);slot.pre('collapse',fillInSlotOnResponse);slot.pre('hop',fillInSlotOnResponse);slot.pre('success',fillInSlotOnResponse);fillInSlot(slot);return;}fillInSlotCallbacks[slot.name]=
fillInSlot;btfQueue.push(slot);}return fillInSlotWithDelay;}return{decorate:decorate,unblock:unblock};});;define('ext.wikia.adEngine.provider.directGpt',['ext.wikia.adEngine.adContext','ext.wikia.adEngine.provider.factory.wikiaGpt','ext.wikia.adEngine.slot.service.kiloAdUnitBuilder','ext.wikia.adEngine.slot.service.megaAdUnitBuilder','ext.wikia.adEngine.slotTweaker',require.optional('ext.wikia.aRecoveryEngine.instartLogic.recovery'),require.optional('ext.wikia.aRecoveryEngine.pageFair.recovery')],function(adContext,factory,kiloAdUnitBuilder,megaAdUnitBuilder,slotTweaker,instartLogic,pageFair){'use strict';var context=adContext.getContext(),sraEnabled=!context.opts.disableSra,atfSlots=['TOP_LEADERBOARD','GPT_FLUSH'];if(sraEnabled){atfSlots.push('TOP_RIGHT_BOXAD','INVISIBLE_SKIN');}return factory.createProvider('ext.wikia.adEngine.provider.directGpt','DirectGpt','gpt',{BOTTOM_LEADERBOARD:{size:'728x90,970x250',loc:'footer'},GPT_FLUSH:{flushOnly:!0},INCONTENT_BOXAD_1:{size:
'120x600,160x600,300x250,300x600',loc:'hivi'},INCONTENT_PLAYER:{size:'1x1',loc:'middle'},INVISIBLE_HIGH_IMPACT_2:{loc:'hivi'},INVISIBLE_SKIN:{size:'1000x1000,1x1',loc:'top'},TOP_LEADERBOARD:{size:'3x3,728x90,1030x130,1030x65,1030x250,970x365,970x250,970x90,970x66,970x180,980x150,1024x416,1440x585',loc:'top'},TOP_RIGHT_BOXAD:{size:'300x250,300x600,300x1050',loc:'top'}},{afterSuccess:function(slotName){slotTweaker.removeDefaultHeight(slotName);},isInstartLogicRecoverable:instartLogic?instartLogic.isSlotRecoverable:false,isPageFairRecoverable:pageFair?pageFair.isSlotRecoverable:false,sraEnabled:sraEnabled,atfSlots:atfSlots,getAdUnitBuilder:function(){return context.opts.megaAdUnitBuilderEnabled?megaAdUnitBuilder:kiloAdUnitBuilder;},highlyViewableSlots:['INCONTENT_BOXAD_1','INCONTENT_PLAYER','INVISIBLE_HIGH_IMPACT_2','TOP_RIGHT_BOXAD'],testSrc:'test'});});;define('ext.wikia.adEngine.provider.factory.wikiaGpt',['ext.wikia.adEngine.provider.btfBlocker',
'ext.wikia.adEngine.provider.gpt.helper','ext.wikia.adEngine.slot.adUnitBuilder','ext.wikia.adEngine.slot.service.megaAdUnitBuilder','ext.wikia.adEngine.slot.service.slotRegistry','wikia.log',require.optional('ext.wikia.adEngine.lookup.services')],function(btfBlocker,gptHelper,defaultAdUnitBuilder,megaAdUnitBuilder,slotRegistry,log,lookups){'use strict';function rewriteExtras(slotName,extra){return{testSrc:extra.testSrc,sraEnabled:extra.sraEnabled,isInstartLogicRecoverable:extra.isInstartLogicRecoverable?extra.isInstartLogicRecoverable(slotName):false,isPageFairRecoverable:extra.isPageFairRecoverable?extra.isPageFairRecoverable(slotName):false,};}function createProvider(logGroup,providerName,src,slotMap,extra){extra=extra||{};function canHandleSlot(slotName){log(['canHandleSlot',slotName],'debug',logGroup);var ret=!!slotMap[slotName];log(['canHandleSlot',slotName,ret],'debug',logGroup);return ret;}function addHook(slot,hookName,callback){log([hookName,slot.name],'debug',logGroup);slot.
post(hookName,function(adInfo){if(typeof callback==='function'){callback(slot.name,adInfo);}});}function getAdUnit(slot){if(megaAdUnitBuilder.isMegaSlot(slot.name)){return megaAdUnitBuilder.build(slot.name,src);}if(extra.getAdUnitBuilder){return extra.getAdUnitBuilder().build(slot.name,src);}return defaultAdUnitBuilder.build(slot.name,src);}function fillInSlot(slot){log(['fillInSlot',slot.name,providerName],'debug',logGroup);var slotPath=getAdUnit(slot),slotTargeting=JSON.parse(JSON.stringify(slotMap[slot.name]));addHook(slot,'success',extra.afterSuccess);addHook(slot,'collapse',extra.afterCollapse);addHook(slot,'hop',extra.afterHop);addHook(slot,'renderEnded',extra.onSlotRendered);slotTargeting.pos=slotTargeting.pos||slot.name;slotTargeting.src=src;slotTargeting.rv=slotRegistry.getRefreshCount(slot.name).toString();if(lookups){lookups.storeRealSlotPrices(slot.name);lookups.extendSlotTargeting(slot.name,slotTargeting,providerName);slotRegistry.storeScrollY(slot.name);}gptHelper.pushAd(
slot,slotPath,slotTargeting,rewriteExtras(slot.name,extra));log(['fillInSlot',slot.name,providerName,'done'],'debug',logGroup);}return{name:providerName,canHandleSlot:canHandleSlot,fillInSlot:extra.atfSlots?btfBlocker.decorate(fillInSlot,extra):fillInSlot};}return{createProvider:createProvider};});;define('ext.wikia.adEngine.provider.gpt.adDetect',['ext.wikia.adEngine.adContext','ext.wikia.adEngine.context.uapContext','ext.wikia.adEngine.messageListener','ext.wikia.adEngine.slotTweaker','wikia.log','wikia.window'],function(adContext,uapContext,messageListener,slotTweaker,log,win){'use strict';var logGroup='ext.wikia.adEngine.provider.gpt.adDetect',specialAdSelector=['script[src*="/ads.saymedia.com/"]','script[src*="/native.sharethrough.com/"]','.celtra-ad-v3, script[src$="/mmadlib.js"]'].join(',');function isMobile(){var skin=adContext.getContext().targeting.skin;return(skin==='wikiamobile'||skin==='mercury');}function isImagePresent(document){var imgs,i,len,w,h;imgs=document.
querySelectorAll('img[width], img[height]');for(i=0,len=imgs.length;i<len;i+=1){w=imgs[i].getAttribute('width');h=imgs[i].getAttribute('height');if(w>1||h>1){log(['findAdImage','found non-1x1 img'],'info',logGroup);return true;}}return false;}function findAdInIframe(slotName,iframe,adCallback,noAdCallback){var iframeHeight,iframeContentHeight,iframeDoc;try{iframeDoc=iframe.contentWindow.document;}catch(e){log(['findAdInIframe',slotName,'ad iframe not accessible (or not found): assuming success'],'error',logGroup);return adCallback();}iframeHeight=iframe.height;iframe.height=0;iframeContentHeight=iframeDoc.body.offsetHeight;iframe.height=iframeHeight;log(['findAdInIframe',slotName,'height (iframe content)',iframeContentHeight],'info',logGroup);if(iframeContentHeight>1){log(['findAdInIframe',slotName,'height > 1, launching adCallback'],'info',logGroup);return adCallback();}if(isImagePresent(iframeDoc)){log(['findAdInIframe',slotName,'image, launching adCallback'],'info',logGroup);return adCallback
();}log(['findAdInIframe',slotName,'launching noAdCallback'],'info',logGroup);noAdCallback();}function inspectIframe(slotName,iframe,adCallback,noAdCallback){if(iframe.contentWindow.document.readyState==='complete'){log(['onAdLoad',slotName,'iframe state complete'],'info',logGroup);setTimeout(function(){findAdInIframe(slotName,iframe,adCallback,noAdCallback);},0);}else{log(['onAdLoad',slotName,'binding to iframe onload'],'info',logGroup);iframe.contentWindow.addEventListener('load',function(){findAdInIframe(slotName,iframe,adCallback,noAdCallback);});}}function getIframeOk(iframe,slotName){try{return!!iframe.contentWindow.document.querySelector;}catch(e){log(['getIframeOk',slotName,'ad iframe not accessible (or not found)'],'error',logGroup);}return false;}function getAdType(slotName,gptEvent,iframe){var status,height,gptEmpty,iframeOk;log(['getAdType',slotName],'info',logGroup);iframeOk=getIframeOk(iframe,slotName);if(iframeOk&&iframe.contentWindow.AdEngine_adType){log(['getAdType',
slotName,'iframe AdEngine_adType = ',iframe.contentWindow.AdEngine_adType],'info',logGroup);return iframe.contentWindow.AdEngine_adType;}status=win.adDriver2ForcedStatus&&win.adDriver2ForcedStatus[slotName];if(status==='success'){return'forced_success';}height=gptEvent.size&&gptEvent.size[1];gptEmpty=gptEvent.isEmpty;if(gptEvent.slot&&gptEvent.slot.getOutOfPage&&gptEvent.slot.getOutOfPage()){log(['getAdType',slotName,'out of page ad','always_success'],'info',logGroup);return'always_success';}if(gptEmpty){log(['getAdType',slotName,'ad is empty (GPT event)','empty'],'info',logGroup);return'empty';}if(height<=1){log(['getAdType',slotName,'ad has no size','no_height'],'info',logGroup);return'no_height';}if(!isMobile()){log(['getAdType',slotName,'not mobile','always_success'],'info',logGroup);return'always_success';}if(!iframeOk){log(['getAdType',slotName,'running ad callback (!iframeOk)','always_success'],'info',logGroup);return'always_success';}if(gptEvent.creativeId===null&&gptEvent.
lineItemId===null){log(['getAdType',slotName,'creativeId and lineItemId are null','always_success'],'error',logGroup);return'always_success';}if(iframe.contentWindow.document.querySelector(specialAdSelector)){log(['getAdType',slotName,'special ad'],'info',logGroup);return'always_success';}log(['getAdType',slotName,'inspect_iframe'],'info',logGroup);return'inspect_iframe';}function getAdProduct(slotName,iframe){var iframeOk=getIframeOk(iframe,slotName);if(iframeOk&&iframe.contentWindow.AdEngine_adProduct){log(['getAdProduct',slotName,'iframe AdEngine_adProduct = ',iframe.contentWindow.AdEngine_adProduct],'info',logGroup);return iframe.contentWindow.AdEngine_adProduct;}return'other';}function isPartnerAdType(adType){return(/^partner\/[a-zA-Z0-9]{1,30}$/).test(adType);}function onAdLoad(slot,gptEvent,iframe,forcedAdType){var adProduct=getAdProduct(slot.name,iframe),adType=forcedAdType||getAdType(slot.name,gptEvent,iframe),isCollapsed=!1,shouldPollForSuccess=!1,expectAsyncCollapse=
!1,expectAsyncHop=!1,expectAsyncHopWithSlotName=!1,expectAsyncSuccessWithSlotName=!1,expectAsyncSuccess=!1,successTimer;function noop(){return;}function callAdCallback(adInfo){adInfo=adInfo||{};adInfo.adType=adType;adInfo.adProduct=adProduct;clearTimeout(successTimer);slot.success(adInfo);}function callCollapseAdCallback(adInfo){adInfo=adInfo||{};adInfo.adType=adType;adInfo.adProduct=adProduct;isCollapsed=!0;clearTimeout(successTimer);slot.collapse(adInfo);}function callNoAdCallback(adInfo){adInfo=adInfo||{};adInfo.adType=adType;adInfo.adProduct=adProduct;clearTimeout(successTimer);slot.hop(adInfo);}function pollForSuccess(){if(isCollapsed){return;}successTimer=setTimeout(function(){log(['pollForSuccess',slot.name],'info',logGroup);pollForSuccess();findAdInIframe(slot.name+' (poll)',iframe,callAdCallback,noop);},500);}function handleAsyncMessage(status,isExpected,callback){if(isExpected){callback();}else{log(['msgCallback',slot.name,status,
'Got asynchronous message, while not expecting it'],'error',logGroup);}}function msgCallback(data){log(['msgCallback',slot.name,'caught message',data],'info',logGroup);switch(data.status){case'success':handleAsyncMessage('success',expectAsyncSuccess||expectAsyncSuccessWithSlotName,function(){callAdCallback(data.extra);});break;case'collapse':handleAsyncMessage('collapse',expectAsyncCollapse,function(){callCollapseAdCallback(data.extra);});break;case'hop':handleAsyncMessage('hop',expectAsyncHop||expectAsyncHopWithSlotName,function(){callNoAdCallback(data.extra);});break;}}if(uapContext.shouldDispatchEvent(slot.name)){uapContext.dispatchEvent();}if(adType==='manual'){return;}if(['rubicon','saymedia','turtle','evolve2'].indexOf(adType)!==-1||isPartnerAdType(adType)){shouldPollForSuccess=!0;expectAsyncCollapse=!0;expectAsyncHop=!0;}if(adType==='async'){expectAsyncHop=!0;expectAsyncSuccess=!0;}if(adType==='highimpact'){expectAsyncHopWithSlotName=!0;expectAsyncSuccessWithSlotName
=!0;}log(['onAdLoad',slot.name,'adType',adType],'info',logGroup);if(adType==='forced_success'||adType==='always_success'){return callAdCallback();}if(adType==='collapse'||adType==='empty'){return callCollapseAdCallback();}if(adType==='no_height'){return callNoAdCallback();}if(adType==='inspect_iframe'){return inspectIframe(slot.name,iframe,callAdCallback,callNoAdCallback);}if(shouldPollForSuccess){slotTweaker.onReady(slot.name,pollForSuccess);}if(expectAsyncHop||expectAsyncSuccess||expectAsyncCollapse){messageListener.register({source:iframe.contentWindow,dataKey:'status'},msgCallback);}if(expectAsyncHopWithSlotName||expectAsyncSuccessWithSlotName){messageListener.register({dataKey:'slot_'+slot.name},msgCallback);}if(expectAsyncHop||expectAsyncHopWithSlotName){if(shouldPollForSuccess||expectAsyncSuccess||expectAsyncSuccessWithSlotName){return;}}log(['onAdLoad','Unknown ad type (launching starting ad callback)',adType],'error',logGroup);adType='unknown';return callAdCallback();}return{
onAdLoad:onAdLoad};});;define('ext.wikia.adEngine.provider.gpt.adElement',['ext.wikia.adEngine.provider.gpt.adSizeConverter','ext.wikia.adEngine.provider.gpt.adSizeFilter','wikia.document','wikia.log'],function(adSizeConverter,adSizeFilter,doc,log){'use strict';var logGroup='ext.wikia.adEngine.provider.gpt.adElement';function AdElement(slotName,slotPath,slotTargeting){this.id='wikia_gpt'+slotPath;this.node=doc.getElementById(this.id);this.slotPath=slotPath;this.slotName=slotName;this.slotContainerId=this.id;if(!this.node){this.node=doc.createElement('div');this.node.id=this.id;}if(slotTargeting.size){this.sizes=adSizeConverter.toArray(slotTargeting.size);this.sizes=adSizeFilter.filter(slotName,this.sizes);delete slotTargeting.size;this.node.setAttribute('data-gpt-slot-sizes',JSON.stringify(this.sizes));}else{this.node.setAttribute('data-gpt-slot-type','out-of-page');}this.slotTargeting=slotTargeting;log(['AdElement',this],'debug',logGroup);}AdElement.prototype.getId=function(){return this
.id;};AdElement.prototype.getSlotContainerId=function(){return this.slotContainerId;};AdElement.prototype.setSlotContainerId=function(slotContainerId){this.slotContainerId=slotContainerId;};AdElement.prototype.getSlotName=function(){return this.slotName;};AdElement.prototype.setSlotName=function(slotName){this.slotName=slotName;};AdElement.prototype.getNode=function(){return this.node;};AdElement.prototype.getSlotPath=function(){return this.slotPath;};AdElement.prototype.getSizes=function(){return this.sizes;};AdElement.prototype.configureSlot=function(slot){return AdElement.configureSlot(slot,this.slotTargeting,this.node);};AdElement.prototype.setPageLevelParams=function(pageLevelParams){log(['setPageLevelParams',pageLevelParams],'debug',logGroup);this.node.setAttribute('data-gpt-page-params',JSON.stringify(pageLevelParams));};AdElement.prototype.updateDataParams=function(event){this.node.setAttribute('data-gpt-line-item-id',JSON.stringify(event.lineItemId));this.node.setAttribute(
'data-gpt-creative-id',JSON.stringify(event.creativeId));this.node.setAttribute('data-gpt-creative-size',JSON.stringify(event.size));};AdElement.configureSlot=function(slot,targeting,node){var name,value;for(name in targeting){if(targeting.hasOwnProperty(name)){value=targeting[name];if(value){log(['setSlot','slot.setTargeting',name,value],'debug',logGroup);slot.setTargeting(name,value);}}}if(!node){log(['setSlot','HTML node not provided, trying to retrieve from slot',slot],'debug',logGroup);node=doc.getElementById(slot.getSlotElementId());}log(['setSlot',slot],'debug',logGroup);node.setAttribute('data-gpt-slot-params',JSON.stringify(targeting));};return AdElement;});;define('ext.wikia.adEngine.provider.gpt.adSizeFilter',['ext.wikia.adEngine.context.uapContext','wikia.document','wikia.log','wikia.window'],function(uapContext,doc,log,win){'use strict';var logGroup='ext.wikia.adEngine.provider.gpt.adSizeFilter',minSkinWidth=1240;function getNewSizes(sizes,maxWidth,fallbackSizes){var
goodSizes=(sizes||[]).filter(function(size){return size[0]<=maxWidth;});log(['getNewSizes','sizes: ',sizes,'goodSizes: ',goodSizes],'debug',logGroup);return goodSizes.length?goodSizes:fallbackSizes;}function getAdContext(){return win.Mercury?win.Mercury.Modules.Ads.getInstance().adsContext:win.ads.context;}function removeUAPForFeaturedVideoPages(slotName,slotSizes){var adContext=getAdContext();if(slotName.indexOf('TOP_LEADERBOARD')>-1&&adContext&&adContext.targeting&&adContext.targeting.hasFeaturedVideo){slotSizes=removeUAPFromSlotSizes(slotSizes);}return slotSizes;}function removeUAPFromSlotSizes(slotSizes){return slotSizes.filter(function(size){var str=size.toString();return!(str==='2,2'||str==='3,3');});}function filterSizes(slotName,slotSizes){log(['filterSizes',slotName,slotSizes],'debug',logGroup);var context=getAdContext();slotSizes=removeUAPForFeaturedVideoPages(slotName,slotSizes);switch(true){case slotName.indexOf('TOP_LEADERBOARD')>-1:return getNewSizes(slotSizes,doc.
documentElement.offsetWidth,[[728,90]]);case slotName==='INVISIBLE_SKIN':return doc.documentElement.offsetWidth>=minSkinWidth?slotSizes:[[1,1]];case slotName==='BOTTOM_LEADERBOARD'&&context.targeting.skin==='oasis':return getNewSizes(slotSizes,doc.getElementById('WikiaFooter').offsetWidth,[[728,90]]);case slotName==='INCONTENT_BOXAD_1'&&context.targeting.hasFeaturedVideo:return[[300,250]];case slotName==='MOBILE_BOTTOM_LEADERBOARD'||(slotName==='BOTTOM_LEADERBOARD'&&context.targeting.skin==='mercury'):return uapContext.isUapLoaded()?[[2,2]]:removeUAPFromSlotSizes(slotSizes);default:return slotSizes;}}return{filter:filterSizes};});;define('ext.wikia.adEngine.provider.gpt.adSizeConverter',['wikia.log'],function(log){'use strict';var logGroup='ext.wikia.adEngine.provider.gpt.adSizeConverter';function convertToArray(slotSizes){log(['convertSizeToGpt',slotSizes],'debug',logGroup);var tmp1=slotSizes.split(','),sizes=[],tmp2,i;for(i=0;i<tmp1.length;i+=1){tmp2=tmp1[i].split('x');sizes.push([
parseInt(tmp2[0],10),parseInt(tmp2[1],10)]);}log(['convertSize',slotSizes,sizes],'debug',logGroup);return sizes;}return{toArray:convertToArray};});;define('ext.wikia.adEngine.provider.gpt.googleTag',['ext.wikia.adEngine.provider.gpt.googleSlots','ext.wikia.adEngine.slot.adSlot','ext.wikia.adEngine.slot.service.slotRegistry','ext.wikia.adEngine.slot.service.srcProvider','wikia.document','wikia.log','wikia.window'],function(googleSlots,adSlot,slotRegistry,srcProvider,doc,log,win){'use strict';var logGroup='ext.wikia.adEngine.provider.gpt.googleTag',slotQueue=[],pageLevelParams,initialized=!1;win.googletag=win.googletag||{};win.googletag.cmd=win.googletag.cmd||[];function dispatchEvent(event,methodName){var slot,slotName=adSlot.getShortSlotName(event.slot.getName());log(['dispatchEvent',event],log.levels.info,logGroup);slot=slotRegistry.get(slotName);if(slot&&slot[methodName]){slot[methodName](event);}else{log(['dispatchEvent',event,'Slot not registered'],log.levels.error,logGroup);}}
function push(callback){win.googletag.cmd.push(callback);}function enableServices(){log(['enableServices','push'],log.levels.info,logGroup);push(function(){win.googletag.pubads().collapseEmptyDivs();win.googletag.pubads().enableSingleRequest();win.googletag.pubads().disableInitialLoad();win.googletag.pubads().addEventListener('slotRenderEnded',function(event){dispatchEvent(event,'renderEnded');});win.googletag.pubads().addEventListener('impressionViewable',function(event){dispatchEvent(event,'viewed');});win.googletag.enableServices();log(['enableServices','push','done'],log.levels.debug,logGroup);});}function canGptBeLoaded(){return!win.googletag.apiReady;}function init(){log('init',log.levels.debug,logGroup);var gads=doc.createElement('script'),node=doc.getElementsByTagName('script')[0];if(canGptBeLoaded()){gads.async=!0;gads.type='text/javascript';gads.src='//www.googletagservices.com/tag/js/gpt.js';log('Appending GPT script to head',log.levels.debug,logGroup);node.parentNode.
insertBefore(gads,node);}initialized=!0;enableServices();}function isInitialized(){log(['isInitialized',initialized],log.levels.debug,logGroup);return initialized;}function setPageLevelParams(params){push(function(){var name,value;pageLevelParams=params;for(name in pageLevelParams){if(pageLevelParams.hasOwnProperty(name)){value=pageLevelParams[name];if(value){log(['setPageLevelParams','pubAds.setTargeting',name,value],log.levels.debug,logGroup);win.googletag.pubads().setTargeting(name,value);}}}});}function flush(){if(!isInitialized()){log(['flush','done','No slots to flush'],log.levels.info,logGroup);return;}push(function(){log(['flush','start'],log.levels.info,logGroup);log(['flush','refresh',slotQueue],log.levels.debug,logGroup);if(slotQueue.length){win.googletag.pubads().refresh(slotQueue,{changeCorrelator:!1});slotQueue=[];}log(['flush','done'],log.levels.info,logGroup);});}function updateTargetingForBlockedTraffic(){win.googletag.pubads().getSlots().forEach(function(slot){if
(slot.targeting){slot.targeting.src=[];}slot.setTargeting('src',srcProvider.getRecoverySrc());});}function addSlot(adElement){var sizes=adElement.getSizes(),slotId=adElement.getId(),slot=googleSlots.getSlot(slotId);log(['addSlot',adElement],log.levels.debug,logGroup);adElement.setPageLevelParams(pageLevelParams);if(!slot){slot=sizes?win.googletag.defineSlot(adElement.getSlotPath(),sizes,slotId):win.googletag.defineOutOfPageSlot(adElement.getSlotPath(),slotId);slot.addService(win.googletag.pubads());win.googletag.display(slotId);googleSlots.addSlot(slot);}adElement.configureSlot(slot);slotQueue.push(slot);return slot;}function refreshSlot(slot){win.googletag.pubads().refresh([slot]);}function onAdLoad(slotName,element,gptEvent,onAdLoadCallback){log(['onAdLoad',slotName],log.levels.info,logGroup);var iframe=adSlot.getIframe(slotName);onAdLoadCallback(element.getId(),gptEvent,iframe);}function isGoogleTagLoaded(){return typeof win.googletag.pubads==='function';}function destroySlots(
slotsNames){var allSlots,slotsToDestroy=[],success;if(!isInitialized()){return;}if(!isGoogleTagLoaded()){log(['destroySlots','pubads not yet available','resetting cmd'],log.levels.info,logGroup);win.googletag.cmd=[];enableServices();return;}allSlots=win.googletag.pubads().getSlots();if(!slotsNames){slotsToDestroy=allSlots;}else{allSlots.forEach(function(slot){var slotsPositionTargeting=slot.getTargeting('pos');if(!slotsPositionTargeting.length){log(['destroySlots','getTargeting doesn\'t return pos',slotsPositionTargeting,slot],log.levels.error,logGroup);}else{if(slotsNames.indexOf(slotsPositionTargeting[0])>-1){slotsToDestroy.push(slot);}}});}if(slotsToDestroy.length){push(function(){log(['destroySlots',slotsNames,slotsToDestroy],log.levels.debug,logGroup);success=win.googletag.destroySlots(slotsToDestroy);if(!success){log(['destroySlots',slotsNames,slotsToDestroy,'failed'],log.levels.error,logGroup);}googleSlots.removeSlots(slotsToDestroy);});}else{log(['destroySlots',
'no slots returned to destroy',allSlots,slotsNames],log.levels.debug,logGroup);}}function updateCorrelator(){push(function(){win.googletag.pubads().updateCorrelator();});}return{addSlot:addSlot,destroySlots:destroySlots,updateTargetingForBlockedTraffic:updateTargetingForBlockedTraffic,flush:flush,init:init,isInitialized:isInitialized,onAdLoad:onAdLoad,push:push,refreshSlot:refreshSlot,setPageLevelParams:setPageLevelParams,updateCorrelator:updateCorrelator};});;define('ext.wikia.adEngine.provider.gpt.googleSlots',['ext.wikia.adEngine.slot.adUnitBuilder','ext.wikia.aRecoveryEngine.adBlockDetection','wikia.window'],function(adUnitBuilder,adBlockDetection,win){'use strict';var slots={};function addSlot(slot){var slotId=slot.getSlotElementId();slots[slotId]=slot;}function removeSlots(slotsToRemove){slotsToRemove.forEach(function(slot){slots[slot.getSlotElementId()]=undefined;});}function getSlot(id){var slotId=id;if(adBlockDetection.isBlocking()&&win._sp_&&win._sp_.getElementId){slotId=win.
_sp_.getElementId(slotId);}return slots[slotId];}function getSlotByName(slotName){var adUnit=adUnitBuilder.build(slotName,'gpt');return getSlot('wikia_gpt'+adUnit);}return{addSlot:addSlot,getSlot:getSlot,getSlotByName:getSlotByName,removeSlots:removeSlots};});;define('ext.wikia.adEngine.provider.gpt.helper',['ext.wikia.adEngine.adContext','ext.wikia.adEngine.adLogicPageParams','ext.wikia.adEngine.context.uapContext','ext.wikia.adEngine.provider.gpt.adDetect','ext.wikia.adEngine.provider.gpt.adElement','ext.wikia.adEngine.provider.gpt.googleTag','ext.wikia.adEngine.provider.gpt.googleSlots','ext.wikia.adEngine.provider.gpt.targeting','ext.wikia.adEngine.slot.service.passbackHandler','ext.wikia.adEngine.slot.service.srcProvider','ext.wikia.adEngine.slot.slotTargeting','ext.wikia.aRecoveryEngine.adBlockDetection','ext.wikia.aRecoveryEngine.adBlockRecovery','ext.wikia.adEngine.slotTweaker','wikia.document','wikia.instantGlobals','wikia.log',require.optional('ext.wikia.adEngine.ml.rabbit'),
require.optional('ext.wikia.adEngine.provider.gpt.sraHelper'),require.optional('ext.wikia.aRecoveryEngine.instartLogic.recovery'),require.optional('ext.wikia.aRecoveryEngine.pageFair.recovery')],function(adContext,adLogicPageParams,uapContext,adDetect,AdElement,googleTag,googleSlots,gptTargeting,passbackHandler,srcProvider,slotTargeting,adBlockDetection,adBlockRecovery,slotTweaker,doc,instantGlobals,log,rabbit,sraHelper,instartLogic,pageFair){'use strict';var logGroup='ext.wikia.adEngine.provider.gpt.helper',hiddenSlots=['INCONTENT_PLAYER'];function isHiddenOnStart(slotName){return hiddenSlots.indexOf(slotName)!==-1;}function isRecoverableByIL(){return instartLogic&&instartLogic.isEnabled()&&instartLogic.isBlocking();}function pushAd(slot,slotPath,slotTargetingData,extra){extra=extra||{};var element,isBlocking=adBlockDetection.isBlocking(),isRecoveryEnabled=adBlockRecovery.isEnabled(),adIsRecoverable=extra.isPageFairRecoverable||extra.isInstartLogicRecoverable,adShouldBeRecovered=
isRecoveryEnabled&&isBlocking&&adIsRecoverable,shouldPush=!isBlocking||adShouldBeRecovered,slotName=slot.name,uapId=uapContext.getUapId();log(['isRecoveryEnabled, isBlocking, adIsRecoverable',slot.name,isRecoveryEnabled,isBlocking,adIsRecoverable],log.levels.debug,logGroup);slotTargetingData=JSON.parse(JSON.stringify(slotTargetingData));if(isHiddenOnStart(slotName)){slotTweaker.hide(slotName);slot.pre('success',function(){slotTweaker.show(slotName);});}setAdditionalTargeting(slotTargetingData);element=new AdElement(slotName,slotPath,slotTargetingData);if(pageFair&&extra.isPageFairRecoverable){log(['Adding adonis-marker to slot',slot],log.levels.debug,logGroup);pageFair.addMarker(element.node);}function queueAd(){log(['queueAd',slotName,element],log.levels.debug,logGroup);slot.container.appendChild(element.getNode());googleTag.addSlot(element);}function setAdditionalTargeting(slotTargetingData){var abId,rabbitResults=rabbit&&rabbit.getResults(instantGlobals.
wgAdDriverRabbitTargetingKeyValues);if(isRecoverableByIL()){slotTargetingData.requestSource='instartLogic';}if(slotTargetingData.src){slotTargetingData.src=srcProvider.get(slotTargetingData.src,extra);}if(rabbitResults&&rabbitResults.length){slotTargetingData.rabbit=rabbitResults;}slotTargetingData.passback=passbackHandler.get(slotName)||'none';slotTargetingData.wsi=slotTargeting.getWikiaSlotId(slotName,slotTargetingData.src);slotTargetingData.uap=uapId?uapId.toString():'none';slotTargetingData.outstream=slotTargeting.getOutstreamData()||'none';if(adContext.get('targeting.skin')==='oasis'){slotTargetingData.rail=doc.body.scrollWidth<=1023?'0':'1';}abId=slotTargeting.getAbTestId(slotTargetingData);if(abId){slotTargetingData.abi=abId;}}function onAdLoadCallback(slotElementId,gptEvent,iframe){setTimeout(function(){log(['onAdLoadCallback',slotElementId],log.levels.info,logGroup);adDetect.onAdLoad(slot,gptEvent,iframe,extra.forcedAdType);},0);}function gptCallback(gptEvent){log([
'gptCallback',element.getId(),gptEvent],log.levels.info,logGroup);element.updateDataParams(gptEvent);googleTag.onAdLoad(slotName,element,gptEvent,onAdLoadCallback);}if(!googleTag.isInitialized()){googleTag.init();googleTag.setPageLevelParams(adLogicPageParams.getPageLevelParams());}if(!shouldPush){log(['Push blocked',slotName],log.levels.debug,logGroup);slot.collapse();return;}log(['pushAd',slotName,slotTargetingData],log.levels.info,logGroup);if(!slotTargetingData.flushOnly){slot.pre('renderEnded',gptCallback);googleTag.push(queueAd);}if(!sraHelper||!extra.sraEnabled||sraHelper.shouldFlush(slotName)){log('flushing',log.levels.debug,logGroup);googleTag.flush();}if(slotTargetingData.flushOnly){log(['flushOnly - success',slotName],log.levels.debug,logGroup);slot.success();}}function refreshSlot(slotName){var slot=googleSlots.getSlotByName(slotName),targeting;if(slot){log(['Refresh slot',slotName,slot],log.levels.debug,logGroup);targeting=gptTargeting.getSlotLevelTargeting(slotName);
targeting.uap=uapContext.getUapId().toString();AdElement.configureSlot(slot,targeting);googleTag.refreshSlot(slot);}else{log(['Refresh slot',slotName,'does not exist'],log.levels.debug,logGroup);}}adContext.addCallback(function(){if(googleTag.isInitialized()){googleTag.setPageLevelParams(adLogicPageParams.getPageLevelParams());uapContext.reset();}});return{refreshSlot:refreshSlot,pushAd:pushAd};});;define('ext.wikia.adEngine.provider.gpt.sraHelper',['wikia.log'],function(log){'use strict';var logGroup='ext.wikia.adEngine.provider.gpt.sraHelper',flushed=!1,sraSlots=['INVISIBLE_SKIN','TOP_LEADERBOARD'];function shouldFlush(slotName){if(sraSlots.indexOf(slotName)===-1){log(['shouldFlush','Non-SRA slot',slotName],'debug',logGroup);flushed=!0;}log(['shouldFlush',slotName,flushed],'debug',logGroup);return flushed;}return{shouldFlush:shouldFlush};});;define('ext.wikia.adEngine.provider.gpt.targeting',['ext.wikia.adEngine.provider.gpt.googleSlots','wikia.window'],function(googleSlots,win)
{'use strict';function getPageLevelTargetingValue(key){var pubads;if(win.googletag&&typeof win.googletag.pubads==="function"){pubads=win.googletag.pubads();}return pubads&&typeof pubads.getTargeting==="function"&&pubads.getTargeting(key);}function getSlotLevelTargetingValue(slotName,key){var gptSlot=googleSlots.getSlotByName(slotName);if(gptSlot){return gptSlot.getTargeting(key)[0];}}function getSlotLevelTargeting(slotName){var gptSlot=googleSlots.getSlotByName(slotName),targeting={},keys;if(gptSlot){keys=gptSlot.getTargetingKeys();keys.forEach(function(key){targeting[key]=gptSlot.getTargeting(key)[0];});}return targeting;}return{getPageLevelTargetingValue:getPageLevelTargetingValue,getSlotLevelTargetingValue:getSlotLevelTargetingValue,getSlotLevelTargeting:getSlotLevelTargeting};});;define('ext.wikia.adEngine.provider.remnantGpt',['ext.wikia.adEngine.adContext','ext.wikia.adEngine.provider.factory.wikiaGpt','ext.wikia.adEngine.slot.adUnitBuilder',
'ext.wikia.adEngine.slot.service.megaAdUnitBuilder','ext.wikia.adEngine.slotTweaker'],function(adContext,factory,adUnitBuilder,megaAdUnitBuilder,slotTweaker){'use strict';return factory.createProvider('ext.wikia.adEngine.provider.remnantGpt','RemnantGpt','remnant',{BOTTOM_LEADERBOARD:{size:'728x90,970x250',loc:'footer'},INCONTENT_BOXAD_1:{size:'120x600,160x600,300x250,300x600',loc:'hivi'},INCONTENT_PLAYER:{size:'1x1',loc:'middle'},INVISIBLE_HIGH_IMPACT_2:{loc:'hivi'},INVISIBLE_SKIN:{size:'1000x1000,1x1',loc:'top'},TOP_LEADERBOARD:{size:'3x3,728x90,1030x130,1030x65,1030x250,970x365,970x250,970x90,970x66,970x180,980x150',loc:'top'},TOP_RIGHT_BOXAD:{size:'300x250,300x600,300x1050',loc:'top'}},{afterSuccess:function(slotName){slotTweaker.removeDefaultHeight(slotName);},getAdUnitBuilder:function(){return adContext.getContext().opts.enableRemnantNewAdUnit?megaAdUnitBuilder:adUnitBuilder;}});});;define('ext.wikia.adEngine.provider.turtle',['wikia.log','ext.wikia.adEngine.provider.btfBlocker',
'ext.wikia.adEngine.provider.gpt.helper','ext.wikia.adEngine.slotTweaker'],function(log,btfBlocker,gptHelper,slotTweaker){'use strict';var atfSlots=['INVISIBLE_SKIN','TOP_LEADERBOARD','TOP_RIGHT_BOXAD','TURTLE_FLUSH'],logGroup='ext.wikia.adEngine.provider.turtle',slotMap={INVISIBLE_SKIN:{size:'1000x1000,1x1'},TOP_LEADERBOARD:{size:'728x90,970x250,970x90'},TOP_RIGHT_BOXAD:{size:'300x250,300x600'},TURTLE_FLUSH:{flushOnly:!0}};function canHandleSlot(slotName){log(['canHandleSlot',slotName],'debug',logGroup);var ret=!!slotMap[slotName];log(['canHandleSlot',slotName,ret],'debug',logGroup);return ret;}function fillInSlot(slot){log(['fillInSlot',slot.name],'debug',logGroup);slot.pre('success',function(){slotTweaker.removeDefaultHeight(slot.name);});gptHelper.pushAd(slot,'/98544404/Wikia/Nordics_RoN/'+slot.name,slotMap[slot.name],{forcedAdType:'turtle',sraEnabled:!0});log(['fillInSlot',slot,'done'],'debug',logGroup);}return{name:'Turtle',canHandleSlot:canHandleSlot,fillInSlot:btfBlocker.
decorate(fillInSlot,{atfSlots:atfSlots})};});;define('ext.wikia.adEngine.slot.adSlot',['ext.wikia.adEngine.slot.adUnitBuilder','ext.wikia.adEngine.slot.service.megaAdUnitBuilder','wikia.document','wikia.log'],function(adUnitBuilder,megaAdUnitBuilder,doc,log){'use strict';var logGroup='ext.wikia.adEngine.slot.adSlot';function create(name,container,callbacks){function registerHook(name){return function(adInfo){if(typeof callbacks[name]==='function'){return callbacks[name](adInfo);}};}return{name:name,container:container,isViewed:!1,enabled:!0,isEnabled:registerHook('isEnabled'),disable:registerHook('disable'),enable:registerHook('enable'),collapse:registerHook('collapse'),hop:registerHook('hop'),renderEnded:registerHook('renderEnded'),success:registerHook('success'),viewed:registerHook('viewed')};}function getShortSlotName(slotName){if(megaAdUnitBuilder.isValid(slotName)){return megaAdUnitBuilder.getShortSlotName(slotName);}return adUnitBuilder.getShortSlotName(slotName);}function
getIframe(slotName){var cssSelector='#'+slotName+' > .provider-container:not(.hidden) div[id*="_container_"] > iframe',iframe=doc.querySelector(cssSelector);log(['getIframe',slotName,iframe&&iframe.id],log.levels.debug,logGroup);return iframe;}function getProviderContainer(slotName){var slotContainer=doc.getElementById(slotName);if(slotContainer){return slotContainer.lastElementChild||null;}return null;}return{create:create,getIframe:getIframe,getProviderContainer:getProviderContainer,getShortSlotName:getShortSlotName};});;define('ext.wikia.adEngine.slot.bottomLeaderboard',['wikia.document','wikia.domCalculator','wikia.log','wikia.throttle','wikia.window'],function(doc,dom,log,throttle,win){'use strict';var slotName='BOTTOM_LEADERBOARD',threshold=100,viewPortHeight=Math.max(doc.documentElement.clientHeight,win.innerHeight||0),logGroup='ext.wikia.adEngine.slot.bottomLeaderboard',pushed=!1,wikiaFooter,pushSlot=throttle(function(){var scrollPosition=win.scrollY||win.pageYOffset||doc.
documentElement.scrollTop,pushPos=dom.getTopOffset(wikiaFooter)-viewPortHeight-threshold;if(win.ArticleComments&&!win.ArticleComments.initCompleted){return;}if(!pushed&&pushPos<scrollPosition){pushed=!0;doc.removeEventListener('scroll',pushSlot);win.adslots2.push(slotName);log(['pushSlot','Pushed '+slotName],'debug',logGroup);}});function init(){if(!doc.getElementById(slotName)){log(['init','No '+slotName],'error',logGroup);return;}wikiaFooter=doc.getElementById('WikiaFooter');doc.addEventListener('scroll',pushSlot);}return{init:init};});;define('ext.wikia.adEngine.slot.floatingMedrec',['ext.wikia.adEngine.adContext','ext.wikia.adEngine.context.uapContext','ext.wikia.adEngine.slot.service.viewabilityHandler','wikia.document','wikia.log','wikia.throttle','wikia.window'],function(adContext,uapContext,viewabilityHandler,doc,log,throttle,win){'use strict';var logGroup='ext.wikia.adEngine.slot.floatingMedrec';function init(){var adSlot=doc.createElement('div'),context=adContext.getContext
(),maxChanges=6,onScroll,placeHolderElement=doc.getElementById('WikiaAdInContentPlaceHolder'),recirculationElement=doc.getElementById('recirculation-rail'),refreshInfo={refreshAdPos:0,lastRefreshTime:new Date(),refreshNumber:0,adVisible:!0,heightScrolledThreshold:10,refreshDelay:10000},slotName='INCONTENT_BOXAD_1',startPosition=placeHolderElement.offsetTop,swapRecirculationAndAd;adSlot.className='wikia-ad';adSlot.setAttribute('id',slotName);function hasUserScrolledEnoughDistance(currentHeightPosition){var heightScrolled=Math.abs(currentHeightPosition-refreshInfo.refreshAdPos);return heightScrolled>refreshInfo.heightScrolledThreshold;}function wasItEnoughTimeSinceLastRefresh(){var timeDifference=(new Date())-refreshInfo.lastRefreshTime;return timeDifference>refreshInfo.refreshDelay;}function isMaxNumberOfRefreshReached(){return refreshInfo.refreshNumber>=maxChanges;}function isUAPFloatingMedrecVisible(){var isAdVisible=refreshInfo.adVisible&&refreshInfo.refreshNumber!==0;return uapContext
.isUapLoaded()&&isAdVisible;}function shouldSwitchModules(currentHeightPosition){return hasUserScrolledEnoughDistance(currentHeightPosition)&&wasItEnoughTimeSinceLastRefresh()&&!isMaxNumberOfRefreshReached()&&!isUAPFloatingMedrecVisible();}function updateModulesRefreshInformation(currentHeightPosition){refreshInfo.lastRefreshTime=new Date();refreshInfo.refreshAdPos=currentHeightPosition;refreshInfo.refreshNumber++;}function showRecirculation(){recirculationElement.style.display='block';}function hideRecirculation(){recirculationElement.style.display='none';}function refreshAd(onSuccess){viewabilityHandler.refreshOnView(slotName,0,{onSuccess:onSuccess});}swapRecirculationAndAd=throttle(function(){if(shouldSwitchModules(placeHolderElement.offsetTop)){updateModulesRefreshInformation(placeHolderElement.offsetTop);if(refreshInfo.adVisible){log(['swapRecirculationAndAd','Hide ad, show recirculation '],'debug',logGroup);adSlot.classList.add('hidden');showRecirculation();}else{log([
'swapRecirculationAndAd','Show ad, hide recirculation '],'debug',logGroup);refreshAd(hideRecirculation);}refreshInfo.adVisible=!refreshInfo.adVisible;}});onScroll=throttle(function(){if(startPosition<placeHolderElement.offsetTop&&shouldSwitchModules(placeHolderElement.offsetTop)){updateModulesRefreshInformation(placeHolderElement.offsetTop);log(['checkAndPushAd','Enabling floating medrec'],'debug',logGroup);placeHolderElement.appendChild(adSlot);win.addEventListener('scroll',swapRecirculationAndAd);refreshInfo.refreshAdPos=placeHolderElement.offsetTop;refreshInfo.lastRefreshTime=(new Date()).getTime()+refreshInfo.refreshDelay;win.adslots2.push({slotName:slotName,onSuccess:function(){hideRecirculation();refreshInfo.lastRefreshTime=(new Date()).getTime();}});win.removeEventListener('scroll',onScroll);}});function start(){if(!context.opts.floatingMedrec){log(['init','Floating medrec disabled: ad context returns false'],'debug',logGroup);return;}if(!win.wgIsContentNamespace){log(['init',
'Floating medrec disabled: $wgIsContentNamespace equals false'],'debug',logGroup);return;}if(!placeHolderElement){log(['init','Floating medrec disabled: no placeHolder'],'debug',logGroup);return;}win.addEventListener('scroll',onScroll);}start();}return{init:init};});;define('ext.wikia.adEngine.slot.highImpact',['ext.wikia.adEngine.context.slotsContext','wikia.window'],function(slotsContext,win){'use strict';var slotName='INVISIBLE_HIGH_IMPACT_2';function init(){if(slotsContext.isApplicable(slotName)){win.adslots2.push({slotName:slotName});}}return{init:init};});;define('ext.wikia.adEngine.slot.inContent',['ext.wikia.adEngine.adTracker','ext.wikia.adEngine.context.slotsContext','ext.wikia.adEngine.video.videoFrequencyMonitor','JSMessages','wikia.document','wikia.log','wikia.window'],function(adTracker,slotsContext,videoFrequencyMonitor,msg,doc,log,win){'use strict';var logGroup='ext.wikia.adEngine.slot.inContent',selector='#mw-content-text > h2';function createInContentWrapper(slotName)
{var adHtml=doc.createElement('div'),label=msg('adengine-advertisement');adHtml.id='INCONTENT_WRAPPER';adHtml.innerHTML='<div id="'+slotName+'" class="wikia-ad hidden" data-label="'+label+'"></div>';return adHtml;}function insertSlot(header,slotName,onSuccessCallback){var wrapper=createInContentWrapper(slotName);log('insertSlot','debug',logGroup);header.parentNode.insertBefore(wrapper,header);win.adslots2.push({slotName:slotName,onSuccess:onSuccessCallback});}function init(slotName,onSuccessCallback){var header=doc.querySelectorAll(selector)[1],logMessage,logWikiData='(wikiId: '+win.wgCityId+' articleId: '+win.wgArticleId+')',slotNameGA=slotName.toLowerCase();if(!header){logMessage='missing second section '+logWikiData;}if(!slotsContext.isApplicable(slotName)){logMessage='2nd section in the article is not full width '+logWikiData;}if(!videoFrequencyMonitor.videoCanBeLaunched()){logMessage='video frequency capping '+logWikiData;}if(logMessage){log(slotName+' not added - '+logMessage,
'debug',logGroup);adTracker.track('slot/'+slotNameGA+'/failed',{'reason':logMessage});return;}insertSlot(header,slotName,onSuccessCallback);adTracker.track('slot/'+slotNameGA+'/success');}return{init:init};});;define('ext.wikia.adEngine.slot.resolvedState',['ext.wikia.adEngine.context.uapContext','wikia.cache','wikia.log','wikia.querystring','wikia.window'],function(uapContext,cache,log,QueryString,win){'use strict';var cacheKey='adEngine_resolvedStateCounter',cacheTtl=cache.CACHE_STANDARD,logGroup='ext.wikia.adEngine.slot.resolvedState',now=win.wgNow||new Date(),qs=new QueryString();function getQueryParam(){return qs.getVal('resolved_state',null);}function isForcedByURLParam(){return[true,'true','1'].indexOf(getQueryParam())>-1;}function isBlockedByURLParam(){return[false,'blocked','false','0'].indexOf(getQueryParam())>-1;}function createCacheKey(){return cacheKey+'_'+uapContext.getUapId();}function findRecordInCache(){return cache.get(createCacheKey(),now);}function
wasDefaultStateSeen(){var adId=uapContext.getUapId(),record=findRecordInCache(),seen=!!record&&record.lastSeenDate!==now.getTime();if(seen){log('Full version of uap was seen in last 24h. adId: '+adId,log.levels.debug,logGroup);}else{log('Full version of uap was not seen in last 24h. adId: '+adId,log.levels.debug,logGroup);}return seen;}function updateInformationAboutSeenDefaultStateAd(){cache.set(createCacheKey(),{adId:uapContext.getUapId(),lastSeenDate:now.getTime()},cacheTtl,now);}function setResolvedState(params){log('Resolved state is turned on',logGroup,log.levels.debug);params.aspectRatio=params.resolvedStateAspectRatio;params.image1.element.src=params.image1.resolvedStateSrc;if(params.image2&&params.image2.resolvedStateSrc){params.image2.element.src=params.image2.resolvedStateSrc;}}function templateSupportsResolvedState(params){return!!(params.image1&&params.image1.resolvedStateSrc);}function setDefaultState(params){params.image1.element.src=params.image1.defaultStateSrc;if(
params.image2&&params.image2.defaultStateSrc){params.image2.element.src=params.image2.defaultStateSrc;}}function setImage(videoSettings){var params=videoSettings.getParams();if(templateSupportsResolvedState(params)){if(videoSettings.isResolvedState()){setResolvedState(params);}else{setDefaultState(params);updateInformationAboutSeenDefaultStateAd();}}}function isResolvedState(){var showResolvedState=!isBlockedByURLParam(),defaultStateSeen=!0;if(showResolvedState){defaultStateSeen=wasDefaultStateSeen()||isForcedByURLParam();}return showResolvedState&&defaultStateSeen;}return{isResolvedState:isResolvedState,setImage:setImage};});;define('ext.wikia.adEngine.slot.service.actionHandler',['ext.wikia.adEngine.messageListener','ext.wikia.adEngine.slotTweaker','ext.wikia.adEngine.slot.service.viewabilityHandler','wikia.abTest','wikia.log'],function(messageListener,slotTweaker,viewabilityHandler,abTest,log){'use strict';var logGroup='ext.wikia.adEngine.slot.service.actionHandler';function
messageCallback(data){if(!data.slotName){return log('messageCallback: missing slot name',log.levels.debug,logGroup);}switch(data.action){case'expand':slotTweaker.expand(data.slotName);break;case'collapse':slotTweaker.collapse(data.slotName);break;case'hide':slotTweaker.hide(data.slotName);break;case'show':slotTweaker.show(data.slotName);break;case'make-responsive':slotTweaker.makeResponsive(data.slotName,data.aspectRatio);break;case'refresh-on-view':if(!abTest.getGroup('AD_MIX')||(abTest.getGroup('AD_MIX')&&abTest.getGroup('AD_MIX').indexOf('AD_MIX_1')===0)){viewabilityHandler.refreshOnView(data.slotName,data.delay);}break;default:log(['messageCallback: unknown action',data.action],log.levels.debug,logGroup);}}function registerMessageListener(){messageListener.register({dataKey:'action',infinite:!0},messageCallback);}return{registerMessageListener:registerMessageListener};});;define('ext.wikia.adEngine.slot.service.passbackHandler',['ext.wikia.adEngine.slot.service.stateMonitor'],
function(slotStateMonitor){'use strict';function get(slotName){var slotHops=slotStateMonitor.getSlotStatuses(slotName,'hop');if(slotHops.length>0){var lastHop=slotHops[slotHops.length-1];return lastHop&&lastHop.adInfo&&lastHop.adInfo.source?lastHop.adInfo.source:'unknown';}return null;}return{get:get};});;define('ext.wikia.adEngine.slot.service.slotRegistry',['ext.wikia.adEngine.adContext','wikia.window'],function(adContext,win){'use strict';var slots={},slotQueueCount={},scrollYOnDfpRequest={};function incrementSlotQueueCount(slotName){slotQueueCount[slotName]=slotQueueCount[slotName]||0;if(slots[slotName].length===0){slotQueueCount[slotName]+=1;}}function add(slot,providerName){slots[slot.name]=slots[slot.name]||[];incrementSlotQueueCount(slot.name);slots[slot.name].push({providerName:providerName,slot:slot});}function get(slotName,providerName){var slotsCount,foundSlots;if(!slots[slotName]){return null;}slotsCount=slots[slotName].length;if(!slotsCount){return null;}if(!providerName)
{return slots[slotName][slotsCount-1].slot;}foundSlots=slots[slotName].filter(function(registryRow){if(registryRow.providerName===providerName){return registryRow.slot;}});if(foundSlots.length){return foundSlots[0].slot;}return null;}function getRefreshCount(slotName){return slotQueueCount[slotName]||0;}function reset(slotName){slots[slotName]=[];}adContext.addCallback(function(){slots={};slotQueueCount={};});function storeScrollY(slotName){scrollYOnDfpRequest[slotName]=win.scrollY||win.pageYOffset;}function getScrollY(slotName){return scrollYOnDfpRequest[slotName];}return{add:add,get:get,getRefreshCount:getRefreshCount,getScrollY:getScrollY,reset:reset,storeScrollY:storeScrollY};});;define('ext.wikia.adEngine.slot.service.stateMonitor',['wikia.window'],function(win){'use strict';var slotHistoryMap={};function store(data){if(!slotHistoryMap[data.slot.name]){slotHistoryMap[data.slot.name]=[];}slotHistoryMap[data.slot.name].push(data);}function run(){win.addEventListener(
'adengine.slot.status',function(e){store(e.detail);});}function filterByStatus(data,status){return data.filter(function(e){return e.status===status;});}function getSlotStatuses(slotName,statusType){var result=slotHistoryMap[slotName];if(!result){return[];}return statusType?filterByStatus(result,statusType):result;}return{getSlotStatuses:getSlotStatuses,run:run};});;define('ext.wikia.adEngine.slot.service.viewabilityHandler',['ext.wikia.adEngine.provider.gpt.googleTag','ext.wikia.adEngine.slot.service.slotRegistry','wikia.log','wikia.window'],function(googleTag,slotRegistry,log,win){'use strict';var logGroup='ext.wikia.adEngine.slot.service.viewabilityHandler';function refreshSlot(slotName,delay,options){var slotObject={slotName:slotName,onSuccess:options.onSuccess};delay=delay!==undefined?delay:1000;win.setTimeout(function(){googleTag.destroySlots([slotName]);if(win.adslots2){win.adslots2.push(slotObject);}else{win.Mercury.Modules.Ads.getInstance().pushSlotToQueue(slotObject);}},delay)
;}function refreshOnView(slotName,delay,options){var slot=slotRegistry.get(slotName);log(['refresh on view',slotName,slot],log.levels.debug,logGroup);options=options||{};if(slot){if(slot.isViewed){refreshSlot(slot.name,delay,options);}else{slot.post('viewed',function(){refreshSlot(slot.name,delay,options);});}}}return{refreshOnView:refreshOnView};});;define('ext.wikia.adEngine.template.floatingRail',['ext.wikia.adEngine.adContext','jquery','wikia.log','wikia.throttle','wikia.window'],function(adContext,$,log,throttle,win){'use strict';var $medrec=$('#TOP_RIGHT_BOXAD'),$rail=$('#WikiaRail'),$railWrapper=$('#WikiaRailWrapper'),$wikiaMainContent=$('#WikiaMainContent'),$win=$(win),adsInRail=2,biggestAdSize=600,globalNavHeight=$('#globalNavigation').height(),margin=15,medrecDefaultSize=250,logGroup='ext.wikia.adEngine.template.floatingRail',railWidth=300,availableSpace,floatingSpace,scrollTop,startPosition,stopPosition,update=throttle(function(){startPosition=parseInt($railWrapper.offset().
top,10)-globalNavHeight-margin;stopPosition=startPosition+floatingSpace;scrollTop=$win.scrollTop();if(scrollTop<=startPosition||$medrec.hasClass('hidden')){$rail.css({position:'static',paddingTop:'0px',top:'0px',width:railWidth+'px'});}else if(scrollTop>startPosition&&scrollTop<stopPosition){$rail.css({position:'fixed',paddingTop:'0px',top:globalNavHeight+margin+'px',width:railWidth+'px'});}else if(scrollTop>=stopPosition){$rail.css({position:'static',paddingTop:floatingSpace+'px',top:'0px',width:railWidth+'px'});}},50);function getChildrenHeight(){var height=0;$rail.children().each(function(){height+=$(this).height();});return height;}function getAvailableSpace(){if(!availableSpace){availableSpace=$wikiaMainContent.height()-getChildrenHeight()+medrecDefaultSize-adsInRail*biggestAdSize;availableSpace=Math.max(0,availableSpace);log(['getAvailableSpace',availableSpace],'debug',logGroup);}return availableSpace;}function show(params){var offset=params.offset||0,context=adContext.getContext
(),isPageSupported=context.targeting.skin==='oasis'&&context.targeting.pageType==='article';if(!isPageSupported||getAvailableSpace()===0){return;}floatingSpace=Math.min(offset,getAvailableSpace());win.addEventListener('scroll',update);win.addEventListener('resize',update);}return{show:show};});;define('ext.wikia.adEngine.template.floor',['ext.wikia.adEngine.adContext','ext.wikia.adEngine.slot.adSlot','ext.wikia.adEngine.provider.gpt.adDetect','wikia.log','wikia.document','wikia.iframeWriter','wikia.window'],function(adContext,adSlot,adDetect,log,doc,iframeWriter,win){'use strict';var logGroup='ext.wikia.adEngine.template.floor',floorId='ext-wikia-adEngine-template-floor',floorHtml='<div class="background"></div>'+'<div class="ad"></div>'+'<a class="close" title="Close" href="#">'+'<svg role="img" class="ads-floor-close-button"><use xlink:href="#close"></use></svg></a>';function show(params){log(['show',params],'debug',logGroup);var iframe=iframeWriter.getIframe({code:params.code,width:
params.width,height:params.height}),floor=document.getElementById(floorId),gptEventMock={size:{width:params.width,height:params.height}},async=params.canHop&&params.slotName,slot;function showFloor(){var skin=adContext.getContext().targeting.skin;if(skin==='oasis'){win.WikiaBar.hideContainer();}floor.classList.remove('hidden');}if(params.onClick){iframe.addEventListener('load',function(){var iFrameBody=iframe.contentWindow.document.body;iFrameBody.style.cursor='pointer';iFrameBody.addEventListener('click',params.onClick)});}if(async){log(['show',params.slotName,'can hop'],'info',logGroup);slot=adSlot.create(params.slotName,null,{success:function(){log(['ad detect',params.slotName,'success'],'info',logGroup);win.postMessage('{"AdEngine":{"slot_'+params.slotName+'":true,"status":"success"}}','*');showFloor();},hop:function(){log(['ad detect',params.slotName,'hop'],'info',logGroup);win.postMessage('{"AdEngine":{"slot_'+params.slotName+'":true,"status":"hop"}}','*');}});iframe.
addEventListener('load',function(){adDetect.onAdLoad(slot,gptEventMock,iframe);});}if(!floor){floor=document.createElement('div');floor.id=floorId;floor.className='hidden';floor.innerHTML=floorHtml;doc.body.insertAdjacentElement('beforeend',floor);}floor.querySelector('a.close').addEventListener('click',function(event){event.preventDefault();floor.classList.add('hidden');});floor.querySelector('.ad').appendChild(iframe);if(!async){showFloor();}}adContext.addCallback(function(){var floor=doc.getElementById(floorId);if(floor){floor.parentElement.removeChild(floor);}});return{show:show};});;define('ext.wikia.adEngine.template.floorAdhesion',['ext.wikia.adEngine.adContext','ext.wikia.adEngine.slotTweaker','wikia.log','wikia.document','wikia.window'],function(adContext,slotTweaker,log,doc,win){'use strict';var logGroup='ext.wikia.adEngine.template.floorAdhesion',slotName='INVISIBLE_HIGH_IMPACT_2';function show(){var skin=adContext.getContext().targeting.skin,wrapper=doc.getElementById(
'InvisibleHighImpactWrapper');wrapper.querySelector('.close').addEventListener('click',function(event){event.preventDefault();wrapper.classList.add('hidden');});if(skin==='oasis'){win.WikiaBar.hideContainer();}wrapper.classList.add('floor-adhesion');wrapper.classList.remove('hidden');slotTweaker.adjustIframeByContentSize(slotName);log('Show floor adhesion','info',logGroup);}return{show:show};});;define('ext.wikia.adEngine.template.interstitial',['ext.wikia.adEngine.slotTweaker','wikia.document','wikia.log'],function(slotTweaker,doc,log){'use strict';var logGroup='ext.wikia.adEngine.template.interstitial',slotName='INVISIBLE_HIGH_IMPACT_2';function show(){var wrapper=doc.getElementById('InvisibleHighImpactWrapper');wrapper.querySelector('.close').addEventListener('click',function(event){event.preventDefault();wrapper.classList.add('hidden');doc.documentElement.classList.remove('stop-scrolling');log('Hide interstitial','info',logGroup);});wrapper.classList.add('interstitial');wrapper.
classList.remove('hidden');doc.documentElement.classList.add('stop-scrolling');slotTweaker.adjustIframeByContentSize(slotName);log('Show interstitial','info',logGroup);}return{show:show};});;define('ext.wikia.adEngine.template.modal',['ext.wikia.adEngine.slot.adSlot','ext.wikia.adEngine.provider.gpt.adDetect','ext.wikia.adEngine.template.modalHandlerFactory','wikia.document','wikia.log','wikia.iframeWriter','wikia.throttle','wikia.window'],function(adSlot,adDetect,modalHandlerFactory,doc,log,iframeWriter,throttle,win){'use strict';var logGroup='ext.wikia.adEngine.template.modal';function show(params){log(['show',params],'debug',logGroup);var adContainer=doc.createElement('DIV'),adIframe=iframeWriter.getIframe({code:params.code,height:params.height,width:params.width,classes:'wikia-ad-iframe'}),async=params.canHop&&params.slotName,gptEventMock={size:{width:params.width,height:params.height}},modalHandler=modalHandlerFactory.create(),lightboxParams,slot;if(modalHandler===null){return;}
function scaleAd(){var availableWidth=Math.max(win.innerWidth*lightboxParams.availableWidthRatio,lightboxParams.minWidth),availableHeight=Math.max(win.innerHeight*lightboxParams.availableHeightRatio-lightboxParams.heightSubtract,lightboxParams.minHeight),ratioWidth=availableWidth/params.width,ratioHeight=availableHeight/params.height,ratio=Math.min(ratioWidth,ratioHeight,lightboxParams.maximumRatio);adIframe.style.transform='scale('+ratio+')';adIframe.style.msTransform='scale('+ratio+')';adIframe.style.WebkitTransform='scale('+ratio+')';adIframe.style.transformOrigin='top left';adIframe.style.msTransformOrigin='top left';adIframe.style.WebkitTransformOrigin='top left';adContainer.style.width=Math.floor(params.width*ratio)+'px';adContainer.style.height=Math.floor(params.height*ratio)+'px';}function scaleAdIfNeeded(){if(params.scalable){scaleAd();win.addEventListener('resize',throttle(function(){scaleAd();}));}}lightboxParams=modalHandler.getExpansionModel();adIframe.style.maxWidth=
'none';adContainer.appendChild(adIframe);if(async){slot=adSlot.create(params.slotName,null,{success:function(){log(['ad detect',params.slotName,'success'],'info',logGroup);win.postMessage('{"AdEngine":{"slot_'+params.slotName+'":true,"status":"success"}}','*');modalHandler.show();},hop:function(){log(['ad detect',params.slotName,'hop'],'info',logGroup);win.postMessage('{"AdEngine":{"slot_'+params.slotName+'":true,"status":"hop"}}','*');}});adIframe.addEventListener('load',function(){adDetect.onAdLoad(slot,gptEventMock,adIframe);});}scaleAdIfNeeded();if(!params.hasOwnProperty('closeDelay')){params.closeDelay=0;}modalHandler.create(adContainer,!async,params.closeDelay);}return{show:show};});;define('ext.wikia.adEngine.template.modalHandlerFactory',['ext.wikia.adEngine.adContext','wikia.log',require.optional('ext.wikia.adEngine.template.modalMercuryHandler'),require.optional('ext.wikia.adEngine.template.modalOasisHandler')],function(adContext,log,MercuryHandler,OasisHandler){'use strict';
var logGroup='ext.wikia.adEngine.template.modalHandlerFactory';function create(){var skin=adContext.getContext().targeting.skin;log(['create',skin],'debug',logGroup);switch(skin){case'mercury':log('Created handler for mercury skin','debug',logGroup);return new MercuryHandler();case'oasis':log('Created handler for oasis skin','debug',logGroup);return new OasisHandler();default:log('Unsupported skin','debug',logGroup);return null;}}return{create:create};});;define('ext.wikia.adEngine.template.modalOasisHandler',['jquery',require.optional('wikia.ui.factory')],function($,uiFactory){'use strict';var oasisHandler=function(){this.modalId='ext-wikia-adEngine-template-modal';};oasisHandler.prototype.create=function(adContainer,modalVisible,closeButtonDelay){var modalConfig={vars:{id:this.modalId,size:'medium',content:'',title:'Advertisement',closeText:'Close',buttons:[]}};uiFactory.init('modal').then((function(uiModal){uiModal.createComponent(modalConfig,(function(modal){closeButtonDelay=
parseInt(closeButtonDelay,10)||0;var hideCloseButton=closeButtonDelay>0,$header,$counter,counter;this.modal=modal;modal.$content.append(adContainer);modal.$element.width('auto');function timer(){closeButtonDelay=closeButtonDelay-1;if(closeButtonDelay<0){clearInterval(counter);$counter.hide();modal.$close.show();return;}$counter.text(closeButtonDelay);}if(hideCloseButton){$header=modal.$close.parent();$counter=$(document.createElement('div'));modal.$close.hide();$counter.addClass('close-counter');$counter.text(closeButtonDelay);$header.prepend($counter);counter=setInterval(timer,1000);}if(modalVisible){this.show();}}).bind(this));}).bind(this));};oasisHandler.prototype.show=function(){if(this.modal){this.modal.show();}};oasisHandler.prototype.getExpansionModel=function(){return{availableHeightRatio:0.8,availableWidthRatio:0.9,heightSubtract:90,minWidth:200,minHeight:150,maximumRatio:2};};return oasisHandler;});;define('ext.wikia.adEngine.template.playwire',[
'ext.wikia.adEngine.video.player.playwire','wikia.log'],function(player,log){'use strict';var logGroup='ext.wikia.adEngine.template.playwire';function show(params){params.configUrl=params.configUrl||player.getConfigUrl(params.publisherId,params.videoId);if(params.container){player.inject(params);log(['show',params.configUrl],'info',logGroup);}}return{show:show};});;define('ext.wikia.adEngine.template.porvata',['ext.wikia.adEngine.domElementTweaker','ext.wikia.adEngine.slot.service.slotRegistry','ext.wikia.adEngine.slotTweaker','ext.wikia.adEngine.video.player.porvata','ext.wikia.adEngine.video.player.uiTemplate','ext.wikia.adEngine.video.player.ui.videoInterface','ext.wikia.adEngine.video.videoFrequencyMonitor','ext.wikia.adEngine.video.videoSettings','wikia.browserDetect','wikia.document','wikia.log','wikia.window',require.optional('ext.wikia.adEngine.mobile.mercuryListener'),require.optional('ext.wikia.adEngine.wrappers.prebid')],function(DOMElementTweaker,slotRegistry,slotTweaker,
porvata,uiTemplate,videoInterface,videoFrequencyMonitor,videoSettings,browserDetect,doc,log,win,mercuryListener,prebid){'use strict';var fallbackBidders=['appnexusAst','beachfront','rubicon'],logGroup='ext.wikia.adEngine.template.porvata',videoAspectRatio=640/360;function callHop(params,shouldSetStatus){if(shouldSetStatus){slotRegistry.get(params.slotName).hop({adType:params.adType,source:'porvata'});}}function callSuccess(params,shouldSetStatus){if(shouldSetStatus){slotRegistry.get(params.slotName).success({adType:params.adType,source:'porvata'});}}function getVideoContainer(slotName){var container=doc.createElement('div'),displayWrapper=doc.createElement('div'),providerContainer=doc.querySelector('#'+slotName+' > .provider-container');container.classList.add('video-overlay');displayWrapper.classList.add('video-display-wrapper');container.appendChild(displayWrapper);providerContainer.appendChild(container);return displayWrapper;}function isVpaid(contentType){return contentType===
'application/javascript';}function dispatchEventWhenInViewport(video,eventName){if(video.wasInViewport){video.ima.dispatchEvent(eventName);}else{video.addEventListener('wikiaFirstTimeInViewport',function(){video.ima.dispatchEvent(eventName);});}}function enabledFallbackBidHandling(video,videoSettings,params){var hasDirectAd=!0,fallbackAdRequested=!1;video.addEventListener('wikiaAdsManagerLoaded',function(){if(hasDirectAd){dispatchEventWhenInViewport(video,'wikiaInViewportWithDirect');callSuccess(params,params.setSlotStatusBasedOnVAST);}});video.addEventListener('wikiaEmptyAd',function(){var fallbackBid,offerEvent='wikiaInViewportWithoutOffer';if(fallbackAdRequested){return;}hasDirectAd=!1;fallbackBid=prebid.getWinningVideoBidBySlotName(params.slotName,fallbackBidders);if(fallbackBid){fallbackAdRequested=!0;params.bid=fallbackBid;offerEvent='wikiaInViewportWithFallbackBid';videoSettings.setMoatTracking(false);video.reload({height:params.height,width:params.width,vastResponse:
fallbackBid.vastContent,vastUrl:fallbackBid.vastUrl});if(typeof params.fallbackBidBlockOutOfViewportPausing!=='undefined'){params.blockOutOfViewportPausing=params.fallbackBidBlockOutOfViewportPausing;}if(typeof params.fallbackBidEnableInContentFloating!=='undefined'){params.enableInContentFloating=params.fallbackBidEnableInContentFloating;}if(typeof params.fallbackBidEnableLeaderboardFloating!=='undefined'){params.enableLeaderboardFloating=params.fallbackBidEnableLeaderboardFloating;}callSuccess(params,params.setSlotStatusBasedOnVAST);}else{callHop(params,params.setSlotStatusBasedOnVAST);}dispatchEventWhenInViewport(video,offerEvent);});}function onReady(video,params){var slot=doc.getElementById(params.slotName),slotWidth;slot.classList.add('porvata-outstream');video.addEventListener('loaded',function(){video.container.classList.remove('hidden');});if(params.isDynamic){win.addEventListener('resize',function(){if(!(video.isFloating&&video.isFloating())){slotWidth=slot.clientWidth;video.
resize(slotWidth,slotWidth/videoAspectRatio);}});}}function isVideoAutoplaySupported(){return!browserDetect.isAndroid()||(browserDetect.getBrowser().indexOf('Chrome')!==-1&&browserDetect.getBrowserVersion()>=54);}function show(params){var imaVpaidModeInsecure=2,settings;log(['show',params],log.levels.debug,logGroup);if(prebid&&params.hbAdId){params.bid=prebid.getBidByAdId(params.hbAdId);params.vastResponse=params.bid.vastContent||null;params.vastUrl=params.bid.vastUrl;}if(!isVideoAutoplaySupported()){log(['hop',params.adProduct,params.slotName,params],log.levels.info,logGroup);callHop(params,true);return;}callSuccess(params,!params.setSlotStatusBasedOnVAST);if(params.vpaidMode===imaVpaidModeInsecure){params.originalContainer=params.container;params.container=getVideoContainer(params.slotName);}if(params.isDynamic){slotTweaker.collapse(params.slotName,true);slotTweaker.makeResponsive(params.slotName,videoAspectRatio);}settings=videoSettings.create(params);porvata.inject(settings,
function(video){var imaVpaidMode=win.google.ima.ImaSdkSettings.VpaidMode,templateName=params.isDynamic?'outstreamIncontent':'outstreamLeaderboard',videoPlayer;if(params.vpaidMode===imaVpaidMode.INSECURE){videoPlayer=params.container.querySelector('.video-player');video.addEventListener('loaded',function(){var ad=video.ima.getAdsManager().getCurrentAd();if(ad&&isVpaid(ad.getContentType()||'')){params.container.classList.add('vpaid-enabled');DOMElementTweaker.show(videoPlayer);}});video.addEventListener('allAdsCompleted',function(){DOMElementTweaker.hide(params.container);});}onReady(video,params);if(prebid&&params.useBidAsFallback){enabledFallbackBidHandling(video,settings,params);}video.addEventListener('start',function(){videoFrequencyMonitor.registerLaunchedVideo();});if(mercuryListener){mercuryListener.onPageChange(function(){video.destroy();});}videoInterface.setup(video,uiTemplate[templateName],{container:params.container,isDynamic:params.isDynamic,slotName:params.slotName});
return video;});}return{show:show};});;define('ext.wikia.adEngine.template.roadblock',['ext.wikia.adEngine.adContext','ext.wikia.adEngine.context.uapContext','ext.wikia.adEngine.provider.btfBlocker','ext.wikia.adEngine.provider.gpt.helper','ext.wikia.adEngine.slot.service.slotRegistry','wikia.document','wikia.log'],function(adContext,uapContext,btfBlocker,gptHelper,slotRegistry,doc,log){'use strict';var context=adContext.getContext(),logGroup='ext.wikia.adEngine.template.roadblock',uapType='ruap';function show(params){var medrecSlot=slotRegistry.get('TOP_RIGHT_BOXAD'),skinSlot=slotRegistry.get('INVISIBLE_SKIN');uapContext.setUapId(params.uap);uapContext.setType(uapType);if(medrecSlot){btfBlocker.unblock(medrecSlot.name);log(['show','unblocking slot',medrecSlot.name],log.levels.info,logGroup);}if(skinSlot){btfBlocker.unblock(skinSlot.name);log(['show','unblocking slot',skinSlot.name],log.levels.info,logGroup);}log(['show',params.uap],log.levels.info,logGroup);}return{show:show};});;
define('ext.wikia.adEngine.template.skin',['ext.wikia.adEngine.adContext','wikia.document','wikia.window','wikia.log'],function(adContext,doc,win,log){'use strict';var logGroup='ext.wikia.adengine.template.skin';function show(params){win.wgAfterContentAndJS.push(function(){log(params,'debug',logGroup);params=params||{};var adSkin=doc.getElementById('ad-skin'),adSkinStyle=adSkin.style,wikiaSkin=doc.getElementById('WikiaPageBackground'),wikiaSkinStyle=wikiaSkin&&wikiaSkin.style,i,len,pixelElement,pixelUrl;if(win.wgOasisResponsive||win.wgOasisBreakpoints){require(['wikia.backgroundchanger'],function(backgroundchanger){if(!params.middleColor){params.middleColor=params.backgroundColor;}var bcParams={skinImage:params.skinImage,skinImageWidth:1700,skinImageHeight:800,backgroundTiled:!1,backgroundFixed:!0,backgroundDynamic:!0};if(params.backgroundColor){bcParams.backgroundColor='#'+params.backgroundColor;}if(params.middleColor){bcParams.backgroundMiddleColor='#'+params.middleColor;}if(
params.ten64){bcParams.ten64=!0;}backgroundchanger.load(bcParams);});}else{adSkinStyle.background='url("'+params.skinImage+'") no-repeat top center #'+params.backgroundColor;}doc.body.classList.add('background-ad');adSkinStyle.position='fixed';adSkinStyle.height='100%';adSkinStyle.width='100%';adSkinStyle.left=0;adSkinStyle.top=0;adSkinStyle.zIndex=1;adSkinStyle.cursor='pointer';if(wikiaSkinStyle){wikiaSkinStyle.opacity=1;}adSkin.onclick=function(){log('Click on skin','user',logGroup);win.open(params.destUrl);};win.wgAdSkinPresent=!0;log('Skin set',5,logGroup);if(params.pixels){for(i=0,len=params.pixels.length;i<len;i+=1){pixelUrl=params.pixels[i];if(pixelUrl){log('Adding tracking pixel '+pixelUrl,'debug',logGroup);pixelElement=doc.createElement('img');pixelElement.src=pixelUrl;pixelElement.width=1;pixelElement.height=1;adSkin.appendChild(pixelElement);}}}log('Pixels added','debug',logGroup);});}return{show:show};});;define('ext.wikia.adEngine.tracking.adInfoListener',[
'ext.wikia.adEngine.adContext','ext.wikia.adEngine.lookup.services','ext.wikia.adEngine.tracking.adInfoTracker','ext.wikia.adEngine.video.vastParser','wikia.log','wikia.querystring','wikia.window'],function(adContext,lookupServices,tracker,vastParser,log,Querystring,win){'use strict';var logGroup='ext.wikia.adEngine.tracking.adInfoListener',enabledSlots={TOP_LEADERBOARD:!0,TOP_RIGHT_BOXAD:!0,INCONTENT_BOXAD_1:!0,INCONTENT_PLAYER:!0,BOTTOM_LEADERBOARD:!0,MOBILE_TOP_LEADERBOARD:!0,MOBILE_BOTTOM_LEADERBOARD:!0,MOBILE_IN_CONTENT:!0,MOBILE_PREFOOTER:!0};function isEnabled(){return adContext.getContext().opts.enableAdInfoLog;}function getBidderWon(slotParams,realSlotPrices){var slotPricesKeys=Object.keys(realSlotPrices).filter(function(key){return parseFloat(realSlotPrices[key])>0;}),highestPrice=Math.max.apply(null,slotPricesKeys.map(function(key){return parseFloat(realSlotPrices[key]);})),highestPriceBidders=[];slotPricesKeys.forEach(function(key){if(parseFloat(
realSlotPrices[key])===highestPrice){highestPriceBidders.push(key);}});if(slotParams.hb_bidder&&highestPriceBidders.indexOf(slotParams.hb_bidder)>=0){return slotParams.hb_bidder;}return'';}function trackSlot(slot,status,adInfo){var slotFirstChildData=slot.container.firstChild.dataset,pageParams=JSON.parse(slotFirstChildData.gptPageParams||'{}'),slotParams=JSON.parse(slotFirstChildData.gptSlotParams||'{}'),slotPricesIgnoringTimeout=lookupServices.getCurrentSlotPrices(slot.name),realSlotPrices=lookupServices.getDfpSlotPrices(slot.name),slotSize=JSON.parse(slotFirstChildData.gptCreativeSize||'[]'),bidderWon=getBidderWon(slotParams,realSlotPrices);adInfo=adInfo||{};tracker.track(slot.name,pageParams,slotParams,{adProduct:adInfo.adProduct,creativeId:slotFirstChildData.gptCreativeId,creativeSize:slotFirstChildData.gptCreativeSize,lineItemId:slotFirstChildData.gptLineItemId,slotSize:slotSize,status:status},{bidderWon:bidderWon,realSlotPrices:realSlotPrices,slotPricesIgnoringTimeout:
slotPricesIgnoringTimeout});}function trackVideo(adInfo){var vastInfo=vastParser.parse(adInfo.vastUrl),slotPrices={};if(vastInfo.amznbid){slotPrices.a9=vastInfo.amznbid;}tracker.track(vastInfo.customParams.pos,vastInfo.customParams,vastInfo.customParams,{adProduct:vastInfo.position,creativeId:adInfo.creativeId,creativeSize:vastInfo.size,lineItemId:adInfo.lineItemId,status:adInfo.status},{realSlotPrices:slotPrices});}function shouldHandleSlot(slot){var dataGptDiv=slot.container&&slot.container.firstChild;return(enabledSlots[slot.name]&&dataGptDiv&&dataGptDiv.dataset.gptPageParams);}function run(){if(isEnabled()){log('run',log.levels.debug,logGroup);win.addEventListener('adengine.slot.status',function(event){var adInfo=event.detail.adInfo||{},adType=adInfo&&adInfo.adType,slot=event.detail.slot,status=adType==='blocked'?'blocked':event.detail.status;if(shouldHandleSlot(slot)){log(['adengine.slot.status',event],log.levels.debug,logGroup);trackSlot(slot,status,adInfo);}});win.
addEventListener('adengine.video.status',function(event){var adInfo=event.detail||{};if(adInfo.vastUrl){log(['adengine.video.status',event],log.levels.debug,logGroup);trackVideo(adInfo);}});}}return{run:run};});;define('ext.wikia.adEngine.tracking.adInfoTracker',['ext.wikia.adEngine.adTracker','ext.wikia.adEngine.slot.service.slotRegistry','ext.wikia.adEngine.tracking.pageLayout','wikia.browserDetect','wikia.log','wikia.window',require.optional('ext.wikia.adEngine.ml.rabbit')],function(adTracker,slotRegistry,pageLayout,browserDetect,log,win,rabbit){'use strict';var logGroup='ext.wikia.adEngine.tracking.adInfoTracker';function prepareData(slotName,pageParams,slotParams,creative,bidders){var data,now=new Date(),timestamp=now.getTime();function transformBidderPrice(bidderName){if(bidders.realSlotPrices&&bidders.realSlotPrices[bidderName]){return bidders.realSlotPrices[bidderName];}if(bidders.slotPricesIgnoringTimeout&&bidders.slotPricesIgnoringTimeout[bidderName]){return bidders.
slotPricesIgnoringTimeout[bidderName]+'not_used';}return'';}pageParams=pageParams||{};slotParams=slotParams||{};creative=creative||{};bidders=bidders||{};data={'pv':pageParams.pv||'','pv_unique_id':win.pvUID,'browser':[browserDetect.getOS(),browserDetect.getBrowser()].join(' '),'country':pageParams.geo||'','time_bucket':now.getHours(),'timestamp':timestamp,'ad_load_time':timestamp-win.performance.timing.connectStart,'slot_size':creative.slotSize&&creative.slotSize.length?creative.slotSize.join('x'):'','kv_s0':pageParams.s0||'','kv_s1':pageParams.s1||'','kv_s2':pageParams.s2||'','kv_s0v':pageParams.s0v||'','kv_pos':slotParams.pos||'','kv_rv':slotParams.rv||'','kv_wsi':slotParams.wsi||'','kv_lang':pageParams.lang||'','kv_skin':pageParams.skin||'','kv_esrb':pageParams.esrb||'','kv_ref':pageParams.ref||'','kv_top':pageParams.top||'','kv_ah':win.document.body.scrollHeight||'','kv_abi':slotParams.abi||'','bidder_won':bidders.bidderWon||'','bidder_won_price':bidders.bidderWon?bidders.
realSlotPrices[bidders.bidderWon]:'','bidder_1':transformBidderPrice('indexExchange'),'bidder_2':transformBidderPrice('appnexus'),'bidder_4':transformBidderPrice('rubicon'),'bidder_6':transformBidderPrice('aol'),'bidder_7':transformBidderPrice('audienceNetwork'),'bidder_9':transformBidderPrice('openx'),'bidder_10':transformBidderPrice('appnexusAst'),'bidder_11':transformBidderPrice('rubicon_display'),'bidder_12':transformBidderPrice('a9'),'bidder_13':transformBidderPrice('onemobile'),'bidder_14':transformBidderPrice('pubmatic'),'bidder_15':transformBidderPrice('beachfront'),'bidder_16':transformBidderPrice('appnexusWebAds'),'product_chosen':creative.adProduct||'unknown','product_lineitem_id':creative.lineItemId||'','creative_id':creative.creativeId||'','creative_size':(creative.creativeSize||'').replace('[','').replace(']','').replace(',','x'),'viewport_height':win.innerHeight||0,'ad_status':creative.status||'unknown','scroll_y':slotRegistry.getScrollY(slotName)||0,'rabbit':(rabbit&&
rabbit.getAllSerializedResults())||'','page_width':win.document.body.scrollWidth||'','page_layout':pageLayout.getSerializedData(slotName)||''};log(['prepareData',slotName,data],log.levels.debug,logGroup);return data;}function track(slotName,pageParams,slotParams,adInfo,bidders){var data=prepareData(slotName,pageParams,slotParams,adInfo,bidders);adTracker.trackDW(data,'adengadinfo');log(['logSlotInfo',data],log.levels.debug,logGroup);}return{track:track};});;define('ext.wikia.adEngine.tracking.pageLayout',['wikia.document','wikia.domCalculator'],function(doc,domCalculator){'use strict';var topPositionSelectors={'INCONTENT_PLAYER':'#INCONTENT_WRAPPER','MOBILE_IN_CONTENT':'.mobile-in-content'};function getTopPosition(selector){var element=doc.querySelector(selector);if(element){return domCalculator.getTopOffset(element);}}function getSerializedData(slotName){var data=[];if(topPositionSelectors[slotName]){data.push('pos_top='+getTopPosition(topPositionSelectors[slotName]));}return data.
join(';');}return{getSerializedData:getSerializedData};});;define('ext.wikia.adEngine.tracking.scrollDepthTracker',['wikia.geo','wikia.instantGlobals','wikia.log','wikia.throttle','wikia.tracker','wikia.window'],function(geo,instantGlobals,log,throttle,tracker,win){'use strict';var logGroup='ext.wikia.adEngine.tracking.scrollDepthTracker',scrollBreakpoints=[600,800,1000,1200];function run(){log('run',log.levels.debug,logGroup);if(!isEnabled()){log('module disabled',log.levels.debug,logGroup);return;}var currentScrollBreakpoint=scrollBreakpoints.shift(),onScroll=throttle(function(){log('on scroll',log.levels.debug,logGroup);if(!currentScrollBreakpoint){log('no more breakpoints',log.levels.debug,logGroup);win.removeEventListener('scroll',onScroll);return;}if(win.pageYOffset>=currentScrollBreakpoint){log('breakpoint: '+currentScrollBreakpoint,log.levels.debug,logGroup);var timeOnPage=Math.round((new Date().getTime()-win.performance.timing.domInteractive)/1000);tracker.track({category:
'scroll-depth-monitoring',label:currentScrollBreakpoint+'px|'+timeOnPage+'s|'+win.pvUID,trackingMethod:'internal'});currentScrollBreakpoint=scrollBreakpoints.shift();}});win.addEventListener('scroll',onScroll);}function isEnabled(){return geo.isProperGeo(instantGlobals.wgAdDriverScrollDepthTrackingCountries);}return{run:run};});;define('ext.wikia.adEngine.tracking.viewabilityTracker',['ext.wikia.adEngine.adContext','ext.wikia.adEngine.adTracker','wikia.log','wikia.window'],function(adContext,adTracker,log,win){'use strict';var context=adContext.getContext(),logGroup='ext.wikia.adEngine.tracking.viewabilityTracker';function track(slot){if(!context.opts.kikimoraViewabilityTracking){log('Viewability tracking disabled',log.levels.info,logGroup);return;}var data,slotFirstChildData=slot.container.firstChild.dataset,slotParams=JSON.parse(slotFirstChildData.gptSlotParams);data={'pv_unique_id':win.pvUID,'wsi':slotParams.wsi||'','line_item_id':slotFirstChildData.gptLineItemId||'','creative_id':
slotFirstChildData.gptCreativeId||'','rv':slotParams.rv||1,'timestamp':(new Date()).getTime()};log(['Slot viewable',slot.name,data],log.levels.info,logGroup);adTracker.trackDW(data,'adengviewability');}return{track:track};});;define('ext.wikia.adEngine.utils.adLogicZoneParams',['ext.wikia.adEngine.adContext','wikia.log','wikia.location'],function(adContext,log,loc){'use strict';var calculated=!1,context={},hostname=loc.hostname,logGroup='ext.wikia.adEngine.utils.adLogicZoneParams',maxNumberOfCategories=3,site,zone1,zone2;function updateContext(){context=adContext.getContext();calculated=!1;}function getDomain(){var lhost,pieces,sld='',np;lhost=hostname.toLowerCase();pieces=lhost.split('.');np=pieces.length;if(pieces[np-2]==='co'){sld=pieces[np-3]+'.'+pieces[np-2]+'.'+pieces[np-1];}else{sld=pieces[np-2]+'.'+pieces[np-1];}return sld.replace(/\./g,'');}function getHostnamePrefix(){var lhost=hostname.toLowerCase(),match=
/(^|\.)(showcase|externaltest|preview|verify|stable|sandbox-[^\.]+)\./.exec(lhost);if(match&&match.length>2){return match[2];}var pieces=lhost.split('.');if(pieces.length){return pieces[0];}}function getVerticalName(targeting){if(getHostnamePrefix()==='showcase'||context.opts.showcase===true){return'showcase';}return targeting.mappedVerticalName;}function getRawDbName(){return'_'+(context.targeting.wikiDbName||'wikia').replace('/[^0-9A-Z_a-z]/','_');}function getAdLayout(params){var layout=params.pageType||'article';if(layout==='article'&&context.targeting.hasFeaturedVideo){layout='fv-'+layout;}return layout;}function calculateParams(){log('calculateParams','info',logGroup);var mappedVertical=getVerticalName(context.targeting);if(context.targeting.pageIsHub){site='hub';zone1='_'+mappedVertical+'_hub';zone2='hub';}else{site=mappedVertical;zone1=getRawDbName();zone2=getAdLayout(context.targeting);}calculated=!0;log(['calculateParams',site,zone1,zone2],'info',logGroup);}function getSite
(){if(!calculated){calculateParams();}return site;}function getName(){if(!calculated){calculateParams();}return zone1;}function getPageType(){if(!calculated){calculateParams();}return zone2;}function getVertical(){return context.targeting.wikiVertical;}function getPageCategories(){var categories=context.targeting.pageCategories,outCategories;if(categories instanceof Array&&categories.length>0){outCategories=categories.slice(0,maxNumberOfCategories);return outCategories.join('|').toLowerCase().replace(/ /g,'_').split('|');}}function getLanguage(){return context.targeting.wikiLanguage||'unknown';}function getWikiCategories(){return context.targeting.newWikiCategories;}updateContext();adContext.addCallback(updateContext);return{getDomain:getDomain,getHostnamePrefix:getHostnamePrefix,getSite:getSite,getName:getName,getPageType:getPageType,getVertical:getVertical,getPageCategories:getPageCategories,getWikiCategories:getWikiCategories,getLanguage:getLanguage,getRawDbName:getRawDbName};});;
define('ext.wikia.adEngine.utils.eventDispatcher',['wikia.document','wikia.log','wikia.window'],function(doc,log,win){'use strict';var logGroup='ext.wikia.adEngine.utils.eventDispatcher';function dispatchEvent(name,data){var event=doc.createEvent('CustomEvent');event.initCustomEvent(name,true,true,data||{});win.dispatchEvent(event);log(['dispatchEvent',name,data],'info',logGroup);}return{dispatch:dispatchEvent};});;define('ext.wikia.adEngine.utils.hooks',[],function(){'use strict';return function(objectInstance,methodNames){var hooks={};function addHookListeners(){if(typeof objectInstance.pre==='function'||typeof objectInstance.post==='function'){return;}objectInstance.pre=function(methodName,callback){if(!hooks[methodName]){throw new Error('Method '+methodName+' is not registered.');}if(typeof callback==='function'){hooks[methodName].pre.push(callback);}};objectInstance.post=function(methodName,callback){if(!hooks[methodName]){throw new Error('Method '+methodName+' is not registered.'
);}if(typeof callback==='function'){hooks[methodName].post.push(callback);}};}function callAllCallbacks(callbacks,args){callbacks.forEach(function(callback){callback.apply(objectInstance,args);});}methodNames.forEach(function(methodName){var copy=objectInstance[methodName];if(typeof copy!=='function'){throw new Error('Method '+methodName+' does not exist.');}hooks[methodName]={pre:[],post:[]};objectInstance[methodName]=function(){callAllCallbacks(hooks[methodName].pre,arguments);copy.apply(objectInstance,arguments);callAllCallbacks(hooks[methodName].post,arguments);};});addHookListeners();};});;define('ext.wikia.adEngine.utils.math',[],function(){'use strict';function getBucket(number,bucketSize){return parseInt(number/bucketSize,10)*bucketSize;}function leftPad(number,offset){var label=number+'';while(label.length<offset){label='0'+label;}return label;}return{getBucket:getBucket,leftPad:leftPad};});;define('ext.wikia.adEngine.video.player.playwire',[
'ext.wikia.adEngine.video.player.playwire.playwirePlayerFactory','ext.wikia.adEngine.video.player.playwire.playwireTracker','ext.wikia.adEngine.video.vastUrlBuilder','wikia.document','wikia.log'],function(playerFactory,tracker,vastUrlBuilder,doc,log){'use strict';var logGroup='ext.wikia.adEngine.video.player.playwire',playerUrl='//cdn.playwire.com/bolt/js/zeus/embed.js';function getConfigUrl(publisherId,videoId){return'//config.playwire.com/'+publisherId+'/videos/v2/'+videoId+'/zeus.json';}function inject(params,onPlayerCreated){var configUrl=params.configUrl,container=params.container,height=params.height,playerId='playwire_'+Math.floor((1+Math.random())*0x10000),script=doc.createElement('script'),vastUrlBuilderOptions={useMegaAdUnitBuilder:params.useMegaAdUnitBuilder},vastUrl=params.vastUrl,vastTargeting=params.vastTargeting||{passback:'playwire',pos:params.slotName,src:params.src},width=params.width,win=container.ownerDocument.defaultView||container.ownerDocument.parentWindow;
tracker.track(params,'init');configUrl=configUrl||getConfigUrl(params.publisherId,params.videoId);vastUrl=vastUrl||vastUrlBuilder.build(width/height,vastTargeting,vastUrlBuilderOptions);win[playerId+'_ready']=function(){var video=playerFactory.create(win.Bolt,playerId,params);tracker.register(video,params);video.addEventListener('boltContentStarted',function(){video.api.dispatchEvent(video.id,'wikiaAdStarted');});video.addEventListener('boltContentComplete',function(){video.api.dispatchEvent(video.id,'wikiaAdCompleted');});if(typeof onPlayerCreated==='function'){onPlayerCreated(video);}if(params.onReady){params.onReady(win.Bolt,playerId,video);}};script.setAttribute('data-id',playerId);script.setAttribute('data-config',configUrl);script.setAttribute('data-onready',playerId+'_ready');script.setAttribute('data-ad-tag',vastUrl);if(params.volume!==undefined){script.setAttribute('data-volume',params.volume);}script.setAttribute('type','text/javascript');script.src=playerUrl;container.
appendChild(script);log(['inject',configUrl],log.levels.debug,logGroup);}return{getConfigUrl:getConfigUrl,inject:inject};});;define('ext.wikia.adEngine.video.player.playwire.playwirePlayerFactory',[],function(){'use strict';function create(api,playerId,params){return{api:api,id:playerId,container:params.container,addEventListener:function(eventName,callback){this.api.on(this.id,eventName,callback);},play:function(width,height){this.api.dispatchEvent(this.id,'wikiaAdPlayTriggered');this.resize(width,height);this.api.playMedia(this.id);this.api.dispatchEvent(this.id,'wikiaAdStarted');},stop:function(){this.api.dispatchEvent(this.id,'wikiaAdStop');this.api.stopMedia(this.id);this.api.dispatchEvent(this.id,'wikiaAdCompleted');},resize:function(width,height){this.api.resizeVideo(this.id,width+'px',height+'px');}};}return{create:create};});;define('ext.wikia.adEngine.video.player.playwire.playwireTracker',['ext.wikia.adEngine.video.player.playerTracker'],function(playerTracker){'use strict';
var playerName='playwire',trackingEventsMap={'boltAdRequestStart':'loaded','boltAdStarted':'started','boltFirstQuartile':'first_quartile','boltMidPoint':'midpoint','boltThirdQuartile':'third_quartile','boltAdComplete':'completed','boltAdClicked':'clicked','boltAdError':'error','boltContentStarted':'content_started','boltContentComplete':'content_completed','boltContentError':'content_error','wikiaAdPlayTriggered':'play_triggered','wikiaAdStop':'closed'};function track(params,eventName,errorCode){playerTracker.track(params,playerName,eventName,errorCode);}function register(player,params){if(!playerTracker.isEnabled()){return;}playerTracker.track(params,playerName,'ready');Object.keys(trackingEventsMap).forEach(function(playerEvent){player.api.addEventListener(player.id,playerEvent,function(){playerTracker.track(params,playerName,trackingEventsMap[playerEvent]);});});}return{register:register,track:track};});;define('ext.wikia.adEngine.video.player.porvata.floater',[
'ext.wikia.adEngine.video.player.porvata.floaterConfiguration','ext.wikia.adEngine.video.player.porvata.floatingContextFactory','wikia.document','wikia.throttle','wikia.window'],function(floaterConfiguration,floatingContextFactory,doc,throttle,win){'use strict';var activeFloatingCssClass='floating',withArticleVideoCssClass='with-article-video',wikiFloatingVideoSelector='.video-container',floatingContextCache={};function updateDimensions(element,width,height){if(element){element.style.width=width+'px';element.style.height=height+'px';}}function createCloseButton(){var a=doc.createElement('a'),img=doc.createElement('img');a.classList.add('floating-close-button');img.src='/extensions/wikia/AdEngine/js/video/player/ui/images/close.svg';a.appendChild(img);return a;}function resizeVideoAndShowCloseButton(floatingContext,width,height){var elements=floatingContext.elements,listeners=floatingContext.listeners;if(!listeners.start){listeners.start=function(){if(floatingContext.isFloating()){
elements.video.resize(width,height);}};elements.video.addEventListener('start',listeners.start);}elements.video.resize(width,height);}function deleteCloseButton(floatingContext){var elements=floatingContext.elements;if(elements.closeButton){elements.ad.removeChild(elements.closeButton);}}function endFloating(floatingContext){var video=floatingContext.elements.video,listeners=floatingContext.listeners;win.removeEventListener('scroll',listeners.scroll);if(listeners.start){video.removeEventListener('start',listeners.start);}if(listeners.adResumed){video.removeEventListener('resume',listeners.adResumed);}if(listeners.adCompleted){video.removeEventListener('wikiaAdCompleted',listeners.adCompleted);}floatingContext.stop();}function createOnCloseListener(floatingContext){return function(){disableFloating(floatingContext);if(floatingContext.pauseOnClose){floatingContext.stop();}else{endFloating(floatingContext);}};}function enableFloating(floatingContext){var elements=floatingContext.elements,
width=0,height=0;floatingContext.beforeFloat();elements.adContainer.classList.add(activeFloatingCssClass);width=floatingContext.getWidth();height=floatingContext.getHeight();updateDimensions(elements.imageContainer,width,height);resizeVideoAndShowCloseButton(floatingContext,width,height);floatingContext.float();}function disableFloating(floatingContext){var elements=floatingContext.elements,preferred=floatingContext.preferred;elements.adContainer.classList.remove(activeFloatingCssClass);updateDimensions(elements.imageContainer,preferred.width,preferred.height);elements.video.resize(preferred.width,preferred.height);floatingContext.pause();if(elements.video.isCompleted()){deleteCloseButton(floatingContext);endFloating(floatingContext);}}function isArticleVideoFloating(){var element=doc.querySelector(wikiFloatingVideoSelector);return element&&'fixed'===win.getComputedStyle(element).position;}function showAboveArticleVideo(floatingContext){floatingContext.elements.adContainer.classList.
toggle(withArticleVideoCssClass,isArticleVideoFloating());}function createOnScrollListener(floatingContext){return function(){if(!floatingContext.doNotFloat){if(floatingContext.isOutsideOfViewport()){showAboveArticleVideo(floatingContext);if(floatingContext.isStill()){enableFloating(floatingContext);}}else if(floatingContext.isFloating()){disableFloating(floatingContext);}}};}function enableFloatingOn(video,params,eventHandlers){var floatingContext=floatingContextFactory.create(video,params,eventHandlers),elements=floatingContext.elements,listeners=floatingContext.listeners;if(!elements.closeButton){elements.closeButton=createCloseButton();listeners.close=createOnCloseListener(floatingContext);elements.closeButton.addEventListener('click',listeners.close);elements.ad.insertBefore(elements.closeButton,elements.ad.firstChild);}listeners.scroll=throttle(createOnScrollListener(floatingContext),100);win.addEventListener('scroll',listeners.scroll);listeners.adCompleted=function(){
disableFloating(floatingContext);elements.video.removeEventListener('wikiaAdCompleted',listeners.adCompleted);win.removeEventListener('scroll',listeners.scroll);};elements.video.addEventListener('wikiaAdCompleted',listeners.adCompleted);if(floatingContext.pauseOnClose){listeners.adResumed=function(){if(floatingContext.isStopped()){floatingContext.pause();}};elements.video.addEventListener('resume',listeners.adResumed);}return floatingContext;}function makeFloat(video,params,eventHandlers){var floatingContext=enableFloatingOn(video,params,eventHandlers);floatingContext.invokeLater(function(floatingContext){showAboveArticleVideo(floatingContext);enableFloating(floatingContext);});floatingContextCache[params.slotName]=floatingContext;return floatingContext;}function canFloat(params){return floaterConfiguration.canFloat(params);}function isFloating(slotName){return floatingContextCache[slotName]&&floatingContextCache[slotName].elements.adContainer.classList.contains(activeFloatingCssClass)
;}return{canFloat:canFloat,makeFloat:makeFloat,isFloating:isFloating};});;define('ext.wikia.adEngine.video.player.porvata.floaterConfiguration',[],function(){'use strict';var slotsConfiguration={'INCONTENT_PLAYER':{enableKeyword:'enableInContentFloating',container:'WikiaArticle',configure:function(floatingContext){var elements=floatingContext.elements;elements.viewport=elements.ad.parentElement;floatingContext.forceDoNotFloat();},floatLater:function(callback){var floatingContext=this,video=this.elements.video;video.addEventListener('wikiaSlotExpanded',function(){floatingContext.preferred.width=video.container.scrollWidth;floatingContext.preferred.height=video.container.scrollHeight;floatingContext.floatAgain();floatingContext.fireEvent('start');if(floatingContext.isOutsideOfViewport()){callback(floatingContext);}});},onAttach:function(floatingContext){var elements=floatingContext.elements;elements.ad.style.maxHeight=elements.ad.scrollHeight+'px';elements.viewport.style.removeProperty(
'height');elements.providerContainer.style.removeProperty('height');},onBeforeDetach:function(floatingContext){var viewport=floatingContext.elements.viewport;viewport.style.height=(viewport.offsetHeight-14)+'px';},onDetach:function(floatingContext){floatingContext.elements.providerContainer.style.height=floatingContext.getHeight()+'px';}}};function configure(floatingContext,params){var configuration=selectConfigurationUsing(params);configuration.configure(floatingContext);floatingContext.preferred={};floatingContext.preferred.width=params.width;floatingContext.preferred.height=params.height;floatingContext.eventHandlers.onAttach=configuration.onAttach;floatingContext.eventHandlers.onBeforeDetach=configuration.onBeforeDetach;floatingContext.eventHandlers.onDetach=configuration.onDetach;floatingContext.floatLater=configuration.floatLater;}function selectConfigurationUsing(params){return slotsConfiguration[params.slotName];}function canFloat(params){var configuration=
selectConfigurationUsing(params);return Boolean(configuration&&params[configuration.enableKeyword]);}return{canFloat:canFloat,configure:configure,selectConfigurationUsing:selectConfigurationUsing};});;define('ext.wikia.adEngine.video.player.porvata.floatingContextFactory',['ext.wikia.adEngine.video.player.porvata.floaterConfiguration','wikia.document','wikia.window'],function(floaterConfiguration,doc,win){'use strict';var events={attach:'attach',beforeDetach:'beforeDetach',detach:'detach',end:'end',start:'start'},floatingThreshold=55,state={deactivated:'deactivated',floating:'floating',never:'never',paused:'paused',stopped:'stopped'};function create(video,params,eventHandlers){var configuration=floaterConfiguration.selectConfigurationUsing(params),adContainer=doc.getElementById(configuration.container),ad=adContainer.querySelector('.wikia-ad'),container=params.originalContainer||params.container,elements={adContainer:adContainer,ad:ad,originalContainer:params.originalContainer,iframe:
container.ownerDocument.defaultView.frameElement,imageContainer:container.parentElement.querySelector('#image'),providerContainer:ad.querySelector('.provider-container'),video:video},floatingContext={beforeFloat:function(){this.fireEvent(events.beforeDetach);},doNotFloat:!1,elements:elements,eventHandlers:eventHandlers,fireEvent:function(eventName){var eventHandler='on'+eventName.charAt(0).toUpperCase()+eventName.slice(1);if(this.eventHandlers[eventHandler]){this.eventHandlers[eventHandler](this);}},float:function(){this.state=state.floating;this.fireEvent(events.detach);},floatAgain:function(){this.doNotFloat=!1;},forceDoNotFloat:function(){this.doNotFloat=!0;},getHeight:function(){return this.getWidth()/this.elements.video.computeVastMediaAspectRatio();},getWidth:function(){return elements.ad.offsetWidth;},isActive:function(){return this.state!==state.stopped;},invokeLater:function(callback){this.floatLater(callback);},isFloating:function(){return this.state===state.floating;
},isOutsideOfViewport:function(){var rect=this.elements.viewport.getBoundingClientRect();return rect.top>(win.innerHeight||doc.documentElement.clientHeight)||rect.bottom<floatingThreshold;},isStill:function(){return this.state===state.never||this.state===state.paused;},isStopped:function(){return this.state===state.stopped;},listeners:{},pause:function(){this.state=state.paused;this.fireEvent(events.attach);},pauseOnClose:params.hasUiControls,state:state.never,stop:function(){this.state=state.stopped;this.fireEvent(events.end);}};floaterConfiguration.configure(floatingContext,params);return floatingContext;}return{create:create};});;define('ext.wikia.adEngine.video.player.porvata.googleIma',['ext.wikia.adEngine.utils.scriptLoader','ext.wikia.adEngine.video.player.porvata.googleImaPlayerFactory','wikia.log','wikia.window'],function(scriptLoader,imaPlayerFactory,log,win){'use strict';var imaLibraryUrl='//imasdk.googleapis.com/js/sdkloader/ima3.js',logGroup=
'ext.wikia.adEngine.video.player.porvata.googleIma';function load(onLoad){if(win.google&&win.google.ima){log('Google IMA library already loaded',log.levels.info,logGroup);onLoad();return;}return scriptLoader.loadScript(imaLibraryUrl,{onLoad:onLoad});}function getPlayer(videoSettings){var params=videoSettings.getParams(),adDisplayContainer=new win.google.ima.AdDisplayContainer(params.container),adsLoader,iframe=params.container.querySelector('div > iframe');if(win.performance&&win.performance.navigation.type===win.performance.navigation.TYPE_BACK_FORWARD){iframe.contentWindow.location.href=iframe.src;}adsLoader=new win.google.ima.AdsLoader(adDisplayContainer);adsLoader.getSettings().setVpaidMode(videoSettings.getVpaidMode());return imaPlayerFactory.create(adDisplayContainer,adsLoader,videoSettings);}return{load:load,getPlayer:getPlayer};});;define('ext.wikia.adEngine.video.player.porvata.googleImaPlayerFactory',['ext.wikia.adEngine.video.player.porvata.googleImaSetup',
'ext.wikia.adEngine.video.player.porvata.moatVideoTracker','ext.wikia.adEngine.video.vastDebugger','wikia.document','wikia.log','wikia.window'],function(imaSetup,moatVideoTracker,vastDebugger,doc,log,win){'use strict';var logGroup='ext.wikia.adEngine.video.player.porvata.googleImaPlayerFactory';function getVideoElement(){var videoElement=doc.createElement('video');videoElement.setAttribute('preload','none');return videoElement;}function create(adDisplayContainer,adsLoader,videoSettings){var adRequest,params=videoSettings.getParams(),isAdsManagerLoaded=!1,status='',videoElement=getVideoElement(),adsManager,mobileVideoAd=params.container.querySelector('video'),eventListeners={};function setVastAttributes(status){var currentAd=adsManager&&adsManager.getCurrentAd&&adsManager.getCurrentAd(),playerElement=params.container.querySelector('.video-player');vastDebugger.setVastAttributes(playerElement,adRequest.adTagUrl,status,currentAd);}function adsManagerLoadedCallback(adsManagerLoadedEvent
){adsManager=adsManagerLoadedEvent.getAdsManager(videoElement,imaSetup.getRenderingSettings(params));isAdsManagerLoaded=!0;if(videoSettings.isMoatTrackingEnabled()){moatVideoTracker.init(adsManager,params.container,win.google.ima.ViewMode.NORMAL,params.src,params.adProduct+'/'+params.slotName);}dispatchEvent('wikiaAdsManagerLoaded');log('AdsManager loaded',log.levels.debug,logGroup);adsManager.addEventListener(win.google.ima.AdEvent.Type.LOADED,function(){setVastAttributes('success');});adsManager.addEventListener(win.google.ima.AdErrorEvent.Type.AD_ERROR,function(){setVastAttributes('error');});}function addEventListener(eventName,callback){log(['addEventListener to AdManager',eventName],log.levels.debug,logGroup);if(eventName.indexOf('wikia')!==-1){eventListeners[eventName]=eventListeners[eventName]||[];eventListeners[eventName].push(callback);return;}if(isAdsManagerLoaded){adsManager.addEventListener(eventName,callback);}else{adsLoader.addEventListener(win.google.ima.
AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(){adsManager.addEventListener(eventName,callback);});}}function removeEventListener(eventName,callback){log(['removeEventListener to AdManager',eventName],log.levels.debug,logGroup);if(eventListeners[eventName]){var listenerId=eventListeners[eventName].indexOf(callback);if(listenerId!==-1){eventListeners[eventName].splice(listenerId,1);}return;}if(isAdsManagerLoaded){adsManager.removeEventListener(eventName,callback);}else{adsLoader.addEventListener(win.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(){adsManager.removeEventListener(eventName,callback);});}}function setAutoPlay(value){if(mobileVideoAd){mobileVideoAd.muted=value;mobileVideoAd.autoplay=value;}}function playVideo(width,height){function callback(){var roundedWidth=Math.round(width),roundedHeight=Math.round(height);log(['Video play: prepare player UI',roundedWidth,roundedHeight],log.levels.debug,logGroup);dispatchEvent('wikiaAdPlayTriggered');
adDisplayContainer.initialize();adsManager.init(roundedWidth,roundedHeight,win.google.ima.ViewMode.NORMAL);adsManager.start();adsLoader.removeEventListener(win.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,callback);log('Video play: started',log.levels.debug,logGroup);}if(isAdsManagerLoaded){callback();}else{setAutoPlay(true);adsLoader.addEventListener(win.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,callback,false);log(['Video play: waiting for full load of adsManager'],log.levels.debug,logGroup);}}function reload(reloadParams){if(adsManager){adsManager.destroy();}adsLoader.contentComplete();adRequest=imaSetup.createRequest(reloadParams||params);adsLoader.requestAds(adRequest);log('IMA player reloaded',log.levels.debug,logGroup);}function resize(width,height){var roundedWidth=Math.round(width),roundedHeight=Math.round(height);if(adsManager){adsManager.resize(roundedWidth,roundedHeight,win.google.ima.ViewMode.NORMAL);log(['IMA player resized',roundedWidth,
roundedHeight],log.levels.debug,logGroup);}}function dispatchEvent(eventName){if(eventListeners[eventName]&&eventListeners[eventName].length>0){eventListeners[eventName].forEach(function(callback){callback({});});}}function setStatus(newStatus){return function(){status=newStatus;};}function getStatus(){return status;}function getAdsManager(){return adsManager;}if(mobileVideoAd){params.container.classList.add('mobile-porvata');}adsLoader.addEventListener(win.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,adsManagerLoadedCallback,false);adsLoader.addEventListener(win.google.ima.AdErrorEvent.Type.AD_ERROR,function(event){var emptyVastErrorCode=win.google.ima.AdError.ErrorCode.VAST_EMPTY_RESPONSE;if(typeof event.getError==='function'&&event.getError().getErrorCode()===emptyVastErrorCode){dispatchEvent('wikiaEmptyAd');}setVastAttributes('error');});adRequest=imaSetup.createRequest(params);adsLoader.requestAds(adRequest);if(videoSettings.isAutoPlay()){setAutoPlay(true);}
addEventListener(win.google.ima.AdEvent.Type.RESUMED,setStatus('playing'));addEventListener(win.google.ima.AdEvent.Type.STARTED,setStatus('playing'));addEventListener(win.google.ima.AdEvent.Type.PAUSED,setStatus('paused'));addEventListener(win.google.ima.AdEvent.Type.COMPLETE,setStatus('completed'));return{addEventListener:addEventListener,dispatchEvent:dispatchEvent,getAdsManager:getAdsManager,getStatus:getStatus,playVideo:playVideo,reload:reload,removeEventListener:removeEventListener,resize:resize,setAutoPlay:setAutoPlay};}return{create:create};});;define('ext.wikia.adEngine.video.player.porvata.googleImaSetup',['ext.wikia.adEngine.adContext','ext.wikia.adEngine.slot.service.megaAdUnitBuilder','ext.wikia.adEngine.video.vastUrlBuilder','wikia.browserDetect','wikia.log','wikia.window'],function(adContext,megaAdUnitBuilder,vastUrlBuilder,browserDetect,log,win){'use strict';var logGroup='ext.wikia.adEngine.video.player.porvata.googleImaSetup';function megaIsEnabled(params){return params
.useMegaAdUnitBuilder!==!1&&(params.useMegaAdUnitBuilder||adContext.get('opts.megaAdUnitBuilderEnabled'));}function getPosBasedOnProduct(params){if(params.adProduct==='abcd'){return params.adProduct.toUpperCase();}if(params.adProduct==='vuap'){return'UAP_'+params.type.toUpperCase();}return params.vastTargeting.pos;}function buildVastUrl(params){var vastUrlBuilderOptions={},vastUrl;if(megaIsEnabled(params)){vastUrlBuilderOptions.adUnit=megaAdUnitBuilder.build(getPosBasedOnProduct(params),params.vastTargeting.src);}vastUrl=params.vastUrl||vastUrlBuilder.build(params.width/params.height,params.vastTargeting,vastUrlBuilderOptions);log(['build vast url',vastUrl,params],log.levels.debug,logGroup);return vastUrl;}function getOverriddenVast(){if(win.location.href.indexOf('porvata_override_vast=1')!==-1){return win.localStorage.getItem('porvata_vast');}}function createRequest(params){var adsRequest=new win.google.ima.AdsRequest(),overriddenVast=getOverriddenVast();if(params.vastResponse||
overriddenVast){adsRequest.adsResponse=overriddenVast||params.vastResponse;}adsRequest.adTagUrl=buildVastUrl(params);adsRequest.linearAdSlotWidth=params.width;adsRequest.linearAdSlotHeight=params.height;adsRequest.nonLinearAdSlotWidth=params.width;adsRequest.nonLinearAdSlotHeight=params.height;log(['ads request created',adsRequest],log.levels.debug,logGroup);return adsRequest;}function getRenderingSettings(params){var adsRenderingSettings=new win.google.ima.AdsRenderingSettings(),maximumRecommendedBitrate=68000;params=params||{};if(!browserDetect.isMobile()){adsRenderingSettings.bitrate=maximumRecommendedBitrate;}adsRenderingSettings.loadVideoTimeout=params.loadVideoTimeout||15000;adsRenderingSettings.enablePreloading=!0;adsRenderingSettings.uiElements=[];log(['ads rendering settings created',adsRenderingSettings],log.levels.debug,logGroup);return adsRenderingSettings;}return{createRequest:createRequest,getRenderingSettings:getRenderingSettings};});;define(
'ext.wikia.adEngine.video.player.porvata.moatVideoTracker',['wikia.log','wikia.window'],function(log,win){'use strict';var logGroup='ext.wikia.adEngine.video.player.porvata.moatVideoTracker',partnerCode='wikiaimajsint377461931603';function init(adsManager,container,viewMode,src,pos){var ids={partnerCode:partnerCode,viewMode:viewMode,slicer1:src,slicer2:pos};try{win.initMoatTracking(adsManager,ids,container,src,pos);log(['MOAT video tracking initialized with params',adsManager,ids,container,src,pos],log.levels.debug,logGroup);}catch(error){log(['MOAT video tracking initalization error',error],log.levels.debug,logGroup);}}return{init:init};});;function initMoatTracking(a,f,c){if(!1===f.hasOwnProperty("partnerCode"))return!1;var g=document.createElement("script");c=c||a&&("undefined"!==typeof a.O?a.O.parentNode:document.body)||document.body;listeners=[];moatapi={adsManager:a,ids:f,imaSDK:!0,events:[]};eventMapping={complete:"AdVideoComplete",firstquartile:"AdVideoFirstQuartile",impression
:"AdImpression",loaded:"AdLoaded",midpoint:"AdVideoMidpoint",pause:"AdPaused",skip:"AdSkipped",start:"AdVideoStart",thirdquartile:"AdVideoThirdQuartile",volumeChange:"AdVolumeChange"};if(google&&google.ima&&a){var d="_moatApi"+Math.floor(1E8*Math.random()),h;for(h in google.ima.AdEvent.Type){var l=function(b){if(moatapi.sendEvent){for(b=listeners.length-1;0<=b;b--)a.removeEventListener(listeners[b].type,listeners[b].func);moatapi.sendEvent(moatapi.events)}else moatapi.events.push({type:eventMapping[b.type]||b.type,adVolume:a.getVolume()})};a.addEventListener(google.ima.AdEvent.Type[h],l);listeners.push({type:google.ima.AdEvent.Type[h],func:l})}}var d="undefined"!==typeof d?d:"",e,k;try{e=c.ownerDocument,k=e.defaultView||e.parentWindow}catch(m){e=document,k=window}k[d]=moatapi;g.type="text/javascript";c&&c.appendChild(g);g.src="https://z.moatads.com/"+f.partnerCode+"/moatvideo.js#"+d};;define('ext.wikia.adEngine.video.player.porvata',['ext.wikia.adEngine.video.player.porvata.googleIma',
'ext.wikia.adEngine.video.player.porvata.porvataPlayerFactory','ext.wikia.adEngine.video.player.porvata.porvataTracker','wikia.document','wikia.log','wikia.viewportObserver',require.optional('ext.wikia.adEngine.video.player.porvata.floater')],function(googleIma,porvataPlayerFactory,tracker,doc,log,viewportObserver,floater){'use strict';var logGroup='ext.wikia.adEngine.video.player.porvata';function inject(videoSettings,onPlayerCreated){var params=videoSettings.getParams(),isFirstPlay=!0,autoPlayed=!1,autoPaused=!1,viewportListener=null;function isFloatingEnabled(params){return params.floatingContext&&params.floatingContext.isActive();}function tryEnablingFloating(video,inViewportCallback){if(floater&&floater.canFloat(params)){params.floatingContext=floater.makeFloat(video,params,{onStart:function(){inViewportCallback(true);},onEnd:function(){inViewportCallback(false);}});}}function muteFirstPlay(video){video.addEventListener('loaded',function(){if(isFirstPlay){video.mute();}});
}function onImaLoaded(){log('google ima loaded',log.levels.debug,logGroup);var imaPlayer=googleIma.getPlayer(videoSettings);log(['ima player set up',ima],log.levels.debug,logGroup);onPorvataCreated(porvataPlayerFactory.create(videoSettings,imaPlayer));}function onPorvataCreated(video){var viewportHook=params.container;video.wasInViewport=!1;log(['porvata video player created',video],log.levels.debug,logGroup);tracker.register(video,params);if(params.viewportHookSelector){viewportHook=doc.querySelector(params.viewportHookSelector)||viewportHook;}function shouldResume(isVisible){return isVisible&&autoPaused&&!isFloatingEnabled(params);}function shouldPause(isVisible){return!params.blockOutOfViewportPausing&&!isVisible&&video.isPlaying()&&!isFloatingEnabled(params);}function inViewportCallback(isVisible){video.wasInViewport=!0;if(isVisible&&!autoPlayed&&videoSettings.isAutoPlay()){video.ima.dispatchEvent('wikiaFirstTimeInViewport');video.play();autoPlayed=!0;}else if(shouldResume(
isVisible)){video.resume();}else if(shouldPause(isVisible)){video.pause();autoPaused=!0;}}video.addEventListener('adCanPlay',function(){video.ima.dispatchEvent('wikiaAdStarted');});video.addEventListener('allAdsCompleted',function(){isFirstPlay=!1;video.ima.setAutoPlay(false);video.ima.dispatchEvent('wikiaAdCompleted');if(viewportListener){viewportObserver.removeListener(viewportListener);viewportListener=null;}});video.addEventListener('start',function(){video.ima.dispatchEvent('wikiaAdPlay');if(!viewportListener){viewportListener=viewportObserver.addListener(viewportHook,inViewportCallback);}});video.addEventListener('loaded',function(){tryEnablingFloating(video,inViewportCallback);});video.addEventListener('resume',function(){video.ima.dispatchEvent('wikiaAdPlay');autoPaused=!1;});video.addEventListener('pause',function(){video.ima.dispatchEvent('wikiaAdPause');});video.addOnDestroyCallback(function(){if(viewportListener){viewportObserver.removeListener(viewportListener);
viewportListener=null;}});if(videoSettings.isAutoPlay()){muteFirstPlay(video);}video.addEventListener('wikiaAdsManagerLoaded',function(){viewportListener=viewportObserver.addListener(viewportHook,inViewportCallback);});video.addEventListener('wikiaEmptyAd',function(){viewportListener=viewportObserver.addListener(viewportHook,inViewportCallback);});if(typeof onPlayerCreated==='function'){onPlayerCreated(video);}}log(['injecting porvata player',params],log.levels.debug,logGroup);tracker.track(params,'init');params.vastTargeting=params.vastTargeting||{src:params.src,pos:params.slotName,passback:'porvata'};googleIma.load(onImaLoaded);}return{inject:inject};});;define('ext.wikia.adEngine.video.player.porvata.porvataPlayerFactory',['ext.wikia.adEngine.domElementTweaker','wikia.log'],function(DOMElementTweaker,log){'use strict';var logGroup='ext.wikia.adEngine.video.player.porvata.porvataPlayerFactory',autoPlayClassName='autoplay',defaultAspectRatio=320/240,videoPlayerClassName='video-player'
;function prepareVideoAdContainer(videoAdContainer,videoSettings){DOMElementTweaker.hide(videoAdContainer);videoAdContainer.classList.add(videoPlayerClassName);if(videoSettings.isAutoPlay()){videoAdContainer.classList.add(autoPlayClassName);}return videoAdContainer;}function create(videoSettings,ima){var params=videoSettings.getParams(),width=params.width,height=params.height,mobileVideoAd=params.container.querySelector('video'),videoAdContainer=params.container.querySelector('div'),destroyCallbacks=[];log(['create porvata player'],log.levels.debug,logGroup);return{container:prepareVideoAdContainer(videoAdContainer,videoSettings),ima:ima,addEventListener:function(eventName,callback){ima.addEventListener(eventName,callback);},computeVastMediaAspectRatio:function(){var adsManager=ima.getAdsManager(),aspectRatio=width/height,currentAd,vastHeight=0,vastWidth=0;if(adsManager){currentAd=adsManager.getCurrentAd();vastHeight=currentAd.getVastMediaHeight();vastWidth=currentAd.getVastMediaWidth(
);aspectRatio=(vastWidth&&vastHeight)?vastWidth/vastHeight:defaultAspectRatio;}return aspectRatio;},getRemainingTime:function(){return ima.getAdsManager().getRemainingTime();},getVolume:function(){return ima.getAdsManager().getVolume();},isFloating:function(){return Boolean(params.floatingContext&&params.floatingContext.isFloating());},isMuted:function(){return ima.getAdsManager().getVolume()===0;},isMobilePlayerMuted:function(){var mobileVideoAd=this.container.querySelector('video');return mobileVideoAd&&mobileVideoAd.autoplay&&mobileVideoAd.muted;},isPaused:function(){return ima.getStatus()==='paused';},isPlaying:function(){return ima.getStatus()==='playing';},isCompleted:function(){return ima.getStatus()==='completed';},pause:function(){ima.getAdsManager().pause();},play:function(newWidth,newHeight){if(newWidth!==undefined&&newHeight!==undefined){width=newWidth;height=newHeight;}if(!width||!height){width=params.container.offsetWidth;height=params.container.offsetHeight;}ima.
playVideo(width,height);},reload:function(reloadParams){ima.reload(reloadParams);},removeEventListener:function(eventName,callback){ima.removeEventListener(eventName,callback);},resize:function(newWidth,newHeight){width=newWidth;height=newHeight;ima.resize(width,height);},resume:function(){ima.getAdsManager().resume();},mute:function(userAction){return this.setVolume(0,userAction);},unmute:function(userAction){return this.setVolume(0.75,userAction);},volumeToggle:function(){if(this.isMuted()){this.unmute(true);}else{this.mute(true);}},setVolume:function(volume,userAction){this.updateVideoDOMElement(volume);ima.getAdsManager().setVolume(volume);if(userAction){if(volume===0){ima.dispatchEvent('wikiaAdMute');}else{ima.dispatchEvent('wikiaAdUnmute');}}ima.dispatchEvent('wikiaVolumeChange');},stop:function(){ima.dispatchEvent('wikiaAdStop');ima.getAdsManager().stop();},updateVideoDOMElement:function(volume){if(mobileVideoAd){mobileVideoAd.muted=volume===0;}},addOnDestroyCallback:function(
callback){destroyCallbacks.push(callback);},destroy:function(){var callback=destroyCallbacks.pop();while(callback){callback(this);callback=destroyCallbacks.pop();}}};}return{create:create};});;define('ext.wikia.adEngine.video.player.porvata.porvataTracker',['ext.wikia.adEngine.video.player.playerTracker','ext.wikia.adEngine.video.player.porvata.vastLogger'],function(playerTracker,logger){'use strict';var playerName='porvata',trackingEventsMap={'adCanPlay':'ad_can_play','complete':'completed','click':'clicked','firstquartile':'first_quartile','impression':'impression','loaded':'loaded','midpoint':'midpoint','pause':'paused','resume':'resumed','start':'started','thirdquartile':'third_quartile','viewable_impression':'viewable_impression','adError':'error','wikiaAdPlayTriggered':'play_triggered','wikiaAdStop':'closed','wikiaAdMute':'mute','wikiaAdUnmute':'unmute','wikiaInViewportWithDirect':'in_viewport_with_direct','wikiaInViewportWithFallbackBid':'in_viewport_with_fallback_bid',
'wikiaInViewportWithoutOffer':'in_viewport_without_offer'};function getContentType(player){var ad;if(player){ad=player.ima.getAdsManager()&&player.ima.getAdsManager().getCurrentAd();if(ad){return ad.getContentType();}}}function track(params,eventName,errorCode,player){var contentType=getContentType(player),data=playerTracker.track(params,playerName,eventName,errorCode,contentType);if(data&&params.adProduct==='rubicon'){logger.logVast(player,params,data);}}function register(player,params){if(!playerTracker.isEnabled()){return;}params.withAudio=!params.autoPlay;track(params,'ready');Object.keys(trackingEventsMap).forEach(function(playerEvent){player.addEventListener(playerEvent,function(event){var errorCode=event.getError&&event.getError().getErrorCode();track(params,trackingEventsMap[playerEvent],errorCode,player);});});}return{register:register,track:track};});;define('ext.wikia.adEngine.video.player.porvata.vastLogger',['wikia.instantGlobals','wikia.log','wikia.window'],function(
instantGlobals,log,win){'use strict';var config=instantGlobals.wgPorvataVastLoggerConfig||[],trackEndpoint='/wikia.php?controller=AdEngine2Api&method=postPorvataInfo',logGroup='ext.wikia.adEngine.video.player.porvata.vastLogger';function createConfigKey(advertiserId,eventName){return[advertiserId,eventName].join('_');}function prepareData(data,playerParams){return['advertiser_id='+playerParams.bid.rubiconAdvertiserId||'','event_name='+data['event_name']||'','ad_error_code='+data['ad_error_code']||'','position='+data['position']||'','browser='+data['browser']||'','vast_url='+encodeURIComponent(playerParams.vastUrl||'')];}function addCurrentAdDetails(player,postData){var ad=player&&player.ima.getAdsManager()&&player.ima.getAdsManager().getCurrentAd();if(ad){postData.push('ad_system='+ad.getAdSystem()||'');postData.push('advertiser='+ad.getAdvertiserName()||'');postData.push('content_type='+ad.getContentType()||'');postData.push('media_url='+encodeURIComponent(ad.getMediaUrl())||'');}}
function sendRequest(data){var request=new win.XMLHttpRequest();request.open('POST',trackEndpoint,true);request.setRequestHeader('Content-type','application/x-www-form-urlencoded');request.send(data);}function logVast(player,params,data){if(!params.bid){return;}var configKey=createConfigKey(params.bid.rubiconAdvertiserId,data['event_name']),postData;if(config.indexOf(configKey)===-1){return;}postData=prepareData(data,params);addCurrentAdDetails(player,postData);log(['Track',postData],log.levels.debug,logGroup);sendRequest(postData.join('&'));}return{logVast:logVast};});;define('ext.wikia.adEngine.ml.modelFactory',['ext.wikia.adEngine.adContext','wikia.geo','wikia.instantGlobals'],function(adContext,geo,instantGlobals){'use strict';var requiredData=['inputParser','model','name','wgCountriesVariable','enabled'];function create(modelData){requiredData.forEach(function(key){if(typeof modelData[key]==='undefined'){throw new Error('Missing '+key+' in model definition.');}});var predictedValue
=null;adContext.addCallback(function(){predictedValue=null;});return{getResult:function(){return this.getName()+'_'+this.predict();},getName:function(){return modelData.name;},isEnabled:function(){return modelData.enabled&&geo.isProperGeo(instantGlobals[modelData.wgCountriesVariable]);},predict:function(){if(predictedValue===null||!modelData.cachePrediction){var data=modelData.inputParser.getData();predictedValue=modelData.model.predict(data);}return predictedValue;}};}return{create:create};});;define('ext.wikia.adEngine.ml.model.linear',['wikia.log'],function(log){'use strict';var logGroup='ext.wikia.adEngine.ml.model.linear';function create(coefficients,intercept){function predict(x){var i,result=0;if(x.length!==coefficients.length){log('Incorrect vectors',log.levels.debug,logGroup);return-1;}for(i=0;i<coefficients.length;i+=1){result+=x[i]*coefficients[i];}result+=intercept;return result>0?1:0;}return{predict:predict};}return{create:create};});;define('ext.wikia.adEngine.ml.rabbit',
[require.optional('ext.wikia.adEngine.ml.fmr.fmrLogisticRegression'),require.optional('ext.wikia.adEngine.ml.fmr.fmrPassiveAggressiveClassifier'),require.optional('ext.wikia.adEngine.ml.n1.n1DecisionTreeClassifier'),require.optional('ext.wikia.adEngine.ml.n1.n1LogisticRegression'),require.optional('ext.wikia.adEngine.ml.n1.n1mLogisticRegression'),require.optional('ext.wikia.adEngine.ml.outstream.outstreamLogisticRegression')],function(fmrLr,fmrPac,n1dtc,n1Lr,n1mLr,outstreamLr){'use strict';var models=[fmrLr,fmrPac,n1dtc,n1Lr,n1mLr,outstreamLr];function getModelNames(){return models.map(function(model){if(model){return model.getName();}});}function getResults(allowedModels){var results=[];allowedModels=allowedModels||[];models.forEach(function(model){if(model&&model.isEnabled()&&allowedModels.indexOf(model.getName())!==-1){results.push(model.getResult());}});return results;}function getAllSerializedResults(){var allowedModels=getModelNames();return getResults(allowedModels).join(';');}
return{getResults:getResults,getAllSerializedResults:getAllSerializedResults};});;define('ext.wikia.adEngine.ml.fmr.fmrInputParser',['ext.wikia.adEngine.adLogicPageParams','wikia.log'],function(pageParams,log){'use strict';var articleHeightMean=12169.6328125,logGroup='ext.wikia.adEngine.ml.fmr.fmrInputParser';function getData(){var data,params=pageParams.getPageLevelParams();data=[parseInt(params.ah||0,10)/articleHeightMean,params.s2==='article'?1:0,params.s2==='extra'?1:0,params.s2==='file'?1:0,params.s2==='forum'?1:0,params.s2==='fv-article'?1:0,params.s2==='home'?1:0,params.s2==='search'?1:0,params.s2==='special'?1:0,params.s0v==='books'?1:0,params.s0v==='comics'?1:0,params.s0v==='games'?1:0,params.s0v==='lifestyle'?1:0,params.s0v==='movies'?1:0,params.s0v==='music'?1:0,params.s0v==='other'?1:0,params.s0v==='tv'?1:0,params.skin==='mercury'?1:0,params.skin==='oasis'?1:0,params.esrb==='e10'?1:0,params.esrb==='ec'?1:0,params.esrb==='everyone'?1:0,params.esrb==='mature'?1:0,params.esrb
==='rp'?1:0,params.esrb==='teen'?1:0,params.esrb==='tenn'?1:0,params.ref==='direct'?1:0,params.ref==='external'?1:0,params.ref==='external_search'?1:0,params.ref==='wiki'?1:0,params.ref==='wiki_search'?1:0,params.ref==='wikia'?1:0,params.ref==='wikia_search'?1:0,params.top==='1k'?1:0];log(['FMR data',data],log.levels.debug,logGroup);return data;}return{getData:getData};});;define('ext.wikia.adEngine.ml.fmr.fmrLogisticRegression',['ext.wikia.adEngine.ml.fmr.fmrInputParser','ext.wikia.adEngine.ml.modelFactory','ext.wikia.adEngine.ml.model.linear'],function(inputParser,modelFactory,linearModel){'use strict';var coefficients=[-0.304360167,-3.03645625,2.43407028,1.37748331,8.18936945,-6.80640838,3.07912864,4.22575335,3.05398039,1.56544758,1.35266676,1.46443631,1.63976417,1.72897041,1.56771498,1.64995283,1.54796903,27.2848195,-14.7678968,1.99373638,2.18399385,2.04954933,2.02234034,1.66476354,2.03765807,0.564880392,2.46780663,2.07613289,1.79205965,2.05993374,1.99533944,1.71450779,0.411141975,
0.0230943713],intercept=12.51692079;return modelFactory.create({inputParser:inputParser,model:linearModel.create(coefficients,intercept),name:'fmrlr',wgCountriesVariable:'wgAdDriverFMRLogisticRegressionRabbitCountries',enabled:!0,cachePrediction:!0});});;define('ext.wikia.adEngine.ml.fmr.fmrPassiveAggressiveClassifier',['ext.wikia.adEngine.ml.fmr.fmrInputParser','ext.wikia.adEngine.ml.modelFactory','ext.wikia.adEngine.ml.model.linear'],function(inputParser,modelFactory,linearModel){'use strict';var coefficients=[-0.82278099,-8.79683582,7.60984978,1.45988694,8.92733562,-12.05770462,5.62087356,9.07374935,3.01971169,0.12593883,4.46370629,1.33673095,2.01391295,4.59430009,0.81224786,2.17649926,-0.66646972,26.31888106,-11.46201455,2.07762358,2.60118493,2.51322211,0.65912343,2.379149,0.60862587,4.01793758,1.26946244,3.84173804,1.20193068,2.36249361,1.84468104,2.31894266,2.01761805,0.11216369],intercept=14.85686651;return modelFactory.create({inputParser:inputParser,model:linearModel.
create(coefficients,intercept),name:'fmrpac',wgCountriesVariable:'wgAdDriverFMRPassiveAggressiveClassifierRabbitCountries',enabled:!0,cachePrediction:!0});});;define('ext.wikia.adEngine.ml.model.decisionTreeClassifier',['wikia.nirvana','wikia.window'],function(nirvana,win){'use strict';function findMax(nums){var index=0;for(var i=0;i<nums.length;i++){index=nums[i]>nums[index]?i:index;}return index;}function create(modelId){var lChilds,rChilds,thresholds,indices,classes;function loadParameters(callback){nirvana.sendRequest({controller:'AdEngine2Api',method:'getModelData',format:'json',type:'get',scriptPath:win.wgCdnApiUrl,data:{id:modelId},callback:function(params){lChilds=params.lChilds;rChilds=params.rChilds;thresholds=params.thresholds;indices=params.indices;classes=params.classes;callback(params);}});}function predict(features,node){if(!lChilds||!rChilds||!thresholds||!indices||!classes){return null;}node=(typeof node!=='undefined')?node:0;if(thresholds[node]!==-2){if(features[
indices[node]]<=thresholds[node]){return predict(features,lChilds[node]);}else{return predict(features,rChilds[node]);}}return findMax(classes[node]);}return{loadParameters:loadParameters,predict:predict};}return{create:create};});;define('ext.wikia.adEngine.ml.n1.n1DecisionTreeClassifier',['ext.wikia.adEngine.ml.n1.n1DecisionTreeClassifierInputParser','ext.wikia.adEngine.ml.modelFactory','ext.wikia.adEngine.ml.model.decisionTreeClassifier','wikia.geo','wikia.instantGlobals'],function(inputParser,modelFactory,decisionTreeClassifier,geo,instantGlobals){'use strict';var dtc=decisionTreeClassifier.create('n1dtc'),modelData={inputParser:inputParser,model:dtc,name:'n1dtc',wgCountriesVariable:'wgAdDriverN1DecisionTreeClassifierRabbitCountries',enabled:!1,cachePrediction:!0};if(geo.isProperGeo(instantGlobals[modelData.wgCountriesVariable])){dtc.loadParameters(function(){modelData.enabled=!0;});}return modelFactory.create(modelData);});;define(
'ext.wikia.adEngine.ml.n1.n1DecisionTreeClassifierInputParser',['ext.wikia.adEngine.adLogicPageParams','wikia.browserDetect','wikia.geo','wikia.log'],function(pageParams,browserDetect,geo,log){'use strict';var logGroup='ext.wikia.adEngine.ml.n1.n1DecisionTreeClassifierInputParser';function getData(){var data,params=pageParams.getPageLevelParams();data=[browserDetect.getBrowser().indexOf('Firefox')===0?1:0,browserDetect.getBrowser().indexOf('Netscape')===0?1:0,browserDetect.getBrowser().indexOf('Safari')===0?1:0,geo.getCountryCode()==='CA'?1:0,geo.getCountryCode()==='CN'?1:0,geo.getCountryCode()==='DK'?1:0,geo.getCountryCode()==='FR'?1:0,geo.getCountryCode()==='IN'?1:0,geo.getCountryCode()==='KR'?1:0,geo.getCountryCode()==='NO'?1:0,geo.getCountryCode()==='PK'?1:0,geo.getCountryCode()==='RU'?1:0,geo.getCountryCode()==='TW'?1:0,geo.getCountryCode()==='UA'?1:0,geo.getCountryCode()==='VE'?1:0,geo.getCountryCode()?0:1,params.s0v==='comics'?1:0,params.s0v==='lifestyle'?1:0,params.s0v===
'movies'?1:0,params.s0v==='music'?1:0,params.s0v==='tv'?1:0,params.esrb==='ec'?1:0,params.esrb==='everyone'?1:0,params.esrb==='mature'?1:0,params.esrb==='teen'?1:0,params.ref==='direct'?1:0,params.ref==='external'?1:0,params.ref==='external_search'?1:0,params.ref==='wiki'?1:0,params.ref==='wiki_search'?1:0];log(['N+1 DTC data',data],log.levels.debug,logGroup);return data;}return{getData:getData};});;define('ext.wikia.adEngine.ml.n1.n1InputParser',['ext.wikia.adEngine.adLogicPageParams','wikia.geo','wikia.log'],function(pageParams,geo,log){'use strict';var logGroup='ext.wikia.adEngine.ml.n1.n1InputParser';function getData(){var data,params=pageParams.getPageLevelParams();data=[geo.getCountryCode()?0:1,params.s0v==='music'?1:0,params.ref==='direct'?1:0,params.ref==='external'?1:0,params.ref==='external_search'?1:0,params.ref==='wiki'?1:0];log(['N+1 data',data],log.levels.debug,logGroup);return data;}return{getData:getData};});;define('ext.wikia.adEngine.ml.n1.n1LogisticRegression',[
'ext.wikia.adEngine.adContext','ext.wikia.adEngine.ml.n1.n1InputParser','ext.wikia.adEngine.ml.modelFactory','ext.wikia.adEngine.ml.model.linear'],function(adContext,inputParser,modelFactory,linearModel){'use strict';var coefficients=[-1.35593338,-0.74005118,-0.68989916,-1.54150067,-1.2476945,0.23770009],intercept=0.38341737;return modelFactory.create({inputParser:inputParser,model:linearModel.create(coefficients,intercept),name:'n1lr',wgCountriesVariable:'wgAdDriverN1LogisticRegressionRabbitCountries',enabled:adContext.get('targeting.skin')==='oasis',cachePrediction:!0});});;define('ext.wikia.adEngine.ml.outstream.outstreamInputParser',['ext.wikia.adEngine.adLogicPageParams','wikia.browserDetect','wikia.geo','wikia.log','wikia.window'],function(pageParams,browserDetect,geo,log,win){'use strict';var logGroup='ext.wikia.adEngine.ml.outstream.outstreamInputParser',maxArticleHeight=15000,maxViewportHeight=3840;function getData(){var bodyHeight=win.document.body.scrollHeight,data,params=
pageParams.getPageLevelParams(),viewportHeight=win.innerHeight;data=[parseInt(params.pv,10)||1,browserDetect.getBrowser().indexOf('Android')!==-1?1:0,params.s0==='ent'?1:0,params.ref==='direct'?1:0,params.ref.indexOf('wiki')!==-1?1:0,params.top==='1k'?1:0,bodyHeight?Math.min(bodyHeight,maxArticleHeight)/maxArticleHeight:0,viewportHeight?Math.min(viewportHeight,maxViewportHeight)/maxViewportHeight:0];log(['Outstream data',data],log.levels.debug,logGroup);return data;}return{getData:getData};});;define('ext.wikia.adEngine.ml.outstream.outstreamLogisticRegression',['ext.wikia.adEngine.ml.outstream.outstreamInputParser','ext.wikia.adEngine.ml.modelFactory','ext.wikia.adEngine.ml.model.linear'],function(inputParser,modelFactory,linearModel){'use strict';var coefficients=[-0.00378709384,-0.415008546,-0.0591228445,-0.54962733,-0.00141524525,-0.0885103549,-1.98617309,3.12915591],intercept=0.48931681;return modelFactory.create({inputParser:inputParser,model:linearModel.create(coefficients,
intercept),name:'outstreamlr',wgCountriesVariable:'wgAdDriverOutstreamLogisticRegressionRabbitCountries',enabled:!0,cachePrediction:!0});});;define('ext.wikia.adEngine.video.player.ui.closeButton',['wikia.document','wikia.log'],function(doc,log){'use strict';var logGroup='ext.wikia.adEngine.video.player.ui.closeButton';function add(video){var closeButton=doc.createElement('div');closeButton.classList.add('close-ad');closeButton.addEventListener('click',function(event){video.stop();event.preventDefault();log(['stop',log.levels.debug,logGroup]);});video.container.appendChild(closeButton);}return{add:add};});;define('ext.wikia.adEngine.video.player.ui.dynamicReveal',['ext.wikia.adEngine.slotTweaker','ext.wikia.adEngine.video.player.porvata.floater','wikia.document'],function(slotTweaker,floater,doc){'use strict';var videoAspectRatio=640/360;function add(video,params){var slot,slotExpanded=!1,slotWidth;if(params.isDynamic){slot=doc.getElementById(params.slotName);video.
addEventListener('loaded',function(){if(!slotExpanded){slotTweaker.expand(params.slotName);slotExpanded=!0;setTimeout(function(){video.ima.dispatchEvent('wikiaSlotExpanded');},0);}slotWidth=slot.scrollWidth;if(!floater.isFloating(params.slotName)){video.resize(slotWidth,slotWidth/videoAspectRatio);}});video.addEventListener('allAdsCompleted',function(){slotTweaker.collapse(params.slotName);video.ima.dispatchEvent('wikiaSlotCollapsed');});}}return{add:add};});;define('ext.wikia.adEngine.video.player.ui.mouseEvents',['wikia.window'],function(win){'use strict';function muteVideo(video){setTimeout(function(){video.setVolume(0);});}function add(video,params){var isTouchDevice='ontouchstart'in win||'onmsgesturechange'in win,onMouseEnter=function(){video.setVolume(1,true);},onMouseLeave=function(){video.setVolume(0,true);};video.addEventListener('loaded',function(){muteVideo(video);});video.addEventListener('start',function(){muteVideo(video);});if(!isTouchDevice){video.addEventListener(
'loaded',function(){params.container.addEventListener('mouseenter',onMouseEnter);params.container.addEventListener('mouseleave',onMouseLeave);video.addEventListener('wikiaVolumeChangeClicked',function(){params.container.removeEventListener('mouseenter',onMouseEnter);params.container.removeEventListener('mouseleave',onMouseLeave);});});}}return{add:add};});;define('ext.wikia.adEngine.video.player.ui.pauseOverlay',['wikia.document','wikia.log'],function(doc,log){'use strict';var logGroup='ext.wikia.adEngine.video.player.ui.pauseOverlay';function add(video){var overlay=doc.createElement('div');overlay.classList.add('pause-overlay');overlay.addEventListener('click',function(){if(video.isPaused()){video.resume();log(['resume',log.levels.debug,logGroup]);}else{video.pause();log(['pause',log.levels.debug,logGroup]);}});video.container.appendChild(overlay);}return{add:add};});;define('ext.wikia.adEngine.video.player.ui.progressBar',['ext.wikia.adEngine.domElementTweaker','wikia.document',
'wikia.log'],function(DOMElementTweaker,doc,log){'use strict';var logGroup='ext.wikia.adEngine.video.player.ui.progressBar';function add(video,params){var progressBar=doc.createElement('div'),currentTime=doc.createElement('div');progressBar.classList.add('progress-bar');currentTime.classList.add('current-time');progressBar.currentTime=currentTime;progressBar.appendChild(currentTime);progressBar.pause=function(){var currentStatus=(currentTime.offsetWidth/progressBar.offsetWidth*100)+'%';currentTime.style.width=currentStatus;log(['pause',currentStatus],log.levels.debug,logGroup);};progressBar.reset=function(){currentTime.style.transitionDuration='';currentTime.style.width='0';log(['update, reset'],log.levels.debug,logGroup);};progressBar.start=function(){var remainingTime=video.getRemainingTime();if(remainingTime){currentTime.style.transitionDuration=remainingTime+'s';DOMElementTweaker.forceRepaint(currentTime);currentTime.style.width='100%';}else{currentTime.style.width='0';}log([
'update, remaining time:',remainingTime],log.levels.debug,logGroup);};video.addEventListener('wikiaAdPlay',progressBar.start);video.addEventListener('wikiaAdCompleted',progressBar.reset);video.addEventListener('wikiaAdPause',progressBar.pause);if(params.controlBar){params.controlBar.insertBefore(progressBar,params.controlBar.firstChild);}else{video.container.appendChild(progressBar);}}return{add:add};});;define('ext.wikia.adEngine.video.player.ui.replayOverlay',['wikia.document','wikia.log'],function(doc,log){'use strict';var logGroup='ext.wikia.adEngine.video.player.ui.replayOverlay',replayOverlayClass='replay-overlay';function add(video,params){var overlay=doc.createElement('div'),overlayPercentWidth=0;if(video.container.classList.contains('video-player-right')){overlay.style.right=0;}overlay.classList.add(replayOverlayClass);overlay.addEventListener('click',function(){video.play();log(['replay',log.levels.debug,logGroup]);overlay.style.width='';});if(!params.autoPlay){
overlayPercentWidth=computeOverlayWidth(params,overlayPercentWidth);showOverlay(overlay,overlayPercentWidth);}video.addEventListener('wikiaAdCompleted',function(){overlayPercentWidth=computeOverlayWidth(params,overlayPercentWidth);showOverlay(overlay,overlayPercentWidth);});video.container.parentElement.insertBefore(overlay,video.container);}function computeOverlayWidth(params,overlayPercentWidth){var width=overlayPercentWidth;if(!width){width=getOverlayWidth(params);}return width;}function showOverlay(overlay,overlayPercentWidth){overlay.style.width=overlayPercentWidth;}function getOverlayWidth(params){var adWidth=params.container.offsetWidth,videoWidth=params.hideWhenPlaying.offsetWidth;return 100*videoWidth/adWidth+'%';}return{add:add};});;define('ext.wikia.adEngine.video.player.ui.toggleAnimation',['ext.wikia.adEngine.domElementTweaker'],function(DOMElementTweaker){'use strict';var animationDuration=400;function getAdHeight(params){return params.container.clientWidth/params.
aspectRatio;}function getVideoHeight(params){return params.container.clientWidth/params.videoAspectRatio;}function updateHeight(element,value){value=value?value+'px':'';element.style.height=value;}function toggle(elementToShow,elementToHide){DOMElementTweaker.hide(elementToHide);DOMElementTweaker.show(elementToShow);}function clearHeight(element){setTimeout(function(){element.style.height='';},animationDuration);}function hideVideo(video,params){updateHeight(params.container,getVideoHeight(params));updateHeight(params.container,getAdHeight(params));setTimeout(function(){toggle(params.image,video.container);},animationDuration);clearHeight(params.container);}function showVideo(video,params){updateHeight(params.container,getAdHeight(params));updateHeight(params.container,getVideoHeight(params));toggle(video.container,params.image);clearHeight(params.container);}function add(video,params){video.addEventListener('wikiaAdStarted',function(){showVideo(video,params);});video.addEventListener(
'wikiaAdCompleted',function(){hideVideo(video,params);});}return{add:add};});;define('ext.wikia.adEngine.video.player.ui.toggleVideo',['ext.wikia.adEngine.domElementTweaker'],function(DOMElementTweaker){'use strict';function toggle(elementToShow,elementToHide){DOMElementTweaker.hide(elementToHide);DOMElementTweaker.show(elementToShow);}function hideVideo(video,params){toggle(params.hideWhenPlaying||params.image,video.container);}function showVideo(video,params){toggle(video.container,params.hideWhenPlaying||params.image);}function add(video,params){video.addEventListener('wikiaAdStarted',function(){showVideo(video,params);});video.addEventListener('wikiaAdCompleted',function(){hideVideo(video,params);});}return{add:add};});;define('ext.wikia.adEngine.video.player.ui.videoInterface',['wikia.log'],function(log){'use strict';var logGroup='ext.wikia.adEngine.video.player.ui.videoInterface';function setup(video,uiElements,params){uiElements.forEach(function(element){var module=
'ext.wikia.adEngine.video.player.ui.'+element;require([module],function(uiElement){uiElement.add(video,params);log(['setup',element,video],'debug',logGroup);});});}return{setup:setup};});;define('ext.wikia.adEngine.video.player.ui.volumeControl',['wikia.document','wikia.log'],function(doc,log){'use strict';var logGroup='ext.wikia.adEngine.video.player.ui.volumeControl';function createVolumeControl(){var volume=doc.createElement('div'),speaker=doc.createElement('a');speaker.className='speaker';speaker.appendChild(doc.createElement('span'));volume.className='ima-mute-div volume-control hidden';volume.appendChild(speaker);volume.speaker=speaker;log('volume control is added',log.levels.info,logGroup);volume.mute=function(){volume.speaker.classList.add('mute');log('mute',log.levels.info,logGroup);};volume.unmute=function(){volume.speaker.classList.remove('mute');log('unmute',log.levels.info,logGroup);};return volume;}function updateCurrentState(video,volumeControl){if(video.isMuted()||video
.isMobilePlayerMuted()){volumeControl.mute();}else{volumeControl.unmute();}}function add(video){var volumeControl=createVolumeControl();video.addEventListener('wikiaVolumeChange',function(){updateCurrentState(video,volumeControl);});video.addEventListener('wikiaAdPlay',function(){updateCurrentState(video,volumeControl);volumeControl.classList.remove('hidden');});volumeControl.addEventListener('click',function(e){video.ima.dispatchEvent('wikiaVolumeChangeClicked');video.volumeToggle();e.preventDefault();});video.container.appendChild(volumeControl);}return{add:add};});;define('ext.wikia.adEngine.video.player.uiTemplate',['wikia.log'],function(log){'use strict';var autoPlayLayout=['progressBar','pauseOverlay','volumeControl','toggleAnimation'],defaultLayout=['progressBar','pauseOverlay','volumeControl','closeButton','toggleAnimation'],splitLayout=['progressBar','pauseOverlay','volumeControl','toggleVideo','replayOverlay'],clickToPlaySplitLayout=['progressBar','pauseOverlay',
'volumeControl','toggleVideo','replayOverlay','closeButton'],outstreamIncontent=['dynamicReveal','mouseEvents','progressBar','volumeControl'],outstreamLeaderboard=['mouseEvents','progressBar','volumeControl'],logGroup='ext.wikia.adEngine.video.player.uiTemplate';function selectTemplate(videoSettings){var template=defaultLayout;if(!videoSettings.isAutoPlay()&&videoSettings.isSplitLayout()){template=clickToPlaySplitLayout;}else if(videoSettings.isSplitLayout()){template=splitLayout;}else if(videoSettings.isAutoPlay()){template=autoPlayLayout;}log(['VUAP UI elements',template],log.levels.debug,logGroup);return template;}return{autoPlayLayout:autoPlayLayout,defaultLayout:defaultLayout,splitLayout:splitLayout,outstreamIncontent:outstreamIncontent,outstreamLeaderboard:outstreamLeaderboard,selectTemplate:selectTemplate};});;define('ext.wikia.adEngine.video.videoSettings',['ext.wikia.adEngine.adContext','ext.wikia.adEngine.slot.resolvedState','ext.wikia.adEngine.utils.sampler',
'wikia.instantGlobals','wikia.window'],function(adContext,resolvedState,sampler,instantGlobals,win){'use strict';function create(params){var state={autoPlay:!1,moatTracking:!1,resolvedState:!1,splitLayout:!1,withUiControls:!1};function calculateAutoPlayFlag(params){var defaultStateAutoPlay=params.autoPlay&&!state.resolvedState,resolvedStateAutoPlay=params.resolvedStateAutoPlay&&state.resolvedState;return Boolean(defaultStateAutoPlay||resolvedStateAutoPlay);}function calculateMoatTrackingFlag(params){var sampling=instantGlobals.wgAdDriverPorvataMoatTrackingSampling||0;if(typeof params.moatTracking==='boolean'){return params.moatTracking;}if(!adContext.get('opts.porvataMoatTrackingEnabled')){return false;}if(sampling===100){return true;}if(sampling>0){return sampler.sample('moat_video_tracking',sampling,100);}return false;}function init(){state.resolvedState=resolvedState.isResolvedState();state.autoPlay=calculateAutoPlayFlag(params);state.splitLayout=Boolean(params.
splitLayoutVideoPosition);state.moatTracking=calculateMoatTrackingFlag(params);state.withUiControls=Boolean(params.hasUiControls);}init();return{getParams:function(){return params;},getVpaidMode:function(){return params.vpaidMode!==undefined?params.vpaidMode:win.google.ima.ImaSdkSettings.VpaidMode.ENABLED;},hasUiControls:function(){return state.withUiControls;},isAutoPlay:function(){return state.autoPlay;},isResolvedState:function(){return state.resolvedState;},isSplitLayout:function(){return state.splitLayout;},isMoatTrackingEnabled:function(){return state.moatTracking;},setMoatTracking:function(status){state.moatTracking=status;}};}return{create:create};});;define('ext.wikia.aRecoveryEngine.adBlockDetection',['ext.wikia.adEngine.adContext','wikia.document','wikia.instantGlobals','wikia.lazyqueue','wikia.log',require.optional('ext.wikia.aRecoveryEngine.pageFair.recovery')],function(adContext,doc,instantGlobals,lazyQueue,log,pageFair){'use strict';var cb=function(callback){callback();}
,logGroup='ext.wikia.aRecoveryEngine.adBlockDetection',onBlockingEventsQueue=lazyQueue.makeQueue([],cb),onNotBlockingEventsQueue=lazyQueue.makeQueue([],cb);function addOnBlockingCallback(callback){onBlockingEventsQueue.push(callback);}function addOnNotBlockingCallback(callback){onNotBlockingEventsQueue.push(callback);}function isBlocking(){return isEnabled()&&pageFair&&pageFair.isBlocking();}function isEnabled(){var context=adContext.getContext();log(['isEnabled',context.opts.pageFairRecovery],log.levels.debug,logGroup);return context.opts.pageFairRecovery;}return{addOnBlockingCallback:addOnBlockingCallback,addOnNotBlockingCallback:addOnNotBlockingCallback,isBlocking:isBlocking,isEnabled:isEnabled};});;define('ext.wikia.aRecoveryEngine.adBlockRecovery',['ext.wikia.adEngine.adContext','ext.wikia.aRecoveryEngine.adBlockDetection','wikia.document','wikia.instantGlobals','wikia.log','wikia.window'],function(adContext,adBlockDetection,doc,instantGlobals,log,win){'use strict';var
customLogEndpoint='/wikia.php?controller=ARecoveryEngineApi&method=getLogInfo&kind=',logGroup='ext.wikia.aRecoveryEngine.adBlockRecovery';function getName(){return'adBlockRecovery';}function addResponseListener(callback){adBlockDetection.addOnBlockingCallback(callback);adBlockDetection.addOnNotBlockingCallback(callback);}function isEnabled(){var context=adContext.getContext(),enabled=context.opts.pageFairRecovery||context.opts.instartLogicRecovery;log(['isEnabled',enabled],log.levels.debug,logGroup);return enabled;}function track(type){if(win._sp_&&!win._sp_.trackingSent){if(Wikia&&Wikia.Tracker){Wikia.Tracker.track({eventName:'ads.recovery',category:'ads-recovery-blocked',action:Wikia.Tracker.ACTIONS.IMPRESSION,label:type,trackingMethod:'analytics'});}if(instantGlobals.wgARecoveryEngineCustomLog){sendCustomLog(type);}win._sp_.trackingSent=!0;}}function sendCustomLog(type){var xmlHttp=new XMLHttpRequest();try{xmlHttp.open('GET',customLogEndpoint+type,true);xmlHttp.send();}catch(e){
log(['track',e],log.levels.error,logGroup);}}function verifyContent(){var wikiaArticle=doc.getElementById('WikiaArticle'),display=wikiaArticle.currentStyle?wikiaArticle.currentStyle.display:getComputedStyle(wikiaArticle,null).display;if(display==='none'){track('css-display-none');}}return{addResponseListener:addResponseListener,isEnabled:isEnabled,getName:getName,track:track,verifyContent:verifyContent,wasCalled:isEnabled};});;define('ext.wikia.aRecoveryEngine.instartLogic.recovery',['ext.wikia.adEngine.adContext','wikia.log','wikia.window'],function(adContext,log,win){'use strict';var logGroup='ext.wikia.aRecoveryEngine.instartLogic.recovery',context=adContext.getContext();function isEnabled(){var enabled=!!context.opts.instartLogicRecovery;log(['isEnabled',enabled,log.levels.debug,logGroup]);return enabled;}function isBlocking(){var isBlocking=!!(win.I11C&&win.I11C.Morph);log(['isBlocking',isBlocking],log.levels.debug,logGroup);return isEnabled()&&isBlocking;}return{isBlocking:
isBlocking,isEnabled:isEnabled,isSlotRecoverable:isEnabled};});;define('ext.wikia.aRecoveryEngine.tweaker',['ext.wikia.adEngine.domElementTweaker','ext.wikia.adEngine.slotTweaker','ext.wikia.aRecoveryEngine.adBlockDetection','wikia.browserDetect','wikia.document','wikia.log'],function(DOMElementTweaker,slotTweaker,adBlockDetection,browser,doc,log){'use strict';var logGroup='ext.wikia.aRecoveryEngine.tweaker';function isNotSupportedBrowser(){return browser.isIE()||browser.isEdge();}function mirrorDOMStructure(parentNode){var div=doc.createElement('div'),originalIframe=doc.createElement('iframe');div.appendChild(originalIframe);parentNode.appendChild(div);originalIframe.style.display='none';div.style.display='none';return originalIframe;}function tweakSlot(slotName,iframe){var adContainer=iframe.parentNode.parentNode.parentNode.parentNode,originalIframe=mirrorDOMStructure(doc.querySelector('#'+slotName+' > div > div'));if(isNotSupportedBrowser()){DOMElementTweaker.hide(adContainer,true);
log(['tweakSlot','not supported browser'],'info',logGroup);return;}slotTweaker.tweakRecoveredSlot(originalIframe,iframe);log(['tweakSlot',slotName],'info',logGroup);}function isTweakable(){return adBlockDetection.isBlocking();}return{isTweakable:isTweakable,tweakSlot:tweakSlot};});;define('ext.wikia.aRecoveryEngine.pageFair.recovery',['ext.wikia.adEngine.adContext','wikia.log','wikia.window'],function(adContext,log,win){'use strict';var logGroup='ext.wikia.aRecoveryEngine.pageFair.recovery',context=adContext.getContext(),recoverableSlots=['TOP_LEADERBOARD','TOP_RIGHT_BOXAD','BOTTOM_LEADERBOARD'];function isEnabled(){var enabled=!!context.opts.pageFairRecovery;log(['isEnabled',enabled,log.levels.debug,logGroup]);return enabled;}function isSlotRecoverable(slotName){var result=isEnabled()&&recoverableSlots.indexOf(slotName)!==-1;log(['isSlotRecoverable',result],log.levels.info,logGroup);return result;}function isBlocking(){var isBlocking=!!(win.ads&&win.ads.runtime.pf&&win.ads.runtime.pf.
recovering);log(['isBlocking',isBlocking],log.levels.debug,logGroup);return isBlocking;}function addMarker(slotElement){slotElement.setAttribute('adonis-marker','');}return{isBlocking:isBlocking,isEnabled:isEnabled,isSlotRecoverable:isSlotRecoverable,addMarker:addMarker};});;define('wikia.domCalculator',['wikia.document','wikia.window'],function(doc,win){'use strict';function getTopOffset(element){var topPos=0,elementWindow=element.ownerDocument.defaultView;do{topPos+=element.offsetTop;element=element.offsetParent;}while(element!==null);if(elementWindow&&elementWindow.frameElement){topPos+=getTopOffset(elementWindow.frameElement);}return topPos;}function isInViewport(element){var globalNavHeight=55,elementHeight=element.offsetHeight,topElement=getTopOffset(element),bottomElement=topElement+elementHeight,scrollPosition=win.scrollY,topViewport=scrollPosition+globalNavHeight,bottomViewport=scrollPosition+Math.max(doc.documentElement.clientHeight,win.innerHeight||0);return topElement>=(
topViewport-elementHeight/2)&&bottomElement<=(bottomViewport+elementHeight/2);}return{getTopOffset:getTopOffset,isInViewport:isInViewport};});;window.Krux||((Krux=function(){Krux.q.push(arguments);}).q=[]);define('wikia.krux',['ext.wikia.adEngine.adContext','ext.wikia.adEngine.adTracker','wikia.document','wikia.tracker','wikia.window'],function(adContext,adTracker,doc,wikiaTracker,win){'use strict';var maxNumberOfKruxSegments=50,kruxScriptId='krux-control-tag',kruxLoaded=!1,segmentsCountTracked=!1;function exportPageParams(adLogicPageParams){var params,value;if(Object.keys){params=adLogicPageParams.getPageLevelParams();Object.keys(params).forEach(function(key){value=params[key];if(value){win['kruxDartParam_'+key]=value.toString();}});}}function addConfigScript(confid){var k,s;k=document.createElement('script');k.type='text/javascript';k.id=kruxScriptId;k.async=!0;k.src=(location.protocol==='https:'?'https:':'http:')+'//cdn.krxd.net/controltag?confid='+confid;s=document.
getElementsByTagName('script')[0];s.parentNode.insertBefore(k,s);}function load(confid){require(['ext.wikia.adEngine.adContext','ext.wikia.adEngine.adLogicPageParams'],function(adContext,adLogicPageParams){var script;if(adContext.getContext().targeting.enableKruxTargeting){exportPageParams(adLogicPageParams);script=doc.getElementById(kruxScriptId);if(script){script.parentNode.removeChild(script);}addConfigScript(confid);kruxLoaded=!0;adTracker.track('krux/load');wikiaTracker.track({category:'ads-trackers',action:'krux',label:'load',value:0,trackingMethod:'analytics'});}});}function getParams(n){var k='kx'+n;try{if(win.localStorage){return win.localStorage[k]||'';}else{return'';}}catch(e){return'';}}function trackNumberOfSegments(numberOfSegments){if(segmentsCountTracked){return;}var label=numberOfSegments+'';while(label.length<4){label='0'+label;}adTracker.track('krux/segments_count',{},numberOfSegments,label);segmentsCountTracked=!0;}function getSegments(){var segments=getParams(
'segs'),segsArray;if(segments===''){trackNumberOfSegments(0);return[];}segsArray=segments.split(',');trackNumberOfSegments(segsArray.length);return segsArray.slice(0,maxNumberOfKruxSegments);}function getUser(){return getParams('user');}function sendEvent(eventId,data){if(!kruxLoaded){return false;}Krux('admEvent',eventId,data||{});return true;}adContext.addCallback(function(){segmentsCountTracked=!1;});return{load:load,getSegments:getSegments,getUser:getUser,sendEvent:sendEvent};});;define('wikia.throttle',function(){'use strict';function throttle(fn,threshold,scope){threshold=threshold||250;var last,deferTimer;return function(){var context=scope||this,now=+(new Date()),args=arguments;if(last&&now<last+threshold){clearTimeout(deferTimer);deferTimer=setTimeout(function(){last=now;fn.apply(context,args);},threshold);}else{last=now;fn.apply(context,args);}};}return throttle;});;define('wikia.viewportObserver',['wikia.domCalculator','wikia.throttle','wikia.window'],function(
domCalculator,throttle,win){'use strict';function updateInViewport(listener){var newInViewport=domCalculator.isInViewport(listener.element);if(newInViewport!==listener.inViewport){listener.callback(newInViewport);listener.inViewport=newInViewport;}}function addListener(element,callback,throttleThreshold){var listener={element:element,callback:callback,inViewport:!1},updateCallback=throttle(function(){updateInViewport(listener);},throttleThreshold);win.addEventListener('scroll',updateCallback);updateCallback();return updateCallback;}function removeListener(listener){win.removeEventListener('scroll',listener);}return{addListener:addListener,removeListener:removeListener};});;define('ext.wikia.adEngine.utils.scriptLoader',['ext.wikia.adEngine.adContext','ext.wikia.adEngine.adTracker','wikia.document',],function(adContext,adTracker,doc){'use strict';function createScript(src,type,isAsync,node){var script=doc.createElement('script');node=node||doc.body.lastChild;script.async=isAsync||
!0;script.type=type||'text/javascript';script.src=src;node.parentNode.insertBefore(script,node);return script;}function loadAsync(src,options){options=options||{};options.isAsync=!0;return loadScript(src,options);}function loadScript(src,options){options=options||{};var script=createScript(src,options.type,options.isAsync,options.node);script.onload=options.onLoad;script.onerror=options.onError;return script;}return{loadAsync:loadAsync,loadScript:loadScript};});;define('ext.wikia.adEngine.provider.evolve2',['ext.wikia.adEngine.adContext','ext.wikia.adEngine.provider.btfBlocker','ext.wikia.adEngine.provider.gpt.helper','ext.wikia.adEngine.slotTweaker','ext.wikia.adEngine.utils.adLogicZoneParams','ext.wikia.adEngine.utils.eventDispatcher','wikia.log'],function(adContext,btfBlocker,gptHelper,slotTweaker,zoneParams,eventDispatcher,log){'use strict';var logGroup='ext.wikia.adEngine.provider.evolve2',atfSlots=['INVISIBLE_SKIN','TOP_LEADERBOARD','TOP_RIGHT_BOXAD','EVOLVE_FLUSH'],
posTargetingValue,site='wikia_intl',slotMap={EVOLVE_FLUSH:{flushOnly:!0},INVISIBLE_SKIN:{size:'1000x1000,1x1',wloc:'top'},TOP_LEADERBOARD:{size:'728x90,970x250,970x300,970x90',wloc:'top'},TOP_RIGHT_BOXAD:{size:'300x250,300x600',wloc:'top'},MOBILE_TOP_LEADERBOARD:{size:'320x50,320x100',wsrc:'mobile_evolve'},MOBILE_IN_CONTENT:{size:'300x250',wsrc:'mobile_evolve'},MOBILE_PREFOOTER:{size:'300x250',wsrc:'mobile_evolve'},MOBILE_BOTTOM_LEADERBOARD:{size:'300x250',wsrc:'mobile_evolve'},BOTTOM_LEADERBOARD:{size:'300x250',wsrc:'mobile_evolve'}};function resetPosTargeting(){posTargetingValue={'728x90,970x250,970x300,970x90':'a','300x250,300x600':'a','1000x1000,1x1':'a','160x600':'b','320x50,320x100':'a','300x250':'a'};}function getSection(){var vertical=zoneParams.getVertical(),mappedVertical=zoneParams.getSite();switch(vertical){case'movies':case'tv':return vertical;}switch(mappedVertical){case'gaming':return'gaming';case'ent':return'entertainment';}return'ros';}function nextChar(char){return String
.fromCharCode(char.charCodeAt(0)+1);}function setTargeting(slot){var position=posTargetingValue[slot.size];slot.pos=position;if(!slot.wsrc){slot.wsrc='evolve';}posTargetingValue[slot.size]=nextChar(position);}function canHandleSlot(slotName){log(['canHandleSlot',slotName],'debug',logGroup);var ret=!!slotMap[slotName];log(['canHandleSlot',slotName,ret],'debug',logGroup);return ret;}function fillInSlot(slot){log(['fillInSlot',slot.name],'debug',logGroup);var section=getSection(),slotCopy=JSON.parse(JSON.stringify(slotMap[slot.name]));if(!slotCopy.flushOnly){slotCopy.wpos=slot.name;setTargeting(slotCopy);}slot.pre('success',function(){slotTweaker.removeDefaultHeight(slot.name);});gptHelper.pushAd(slot,'/4403/ev/'+site+'/'+section+'/'+slot.name,slotCopy,{forcedAdType:'evolve2',sraEnabled:!0});log(['fillInSlot',slot.name,'done'],'debug',logGroup);}function decorateFillInSlot(){if(adContext.getContext().targeting.skin==='oasis'){return btfBlocker.decorate(fillInSlot,{atfSlots:atfSlots});}
return fillInSlot;}resetPosTargeting();adContext.addCallback(function(){resetPosTargeting();});return{name:'Evolve2',canHandleSlot:canHandleSlot,fillInSlot:decorateFillInSlot()};});;require(['ext.wikia.adEngine.bridge','ext.wikia.adEngine.adContext','ext.wikia.adEngine.adEngineRunner','ext.wikia.adEngine.adLogicPageParams','ext.wikia.adEngine.adTracker','ext.wikia.adEngine.babDetection','ext.wikia.adEngine.slot.service.stateMonitor','ext.wikia.adEngine.config.desktop','ext.wikia.adEngine.customAdsLoader','ext.wikia.adEngine.dartHelper','ext.wikia.adEngine.messageListener','ext.wikia.adEngine.pageFairDetection','ext.wikia.adEngine.provider.btfBlocker','ext.wikia.adEngine.slot.service.actionHandler','ext.wikia.adEngine.slot.service.slotRegistry','ext.wikia.adEngine.slotTracker','ext.wikia.adEngine.slotTweaker','ext.wikia.adEngine.tracking.adInfoListener','ext.wikia.adEngine.tracking.scrollDepthTracker','ext.wikia.aRecoveryEngine.adBlockDetection','wikia.geo','wikia.window'],function(
adEngineBridge,adContext,adEngineRunner,pageLevelParams,adTracker,babDetection,slotStateMonitor,adConfigDesktop,customAdsLoader,dartHelper,messageListener,pageFairDetection,btfBlocker,actionHandler,slotRegistry,slotTracker,slotTweaker,adInfoListener,scrollDepthTracker,adBlockDetection,geo,win){'use strict';var context=adContext.getContext();win.AdEngine_getTrackerStats=slotTracker.getStats;messageListener.init();win.wikiaDartHelper=dartHelper;win.adSlotTweaker=slotTweaker;adEngineBridge.init(adTracker,geo,slotRegistry,null,pageLevelParams.getPageLevelParams(),adContext,btfBlocker,'oasis');win.loadCustomAd=adEngineBridge.loadCustomAd(customAdsLoader.loadCustomAd);if(context.opts.babDetectionDesktop){adEngineBridge.checkAdBlocking(babDetection);}win.wgAfterContentAndJS.push(function(){adInfoListener.run();slotStateMonitor.run();win.adslots2=win.adslots2||[];adEngineRunner.run(adConfigDesktop,win.adslots2,'queue.desktop',!!context.opts.delayEngine);actionHandler.registerMessageListener();
scrollDepthTracker.run();if(context.opts.pageFairDetection){pageFairDetection.initDetection(context);}});});require(['ext.wikia.adEngine.adContext','ext.wikia.adEngine.context.slotsContext','ext.wikia.adEngine.slot.bottomLeaderboard','ext.wikia.adEngine.slot.highImpact','ext.wikia.adEngine.slot.inContent','wikia.document','wikia.window'],function(adContext,slotsContext,bottomLeaderboard,highImpact,inContent,doc,win){'use strict';function initDesktopSlots(){highImpact.init();inContent.init('INCONTENT_PLAYER');bottomLeaderboard.init();}if(doc.readyState==='complete'){initDesktopSlots();}else{win.addEventListener('load',initDesktopSlots);}});require(['wikia.querystring','wikia.document'],function(qs,doc){'use strict';if(qs().getVal('fps')){var s=doc.createElement('script');s.src='https://raw.githubusercontent.com/Wikia/fps-meter/master/fps-meter.js';doc.body.appendChild(s);}});;define("ext.wikia.adEngine.bridge",[],function(){return function(t){function e(i){if(n[i])return n[i].exports;
var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=105)}([function(t,e){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(t,e,n){var i=n(44)("wks"),r=n(27),o=n(2).Symbol,a="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=a&&o[t]||(a?o:r)("Symbol."+t))}).store=i},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var i=n(2),r=n(0),o=n(22),a=n(13),s=function(t,e,n){var u,c,l,f=t&s.F,d=t&s.G,p=t&s.S,h=t&s.P,v=t&s.B,g=t&s.W,y=d?r:r[e]||(r[e]={}),m=y.
prototype,b=d?i:p?i[e]:(i[e]||{}).prototype;d&&(n=e);for(u in n)(c=!f&&b&&void 0!==b[u])&&u in y||(l=c?b[u]:n[u],y[u]=d&&"function"!=typeof b[u]?n[u]:v&&c?o(l,i):g&&b[u]==l?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):h&&"function"==typeof l?o(Function.call,l):l,h&&((y.virtual||(y.virtual={}))[u]=l,t&s.R&&m&&!m[u]&&a(m,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,n){var i=n(7);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var i=n(87),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();t.exports=o},function(t,e,n){var i=n(4),r=n(74),o=n(47),a=Object.defineProperty;e.f=n(8)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return a(t,e,n)}catch(t){}
if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(16)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(t,e){t.exports=n(50)},function(t,e){t.exports=n(51)},function(t,e){t.exports=n(69)},function(t,e){t.exports=n(17)},function(t,e){t.exports=n(116)},function(t,e){t.exports=n(136)},
function(t,e,n){"use strict";function i(){if(null===ut){var t=window.navigator.userAgent;ut="function"==typeof it.a?it()(t):it.a}return ut}function r(t){var e=t.ownerDocument.defaultView,n=t,i=!1,o=0;t.classList.contains("hide")&&(i=!0,t.classList.remove("hide"));do{o+=n.offsetTop,n=n.offsetParent}while(null!==n);return i&&t.classList.add("hide"),e&&e.frameElement&&(o+=r(e.frameElement)),o}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=["fixed","sticky"],o=window.getComputedStyle(t).position;if(i.includes(o))return!0;var a=t.offsetHeight,s=r(t),u=s+a,c=window.scrollY,l=Math.max(document.documentElement.clientHeight,window.innerHeight||0),f=e+c,d=n+c+l;return s>=f-a/2&&u<=d+a/2}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="object"===(void 0===t?"undefined":vt()(t)),r=i&&"function"==typeof t.addEventListener,o=i&&"function"==typeof t.once;return new yt.a(
function(i,a){"boolean"==typeof n&&(n={capture:n}),o?t.once(e,i):r?t.addEventListener(e,i,pt()({},n,{once:!0})):a("Emitter does not have `addEventListener` nor `once` method.")})}function s(t,e){if("function"!=typeof e)throw new Error("LazyQueue used with callback not being a function");if(!(t instanceof Array))throw new Error("LazyQueue requires an array as the first parameter");t.start=function(){for(;t.length>0;)e(t.shift());t.push=function(t){e(t)}}}function u(t){if(""!==Et&&("1"===Et||-1!==xt.indexOf(t))){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];window.console.info(t,n)}}function c(t){return-1!==(kt.get("ignored_samplers")||"").split(",").indexOf(t)}function l(t,e){return Math.floor(Math.random()*(e-t))+t}function f(t,e,n){Ct[t]&&Ct[t].forEach(function(t){t(e,n)})}function d(t,e,n){var i="";e.forEach(function(e){i+=(""===i?"":".")+e,f(i,t,n)})}function p(t,e){for(var n=t.split("."),i=n.length,r=It,o=null,a=0;a<i;a+=1)o=n[a],a<i-1&&(r[o]=r[o]||{
},r=r[o]);return void 0!==e&&(r[o]=e,d(t,n,e)),r[o]}function h(t,e){var n=Ft.getBySlotName(t);Vt[t]=e,n&&(e?n.enable():n.disable())}function v(){var t=this;if(this.atfEnded=!0,window.ads.runtime.disableBtf){var e=jt.get("slots");Mt()(e).forEach(function(n){var i=e[n];i.aboveTheFold||-1!==t.unblockedSlots.indexOf(i.slotName)||Ft.disable(i.slotName)})}this.slotsQueue.start()}function g(t){window[t]=function(t){var e=Ft.getBySlotName(t.slotName);qt.init(t.type,e,t)}}function y(t){try{return!!JSON.parse(t.data).AdEngine}catch(t){return!1}}function m(t,e){var n=!0;if(t.keys){var i=JSON.parse(e.data).AdEngine;t.keys.forEach(function(t){n=n&&i[t]})}return n}function b(t){var e=0,n=void 0;if(y(t))for(u(Xt,"Message received",t),e=0;e<Zt.length;e+=1)if(n=Zt[e],m(n.match,t))return u(Xt,"Matching message",t,n),n.fn(JSON.parse(t.data).AdEngine),void(n.match.infinite||Zt.splice(e,1))}function _(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=0;n<e.length;n+=1){var i=e[n];if(
"string"!=typeof i)throw new Error("property name must be a string");if(i in t)return i}return null}function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=_(t,e);if(null!==n){var i=t[n];return"function"==typeof i?i.bind(t):i}return null}function S(t,e,n){t&&n&&t.setAttribute(e,n)}function k(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=pt()({},jt.get("targeting"),t.getTargeting(),e);return encodeURIComponent(Mt()(n).filter(function(t){return n[t]}).map(function(t){return t+"="+n[t]}).join("&"))}function E(t){return!isNaN(parseFloat(t))&&isFinite(t)}function x(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=["output=vast","env=vp","gdfp_req=1","impl=s","unviewed_position_start=1","sz="+(t>1||!E(t)?"640x480":"320x480"),"url="+encodeURIComponent(window.location.href),"description_url="+encodeURIComponent(window.location.href),"correlator="+Se],r=Ft.getBySlotName(e);if(!r)throw Error("Slot does not exist!");return i.
push("iu="+r.getVideoAdUnit()),i.push("cust_params="+k(r,n.targeting)),n.contentSourceId&&n.videoId&&(i.push("cmsid="+n.contentSourceId),i.push("vid="+n.videoId)),n.vpos&&_e.indexOf(n.vpos)>-1&&i.push("vpos="+n.vpos),void 0!==n.numberOfAds&&i.push("pmad="+n.numberOfAds),we+i.join("&")}function A(){if("1"===kt.get("porvata_override_vast")){var t=window.localStorage.getItem("porvata_vast");return u(ke,"Overridden VAST",t),t}return null}function L(t){var e=Ft.getBySlotName(t.slotName),n=new window.google.ima.AdsRequest,i=A();if((t.vastResponse||i)&&(n.adsResponse=i||t.vastResponse),jt.get("options.porvata.audio.exposeToSlot")){var r=jt.get("options.porvata.audio.key"),o=jt.get("options.porvata.audio.segment");e.setConfigProperty("audioSegment",t.autoPlay?"":o),e.setConfigProperty("targeting."+r,t.autoPlay?"no":"yes")}return n.adTagUrl=t.vastUrl||x(t.width/t.height,t.slotName,{targeting:t.vastTargeting}),n.linearAdSlotWidth=t.width,n.linearAdSlotHeight=t.height,n}function O(){var t=
arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new window.google.ima.AdsRenderingSettings;return jt.get("state.isMobile")||(e.bitrate=68e3),e.loadVideoTimeout=t.loadVideoTimeout||15e3,e.enablePreloading=!0,e.uiElements=[],e}function T(t,e,n){if(!1===e.hasOwnProperty("partnerCode"))return!1;var i=document.createElement("script");if(n=n||t&&(void 0!==t.O?t.O.parentNode:document.body)||document.body,Ae=[],Le={adsManager:t,ids:e,imaSDK:!0,events:[]},xe={complete:"AdVideoComplete",firstquartile:"AdVideoFirstQuartile",impression:"AdImpression",loaded:"AdLoaded",midpoint:"AdVideoMidpoint",pause:"AdPaused",skip:"AdSkipped",start:"AdVideoStart",thirdquartile:"AdVideoThirdQuartile",volumeChange:"AdVolumeChange"},google&&google.ima&&t){var r,o="_moatApi"+Math.floor(1e8*Math.random());for(r in google.ima.AdEvent.Type){var a=function(e){if(Le.sendEvent){for(e=Ae.length-1;0<=e;e--)t.removeEventListener(Ae[e].type,Ae[e].func);Le.sendEvent(Le.events)}else Le.events.push({type:xe[e.type]||
e.type,adVolume:t.getVolume()})};t.addEventListener(google.ima.AdEvent.Type[r],a),Ae.push({type:google.ima.AdEvent.Type[r],func:a})}}var s,u,o=void 0!==o?o:"";try{s=n.ownerDocument,u=s.defaultView||s.parentWindow}catch(t){s=document,u=window}u[o]=Le,i.type="text/javascript",n&&n.appendChild(i),i.src="https://z.moatads.com/"+e.partnerCode+"/moatvideo.js#"+o}function P(){var t=document.createElement("video");return t.setAttribute("preload","none"),t}function M(){return window.google&&window.google.ima?new yt.a(function(t){t()}):Tt.loadScript(Ie)}function I(t){var e=new window.google.ima.AdDisplayContainer(t.getContainer()),n=t.getContainer().querySelector("div > iframe");window.performance&&window.performance.navigation.type===window.performance.navigation.TYPE_BACK_FORWARD&&(n.contentWindow.location.href=n.src);var i=new window.google.ima.AdsLoader(e);return Me.create(e,i,t)}function C(t){var e=jt.get("options.video.moatTracking.sampling");return"boolean"==typeof t.moatTracking?t.
moatTracking:!!jt.get("options.video.moatTracking.enabled")&&(100===e||e>0&&Lt.sample("moat_video_tracking",e))}function R(){return jt.get("listeners.porvata")}function j(){return(16777216*(1+Math.random())).toString(16).substring(1)}function N(t,e){t.push({id:e.id})}function B(t){return t.getElement().querySelector('div[id*="_container_"] iframe')}function V(t,e){var n=B(e),i=!1;if(t.isEmpty)return"collapse";try{i=!!n.contentWindow.document.querySelector}catch(t){u(We,"getAdType","iframe is not accessible")}return i&&n.contentWindow.AdEngine_adType?n.contentWindow.AdEngine_adType:"success"}function D(t){var e=t.adType,n=t.event,i={browser:ft.getOperatingSystem()+" "+ft.getBrowser(),status:e,page_width:window.document.body.scrollWidth||"",time_bucket:(new Date).getHours(),timestamp:(new Date).getTime(),viewport_height:window.innerHeight||0};if(n){if(n.slot){var r=n.slot.getResponseInformation();r&&(i.creative_id=r.creativeId,i.line_item_id=r.lineItemId)}n.size&&n.size.length&&(i.
creative_size=n.size.join("x"))}return i}function F(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};He||(He=jt.get("listeners.slot").filter(function(t){return!t.isEnabled||t.isEnabled()}));var i=D(n);He.forEach(function(n){"function"==typeof n[t]&&n[t](e,i)}),u(We,t,e,n,i)}function z(t){var e=o(t.element);e!==t.inViewport&&(t.callback(e),t.inViewport=e)}function U(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={element:t,callback:e,offsetTop:n.offsetTop||0,offsetBottom:n.offsetBottom||0,inViewport:!1},r=function(){z(i)};return i.id=Ue.addCallback(r),r(),i.id}function W(t){Ue.removeCallback(t)}function H(){function t(t,n){"function"==typeof n?e.setTargeting(t,n()):e.setTargeting(t,n)}var e=window.googletag.pubads(),n=jt.get("targeting");Mt()(n).forEach(function(e){t(e,n[e])}),jt.onChange("targeting",function(e,n){var i=e.split(".");t(i[i.length-1],n)})}function G(){var t=window.googletag.pubads();t.enableSingleRequest(),t.disableInitialLoad()
,t.addEventListener("slotRenderEnded",function(t){var e=t.slot.getSlotElementId(),n=Ft.get(e);setTimeout(function(){qe.emitRenderEnded(t,n)},0)}),t.addEventListener("impressionViewable",function(t){var e=t.slot.getSlotElementId(),n=Ft.get(e);qe.emitImpressionViewable(t,n)}),window.googletag.enableServices()}function q(t,e){var n=new ve(t);n.shouldLoad()&&(Ft.add(n),Wt.push(n,e.fillIn.bind(e)))}Object.defineProperty(e,"__esModule",{value:!0});var K={};n.d(K,"client",function(){return ft}),n.d(K,"getTopOffset",function(){return r}),n.d(K,"isInViewport",function(){return o}),n.d(K,"wait",function(){return mt}),n.d(K,"defer",function(){return bt}),n.d(K,"once",function(){return a}),n.d(K,"makeLazyQueue",function(){return s}),n.d(K,"logger",function(){return u}),n.d(K,"queryString",function(){return kt}),n.d(K,"sampler",function(){return Lt}),n.d(K,"scriptLoader",function(){return Tt}),n.d(K,"stringBuilder",function(){return se}),n.d(K,"whichProperty",function(){return _}),n.d(K,
"tryProperty",function(){return w}),n.d(K,"viewportObserver",function(){return Ke});var Y=n(7),J=n.n(Y),$=n(8),Q=n.n($),Z=n(0),X=n.n(Z),tt=n(1),et=n.n(tt),nt=n(9),it=n.n(nt),rt=n(10),ot=n.n(rt),at=null,st=null,ut=null,ct=null,lt=function(){function t(){X()(this,t)}return et()(t,[{key:"isSmartphone",value:function(){return i().phone}},{key:"isTablet",value:function(){return i().tablet}},{key:"isDesktop",value:function(){return!this.isSmartphone()&&!this.isTablet()}},{key:"checkBlocking",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===at){if(void 0===ot.a||"undefined"==typeof BlockAdBlock)return void(null!==t&&t());at=new BlockAdBlock({checkOnLoad:!1,resetOnEnd:!0,loopCheckTime:50,loopMaxNumber:5})}null!==t&&at.onDetected(t),null!==e&&at.onNotDetected(e),at.check(!0)}},{key:"getDeviceType",value:function(){return this.isTablet()?"tablet":this.isSmartphone()?"smartphone":"desktop"}},
{key:"getOperatingSystem",value:function(){if(null!==ct)return ct;var t=window.navigator.userAgent;return ct="unknown",-1!==t.indexOf("Win")&&(ct="Windows"),-1!==t.indexOf("Mac")&&(ct="OSX"),-1!==t.indexOf("Linux")&&(ct="Linux"),-1!==t.indexOf("Android")&&(ct="Android"),-1!==t.indexOf("like Mac")&&(ct="iOS"),ct}},{key:"getBrowser",value:function(){if(null!==st)return st;var t=window.navigator.appName,e=window.navigator.appVersion,n=window.navigator.userAgent,i=void 0,r=n.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(r[1])?(i=/\brv[ :]+(\d+)/g.exec(n)||[],st="IE "+(i[1]||"")):"Chrome"===r[1]&&null!==(i=n.match(/\b(OPR|Edge)\/(\d+)/))?st=i.slice(1).join(" ").replace("OPR","Opera"):(r=r[2]?[r[1],r[2]]:[t,e,"-?"],i=n.match(/version\/(\d+)/i),null!==i&&r.splice(1,1,i[1]),st=r.join(" "))}}]),t}(),ft=new lt,dt=n(3),pt=n.n(dt),ht=n(11),vt=n.n(ht),gt=n(4),yt=n.n(gt),mt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;
return new yt.a(function(e,n){if("number"!=typeof t)return void n("Delay value must be a number.");setTimeout(e,t)})},bt=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return new yt.a(function(e,i){if("function"!=typeof t)return void i("Expected a function.");setTimeout(function(){return e(t.apply(void 0,n))},0)})},_t=n(12),wt=n.n(_t),St=function(){function t(){X()(this,t)}return et()(t,[{key:"getValues",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=t||window.location.search.substr(1),n={},i=e.split("&");return""===i?null:(i.forEach(function(t){var e=t.split("="),i=wt()(e,2),r=i[0],o=i[1];o&&(n[r]=decodeURIComponent(o.replace(/\+/g," ")))}),n)}},{key:"get",value:function(t){return this.getValues()[t]}}]),t}(),kt=new St,Et=kt.get("adengine_debug")||"",xt=Et.split(",");""!==Et&&window.console.info("AdEngine debug mode - groups:","1"===Et?"all":xt);var At=function(){function t(){X()(this,t)}return et()(t,[{
key:"sample",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return!!c(t)||l(0,n)<e}}]),t}(),Lt=new At,Ot=function(){function t(){X()(this,t)}return et()(t,[{key:"createScript",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text/javascript",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=document.createElement("script");return i=i||document.body.lastChild,r.async=n,r.type=e,r.src=t,i.parentNode.insertBefore(r,i),r}},{key:"loadScript",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text/javascript",n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new yt.a(function(o,a){var s=n.createScript(t,e,i,r);s.onload=o,s.onerror=a})}}]),t}(),Tt=new Ot,Pt=n(2),Mt=n.n(Pt),It={adUnitId:"",events:{},listeners:{porvata:[],slot:[]},options:
{customAdLoader:{globalMethodName:"loadCustomAd"},video:{moatTracking:{enabled:!0,partnerCode:"wikiaimajsint377461931603",sampling:1}}},slots:{},src:"gpt",state:{adStack:[],isMobile:!1},targeting:{},vast:{size:[640,480],adUnitId:""}},Ct={},Rt=function(){function t(){X()(this,t),this.__useDefault=!0}return et()(t,[{key:"extend",value:function(t){pt()(It,t)}},{key:"set",value:function(t,e){p(t,e)}},{key:"get",value:function(t){return p(t)}},{key:"push",value:function(t,e){var n=p(t);n&&n.push(e)}},{key:"onChange",value:function(t,e){Ct[t]=Ct[t]||[],Ct[t].push(e)}}]),t}(),jt=new Rt,Nt={},Bt={},Vt={},Dt=function(){function t(){X()(this,t)}return et()(t,[{key:"add",value:function(t){var e=t.getSlotName();Bt[t.getId()]=t,Nt[e]=t.getId(),!1===Vt[e]&&t.disable(),!0===Vt[e]&&t.enable()}},{key:"get",value:function(t){return Bt[t]}},{key:"getBySlotName",value:function(t){var e=Nt[t];return this.get(e)}},{key:"forEach",value:function(t){Mt()(Bt).forEach(function(e){t(Bt[e])})}},{key:"enable",value
:function(t){h(t,!0)}},{key:"disable",value:function(t){h(t,!1)}}]),t}(),Ft=new Dt,zt="btf-blocker",Ut=function(){function t(){X()(this,t),this.slotsQueue=[],this.atfEnded=!1,this.unblockedSlots=[]}return et()(t,[{key:"init",value:function(){var t=this;s(this.slotsQueue,function(t){var e=t.adSlot,n=t.fillInCallback;u(zt,e.getId(),"Filling delayed BTF slot"),n(e)}),jt.push("listeners.slot",{onRenderEnded:function(e){u(zt,e.getId(),"Slot rendered"),!t.atfEnded&&e.isAboveTheFold()&&v.bind(t)()}})}},{key:"push",value:function(t,e){return this.atfEnded||t.isAboveTheFold()?this.atfEnded&&!t.isEnabled()?void u(zt,t.getId(),"BTF slot blocked"):(u(zt,t.getId(),"Filling in slot"),void e(t)):(this.slotsQueue.push({adSlot:t,fillInCallback:e}),void u(zt,t.getId(),"BTF slot pushed to queue"))}},{key:"unblock",value:function(t){u(zt,t,"Unblocking slot"),this.unblockedSlots.push(t),Ft.enable(t)}}]),t}(),Wt=new Ut,Ht={},Gt=function(){function t(){X()(this,t)}return et()(t,[{key:"register",value:
function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("function"!=typeof t.getName)throw new Error("Template does not implement getName method.");var n=t.getName(),i={};"function"==typeof t.getDefaultConfig&&(i=t.getDefaultConfig()),e&&(i=pt()(i,e)),jt.set("templates."+n,i),Ht[n]=t}},{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(u("template-service","Load template",t,e,n),!Ht[t])throw new Error("Template "+t+" does not exist.");return new Ht[t](e).init(n)}}]),t}(),qt=new Gt,Kt=n(5),Yt=n.n(Kt),Jt=void 0,$t=function(){function t(){X()(this,t)}return et()(t,[{key:"canUseStorage",value:function(){if(void 0===Jt&&(Jt=!1,window.localStorage))try{window.localStorage.setItem("test","1"),window.localStorage.removeItem("test"),Jt=!0}catch(e){try{t.createPolyfill(),Jt=!0}catch(t){u("local-cache","Local Storage polyfill error: ",t)}}return Jt}},{key:
"createPolyfill",value:function(){u("local-cache","Local Storage polyfill being created"),Storage.prototype.data={},Storage.prototype.setItem=function(t,e){this.data[t]=String(e)},Storage.prototype.getItem=function(t){return this.data[t]?this.data[t]:null},Storage.prototype.removeItem=function(t){delete this.data[t]},Storage.prototype.clear=function(){this.data={}}}},{key:"get",value:function(t){if(!this.canUseStorage())return!1;var e=window.localStorage.getItem(t);return!!e&&(e=JSON.parse(e),this.isExpired(e)?(this.delete(t),!1):e.data)}},{key:"set",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!this.canUseStorage()||!this.isStorable(e))return!1;var i={data:e},r=parseInt(n,10);isNaN(r)||(i.expires=1e3*r+Date.now());try{window.localStorage.setItem(t,Yt()(i))}catch(t){return!1}return!0}},{key:"delete",value:function(t){this.canUseStorage()&&window.localStorage.removeItem(t)}},{key:"isStorable",value:function(t){return!("function"==typeof t||
"number"==typeof t&&isNaN(t)||void 0===t)}},{key:"isExpired",value:function(t){return t.expires&&Date.now()>=parseInt(t.expires,10)}}]),t}(),Qt=new $t,Zt=[],Xt="message-bus",te=function(){function t(){X()(this,t)}return et()(t,[{key:"init",value:function(){u(Xt,"Register message listener"),window.addEventListener("message",b)}},{key:"register",value:function(t,e){Zt.push({match:t,fn:e})}}]),t}(),ee=new te,ne=function(){function t(){X()(this,t)}return et()(t,[{key:"forceRepaint",value:function(t){return t.offsetWidth}},{key:"getContainer",value:function(t){var e=document.getElementById(t.getId());return e||u("slot-tweaker","cannot find container",t.getId()),e}},{key:"hide",value:function(t){var e=this.getContainer(t);e&&(u("slot-tweaker","hide",t.getId()),e.classList.add("hide"))}},{key:"show",value:function(t){var e=this.getContainer(t);e&&(u("slot-tweaker","show",t.getId()),e.classList.remove("hide"))}},{key:"collapse",value:function(t){var e=this.getContainer(t);e.style.maxHeight=e.
scrollHeight+"px",this.forceRepaint(e),e.classList.add("slot-animation"),e.style.maxHeight="0"}},{key:"expand",value:function(t){var e=this.getContainer(t);e.style.maxHeight=e.offsetHeight+"px",e.classList.remove("hide"),e.classList.add("slot-animation"),e.style.maxHeight=e.scrollHeight+"px"}},{key:"makeResponsive",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.getContainer(t).classList.add("slot-responsive"),this.onReady(t).then(function(n){var i=n.parentElement;if(!e){var r=n.contentWindow.document.body.scrollHeight,o=n.contentWindow.document.body.scrollWidth;e=o/r}return u("slot-tweaker","make responsive",t.getId()),i.style.paddingBottom=100/e+"%",n})}},{key:"onReady",value:function(t){var e=this.getContainer(t),n=e.querySelector('div[id*="_container_"] iframe');return new yt.a(function(t,e){n||e("Cannot find iframe element"),"complete"===n.contentWindow.document.readyState?t(n):n.addEventListener("load",function(){return t(n)})})}},{
key:"registerMessageListener",value:function(){var t=this;ee.register({keys:["action","slotName"],infinite:!0},function(e){if(!e.slotName)return void u("slot-tweaker","Missing slot name");var n=Ft.getBySlotName(e.slotName);switch(e.action){case"expand":t.expand(n);break;case"collapse":t.collapse(n);break;case"hide":t.hide(n);break;case"show":t.show(n);break;case"make-responsive":t.makeResponsive(n,e.aspectRatio);break;default:u("slot-tweaker","Unknown action",e.action)}})}},{key:"setDataParam",value:function(t,e,n){this.getContainer(t).dataset[e]="string"==typeof n?n:Yt()(n)}}]),t}(),ie=new ne,re=function(){function t(){X()(this,t)}return et()(t,[{key:"getSlotSizes",value:function(t){var e={};return t.getSizes().forEach(function(t){e[t.viewportSize[0]+"x"+t.viewportSize[1]]=t.sizes}),Yt()(e)}},{key:"updateOnCreate",value:function(t,e){ie.setDataParam(t,"gptPageParams",jt.get("targeting")),ie.setDataParam(t,"gptSlotParams",e),ie.setDataParam(t,"sizes",this.getSlotSizes(t))}},{key:
"updateOnRenderEnd",value:function(t,e){ie.setDataParam(t,"gptLineItemId",e.lineItemId),ie.setDataParam(t,"gptCreativeId",e.creativeId),ie.setDataParam(t,"gptCreativeSize",e.size)}}]),t}(),oe=new re,ae=function(){function t(){X()(this,t)}return et()(t,[{key:"build",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.match(/{(.+?)}/g);return n&&n.forEach(function(n){var i=n.replace("{","").replace("}",""),r=jt.get(i),o=i.split("."),a=void 0,s=void 0,u=e[o[0]];if(u)for(a=1;a<o.length;a+=1){if(s=o[a],void 0===u[s]){u=void 0;break}u=u[s]}void 0===u&&(u=r),void 0!==u&&(t=t.replace(n,u))}),t}}]),t}(),se=new ae,ue=n(13),ce=n.n(ue),le=n(14),fe=n.n(le),de=n(15),pe=n.n(de),he=n(16),ve=function(t){function e(t){X()(this,e);var n=fe()(this,(e.__proto__||ce()(e)).call(this)),i=t.id.split("-");if(i.length<3)throw new Error("Invalid GPT id passed to parseId ("+t.id+").");return n.id=t.id,n.location=i[1],n.screenSize=i[3]?i[3]:"both",n.type=i[2],n.config=jt.get(
"slots."+n.location+"-"+n.type)||{},n.enabled=!n.config.disabled,n.viewed=!1,n.element=null,n.config.targeting=n.config.targeting||{},n.config.targeting.src=n.config.targeting.src||jt.get("src"),n.config.targeting.pos=n.config.targeting.pos||n.getSlotName(),n.once(e.SLOT_VIEWED_EVENT,function(){n.viewed=!0}),n}return pe()(e,t),et()(e,[{key:"getId",value:function(){return this.id}},{key:"getAdUnit",value:function(){return this.adUnit||(this.adUnit=se.build(this.config.adUnit||jt.get("adUnitId"),{slotConfig:this.config})),this.adUnit}},{key:"getVideoAdUnit",value:function(){return se.build(this.config.videoAdUnit||jt.get("vast.adUnitId"),{slotConfig:this.config})}},{key:"getElement",value:function(){return this.element||(this.element=document.getElementById(this.id)),this.element}},{key:"getSlotName",value:function(){return this.config.slotName}},{key:"getSizes",value:function(){return this.config.sizes}},{key:"getTargeting",value:function(){return this.config.targeting}},{key:
"getDefaultSizes",value:function(){return this.config.defaultSizes}},{key:"shouldLoad",value:function(){var t=jt.get("state.isMobile"),e="both"===this.screenSize,n=!t&&"desktop"===this.screenSize,i=t&&"mobile"===this.screenSize;return e||n||i}},{key:"isAboveTheFold",value:function(){return!!this.config.aboveTheFold}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isViewed",value:function(){return this.viewed}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"setConfigProperty",value:function(t,e){jt.set("slots."+this.location+"-"+this.type+"."+t,e)}},{key:"success",value:function(){ie.show(this),ie.setDataParam(this,"slotResult","success"),this.config.defaultTemplate&&qt.init(this.config.defaultTemplate,this)}},{key:"collapse",value:function(){ie.hide(this),ie.setDataParam(this,"slotResult","collapse")}}]),e}(he.EventEmitter);ve.PROPERTY_CHANGED_EVENT="propertyChanged",ve.SLOT_VIEWED_EVENT="slotViewed",ve.
VIDEO_VIEWED_EVENT="videoViewed";var ge=function(){function t(){X()(this,t)}return et()(t,[{key:"getAdInfo",value:function(t){var e={},n=void 0,i=void 0;return t&&(e.lineItemId=t.getAdId(),e.creativeId=t.getCreativeId(),e.contentType=t.getContentType(),i=t.getWrapperAdIds(),i&&i.length&&(e.lineItemId=i[0]),(n=t.getWrapperCreativeIds())&&n.length&&(e.creativeId=n[0])),e}},{key:"parse",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getAdInfo(e.imaAd),i=kt.getValues(t.substr(1+t.indexOf("?"))),r=kt.getValues(encodeURI(i.cust_params));return{contentType:n.contentType||e.contentType,creativeId:n.creativeId||e.creativeId,customParams:r,lineItemId:n.lineItemId||e.lineItemId,position:i.vpos,size:i.sz}}}]),t}(),ye=new ge,me=function(){function t(){X()(this,t)}return et()(t,[{key:"setVastAttributes",value:function(t,e,n,i){var r=ye.parse(e,{imaAd:i});S(t,"data-vast-content-type",r.contentType),S(t,"data-vast-creative-id",r.creativeId),S(t,
"data-vast-line-item-id",r.lineItemId),S(t,"data-vast-position",r.position),S(t,"data-vast-size",r.size),S(t,"data-vast-status",n),S(t,"data-vast-params",Yt()(r.customParams))}}]),t}(),be=new me,_e=["preroll","midroll","postroll"],we="https://pubads.g.doubleclick.net/gampad/ads?",Se=Math.round(1e10*Math.random()),ke="google-ima-setup",Ee={createRequest:L,getRenderingSettings:O},xe={},Ae=[],Le={},Oe=function(){function t(){X()(this,t)}return et()(t,[{key:"init",value:function(t,e,n,i,r){var o={partnerCode:jt.get("options.video.moatTracking.partnerCode"),viewMode:n,slicer1:i,slicer2:r};try{T(t,o,e),u("moat-video-tracker","MOAT video tracking initialized")}catch(t){u("moat-video-tracker","MOAT video tracking initalization error",t)}}}]),t}(),Te=new Oe,Pe=function(){function t(e,n,i){X()(this,t),this.isAdsManagerLoaded=!1,this.status="",this.adDisplayContainer=e,this.adsLoader=n,this.adsManager=null,this.params=i,this.mobileVideoAd=i.container.querySelector("video"),this.eventListeners={},
this.vastUrl=""}return et()(t,[{key:"setVastUrl",value:function(t){this.vastUrl=t}},{key:"setAdsManager",value:function(t){this.adsManager=t,this.isAdsManagerLoaded=!0}},{key:"addEventListener",value:function(t,e){var n=this;if(-1!==t.indexOf("wikia"))return this.eventListeners[t]=this.eventListeners[t]||[],void this.eventListeners[t].push(e);this.isAdsManagerLoaded?this.adsManager.addEventListener(t,e):this.adsLoader.addEventListener("adsManagerLoaded",function(){n.adsManager.addEventListener(t,e)})}},{key:"setVastAttributes",value:function(t){var e=this.adsManager&&this.adsManager.getCurrentAd&&this.adsManager.getCurrentAd(),n=this.params.container.querySelector(".video-player");be.setVastAttributes(n,this.vastUrl,t,e)}},{key:"setAutoPlay",value:function(t){this.mobileVideoAd&&(this.mobileVideoAd.autoplay=t,this.mobileVideoAd.muted=t),this.params.autoPlay=t}},{key:"playVideo",value:function(t,e){var n=this,i=function i(){n.dispatchEvent("wikiaAdPlayTriggered"),n.adDisplayContainer.
initialize(),n.adsManager.init(Math.round(t),Math.round(e),window.google.ima.ViewMode.NORMAL),n.adsManager.start(),n.adsLoader.removeEventListener("adsManagerLoaded",i)};this.isAdsManagerLoaded?i():(this.setAutoPlay(!0),this.adsLoader.addEventListener("adsManagerLoaded",i,!1))}},{key:"reload",value:function(){var t=Ee.createRequest(this.params);this.adsManager.destroy(),this.adsLoader.contentComplete(),this.setVastUrl(t.adTagUrl),this.adsLoader.requestAds(t)}},{key:"resize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=window.google.ima.ViewMode;this.adsManager&&this.adsManager.resize(Math.round(t),Math.round(e),n?i.FULLSCREEN:i.NORMAL)}},{key:"dispatchEvent",value:function(t){this.eventListeners[t]&&this.eventListeners[t].length>0&&this.eventListeners[t].forEach(function(t){t({})})}},{key:"setStatus",value:function(t){var e=this;return function(){e.status=t}}},{key:"getStatus",value:function(){return this.status}},{key:"getAdsManager",value:
function(){return this.adsManager}}]),t}(),Me={create:function(t,e,n){var i=Ee.createRequest(n.getParams()),r=new Pe(t,e,n.getParams()),o=P();return r.mobileVideoAd&&n.getContainer().classList.add("mobile-porvata"),e.addEventListener("adsManagerLoaded",function(t){var e=Ee.getRenderingSettings(n),i=t.getAdsManager(o,e);r.setAdsManager(i),n.isMoatTrackingEnabled()&&Te.init(i,n.getContainer(),window.google.ima.ViewMode.NORMAL,n.get("src"),n.get("adProduct")+"/"+n.get("slotName")),r.dispatchEvent("wikiaAdsManagerLoaded"),i.addEventListener("loaded",function(){return r.setVastAttributes("success")}),i.addEventListener("adError",function(){return r.setVastAttributes("error")})},!1),e.addEventListener("adError",function(){return r.setVastAttributes("error")}),r.setVastUrl(i.adTagUrl),e.requestAds(i),n.get("autoPlay")&&r.setAutoPlay(!0),r.addEventListener("resume",r.setStatus("playing")),r.addEventListener("start",r.setStatus("playing")),r.addEventListener("pause",r.setStatus("paused")),r.
addEventListener("wikiaAdStop",r.setStatus("stopped")),r.addEventListener("allAdsCompleted",r.setStatus("stopped")),r}},Ie="//imasdk.googleapis.com/js/sdkloader/ima3.js",Ce={load:M,getPlayer:I},Re=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};X()(this,t),this.params=e,this.moatTracking=C(e)}return et()(t,[{key:"get",value:function(t){return this.params[t]}},{key:"getContainer",value:function(){return this.get("container")}},{key:"getParams",value:function(){return this.params}},{key:"isMoatTrackingEnabled",value:function(){return this.moatTracking}}]),t}(),je=function(t){var e=t.container.querySelector("div");return e.classList.add("video-player"),e.classList.add("hide"),e},Ne=function(t){var e=w(t,["webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","requestFullscreen"]),n=w(document,["webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","exitFullscreen"]),i=(_(document,["onwebkitfullscreenchange",
"onmozfullscreenchange","MSFullscreenChange","onfullscreenchange"])||"").replace(/^on/,"");return{enter:e,exit:n,addChangeListener:function(){for(var t,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=document).addEventListener.apply(t,[i].concat(n))},removeChangeListener:function(){for(var t,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=document).removeEventListener.apply(t,[i].concat(n))},isSupported:function(){return Boolean(e&&n)}}},Be=function(){function t(e,n){var i=this;X()(this,t),this.ima=e,this.container=je(n),this.mobileVideoAd=n.container.querySelector("video"),this.params=n;var r=Ne(this.container);this.fullscreen=Boolean(n.isFullscreen),this.nativeFullscreen=r,this.width=n.width,this.height=n.height,this.muteProtect=!1,r.isSupported()&&r.addChangeListener(function(){return i.onFullscreenChange()})}return et()(t,[{key:"addEventListener",value:function(t,e){this.ima.addEventListener(t,e)}},{key:"getRemainingTime",value:function(){
return this.ima.getAdsManager().getRemainingTime()}},{key:"isFullscreen",value:function(){return this.fullscreen}},{key:"isMuted",value:function(){return 0===this.ima.getAdsManager().getVolume()}},{key:"isMobilePlayerMuted",value:function(){var t=this.container.querySelector("video");return t&&t.autoplay&&t.muted}},{key:"isPaused",value:function(){return"paused"===this.ima.getStatus()}},{key:"isPlaying",value:function(){return"playing"===this.ima.getStatus()}},{key:"pause",value:function(){this.ima.getAdsManager().pause()}},{key:"play",value:function(t,e){void 0!==t&&void 0!==e&&(this.width=t,this.height=e),this.width&&this.height&&!this.isFullscreen()||(this.width=this.params.container.offsetWidth,this.height=this.params.container.offsetHeight),this.ima.playVideo(this.width,this.height)}},{key:"reload",value:function(){this.ima.reload()}},{key:"resize",value:function(t,e){isFinite(t)&&isFinite(e)&&(this.width=t,this.height=e),this.isFullscreen()?this.ima.resize(window.innerWidth,
window.innerHeight,!0):this.ima.resize(this.width,this.height,!1)}},{key:"resume",value:function(){this.ima.getAdsManager().resume()}},{key:"rewind",value:function(){this.params.autoPlay=!1,this.ima.setAutoPlay(!1),this.ima.dispatchEvent("wikiaAdRestart"),this.play()}},{key:"setVolume",value:function(t){this.updateVideoDOMElement(t),this.ima.getAdsManager().setVolume(t),this.ima.dispatchEvent("wikiaVolumeChange")}},{key:"toggleFullscreen",value:function(){var t=this.isFullscreen(),e=this.nativeFullscreen;if(this.muteProtect=!0,e.isSupported()){(t?e.exit:e.enter)()}else this.onFullscreenChange()}},{key:"onFullscreenChange",value:function(){this.fullscreen=!this.fullscreen,this.isFullscreen()?(this.container.classList.add("video-player-fullscreen"),document.documentElement.classList.add("stop-scrolling")):(this.container.classList.remove("video-player-fullscreen"),document.documentElement.classList.remove("stop-scrolling"),this.muteProtect?this.muteProtect=!1:this.isPlaying()&&!this.
isMuted()&&this.mute()),this.resize(),this.ima.dispatchEvent("wikiaFullscreenChange")}},{key:"updateVideoDOMElement",value:function(t){this.mobileVideoAd&&(this.mobileVideoAd.muted=0===t)}},{key:"mute",value:function(){this.setVolume(0)}},{key:"unmute",value:function(){this.setVolume(.75),this.params.autoPlay&&this.params.restartOnUnmute&&this.rewind()}},{key:"volumeToggle",value:function(){this.isMuted()?(this.unmute(),this.ima.dispatchEvent("wikiaAdUnmute")):(this.mute(),this.ima.dispatchEvent("wikiaAdMute"))}},{key:"stop",value:function(){this.ima.getAdsManager().stop(),this.ima.dispatchEvent("wikiaAdStop")}}]),t}(),Ve=function(){function t(){X()(this,t)}return et()(t,null,[{key:"addOnViewportChangeListener",value:function(t,e){return Ke.addListener(t.container,e,{offsetTop:t.viewportOffsetTop||0,offsetBottom:t.viewportOffsetBottom||0})}},{key:"inject",value:function(e){function n(t){t.addEventListener("loaded",function(){r&&t.mute()})}var i=new De({adProduct:e.adProduct,position:e.
slotName,src:e.src,withAudio:!e.autoPlay}),r=!0,o=!1,a=!1,s=null;e.vastTargeting=e.vastTargeting||{passback:"porvata"};var u=new Re(e);return i.init(),Ce.load().then(function(){return Ce.getPlayer(u)}).then(function(t){return new Be(t,e)}).then(function(u){function c(t){t&&!a&&e.autoPlay?(u.play(),a=!0):t&&o?u.resume():t||!u.isPlaying()||e.blockOutOfViewportPausing||(u.pause(),o=!0)}function l(){e.blockOutOfViewportPausing?e.autoPlay&&!a&&(a=!0,u.play()):s=t.addOnViewportChangeListener(e,c)}return i.registerVideoEvents(u),u.addEventListener("adCanPlay",function(){u.ima.dispatchEvent("wikiaAdStarted")}),u.addEventListener("allAdsCompleted",function(){u.isFullscreen()&&u.toggleFullscreen(),u.ima.setAutoPlay(!1),u.ima.dispatchEvent("wikiaAdCompleted"),s&&(Ke.removeListener(s),s=null),r=!1,i.params.withAudio=!0}),u.addEventListener("wikiaAdRestart",function(){r=!1}),u.addEventListener("start",function(){u.ima.dispatchEvent("wikiaAdPlay"),s||a||l()}),u.addEventListener("resume",function(){u
.ima.dispatchEvent("wikiaAdPlay"),o=!1}),u.addEventListener("pause",function(){u.ima.dispatchEvent("wikiaAdPause")}),e.autoPlay&&n(u),e.onReady&&e.onReady(u),u.addEventListener("wikiaAdsManagerLoaded",function(){l()}),u})}}]),t}(),De=function(){function t(e){X()(this,t),this.params=e,this.listeners=R().filter(function(t){return!t.isEnabled||t.isEnabled()}),this.logger=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return u.apply(void 0,[t.LOG_GROUP].concat(n))}}return et()(t,[{key:"init",value:function(){this.dispatch("init")}},{key:"registerVideoEvents",value:function(e){var n=this;this.video=e,this.dispatch("ready"),Mt()(t.EVENTS).forEach(function(i){e.addEventListener(i,function(e){var r=e.getError&&e.getError().getErrorCode();n.dispatch(t.EVENTS[i],r)})})}},{key:"dispatch",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.getData(e,i);if(this.logger(e,r),this.listeners.forEach(function(t){t.onEvent(e,n.
params,r)}),this.params.position&&e===t.EVENTS.viewable_impression){Ft.getBySlotName(this.params.position).emit(ve.VIDEO_VIEWED_EVENT)}}},{key:"getData",value:function(e,n){var i=this.video&&this.video.ima.getAdsManager()&&this.video.ima.getAdsManager().getCurrentAd(),r=ye.getAdInfo(i),o=r.contentType,a=r.creativeId,s=r.lineItemId;return{ad_error_code:n,ad_product:this.params.adProduct,browser:ft.getOperatingSystem()+" "+ft.getBrowser(),content_type:o||"(none)",creative_id:a||0,event_name:e,line_item_id:s||0,player:t.PLAYER_NAME,position:this.params.position||"(none)",timestamp:(new Date).getTime(),audio:this.params.withAudio?1:0}}}]),t}();De.EVENTS={adCanPlay:"ad_can_play",complete:"completed",click:"clicked",firstquartile:"first_quartile",impression:"impression",loaded:"loaded",midpoint:"midpoint",pause:"paused",resume:"resumed",start:"started",thirdquartile:"third_quartile",viewable_impression:"viewable_impression",adError:"error",wikiaAdPlayTriggered:"play_triggered",wikiaAdStop:
"closed",wikiaAdMute:"mute",wikiaAdUnmute:"unmute"},De.LOG_GROUP="porvata-listener",De.PLAYER_NAME="porvata";var Fe={},ze=function(){function t(){X()(this,t)}return et()(t,[{key:"init",value:function(){var t=!1;document.addEventListener("scroll",function(e){t||(window.requestAnimationFrame(function(){t=!1,Mt()(Fe).forEach(function(t){"function"==typeof Fe[t]&&Fe[t](e,t)})}),t=!0)})}},{key:"addSlot",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=document.getElementById(e);o&&this.addCallback(function(e,a){var s=window.scrollY||window.pageYOffset||document.documentElement.scrollTop,u=r(o);s+Math.max(document.documentElement.clientHeight,window.innerHeight||0)>u-i&&(n.removeCallback(a),N(t,o))})}},{key:"addCallback",value:function(t){var e=j();return Fe[e]=t,e}},{key:"removeCallback",value:function(t){delete Fe[t]}}]),t}(),Ue=new ze,We="slot-listener",He=null,Ge=function(){function t(){X()(this,t)}return et()(t,[{key:"emitRenderEnded",value:
function(t,e){var n=V(t,e);switch(n){case"collapse":e.collapse();break;default:e.success()}F("onRenderEnded",e,{adType:n,event:t}),oe.updateOnRenderEnd(e,t)}},{key:"emitImpressionViewable",value:function(t,e){e.emit(ve.SLOT_VIEWED_EVENT),F("onImpressionViewable",e,{event:t}),ie.setDataParam(e,"slotViewed",!0)}}]),t}(),qe=new Ge,Ke={addListener:U,removeListener:W},Ye=function(){function t(e){X()(this,t),this.adSlot=e}return et()(t,null,[{key:"getName",value:function(){return"floating-ad"}}]),et()(t,[{key:"init",value:function(){var t=document.getElementById(this.adSlot.getId()),e=void 0,n=void 0,i=void 0,o=void 0,a=void 0,s=0;t&&t.classList.contains("floating")&&Ue.addCallback(function(){var u=window.scrollY||window.pageYOffset||document.documentElement.scrollTop;if(e=t.parentNode,n=r(e),o=t.offsetHeight,i=n+e.offsetHeight-o,s=n,t.previousElementSibling&&(s=r(t.previousElementSibling)+t.previousElementSibling.offsetHeight),(a=i-s)<=o)return t.classList.add("pinned-top"),void t.classList
.remove("pinned-bottom");u<=s?(t.classList.add("pinned-top"),t.classList.remove("pinned-bottom")):u>=i?(t.classList.add("pinned-bottom"),t.classList.remove("pinned-top")):(t.classList.remove("pinned-top"),t.classList.remove("pinned-bottom"))})}}]),t}(),Je=[],$e=!1,Qe=function(){function t(){var e=this;X()(this,t),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){e.init()})}return et()(t,[{key:"init",value:function(){$e||(H(),G(),$e=!0)}},{key:"fillIn",value:function(t){var e=this;window.googletag.cmd.push(function(){var n=window.googletag.sizeMapping(),i=e.parseTargetingParams(t.getTargeting());t.getSizes().forEach(function(t){n.addSize(t.viewportSize,t.sizes)});var r=window.googletag.defineSlot(t.getAdUnit(),t.getDefaultSizes(),t.getId()).addService(window.googletag.pubads()).setCollapseEmptyDiv(!0).defineSizeMapping(n.build());e.applyTargetingParams(r,i),oe.updateOnCreate(t,i),window.googletag.display(t.getId()),
Je.push(r),t.isAboveTheFold()||e.flush(),u("gpt-provider",t.getId(),"slot added")})}},{key:"applyTargetingParams",value:function(t,e){Mt()(e).forEach(function(n){return t.setTargeting(n,e[n])})}},{key:"parseTargetingParams",value:function(t){var e={};return Mt()(t).forEach(function(n){var i=t[n];"function"==typeof i&&(i=i()),e[n]=i}),e}},{key:"flush",value:function(){window.googletag.cmd.push(function(){Je.length&&(window.googletag.pubads().refresh(Je),Je=[])})}}]),t}(),Ze=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;X()(this,t),jt.extend(e),this.adStack=jt.get("state.adStack"),window.ads=window.ads||{},window.ads.runtime=window.ads.runtime||{},qt.register(Ye)}return et()(t,[{key:"init",value:function(){var t=this,e=new Qe;Wt.init(),s(this.adStack,function(n){q(n,e),0===t.adStack.length&&e.flush()}),g(jt.get("options.customAdLoader.globalMethodName")),ee.init(),ie.registerMessageListener(),this.adStack.start(),Ue.init(),jt.get(
"events.pushOnScroll")&&jt.get("events.pushOnScroll.ids").forEach(function(e){Ue.addSlot(t.adStack,e,jt.get("events.pushOnScroll.threshold"))})}}]),t}();n.d(e,"AdEngine",function(){return Ze}),n.d(e,"PorvataListener",function(){return De}),n.d(e,"scrollListener",function(){return Ue}),n.d(e,"slotListener",function(){return qe}),n.d(e,"AdSlot",function(){return ve}),n.d(e,"GptProvider",function(){return Qe}),n.d(e,"setupGptTargeting",function(){return H}),n.d(e,"btfBlockerService",function(){return Wt}),n.d(e,"context",function(){return jt}),n.d(e,"registerCustomAdLoader",function(){return g}),n.d(e,"localCache",function(){return Qt}),n.d(e,"messageBus",function(){return ee}),n.d(e,"slotDataParamsUpdater",function(){return oe}),n.d(e,"slotService",function(){return Ft}),n.d(e,"slotTweaker",function(){return ie}),n.d(e,"templateService",function(){return qt}),n.d(e,"vastDebugger",function(){return be}),n.d(e,"vastParser",function(){return ye}),n.d(e,"buildVastUrl",function(){return x}),n
.d(e,"PorvataPlayer",function(){return Be}),n.d(e,"Porvata",function(){return Ve}),n.d(e,"VideoSettings",function(){return Re}),n.d(e,"moatVideoTracker",function(){return Te}),n.d(e,"googleImaPlayerFactory",function(){return Me}),n.d(e,"utils",function(){return K});Q()(window,"ads.adEngineVersion",null)&&window.console.warn("Multiple @wikia/ad-engine initializations. This may cause issues."),J()(window,"ads.adEngineVersion","v9.7.2")},function(t,e){t.exports=n(85)},function(t,e){t.exports=n(63)},function(t,e){t.exports=n(170)},function(t,e){t.exports=n(171)},function(t,e){t.exports=n(64)},function(t,e){t.exports=n(183)},function(t,e){t.exports=n(190)},function(t,e){t.exports=n(193)},function(t,e){t.exports=n(194)},function(t,e){t.exports=n(49)}])},function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,
e,n){var i=n(6),r=n(29);t.exports=n(8)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){function i(t,e){var n=o(t,e);return r(n)?n:void 0}var r=n(140),o=n(146);t.exports=i},function(t,e,n){var i=n(71),r=n(41);t.exports=function(t){return i(r(t))}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){t.exports={default:n(110),__esModule:!0}},function(t,e){t.exports={}},function(t,e,n){t.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=75)}([function(t,e){var n=t.exports={version:"2.5.1"};"number"==
typeof __e&&(__e=n)},function(t,e){t.exports=n(9)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(83),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},function(t,e,n){var i=n(38)("wks"),r=n(26),o=n(2).Symbol,a="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=a&&o[t]||(a?o:r)("Symbol."+t))}).store=i},function(t,e,n){var i=n(2),r=n(0),o=n(17),a=n(12),s=function(t,e,n){var u,c,l,f=t&s.F,d=t&s
.G,p=t&s.S,h=t&s.P,v=t&s.B,g=t&s.W,y=d?r:r[e]||(r[e]={}),m=y.prototype,b=d?i:p?i[e]:(i[e]||{}).prototype;d&&(n=e);for(u in n)(c=!f&&b&&void 0!==b[u])&&u in y||(l=c?b[u]:n[u],y[u]=d&&"function"!=typeof b[u]?n[u]:v&&c?o(l,i):g&&b[u]==l?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):h&&"function"==typeof l?o(Function.call,l):l,h&&((y.virtual||(y.virtual={}))[u]=l,t&s.R&&m&&!m[u]&&a(m,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,n){var i=n(8),r=n(55),o=n(42),a=Object.defineProperty;e.f=n(9)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(13);t.exports=function(t){if(!i(t))throw TypeError(t
+" is not an object!");return t}},function(t,e,n){t.exports=!n(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(54),r=n(34);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(7),r=n(24);t.exports=n(9)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=n(86)},function(t,e,n){"use strict";e.__esModule=!0;var i=n(28),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t){return function(){var e=t.apply(this,arguments);return new r.default(function(t,n){function i(o,a){try{var s=e[o](a),u=s.value}catch(t){return void n(t)}if(!s.done)return r.default.resolve(u).then(function(t){i("next",t)},function(t){i("throw",t)});t(u)}return i("next")})}}},function(t,e,n){t.exports={
default:n(114),__esModule:!0}},function(t,e,n){var i=n(27);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(72),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,r.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(129),o=i(r),a=n(133),s=i(a),u=n(72),c=i(u);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(
void 0===e?"undefined":(0,c.default)(e)));t.prototype=(0,s.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},function(t,e,n){var i=n(34);t.exports=function(t){return Object(i(t))}},function(t,e,n){var i=n(53),r=n(39);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports={}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){t.exports={default:n(88),__esModule:!0}},function(t,e){t.exports=!0},function(t,e,n){var i=n(7).f,r=n(10),o=n(5)("toStringTag");t.exports=function(t,e,n){t&&!r(t=
n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(16),o=i(r),a=n(126),s=i(a);e.default=function t(e,n,i){null===e&&(e=Function.prototype);var r=(0,s.default)(e,n);if(void 0===r){var a=(0,o.default)(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var u=r.get;if(void 0!==u)return u.call(i)}},function(t,e,n){t.exports={default:n(79),__esModule:!0}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(36),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(38)("keys"),r=n(26);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){var i=n(2),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});t
.exports=function(t){return r[t]||(r[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(6),r=n(0),o=n(18);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],a={};a[t]=e(n),i(i.S+i.F*o(function(){n(1)}),"Object",a)}},function(t,e,n){var i=n(13),r=n(2).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,n){var i=n(13);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){"use strict";var i=n(89)(!0);n(57)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i
+=t.length,{value:t,done:!1})})},function(t,e,n){var i=n(8),r=n(91),o=n(39),a=n(37)("IE_PROTO"),s=function(){},u=function(){var t,e=n(41)("iframe"),i=o.length;for(e.style.display="none",n(59).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;i--;)delete u.prototype[o[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:r(n,e)}},function(t,e,n){"use strict";function i(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=r(e),this.reject=r(n)}var r=n(27);t.exports.f=function(t){return new i(t)}},function(t,e,n){t.exports={default:n(105),__esModule:!0}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";e.__esModule=!0;var i=n(71),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t){
if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}},function(t,e,n){e.f=n(5)},function(t,e,n){t.exports={default:n(118),__esModule:!0}},function(t,e,n){var i=n(2),r=n(0),o=n(29),a=n(49),s=n(7).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){var i=n(31),r=n(24),o=n(11),a=n(42),s=n(10),u=n(55),c=Object.getOwnPropertyDescriptor;e.f=n(9)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(10),r=n(11),o=n(81)(!1),a=n(37)("IE_PROTO");t.exports=function(t,e){var n,s=r(t),u=0,c=[];for(n in s)n!=a&&i(s,n)&&c.push(n);for(;e.length>u;)i(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var i=n(23);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){t.exports=!n(9)&&!n(18)(function(){return 7
!=Object.defineProperty(n(41)("div"),"a",{get:function(){return 7}}).a})},function(t,e){},function(t,e,n){"use strict";var i=n(29),r=n(6),o=n(58),a=n(12),s=n(10),u=n(25),c=n(90),l=n(30),f=n(60),d=n(5)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,v,g,y,m){c(n,e,v);var b,_,w,S=function(t){if(!p&&t in A)return A[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},k=e+" Iterator",E="values"==g,x=!1,A=t.prototype,L=A[d]||A["@@iterator"]||g&&A[g],O=L||S(g),T=g?E?S("entries"):O:void 0,P="Array"==e?A.entries||L:L;if(P&&(w=f(P.call(new t)))!==Object.prototype&&w.next&&(l(w,k,!0),i||s(w,d)||a(w,d,h)),E&&L&&"values"!==L.name&&(x=!0,O=function(){return L.call(this)}),i&&!m||!p&&!x&&A[d]||a(A,d,O),u[e]=O,u[k]=h,g)if(b={values:E?O:S("values"),keys:y?O:S("keys"),entries:T},m)for(_ in b)_ in A||o(A,_,b[_]);else r(r.P+r.F*(p||x),e,b);return b}},function(t,e,n){t.exports=n(12)},function(t,
e,n){var i=n(2).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(10),r=n(21),o=n(37)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){n(92);for(var i=n(2),r=n(12),o=n(25),a=n(5)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=i[c],f=l&&l.prototype;f&&!f[a]&&r(f,a,c),o[c]=o.Array}},function(t,e,n){var i=n(23),r=n(5)("toStringTag"),o="Arguments"==i
(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),r))?n:o?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var i=n(8);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},function(t,e,n){var i=n(25),r=n(5)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},function(t,e,n){var i=n(62),r=n(5)("iterator"),o=n(25);t.exports=n(0).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[i(t)]}},function(t,e,n){var i=n(8),r=n(27),o=n(5)("species");t.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||void 0==(n=i(a)[o])?e:r(n)}},function(t,e,n){var i,r,o,a=n(17),s=n(98),u=n(59),c=n(41),l=n(2),f=l.process,d=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,v=l.Dispatch,g=0,y=
{},m=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},b=function(t){m.call(t.data)};d&&p||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return y[++g]=function(){s("function"==typeof t?t:Function(t),e)},i(g),g},p=function(t){delete y[t]},"process"==n(23)(f)?i=function(t){f.nextTick(a(m,t,1))}:v&&v.now?i=function(t){v.now(a(m,t,1))}:h?(r=new h,o=r.port2,r.port1.onmessage=b,i=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(i=function(t){l.postMessage(t+"","*")},l.addEventListener("message",b,!1)):i="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:d,clear:p}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var i=n(8),r=n(13),o=n(45);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var
n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var i=n(5)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:n=!0}},o[i]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){t.exports={default:n(110),__esModule:!0}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(116),o=i(r),a=n(50),s=i(a),u="function"==typeof s.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t};e.default="function"==typeof s.default&&"symbol"===u(o.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":void 0===t?"undefined":u(t)}},
function(t,e,n){var i=n(53),r=n(39).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e){t.exports=n(49)},function(t,e,n){"use strict";function i(t){var e=ut.context.get("slotGroups"),n=st()(e).filter(function(n){return-1!==e[n].indexOf(t)});return 1===n.length?n[0]:null}function r(t){return i(t.toUpperCase())||"OTHER"}function o(t,e,n){var i=t;return"abcd"===n?i="ABCD":"vuap"===n&&(i="UAP_"+e.toUpperCase()),{adGroup:r(i),adProduct:i.toLowerCase()}}function a(t,e){var n=document.createElement("div");n.classList.add("close-ad"),n.addEventListener("click",function(e){t.stop(),e.preventDefault()}),e.appendChild(n)}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(xt.a[t]){var n=At.parseFromString(xt.a[t],"image/svg+xml").documentElement;return n.setAttribute("class",e.join(" ")),n}return null}function u(t,e,n){var i=document.createElement("div"),r=s(Lt.LEARN_MORE,["learn-more-icon","porvata-icon"]),o=document
.createElement("div");o.innerText=Ot,i.appendChild(o),i.appendChild(r),i.classList.add("learn-more"),i.addEventListener("click",function(){top.open(n.clickThroughURL,"_blank")}),e.appendChild(i)}function c(t,e){var n=document.createElement("div"),i=s(Lt.PAUSE,["play-off-icon","porvata-icon","porvata-off-icon"]),r=s(Lt.PLAY,["play-on-icon","porvata-icon","porvata-on-icon"]);n.appendChild(r),n.appendChild(i),n.className="play-pause-button porvata-switchable-icon",n.addEventListener("click",function(){t.isPaused()?t.resume():t.pause()}),t.addEventListener("pause",function(){n.classList.remove("is-on")}),t.addEventListener("resume",function(){n.classList.add("is-on")}),t.addEventListener("start",function(){n.classList.add("is-on")}),e.appendChild(n)}function l(t,e){var n=document.createElement("div");n.classList.add("pause-overlay"),n.addEventListener("click",function(){t.isPaused()?t.resume():t.pause()}),e.appendChild(n)}function f(t,e){var n=document.createElement("div"),i=document.
createElement("div");n.classList.add("progress-bar"),i.classList.add("current-time"),n.appendChild(i),n.pause=function(){i.style.width=i.offsetWidth/n.offsetWidth*100+"%"},n.reset=function(){i.style.transitionDuration="",i.style.width="0"},n.rewind=function(){var t=i.style.transitionDuration;n.reset(),ut.slotTweaker.forceRepaint(i),i.style.transitionDuration=t},n.start=function(){var e=t.getRemainingTime();e?(e>0&&(i.style.transitionDuration=e+"s"),ut.slotTweaker.forceRepaint(i),i.style.width="100%"):i.style.width="0"},t.addEventListener("wikiaAdPlay",n.start),t.addEventListener("wikiaAdCompleted",n.reset),t.addEventListener("wikiaAdRestart",n.rewind),t.addEventListener("wikiaAdPause",n.pause),e.appendChild(n)}function d(t,e,n){var i=document.createElement("div");if(i.classList.add(Ct),i.addEventListener("click",function(){return t.play()}),n.autoPlay||p(i,n),t.addEventListener("wikiaAdCompleted",function(){p(i,n)}),t.params.theme&&"hivi"===t.params.theme){var r=v(i);if(!n.autoPlay){
var o=g(i);r.style.display="none",t.addEventListener("start",function(){r.style.display="",o.style.display="none"})}e=t.params.thumbnail,e.appendChild(i)}else e.parentElement.insertBefore(i,e)}function p(t,e){e.container.classList.contains("theme-hivi")||(t.style.width=t.style.width||h(e)),t.style.display="block"}function h(t){var e=t.container.offsetWidth;return 100*t.hideWhenPlaying.offsetWidth/e+"%"}function v(t){var e=s(Lt.REPLAY,["replay-icon","overlay-icon"]);return t.appendChild(e),e}function g(t){var e=s(Lt.PLAY,["play-icon","overlay-icon"]);return t.appendChild(e),e}function y(t,e){t.style.height=t.offsetHeight+"px",t.style.height=t.offsetWidth/e+"px",setTimeout(function(){t.style.height=""},jt)}function m(t,e){e.classList.add("hide"),t.classList.remove("hide")}function b(t,e){y(e.container,e.aspectRatio),setTimeout(function(){m(e.image,t.container),e.container.classList.remove(Nt)},jt)}function _(t,e){e.container.classList.add(Nt),y(e.container,e.videoAspectRatio),m(t.
container,e.image)}function w(t,e,n){t.addEventListener("wikiaAdStarted",function(){_(t,n)}),t.addEventListener("wikiaAdCompleted",function(){b(t,n)})}function S(t,e){var n=document.createElement("div"),i=s(Lt.FULLSCREEN_OFF,["fullscreen-off-icon","porvata-icon","porvata-off-icon"]),r=s(Lt.FULLSCREEN_ON,["fullscreen-on-icon","porvata-icon","porvata-on-icon"]);n.appendChild(i),n.appendChild(r),n.className="toggle-fullscreen-button porvata-switchable-icon",n.addEventListener("click",function(){t.toggleFullscreen()}),t.addEventListener("wikiaFullscreenChange",function(){t.isFullscreen()?n.classList.add("is-on"):n.classList.remove("is-on")}),t.addEventListener("wikiaAdStop",function(){t.isFullscreen()&&t.toggleFullscreen()}),e.appendChild(n)}function k(t,e,n){t.addEventListener("wikiaAdStarted",function(){n.thumbnail.classList.add("hidden-state")}),t.addEventListener("wikiaAdCompleted",function(){n.thumbnail.classList.remove("hidden-state")})}function E(t,e,n){var i=null,r=ut.utils.client.
isSmartphone()||ut.utils.client.isTablet(),o=document.createElement("div"),a=function(){i=setTimeout(function(){t.isPlaying()&&t.container.classList.remove("ui-visible")},Ft)};o.classList.add("toggle-ui-overlay"),r?(o.addEventListener("click",function(){t.container.classList.toggle("ui-visible"),clearTimeout(i),a()}),t.addEventListener("resume",a)):(t.container.addEventListener("mouseenter",function(){t.container.classList.add("ui-visible")}),t.container.addEventListener("mouseleave",function(){t.container.classList.remove("ui-visible")}),o.addEventListener("click",function(){top.open(n.clickThroughURL,"_blank")})),e.appendChild(o)}function x(t,e){t.addEventListener("wikiaAdStarted",function(){e.classList.remove("hide")}),t.addEventListener("wikiaAdCompleted",function(){e.classList.add("hide")})}function A(t){var e="hivi"===t.theme?"HIVI_":"",n=document.createElement("div"),i=s(Lt[e+"VOLUME_OFF"],["volume-off-icon","porvata-icon","porvata-off-icon"]),r=s(Lt[e+"VOLUME_ON"],[
"volume-on-icon","porvata-icon","porvata-on-icon"]);return n.className="volume-button porvata-switchable-icon hidden",n.appendChild(i),n.appendChild(r),n}function L(t,e){t.isMuted()||t.isMobilePlayerMuted()?e.classList.add("is-on"):e.classList.remove("is-on"),!t.isMobilePlayerMuted()&&t.mobileVideoAd&&t.mobileVideoAd.muted&&t.updateVideoDOMElement(t.defaultVolume)}function O(t,e){var n=A(t.params);t.addEventListener("wikiaVolumeChange",function(){L(t,n)}),t.addEventListener("wikiaAdStarted",function(){L(t,n),n.classList.remove("hidden")}),n.addEventListener("click",function(e){t.volumeToggle(),e.preventDefault()}),e.appendChild(n)}function T(t){var e=t.getParams(),n=qt(e,t),i="default";return"hivi"===e.theme?i="hivi":t.isSplitLayout()?i="right"===e.splitLayoutVideoPosition?"split-right":"split-left":t.isAutoPlay()&&(i="auto-play"),n[i]}function P(t,e,n){e.forEach(function(e){e&&e.add(t,t.container,n)})}function M(t,e,n){var i=n.isSplitLayout()?e.videoPlaceholderElement.offsetWidth:t.
clientWidth;return{width:i,height:i/e.videoAspectRatio}}function I(t){if(t.splitLayoutVideoPosition){t.container.querySelector(".video-player").classList.add("video-player-"+t.splitLayoutVideoPosition)}}function C(){return ee}function R(t){ee=t,B(t)}function j(){return ne}function N(t){ne=t}function B(t){var e=ut.context.get("slots");st()(e).forEach(function(n){e[n].nonUapSlot||ut.context.set("slots."+n+".targeting.uap",t)})}function V(t){"abcd"!==j()&&t.forEach(function(t){ut.btfBlockerService.unblock(t)})}function D(t){var e=ut.slotService.getBySlotName(t.slotName);t.container=e.getElement(),t.isDarkTheme&&t.container.classList.add("is-dark"),t.isMobile&&t.container.classList.add("is-mobile-layout"),(ut.utils.client.isSmartphone()||ut.utils.client.isTablet())&&t.container.classList.add("is-mobile-device")}function F(){return de+"_"+ie.getUapId()}function z(){return ut.localCache.get(F())}function U(){var t=z();return!!t&&he.getTime()!==t.lastSeenDate}function W(){ut.localCache.set(F(
),{adId:ie.getUapId(),lastSeenDate:he.getTime()},pe)}function H(){return ut.utils.queryString.get("resolved_state",null)}function G(){return[!0,"true","1"].indexOf(H())>-1}function q(){return[!1,"blocked","false","0"].indexOf(H())>-1}function K(t,e){var n=e.image1,i=e.image2,r=[],o="defaultStateSrc";return t===ye&&(e.aspectRatio=e.resolvedStateAspectRatio,o="resolvedStateSrc"),r.push(fe.a.resolve(e)),n.element.src=n[o],r.push(fe.a.race([ut.utils.once(n.element,"load"),ut.utils.once(n.element,"error")])),i&&i[o]&&(i.element.src=i[o],r.push(fe.a.race([ut.utils.once(i.element,"load"),ut.utils.once(i.element,"error")]))),fe.a.all(r)}function Y(t){return K(ge,t)}function J(t){return K(ye,t)}function $(t){return!(!t.image1||!t.image1.resolvedStateSrc)||"hivi"===t.theme}function Q(t){var e=!1;if(t.resolvedStateForced)return!0;if($(t)){var n=!q(),i=!0;n&&(i=ve.wasDefaultStateSeen()||G()),e=n&&i}return e}function Z(t){var e=t.adSlot,n=t.params;return ut.slotTweaker.makeResponsive(e,n.
aspectRatio)}Object.defineProperty(e,"__esModule",{value:!0});var X={};n.d(X,"CSS_CLASSNAME_FADE_IN_ANIMATION",function(){return Kt}),n.d(X,"CSS_CLASSNAME_SLIDE_OUT_ANIMATION",function(){return Yt}),n.d(X,"CSS_CLASSNAME_STICKY_BFAA",function(){return Jt}),n.d(X,"CSS_TIMING_EASE_IN_CUBIC",function(){return $t}),n.d(X,"SLIDE_OUT_TIME",function(){return Qt}),n.d(X,"FADE_IN_TIME",function(){return Zt});var tt={};n.d(tt,"BfaaTheme",function(){return Pe}),n.d(tt,"BfabTheme",function(){return Me}),n.d(tt,"adIsReady",function(){return Ie});var et={};n.d(et,"BfaaTheme",function(){return Xe}),n.d(et,"BfabTheme",function(){return tn}),n.d(et,"adIsReady",function(){return Z});var nt=n(76),it=n.n(nt),rt=n(77),ot=n.n(rt),at=(n(78),n(33)),st=n.n(at),ut=n(1),ct=n(3),lt=n.n(ct),ft=n(4),dt=n.n(ft),pt=null,ht=function(){function t(){lt()(this,t),this.config=ut.context.get("templates.floatingRail"),this.rail=document.querySelector(this.config.railSelector),this.railWrapper=document.querySelector(this.
config.wrapperSelector)}return dt()(t,null,[{key:"getName",value:function(){return"floatingRail"}},{key:"getDefaultConfig",value:function(){return{enabled:!0,railSelector:"#rail",wrapperSelector:"#rail-wrapper",startOffset:0}}}]),dt()(t,[{key:"init",value:function(e){var n=this;this.params=e;var i=this.params.offset||0;if(this.railWrapper&&t.isEnabled()&&0!==this.getAvailableSpace()){var r=Math.min(i,this.getAvailableSpace());ut.scrollListener.addCallback(function(){var t=n.config.startOffset+ut.utils.getTopOffset(n.railWrapper),e=t+r,i=window.scrollY||window.pageYOffset||document.documentElement.scrollTop;i<=t?(n.rail.style.paddingTop="",n.rail.classList.add("rail-static"),n.rail.classList.remove("rail-fixed")):i>=e?(n.rail.style.paddingTop=r+"px",n.rail.classList.remove("rail-static"),n.rail.classList.remove("rail-fixed")):(n.rail.style.paddingTop="",n.rail.classList.remove("rail-static"),n.rail.classList.add("rail-fixed"))})}}},{key:"getAvailableSpace",value:function(){if(null===pt)
{var t=this.railWrapper.lastElementChild,e=t.offsetTop+t.offsetHeight,n=this.railWrapper.offsetHeight;pt=Math.max(0,n-e-1200)}return pt}}],[{key:"isEnabled",value:function(){return ut.context.get("templates.floatingRail.enabled")&&!1===ut.context.get("state.isMobile")}}]),t}(),vt=n(14),gt=n.n(vt),yt=n(15),mt=n.n(yt),bt=n(104),_t=n.n(bt),wt=n(108),St=n.n(wt),kt={add:a},Et=n(109),xt=n.n(Et),At=new window.DOMParser,Lt=st()(xt.a).reduce(function(t,e){return t[e]=e,t},{}),Ot="Learn More",Tt={add:u},Pt={add:c},Mt={add:l},It={add:f},Ct="replay-overlay",Rt={add:d},jt=400,Nt="on-animation",Bt={add:w,duration:jt},Vt={add:S},Dt={add:k},Ft=5e3,zt={add:E},Ut={add:x},Wt={add:O},Ht=function(){function t(e,n){lt()(this,t),this.uiElements=n,this.className=e,this.panelContainer=null}return dt()(t,[{key:"add",value:function(t,e,n){var i=this;this.panelContainer=document.createElement("div"),this.panelContainer.className=this.className,this.uiElements.forEach(function(e){e&&e.add(t,i.panelContainer,n)}),e
.appendChild(this.panelContainer)}}]),t}(),Gt=function(t){var e=t.fullscreenAllowed,n=void 0===e||e,i=t.theme,r=void 0===i?null:i,o="hivi"===r,a="bottom-panel";return o&&(a+=" dynamic-panel"),new Ht(a,[o?Pt:null,Wt,o&&n?Vt:null])},qt=function(t,e){return{"auto-play":[It,Mt,Gt(t),Bt],default:[It,Mt,Gt(t),kt,Bt],"split-left":[It,Mt,Gt(t),Ut,Rt,e.isAutoPlay()?null:kt],"split-right":[It,Mt,Gt(t),Ut,Rt,e.isAutoPlay()?null:kt],hivi:[It,Gt(t),t.videoPlaceholderElement?Ut:Bt,Dt,zt,Tt,t.videoPlaceholderElement?Rt:null]}},Kt="fade-in",Yt="slide-out",Jt="sticky-bfaa",$t="cubic-bezier(0.55, 0.055, 0.675, 0.19)",Qt=600,Zt=400,Xt=function(){var t=mt()(gt.a.mark(function t(e,n,i){var r,o,a;return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.getParams(),o=T(e),r.autoPlay=e.isAutoPlay(),e.updateParams(r),t.next=6,ut.Porvata.inject(r);case 6:return a=t.sent,a.container.style.position="relative",P(a,o,{autoPlay:e.isAutoPlay(),image:i,container:n,thumbnail:r.thumbnail,
clickThroughURL:r.clickThroughURL,aspectRatio:r.aspectRatio,videoAspectRatio:r.videoAspectRatio,hideWhenPlaying:r.videoPlaceholderElement||r.image,splitLayoutVideoPosition:r.splitLayoutVideoPosition}),a.addEventListener("wikiaAdCompleted",function(){a.reload()}),I(r),t.abrupt("return",a);case 12:case"end":return t.stop()}},t,this)}));return function(e,n,i){return t.apply(this,arguments)}}(),te=function(){var t=mt()(gt.a.mark(function t(e){var n,i,r,o,a;return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=function(t){return function(){var i=M(n.container,n,e);t.resize(i.width,i.height)}},n=e.getParams(),i=n.container.querySelector("div:last-of-type"),r=M(n.container,n,e),n.vastTargeting={passback:j()},n.width=r.width,n.height=r.height,e.updateParams(n),t.next=10,Xt(e,n.container,i);case 10:return a=t.sent,window.addEventListener("resize",St()(o(a),250)),n.videoTriggerElement?n.videoTriggerElement.addEventListener("click",function(){return a.play()}):n.videoTriggers
&&n.videoTriggers.forEach(function(t){t.addEventListener("click",function(){return a.play()})}),t.abrupt("return",a);case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),ee="none",ne="uap",ie=_t()({},X,{init:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n="uap";this.isVideoEnabled(t)&&(n="vuap"),t.adProduct=t.adProduct||n,R(t.uap),N(t.adProduct),V(e),D(t)},initSlot:D,getType:j,getUapId:C,isVideoEnabled:function(t){var e=Array.isArray(t.videoTriggers)&&t.videoTriggers.length>0;return!!t.videoAspectRatio&&(t.videoPlaceholderElement||e)},loadVideoAd:te,setType:N,setUapId:R}),re=n(46),oe=n.n(re),ae=n(48),se=n.n(ae),ue=n(113),ce=n.n(ue),le=n(28),fe=n.n(le),de="adEngine_resolvedStateCounter",pe=86400,he=new Date,ve={updateInformationAboutSeenDefaultStateAd:W,wasDefaultStateSeen:U},ge="default",ye="resolved",me={setImage:function(t){var e=t.getParams();return $(e)?t.isResolvedState()?J(e).then(function(e){var n=ce()
(e),i=n[0],r=n.slice(1);return t.updateParams(i),[i].concat(se()(r))}):(ve.updateInformationAboutSeenDefaultStateAd(),Y(e)):fe.a.resolve()},isResolvedState:Q},be=function(){function t(e){lt()(this,t),this.params=e,Object.defineProperty(this,"resolvedState",{value:me.isResolvedState(this.params),writable:!1}),Object.defineProperty(this,"autoPlay",{value:this.detectAutoPlay(),writable:!1}),Object.defineProperty(this,"splitLayout",{value:Boolean(e.splitLayoutVideoPosition),writable:!1})}return dt()(t,[{key:"detectAutoPlay",value:function(){var t=this.params.autoPlay&&!this.resolvedState,e=this.params.resolvedStateAutoPlay&&this.resolvedState;return Boolean(t||e)}},{key:"getParams",value:function(){return oe()({},this.params)}},{key:"updateParams",value:function(t){oe()(this.params,t)}},{key:"isAutoPlay",value:function(){return this.autoPlay}},{key:"isResolvedState",value:function(){return this.resolvedState}},{key:"isSplitLayout",value:function(){return this.splitLayout}}]),t}(),_e=n(16),
we=n.n(_e),Se=n(19),ke=n.n(Se),Ee=n(32),xe=n.n(Ee),Ae=n(20),Le=n.n(Ae),Oe=function(){function t(e,n){lt()(this,t),this.adSlot=e,this.container=this.adSlot.getElement(),this.config=ut.context.get("templates.bfaa"),this.params=n}return dt()(t,[{key:"onAdReady",value:function(){}},{key:"onVideoReady",value:function(){}}]),t}(),Te=function(t){function e(){return lt()(this,e),ke()(this,(e.__proto__||we()(e)).apply(this,arguments))}return Le()(e,t),dt()(e,[{key:"onAdReady",value:function(t){if(xe()(e.prototype.__proto__||we()(e.prototype),"onAdReady",this).call(this,t),ie.isVideoEnabled(this.params)){var n=new be(this.params);if(n.isSplitLayout()){var i="right"===n.getParams().splitLayoutVideoPosition?"theme-split-right":"theme-split-left";this.params.container.classList.add(i)}else n.isAutoPlay()||document.body.classList.add("ctp-vuap-loaded")}}}]),e}(Oe),Pe=function(t){function e(){return lt()(this,e),ke()(this,(e.__proto__||we()(e)).apply(this,arguments))}return Le()(e,t),dt()(e,[{key:
"onVideoReady",value:function(t){var e=this;this.params.splitLayoutVideoPosition||(t.addEventListener("wikiaAdStarted",function(){e.recalculatePaddingTop(e.params.videoAspectRatio)}),t.addEventListener("wikiaAdCompleted",function(){e.recalculatePaddingTop(e.params.aspectRatio)}))}},{key:"recalculatePaddingTop",value:function(t){var e=this;this.config.mainContainer.style.paddingTop=100/t+"%",this.container.style.height=this.container.offsetHeight+"px",this.container.style.height=this.container.offsetWidth/t+"px",setTimeout(function(){e.container.style.height=""},Bt.duration)}}]),e}(Te),Me=function(t){function e(){return lt()(this,e),ke()(this,(e.__proto__||we()(e)).apply(this,arguments))}return Le()(e,t),e}(Te),Ie=function(){var t=mt()(gt.a.mark(function t(e){var n=e.adSlot,i=e.params,r=e.videoSettings;return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,me.setImage(r);case 2:return t.next=4,ut.slotTweaker.makeResponsive(n,i.aspectRatio);case 4:return t.
abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),Ce=n(50),Re=n.n(Ce),je=n(136),Ne=n.n(je),Be=n(137),Ve=n.n(Be),De=n(138),Fe=n.n(De),ze=n(139),Ue=n.n(ze),We=n(74),He=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};lt()(this,t),this.props=e}return dt()(t,[{key:"classNames",get:function(){return this.props.classNames||[]}}]),dt()(t,[{key:"render",value:function(){return document.createDocumentFragment()}}]),t}(),Ge=function(t){function e(){return lt()(this,e),ke()(this,(e.__proto__||we()(e)).apply(this,arguments))}return Le()(e,t),dt()(e,[{key:"render",value:function(){var t=document.createElement("div");return t.innerText="Advertisement",t.className="advertisement-label",t}}]),e}(He),qe=function(t){function e(){return lt()(this,e),ke()(this,(e.__proto__||we()(e)).apply(this,arguments))}return Le()(e,t),dt()(e,[{key:"render",value:function(){var t=this,e=document.
createElement("button");return this.classNames.forEach(function(t){return e.classList.add(t)}),e.addEventListener("click",function(e){return t.onClick(e)}),e}},{key:"onClick",value:function(t){var e=this.props.onClick;if("function"==typeof e)return e(t)}},{key:"classNames",get:function(){return["button-control"].concat(se()(xe()(e.prototype.__proto__||we()(e.prototype),"classNames",this)))}}]),e}(He),Ke=function(t){function e(){return lt()(this,e),ke()(this,(e.__proto__||we()(e)).apply(this,arguments))}return Le()(e,t),dt()(e,[{key:"render",value:function(){var t=this.props.onClick,e=this.classNames,n=new qe({onClick:t,classNames:e}).render(),i=s(Lt.CROSS,["icon"]);return n.appendChild(i),n}},{key:"classNames",get:function(){return["button-close"].concat(se()(xe()(e.prototype.__proto__||we()(e.prototype),"classNames",this)))}}]),e}(He),Ye=n(140),Je=n.n(Ye),$e=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fe.a.resolve();lt()(this,e);var i=ke()(
this,(e.__proto__||we()(e)).call(this));return i.adSlot=t,i.customWhen=n,i.sticky=!1,i.isRevertStickinessBlocked=!1,i.logger=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return ut.utils.logger.apply(ut.utils,[e.LOG_GROUP].concat(n))},i}return Le()(e,t),dt()(e,[{key:"run",value:function(){function t(){return n.apply(this,arguments)}var n=mt()(gt.a.mark(function t(){var n=this;return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ut.slotTweaker.onReady(this.adSlot);case 2:if(!document.hidden){t.next=5;break}return t.next=5,ut.utils.once(window,"visibilitychange");case 5:this.adSlot.once("unstickImmediately",function(){n.logger("Unsticking bfaa"),n.emit(e.UNSTICK_IMMEDIATELY_EVENT),n.sticky=!1}),this.onAdReady();case 7:case"end":return t.stop()}},t,this)}));return t}()},{key:"isSticky",value:function(){return this.sticky}},{key:"applyStickiness",value:function(){this.sticky?this.logger("bfaa stickiness is already applied"):(this
.logger("Applying bfaa stickiness"),this.sticky=!0,this.emit(e.STICKINESS_CHANGE_EVENT,this.sticky))}},{key:"revertStickiness",value:function(){this.sticky?(this.logger("Reverting bfaa stickiness"),this.sticky=!1,this.emit(e.STICKINESS_CHANGE_EVENT,this.sticky)):this.logger("bfaa stickiness is already reverted")}},{key:"close",value:function(){this.logger("Closing and removing bfaa"),this.emit(e.CLOSE_CLICKED_EVENT,this.sticky),this.sticky=!1}},{key:"registerRevertStickiness",value:function(){function t(){return e.apply(this,arguments)}var e=mt()(gt.a.mark(function t(){return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.logger("waiting for user interaction"),t.next=3,ut.utils.once(window,"scroll");case 3:return t.next=5,ut.utils.wait();case 5:this.isRevertStickinessBlocked?this.registerRevertStickiness():this.revertStickiness();case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"blockRevertStickiness",value:function(){this.isRevertStickinessBlocked
=!0}},{key:"unblockRevertStickiness",value:function(){this.isRevertStickinessBlocked=!1}},{key:"onAdReady",value:function(){function t(){return e.apply(this,arguments)}var e=mt()(gt.a.mark(function t(){return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.applyStickiness(),this.logger("waiting for viewability and custom condition"),t.next=4,fe.a.all([ut.utils.once(this.adSlot,ut.AdSlot.SLOT_VIEWED_EVENT),Je()(this.customWhen)?this.customWhen():this.customWhen]);case 4:this.registerRevertStickiness();case 5:case"end":return t.stop()}},t,this)}));return t}()}]),e}(We.EventEmitter);$e.LOG_GROUP="sticky-bfaa",$e.STICKINESS_CHANGE_EVENT=Re()("stickinessChange"),$e.CLOSE_CLICKED_EVENT=Re()("closeClicked"),$e.UNSTICK_IMMEDIATELY_EVENT=Re()("unstickImmediately");var Qe=function(){var t=mt()(gt.a.mark(function t(e,n,i){var r;return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.getElement(),r.style.animationDuration=i+"ms",r.classList.add(n),t.next=5
,ut.utils.wait(i);case 5:r.classList.remove(n),r.style.animationDuration="";case 7:case"end":return t.stop()}},t,this)}));return function(e,n,i){return t.apply(this,arguments)}}(),Ze=function(t){function e(){return lt()(this,e),ke()(this,(e.__proto__||we()(e)).apply(this,arguments))}return Le()(e,t),dt()(e,[{key:"onAdReady",value:function(){xe()(e.prototype.__proto__||we()(e.prototype),"onAdReady",this).call(this),this.container.classList.add("theme-hivi"),this.addAdvertisementLabel()}},{key:"addAdvertisementLabel",value:function(){var t=new Ge;this.container.appendChild(t.render())}}]),e}(Oe),Xe=function(t){function e(t,n){lt()(this,e);var i=ke()(this,(e.__proto__||we()(e)).call(this,t,n));return oe()(i,Ne()(new We.EventEmitter)),i.stickyBfaa=null,i.scrollListener=null,i.video=null,i.isLocked=!1,i.onResolvedStateScroll=null,i.params.isSticky&&i.config.stickinessAllowed&&i.addStickinessPlugin(),i.config.defaultStateAllowed||(i.params.resolvedStateForced=!0),i}return Le()(e,t),dt()(e,[{
key:"addStickinessPlugin",value:function(){var t=this,n=this.params,i=n.stickyAdditionalTime,r=n.stickyUntilVideoViewed,o=function(){var n=mt()(gt.a.mark(function n(){return gt.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fe.a.all([ut.utils.once(t,e.RESOLVED_STATE_EVENT),r?ut.utils.once(t.adSlot,ut.AdSlot.VIDEO_VIEWED_EVENT):fe.a.resolve()]);case 2:return n.next=4,ut.utils.wait(Ve()(i)?e.DEFAULT_UNSTICK_DELAY:i);case 4:case"end":return n.stop()}},n,t)}));return function(){return n.apply(this,arguments)}}();this.stickyBfaa=new $e(this.adSlot,o()),this.addUnstickButton(),this.stickyBfaa.on($e.STICKINESS_CHANGE_EVENT,function(e){return t.onStickinessChange(e)}),this.stickyBfaa.on($e.CLOSE_CLICKED_EVENT,this.onCloseClicked.bind(this)),this.stickyBfaa.on($e.UNSTICK_IMMEDIATELY_EVENT,this.unstickImmediately.bind(this)),this.stickyBfaa.run()}},{key:"addUnstickButton",value:function(){var t=this,e=new Ke({classNames:["button-unstick"],onClick:function(){t.stickyBfaa.
close()}});this.container.appendChild(e.render())}},{key:"onAdReady",value:function(){var t=this;xe()(e.prototype.__proto__||we()(e.prototype),"onAdReady",this).call(this),me.isResolvedState(this.params)?this.setResolvedState(!0):(ve.updateInformationAboutSeenDefaultStateAd(),this.scrollListener=ut.scrollListener.addCallback(function(){return t.updateAdSizes()}),this.updateAdSizes())}},{key:"onVideoReady",value:function(t){var n=this;xe()(e.prototype.__proto__||we()(e.prototype),"onVideoReady",this).call(this),this.video=t,t.addEventListener("wikiaAdStarted",function(){return n.updateAdSizes()}),t.addEventListener("wikiaAdCompleted",function(){n.isLocked||n.setResolvedState(!0)}),t.addEventListener("wikiaFullscreenChange",function(){t.isFullscreen()?(n.stickyBfaa.blockRevertStickiness(),n.container.classList.add("theme-video-fullscreen")):(n.stickyBfaa.unblockRevertStickiness(),n.container.classList.remove("theme-video-fullscreen"),n.updateAdSizes())})}},{key:"onStickinessChange",value
:function(){function t(t){return e.apply(this,arguments)}var e=mt()(gt.a.mark(function t(e){var n,i;return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e?this.config.onBeforeStickBfaaCallback:this.config.onBeforeUnstickBfaaCallback,i=e?this.config.onAfterStickBfaaCallback:this.config.onAfterUnstickBfaaCallback,n.call(this.config,this.adSlot,this.params),e){t.next=11;break}return this.config.moveNavbar(0,Qt),t.next=7,Qe(this.adSlot,Yt,Qt);case 7:this.adSlot.getElement().classList.remove(Jt),Qe(this.adSlot,Kt,Zt),t.next=12;break;case 11:this.adSlot.getElement().classList.add(Jt);case 12:i.call(this.config,this.adSlot,this.params);case 13:case"end":return t.stop()}},t,this)}));return t}()},{key:"onCloseClicked",value:function(){this.unstickImmediately(),this.config.mainContainer.style.paddingTop="0",this.adSlot.disable(),this.adSlot.collapse()}},{key:"unstickImmediately",value:function(){ut.scrollListener.removeCallback(this.scrollListener),this.adSlot.getElement().
classList.remove(Jt),this.video&&this.video.ima.getAdsManager()&&this.video.stop(),this.config.moveNavbar(0,0)}},{key:"updateAdSizes",value:function(){var t=this.params.config,e=this.config.mainContainer.offsetWidth,n=this.container.classList.contains("theme-resolved"),i=e/t.aspectRatio.default,r=e/t.aspectRatio.resolved,o=this.isLocked?r:Math.max(r,i-window.scrollY),a=e/o,s=t.aspectRatio.default-t.aspectRatio.resolved,u=t.aspectRatio.default-a,c=1-(s-u)/s,l=t.state.height.default-t.state.height.resolved,f=(t.state.height.default-l*c)/100;this.adjustVideoSize(o*f),this.params.thumbnail&&this.setThumbnailStyle(c),c>=.995&&!n?this.setResolvedState():c<.995&&n&&(this.container.style.top="",this.switchImagesInAd(!1)),ut.slotTweaker.makeResponsive(this.adSlot,a)}},{key:"adjustVideoSize",value:function(t){this.video&&!this.video.isFullscreen()&&(this.video.container.style.width=this.params.videoAspectRatio*t+"px")}},{key:"setThumbnailStyle",value:function(t){var e=Fe()(this.params.config.
state,function(e){var n=e.default-e.resolved;return e.default-n*t+"%"});oe()(this.params.thumbnail.style,e),this.video&&(oe()(this.video.container.style,e),this.video.isFullscreen()&&(this.video.container.style.height="100%"))}},{key:"switchImagesInAd",value:function(t){t?(this.container.classList.add("theme-resolved"),this.params.image2.element.classList.remove("hidden-state")):(this.container.classList.remove("theme-resolved"),this.params.image2.element.classList.add("hidden-state"))}},{key:"lock",value:function(){var t=this.getHeightDifferenceBetweenStates();this.isLocked=!0,this.container.classList.add("theme-locked"),ut.scrollListener.removeCallback(this.scrollListener),this.adjustSizesToResolved(t),this.emit(e.RESOLVED_STATE_EVENT)}},{key:"setResolvedState",value:function(t){var e=this,n=this.stickyBfaa&&this.stickyBfaa.isSticky(),i=this.container.offsetWidth,r=this.params.config.aspectRatio,o=i/r.resolved,a=this.getHeightDifferenceBetweenStates();return n?this.config.moveNavbar(
o,Qt):this.container.style.top=Math.min(window.scrollY,a)+"px",this.switchImagesInAd(!0),this.onResolvedStateScroll&&(window.removeEventListener("scroll",this.onResolvedStateScroll),this.onResolvedStateScroll.cancel()),new fe.a(function(n){t?(e.lock(),n()):(e.onResolvedStateScroll=Ue()(function(){window.scrollY<a||(window.removeEventListener("scroll",e.onResolvedStateScroll),e.onResolvedStateScroll=null,e.lock(),n())},50),window.addEventListener("scroll",e.onResolvedStateScroll),e.onResolvedStateScroll())})}},{key:"getHeightDifferenceBetweenStates",value:function(){var t=this.container.offsetWidth,e=this.params.config.aspectRatio;return Math.round(t/e.default-t/e.resolved)}},{key:"adjustSizesToResolved",value:function(t){if(this.adSlot.isEnabled()){var e=this.params.config.aspectRatio.resolved;this.container.style.top="",this.config.mainContainer.style.paddingTop=100/e+"%",ut.slotTweaker.makeResponsive(this.adSlot,e),window.scrollBy(0,-Math.min(t,window.scrollY)),this.updateAdSizes()}}
}]),e}(Ze);Xe.RESOLVED_STATE_EVENT=Re()("RESOLVED_STATE_EVENT"),Xe.DEFAULT_UNSTICK_DELAY=3e3;var tn=function(t){function e(){return lt()(this,e),ke()(this,(e.__proto__||we()(e)).apply(this,arguments))}return Le()(e,t),dt()(e,[{key:"onAdReady",value:function(){xe()(e.prototype.__proto__||we()(e.prototype),"onAdReady",this).call(this),this.config.defaultStateAllowed||(this.params.resolvedStateForced=!0),me.isResolvedState(this.params)?this.setResolvedState():(ve.updateInformationAboutSeenDefaultStateAd(),ut.slotTweaker.makeResponsive(this.adSlot,this.params.config.aspectRatio.default))}},{key:"onVideoReady",value:function(t){var n=this;xe()(e.prototype.__proto__||we()(e.prototype),"onVideoReady",this).call(this),t.addEventListener("wikiaAdStarted",function(){me.isResolvedState(n.params)&&n.setResolvedState(t)}),t.addEventListener("wikiaAdCompleted",function(){return n.setResolvedState(t)}),t.addEventListener("wikiaFullscreenChange",function(){t.isFullscreen()?n.container.classList.add(
"theme-video-fullscreen"):n.container.classList.remove("theme-video-fullscreen")})}},{key:"setResolvedState",value:function(){function t(t){return e.apply(this,arguments)}var e=mt()(gt.a.mark(function t(e){var n,i,r;return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.params,i=n.config,r=n.image2,this.container.classList.add("theme-resolved"),r.element.classList.remove("hidden-state"),t.next=5,ut.slotTweaker.makeResponsive(this.adSlot,i.aspectRatio.resolved);case 5:this.params.thumbnail&&this.setThumbnailStyle(e);case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"setThumbnailStyle",value:function(t){var e=this.params.thumbnail,n=Fe()(this.params.config.state,function(t){return t.resolved+"%"});oe()(e.style,n),t&&(oe()(t.container.style,n),window.requestAnimationFrame(function(){t.resize(e.offsetWidth,e.offsetHeight)}))}}]),e}(Ze),en=function(){function t(e){lt()(this,t),this.adSlot=e,this.config=ut.context.get("templates.bfaa"),this.container=
document.getElementById(this.adSlot.getId()),this.videoSettings=null,this.theme=null}return dt()(t,null,[{key:"getName",value:function(){return"bfaa"}},{key:"getDefaultConfig",value:function(){return{desktopNavbarWrapperSelector:".wds-global-navigation-wrapper",mobileNavbarWrapperSelector:".global-navigation-mobile-wrapper",mainContainer:document.body,handleNavbar:!1,autoPlayAllowed:!0,defaultStateAllowed:!0,fullscreenAllowed:!0,stickinessAllowed:!0,slotSibling:".topic-header",slotsToEnable:["BOTTOM_LEADERBOARD","INCONTENT_BOXAD"],onInit:function(){},onBeforeStickBfaaCallback:function(){},onAfterStickBfaaCallback:function(){},onBeforeUnstickBfaaCallback:function(){},onAfterUnstickBfaaCallback:function(){},moveNavbar:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qt,n=document.querySelector("body > nav.navigation");n&&(n.style.transition=t?"":"top "+e+"ms "+ie.CSS_TIMING_EASE_IN_CUBIC,n.style.top=t?t+"px":"")}}}}]),dt()(t,[{key:"init",value:function(t){var e=
this;if(this.params=t,this.container){this.config.autoPlayAllowed||(this.params.autoPlay=!1,this.params.resolvedStateAutoPlay=!1),this.params.fullscreenAllowed=this.config.fullscreenAllowed;var n="hivi"===this.params.theme?et:tt;ie.init(this.params,this.config.slotsToEnable),this.videoSettings=new be(this.params),this.container.style.backgroundColor=this.getBackgroundColor(),this.container.classList.add("bfaa-template"),this.theme=new n.BfaaTheme(this.adSlot,this.params),n.adIsReady({adSlot:this.adSlot,videoSettings:this.videoSettings,params:this.params}).then(function(t){return e.onAdReady(t)}),this.config.onInit(this.adSlot,this.params,this.config)}}},{key:"setupNavbar",value:function(){var t=document.querySelector(this.config.desktopNavbarWrapperSelector),e=document.querySelector(this.config.mobileNavbarWrapperSelector),n=this.container.parentNode,i=document.querySelector(this.config.slotSibling)||this.container.nextElementSibling;e&&n.insertBefore(e,i),t&&n.insertBefore(t,i)}},{key
:"getBackgroundColor",value:function(){var t="#"+this.params.backgroundColor.replace("#","");return this.params.backgroundColor?t:"#000"}},{key:"onAdReady",value:function(){function t(t){return e.apply(this,arguments)}var e=mt()(gt.a.mark(function t(e){var n;return gt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.config.mainContainer.style.paddingTop=e.parentElement.style.paddingBottom,this.config.mainContainer.classList.add("has-bfaa"),this.config.handleNavbar&&this.setupNavbar(),!document.hidden){t.next=6;break}return t.next=6,ut.utils.once(window,"visibilitychange");case 6:if(this.theme.onAdReady(e),!ie.isVideoEnabled(this.params)){t.next=12;break}return t.next=10,ut.utils.defer(ie.loadVideoAd,this.videoSettings);case 10:n=t.sent,this.theme.onVideoReady(n);case 12:case"end":return t.stop()}},t,this)}));return t}()}]),t}(),nn=function(){function t(e){lt()(this,t),this.adSlot=e,this.config=ut.context.get("templates.bfab"),this.container=document.getElementById(this.
adSlot.getId()),this.theme=null,this.videoSettings=null}return dt()(t,null,[{key:"getName",value:function(){return"bfab"}},{key:"getDefaultConfig",value:function(){return{autoPlayAllowed:!1,defaultStateAllowed:!0,fullscreenAllowed:!0,onInit:function(){}}}}]),dt()(t,[{key:"init",value:function(t){var e=this;if(this.params=t,this.container){this.config.autoPlayAllowed||(this.params.autoPlay=!1,this.params.resolvedStateAutoPlay=!1),this.params.fullscreenAllowed=this.config.fullscreenAllowed;var n="hivi"===this.params.theme?et:tt;ie.initSlot(t),this.container.classList.add("bfab-template"),this.videoSettings=new be(t),this.theme=new n.BfabTheme(this.adSlot,this.params),n.adIsReady({adSlot:this.adSlot,videoSettings:this.videoSettings,params:this.params}).then(function(t){return e.onAdReady(t)}),this.config.onInit(this.adSlot,this.params,this.config)}}},{key:"onAdReady",value:function(){function t(t){return e.apply(this,arguments)}var e=mt()(gt.a.mark(function t(e){var n;return gt.a.wrap(
function(t){for(;;)switch(t.prev=t.next){case 0:if(!document.hidden){t.next=3;break}return t.next=3,ut.utils.once(window,"visibilitychange");case 3:if(this.theme.onAdReady(e),!ie.isVideoEnabled(this.params)){t.next=9;break}return t.next=7,ut.utils.defer(ie.loadVideoAd,this.videoSettings);case 7:n=t.sent,this.theme.onVideoReady(n);case 9:case"end":return t.stop()}},t,this)}));return t}()}]),t}();n.d(e,"getAdProductInfo",function(){return o}),n.d(e,"FloatingRail",function(){return ht}),n.d(e,"resolvedState",function(){return me}),n.d(e,"BigFancyAdAbove",function(){return en}),n.d(e,"BigFancyAdBelow",function(){return nn}),n.d(e,"universalAdPackage",function(){return ie});ot()(window,"ads.adProductsVersion",null)&&window.console.warn("Multiple @wikia/ad-products initializations. This may cause issues."),it()(window,"ads.adProductsVersion","v4.2.6")},function(t,e){t.exports=n(85)},function(t,e){t.exports=n(63)},function(t,e){},function(t,e,n){n(80),t.exports=n(0).Object.keys},function(t,e,
n){var i=n(21),r=n(22);n(40)("keys",function(){return function(t){return r(i(t))}})},function(t,e,n){var i=n(11),r=n(35),o=n(82);t.exports=function(t){return function(e,n,a){var s,u=i(e),c=r(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var i=n(36),r=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):o(t,e)}},function(t,e,n){t.exports={default:n(84),__esModule:!0}},function(t,e,n){n(85);var i=n(0).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},function(t,e,n){var i=n(6);i(i.S+i.F*!n(9),"Object",{defineProperty:n(7).f})},function(t,e,n){var i=function(){return this}()||Function("return this")(),r=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,o=r&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,t.exports=n(87),r)i.regeneratorRuntime=o;else try{delete i.regeneratorRuntime}catch(t){i.
regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";function n(t,e,n,i){var o=e&&e.prototype instanceof r?e:r,a=Object.create(o.prototype),s=new p(i||[]);return a._invoke=c(t,n,s),a}function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function r(){}function o(){}function a(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function u(t){function e(n,r,o,a){var s=i(t[n],t,r);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&m.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(c).then(function(t){u.value=t,o(u)},a)}a(s.arg)}function n(t,n){function i(){return new Promise(function(i,r){e(t,n,i,r)})}return r=r?r.then(i,i):i()}var r;this._invoke=n}function c(t,e,n){var r=x;return function(o,a){if(r===L)throw new Error("Generator is already running");if(r===O){if("throw"===o)throw a
;return v()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=l(s,n);if(u){if(u===T)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===x)throw r=O,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=L;var c=i(t,e,n);if("normal"===c.type){if(r=n.done?O:A,c.arg===T)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=O,n.method="throw",n.arg=c.arg)}}}function l(t,e){var n=t.iterator[e.method];if(n===g){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=g,l(t,e),"throw"===e.method))return T;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}var r=i(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,T;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=g),e.delegate=null,T):o:(e.method="throw",e.arg=new TypeError(
"iterator result is not an object"),e.delegate=null,T)}function f(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)}function h(t){if(t){var e=t[_];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(m.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=g,e.done=!0,e};return i.next=i}}return{next:v}}function v(){return{value:g,done:!0}}var g,y=Object.prototype,m=y.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},_=b.iterator||"@@iterator",w=b.asyncIterator||"@@asyncIterator",S=b.toStringTag||"@@toStringTag",k="object"==typeof t,E=e.regeneratorRuntime;if(E)return void(k&&(t.exports=E));E=e.regeneratorRuntime=k?t.exports:{},E.wrap=n;var x="suspendedStart",A="suspendedYield",L=
"executing",O="completed",T={},P={};P[_]=function(){return this};var M=Object.getPrototypeOf,I=M&&M(M(h([])));I&&I!==y&&m.call(I,_)&&(P=I);var C=a.prototype=r.prototype=Object.create(P);o.prototype=C.constructor=a,a.constructor=o,a[S]=o.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,S in t||(t[S]="GeneratorFunction")),t.prototype=Object.create(C),t},E.awrap=function(t){return{__await:t}},s(u.prototype),u.prototype[w]=function(){return this},E.AsyncIterator=u,E.async=function(t,e,i,r){var o=new u(n(t,e,i,r));return E.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},s(C),C[S]="Generator",C[_]=function(){return this},C.toString=function(){return"[object Generator]"},E.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),
function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},E.values=h,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,i){return o.type="throw",o.arg=t,n.next=e,i&&(n.method="next",n.arg=g),!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var a=m.call(r,"catchLoc"),s=m.call(r,"finallyLoc");if(a&&s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return e
(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&m.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,T):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),T},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),d(n),T}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.
tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;d(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:h(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=g),T}}}(function(){return this}()||Function("return this")())},function(t,e,n){n(56),n(43),n(61),n(95),n(102),n(103),t.exports=n(0).Promise},function(t,e,n){var i=n(36),r=n(34);t.exports=function(t){return function(e,n){var o,a,s=String(r(e)),u=i(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(t,e,n){"use strict";var i=n(44),r=n(24),o=n(30),a={};n(12)(a,n(5)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var i=n(7),r=n(8),o=n(22);t.exports=n(9)?Object.defineProperties:function(t,e){r(t);for(var n,a=o(e),s=a.length,u
=0;s>u;)i.f(t,n=a[u++],e[n]);return t}},function(t,e,n){"use strict";var i=n(93),r=n(94),o=n(25),a=n(11);t.exports=n(57)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var i,r,o,a,s=n(29),u=n(2),c=n(17),l=n(62),f=n(6),d=n(13),p=n(27),h=n(96),v=n(97),g=n(66),y=n(67).set,m=n(99)(),b=n(45),_=n(68),w=n(69),S=u.TypeError,k=u.process,E=u.Promise,x="process"==l(k),A=function(){},L=r=b.f,O=!!function(){try{var t=E.resolve(1),e=(t.constructor={})[n(5)("species")]=function(t){t(A,A)};return(x||"function"==typeof PromiseRejectionEvent)&&t.then(A)instanceof e}catch(t){}}(),T=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},P=
function(t,e){if(!t._n){t._n=!0;var n=t._c;m(function(){for(var i=t._v,r=1==t._s,o=0;n.length>o;)!function(e){var n,o,a=r?e.ok:e.fail,s=e.resolve,u=e.reject,c=e.domain;try{a?(r||(2==t._h&&C(t),t._h=1),!0===a?n=i:(c&&c.enter(),n=a(i),c&&c.exit()),n===e.promise?u(S("Promise-chain cycle")):(o=T(n))?o.call(n,s,u):s(n)):u(i)}catch(t){u(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&M(t)})}},M=function(t){y.call(u,function(){var e,n,i,r=t._v,o=I(t);if(o&&(e=_(function(){x?k.emit("unhandledRejection",r,t):(n=u.onunhandledrejection)?n({promise:t,reason:r}):(i=u.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=x||I(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},I=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,i=0;n.length>i;)if(e=n[i++],e.fail||!I(e.promise))return!1;return!0},C=function(t){y.call(u,function(){var e;x?k.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},R=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.
slice()),P(e,!0))},j=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw S("Promise can't be resolved itself");(e=T(t))?m(function(){var i={_w:n,_d:!1};try{e.call(t,c(j,i,1),c(R,i,1))}catch(t){R.call(i,t)}}):(n._v=t,n._s=1,P(n,!1))}catch(t){R.call({_w:n,_d:!1},t)}}};O||(E=function(t){h(this,E,"Promise","_h"),p(t),i.call(this);try{t(c(j,this,1),c(R,this,1))}catch(t){R.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(100)(E.prototype,{then:function(t,e){var n=L(g(this,E));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=x?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new i;this.promise=t,this.resolve=c(j,t,1),this.reject=c(R,t,1)},b.f=L=function(t){return t===E||t===a?new o(t):r(t)}),f(f.G+f.W+f.F*!O,{Promise:E}),n(30)(E,"Promise"),n(101)("Promise"),a=n(0).
Promise,f(f.S+f.F*!O,"Promise",{reject:function(t){var e=L(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!O),"Promise",{resolve:function(t){return w(s&&this===a?E:this,t)}}),f(f.S+f.F*!(O&&n(70)(function(t){E.all(t).catch(A)})),"Promise",{all:function(t){var e=this,n=L(e),i=n.resolve,r=n.reject,o=_(function(){var n=[],o=0,a=1;v(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||i(n))},r)}),--a||i(n)});return o.e&&r(o.v),n.promise},race:function(t){var e=this,n=L(e),i=n.reject,r=_(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(17),r=n(63),o=n(64),a=n(8),s=n(35),u=n(65),c={},l={},e=t.exports=function(t,e,n,f,d){var p,h,v,g,y=d?function(){return t}:u(t),m=i(n,f,e?2:1),b=0;if("function"!=typeof y)throw TypeError(t+
" is not iterable!");if(o(y)){for(p=s(t.length);p>b;b++)if((g=e?m(a(h=t[b])[0],h[1]):m(t[b]))===c||g===l)return g}else for(v=y.call(t);!(h=v.next()).done;)if((g=r(v,m,h.value,e))===c||g===l)return g};e.BREAK=c,e.RETURN=l},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(2),r=n(67).set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,u="process"==n(23)(a);t.exports=function(){var t,e,n,c=function(){var i,r;for(u&&(i=a.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.
data=l=!l}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(c)}}else n=function(){r.call(i,c)};return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e,n){var i=n(12);t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:i(t,r,e[r]);return t}},function(t,e,n){"use strict";var i=n(2),r=n(0),o=n(7),a=n(9),s=n(5)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:i[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var i=n(6),r=n(0),o=n(2),a=n(66),s=n(69);i(i.P+i.R,"Promise",{finally:function(t){var e=a(this,r.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var i=n(6),r=n(45),o=n(68);i(i.S,"Promise",{try:function(t){var e=r.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){
"use strict";e.__esModule=!0;var i=n(46),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=r.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}},function(t,e,n){n(106),t.exports=n(0).Object.assign},function(t,e,n){var i=n(6);i(i.S+i.F,"Object",{assign:n(107)})},function(t,e,n){"use strict";var i=n(22),r=n(47),o=n(31),a=n(21),s=n(54),u=Object.assign;t.exports=!u||n(18)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){for(var n=a(t),u=arguments.length,c=1,l=r.f,f=o.f;u>c;)for(var d,p=s(arguments[c++]),h=l?i(p).concat(l(p)):i(p),v=h.length,g=0;v>g;)f.call(p,d=h[g++])&&(n[d]=p[d]);return n}:u},function(t,e){t.exports=n(202)},function(t,e){t.exports={CROSS:
'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19.707 4.293a.999.999 0 0 0-1.414 0L12 10.586 5.707 4.293a.999.999 0 1 0-1.414 1.414L10.586 12l-6.293 6.293a.999.999 0 1 0 1.414 1.414L12 13.414l6.293 6.293a.997.997 0 0 0 1.414 0 .999.999 0 0 0 0-1.414L13.414 12l6.293-6.293a.999.999 0 0 0 0-1.414" fill-rule="evenodd"/></svg>',LEARN_MORE:
'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill-rule="evenodd"><g transform="translate(-753.000000, -1764.000000)" fill-rule="nonzero"><g transform="translate(153.000000, 1746.000000)"><g transform="translate(5.000000, 0.000000)"><g transform="translate(459.000000, 0.000000)"><g transform="translate(136.000000, 18.000000)"><polygon points="24 0 15 0 18.4395 3.4395 9.033 12.846 11.154 14.967 20.5605 5.5605 24 9"></polygon><path d="M19.5,24 L1.5,24 C0.672,24 0,23.328 0,22.5 L0,4.5 C0,3.672 0.672,3 1.5,3 L10.5,3 L10.5,6 L3,6 L3,21 L18,21 L18,13.5 L21,13.5 L21,22.5 C21,23.328 20.328,24 19.5,24 Z"></path></g></g></g></g></g></g></svg>',PAUSE:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><rect width="7" height="22" rx="1" x="3" y="1"></rect><rect x="14" width="7" height="22" rx="1" y="1"></rect></g></svg>',PLAY:
'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19.69 12.6L5.143 22.867a.722.722 0 0 1-.753.05.733.733 0 0 1-.391-.65V1.733c0-.274.15-.524.391-.65a.724.724 0 0 1 .753.05l14.545 10.266a.734.734 0 0 1 0 1.201z" fill-rule="evenodd"></path></svg>',REPLAY:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 23c6.065 0 11-4.863 11-10.84a.992.992 0 0 0-1-.985c-.553 0-1 .44-1 .986 0 4.89-4.037 8.868-9 8.868s-9-3.978-9-8.868c0-4.89 4.037-8.869 9-8.869a8.991 8.991 0 0 1 6.975 3.292l-3.794-.501a.996.996 0 0 0-1.124.845.987.987 0 0 0 .858 1.108l5.946.785a.996.996 0 0 0 1.124-.845l.797-5.86a.987.987 0 0 0-.858-1.107.994.994 0 0 0-1.124.846l-.446 3.28A10.997 10.997 0 0 0 12 1.322c-6.065 0-11 4.862-11 10.839C1 18.137 5.935 23 12 23" fill-rule="evenodd"/></svg>',FULLSCREEN_OFF:
'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 9H8V2H5v4H1v3h4.5zm13 0H16V2h3v4h4v3h-4.5zm-13 6H8v7H5v-4H1v-3h4.5zm13 0H16v7h3v-4h4v-3h-4.5z" fill-rule="evenodd"/></svg>',FULLSCREEN_ON:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21.5 22H23v-7h-3v4h-4v3h5.5zM23 3.5V9h-3V5h-4V2h7v1.5zm-22 17V15h3v4h4v3H1v-1.5zM2.5 2H1v7h3V5h4V2H2.5z" fill-rule="evenodd"/></svg>',VOLUME_OFF:
'<svg viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><defs><style>.cls-1{fill:#fff;opacity:0.4;}.cls-2{fill:#231f20;}</style></defs><title>sound_off_button</title><circle class="cls-1" cx="14.06" cy="13.96" r="13.74"/><path class="cls-2" d="M16,2.93A13.07,13.07,0,1,1,2.93,16,13.08,13.08,0,0,1,16,2.93M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Z" transform="translate(-2 -2)"/><g id="Page-1"><g id="Video-Player-Skin"><g id="Video-Copy"><g id="volume-off"><path id="Shape" class="cls-2" d="M14.25,9.17l-3.79,4.11H6.84c-.78,0-1,.46-1,.89V17.7a1,1,0,0,0,1,1h3.65l3.79,4.18a1.09,1.09,0,0,0,.53.14,1,1,0,0,0,.5-.14,1,1,0,0,0,.5-.9V10a1,1,0,0,0-.5-.9,1.06,1.06,0,0,0-1,.05Z" transform="translate(-2 -2)"/><path id="Fill-1" class="cls-2" d="M22.91,16.21l3-3a.92.92,0,1,0-1.3-1.3l-3,3-3-3a.92.92,0,1,0-1.3,1.3l3,3-3,3a.92.92,0,1,0,1.3,1.3l3-3,3,3a.92.92,0,1,0,1.3-1.3Z" transform="translate(-2 -2)"/></g></g></g></g></svg>',VOLUME_ON:
'<svg viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><defs><style>.cls-1{fill:#fff;opacity:0.4;}.cls-2{fill:#231f20;}</style></defs><title>sound_on_button</title><circle class="cls-1" cx="13.96" cy="14.06" r="13.74"/><path class="cls-2" d="M16,2.93A13.07,13.07,0,1,1,2.93,16,13.08,13.08,0,0,1,16,2.93M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Z" transform="translate(-2 -2)"/><g id="Page-1"><g id="Video-Player-Skin"><g id="Video-Copy"><g id="volume"><path id="Shape" class="cls-2" d="M14.24,9.17l-3.79,4.11H6.82c-.78,0-1,.46-1,.89V17.7a1,1,0,0,0,1,1h3.65l3.79,4.18a1.09,1.09,0,0,0,.53.14,1,1,0,0,0,.5-.14,1,1,0,0,0,.5-.9V10a1,1,0,0,0-.5-.9,1.06,1.06,0,0,0-1,.05Z" transform="translate(-2 -2)"/><path id="Shape-2" data-name="Shape" class="cls-2" d="M19.18,19.33a4.39,4.39,0,0,0,0-6.19.71.71,0,0,0-1,1,3,3,0,0,1,0,4.19.71.71,0,0,0,1,1Z" transform="translate(-2 -2)"/><path id="Shape-3" data-name="Shape" class="cls-2" d="M23.3,16.23a6.19,6.19,0,0,0-1.81-4.39.71.71,0,1,0-1,1,4.81,4.81,0,0,1,0,6.79.71.71,0,1,0,1,1,6.19,6.19,0,0,0,1.81-4.39Z" transform="translate(-2 -2)"/></g></g></g></g></svg>'
,HIVI_VOLUME_OFF:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M6 8.007H1.347C.333 8.007 0 8.769 0 9.391v5.032C0 15.045.333 16 1.347 16H6l5.007 5.796c.215.132.454.205.693.205.24 0 .436-.063.65-.196.429-.265.65-.75.65-1.28V3.447c0-.53-.221-1.02-.65-1.284-.429-.265-.935-.187-1.365.078L6 8.007zM20.305 12l2.425-2.425a.922.922 0 1 0-1.306-1.305l-2.425 2.424-2.423-2.424a.923.923 0 0 0-1.306 1.305L17.695 12l-2.425 2.425a.922.922 0 1 0 1.306 1.304L19 13.306l2.425 2.423a.92.92 0 0 0 1.306 0 .922.922 0 0 0 0-1.304L20.305 12z" fill-rule="evenodd"></path></svg>',HIVI_VOLUME_ON:
'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><path d="M6 8.007H1.347C.333 8.007 0 8.769 0 9.391v5.032C0 15.045.333 16 1.347 16H6l5.007 5.796c.215.132.454.205.693.205.24 0 .436-.063.65-.196.429-.265.65-.75.65-1.28V3.447c0-.53-.221-1.02-.65-1.284-.429-.265-.935-.187-1.365.078L6 8.007zm11.612 8.524a5.858 5.858 0 0 0 0-8.253.944.944 0 0 0-1.337 1.332 3.97 3.97 0 0 1 0 5.59.943.943 0 1 0 1.337 1.331z"></path><path d="M23.03 12.135c0-2.21-.859-4.292-2.418-5.857a.943.943 0 1 0-1.337 1.332 6.37 6.37 0 0 1 1.868 4.525 6.37 6.37 0 0 1-1.868 4.525.943.943 0 1 0 1.338 1.332 8.249 8.249 0 0 0 2.418-5.857z"></path></g></svg>'}},function(t,e,n){n(43),n(111),t.exports=n(0).Array.from},function(t,e,n){"use strict";var i=n(17),r=n(6),o=n(21),a=n(63),s=n(64),u=n(35),c=n(112),l=n(65);r(r.S+r.F*!n(70)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,f,d=o(t),p="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1
]:void 0,g=void 0!==v,y=0,m=l(d);if(g&&(v=i(v,h>2?arguments[2]:void 0,2)),void 0==m||p==Array&&s(m))for(e=u(d.length),n=new p(e);e>y;y++)c(n,y,g?v(d[y],y):d[y]);else for(f=m.call(d),n=new p;!(r=f.next()).done;y++)c(n,y,g?a(f,v,[r.value,y],!0):r.value);return n.length=y,n}})},function(t,e,n){"use strict";var i=n(7),r=n(24);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(71),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t){return Array.isArray(t)?t:(0,r.default)(t)}},function(t,e,n){n(115),t.exports=n(0).Object.getPrototypeOf},function(t,e,n){var i=n(21),r=n(60);n(40)("getPrototypeOf",function(){return function(t){return r(i(t))}})},function(t,e,n){t.exports={default:n(117),__esModule:!0}},function(t,e,n){n(43),n(61),t.exports=n(49).f("iterator")},function(t,e,n){n(119),n(56),n(124),n(125),t.exports=n(0).Symbol},function(t,e,n){"use strict";var i=n(2),r=n(10),o=n(9),a=n(6),s=n(58),u=n(120).KEY,c=n(
18),l=n(38),f=n(30),d=n(26),p=n(5),h=n(49),v=n(51),g=n(121),y=n(122),m=n(8),b=n(11),_=n(42),w=n(24),S=n(44),k=n(123),E=n(52),x=n(7),A=n(22),L=E.f,O=x.f,T=k.f,P=i.Symbol,M=i.JSON,I=M&&M.stringify,C=p("_hidden"),R=p("toPrimitive"),j={}.propertyIsEnumerable,N=l("symbol-registry"),B=l("symbols"),V=l("op-symbols"),D=Object.prototype,F="function"==typeof P,z=i.QObject,U=!z||!z.prototype||!z.prototype.findChild,W=o&&c(function(){return 7!=S(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=L(D,e);i&&delete D[e],O(t,e,n),i&&t!==D&&O(D,e,i)}:O,H=function(t){var e=B[t]=S(P.prototype);return e._k=t,e},G=F&&"symbol"==typeof P.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof P},q=function(t,e,n){return t===D&&q(V,e,n),m(t),e=_(e,!0),m(n),r(B,e)?(n.enumerable?(r(t,C)&&t[C][e]&&(t[C][e]=!1),n=S(n,{enumerable:w(0,!1)})):(r(t,C)||O(t,C,w(1,{})),t[C][e]=!0),W(t,e,n)):O(t,e,n)},K=function(t,e){m(t);for(var n,i=g(e=b(e)),r=0,o=i.length;o>r;
)q(t,n=i[r++],e[n]);return t},Y=function(t,e){return void 0===e?S(t):K(S(t),e)},J=function(t){var e=j.call(this,t=_(t,!0));return!(this===D&&r(B,t)&&!r(V,t))&&(!(e||!r(this,t)||!r(B,t)||r(this,C)&&this[C][t])||e)},$=function(t,e){if(t=b(t),e=_(e,!0),t!==D||!r(B,e)||r(V,e)){var n=L(t,e);return!n||!r(B,e)||r(t,C)&&t[C][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=T(b(t)),i=[],o=0;n.length>o;)r(B,e=n[o++])||e==C||e==u||i.push(e);return i},Z=function(t){for(var e,n=t===D,i=T(n?V:b(t)),o=[],a=0;i.length>a;)!r(B,e=i[a++])||n&&!r(D,e)||o.push(B[e]);return o};F||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===D&&e.call(V,n),r(this,C)&&r(this[C],t)&&(this[C][t]=!1),W(this,t,w(1,n))};return o&&U&&W(D,t,{configurable:!0,set:e}),H(t)},s(P.prototype,"toString",function(){return this._k}),E.f=$,x.f=q,n(73).f=k.f=Q,n(31).f=J,n(47).f=Z,o&&!n(29)&&s(D,"propertyIsEnumerable",J,!0),h.f=function(
t){return H(p(t))}),a(a.G+a.W+a.F*!F,{Symbol:P});for(var X="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;X.length>tt;)p(X[tt++]);for(var et=A(p.store),nt=0;et.length>nt;)v(et[nt++]);a(a.S+a.F*!F,"Symbol",{for:function(t){return r(N,t+="")?N[t]:N[t]=P(t)},keyFor:function(t){if(!G(t))throw TypeError(t+" is not a symbol!");for(var e in N)if(N[e]===t)return e},useSetter:function(){U=!0},useSimple:function(){U=!1}}),a(a.S+a.F*!F,"Object",{create:Y,defineProperty:q,defineProperties:K,getOwnPropertyDescriptor:$,getOwnPropertyNames:Q,getOwnPropertySymbols:Z}),M&&a(a.S+a.F*(!F||c(function(){var t=P();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!G(t)){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);return e=i[1],"function"==typeof e&&(n=e),!n&&y(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!G(e))return e}),i[1]=e,I.apply(M,i)}}}),P.
prototype[R]||n(12)(P.prototype,R,P.prototype.valueOf),f(P,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(t,e,n){var i=n(26)("meta"),r=n(13),o=n(10),a=n(7).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(18)(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,i,{value:{i:"O"+ ++s,w:{}}})},f=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[i].i},d=function(t,e){if(!o(t,i)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[i].w},p=function(t){return c&&h.NEED&&u(t)&&!o(t,i)&&l(t),t},h=t.exports={KEY:i,NEED:!1,fastKey:f,getWeak:d,onFreeze:p}},function(t,e,n){var i=n(22),r=n(47),o=n(31);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},function(t,e,n){var i=n(23);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(11),r=n(73).f,o={}.toString,a="object"==typeof
window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return r(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):r(i(t))}},function(t,e,n){n(51)("asyncIterator")},function(t,e,n){n(51)("observable")},function(t,e,n){t.exports={default:n(127),__esModule:!0}},function(t,e,n){n(128);var i=n(0).Object;t.exports=function(t,e){return i.getOwnPropertyDescriptor(t,e)}},function(t,e,n){var i=n(11),r=n(52).f;n(40)("getOwnPropertyDescriptor",function(){return function(t,e){return r(i(t),e)}})},function(t,e,n){t.exports={default:n(130),__esModule:!0}},function(t,e,n){n(131),t.exports=n(0).Object.setPrototypeOf},function(t,e,n){var i=n(6);i(i.S,"Object",{setPrototypeOf:n(132).set})},function(t,e,n){var i=n(13),r=n(8),o=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(17)(Function.call,n(52).f
(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){t.exports={default:n(134),__esModule:!0}},function(t,e,n){n(135);var i=n(0).Object;t.exports=function(t,e){return i.create(t,e)}},function(t,e,n){var i=n(6);i(i.S,"Object",{create:n(44)})},function(t,e){t.exports=n(205)},function(t,e){t.exports=n(216)},function(t,e){t.exports=n(217)},function(t,e){t.exports=n(92)},function(t,e){t.exports=n(56)}])},function(t,e,n){var i=n(70),r=n(45);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(28);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},
function(t,e,n){function i(t){return null==t?void 0===t?u:s:c&&c in Object(t)?o(t):a(t)}var r=n(35),o=n(142),a=n(143),s="[object Null]",u="[object Undefined]",c=r?r.toStringTag:void 0;t.exports=i},function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},function(t,e,n){function i(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}var r=n(36),o=1/0;t.exports=i},function(t,e,n){var i=n(41);t.exports=function(t){return Object(i(t))}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";var i=n(118)(!0);n(76)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t
,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e){t.exports=!0},function(t,e,n){var i=n(6).f,r=n(12),o=n(1)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){n(121);for(var i=n(2),r=n(13),o=n(18),a=n(1)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=i[c],f=l&&l.prototype;f&&!f[a]&&r(f,a,c),o[c]=o.Array}},function(t,e,n){var i=n(5),r=i.Symbol;t.exports=r},function(t,e,n){function i(t){return"symbol"
==typeof t||o(t)&&r(t)==a}var r=n(23),o=n(24),a="[object Symbol]";t.exports=i},function(t,e,n){var i=n(14),r=i(Object,"create");t.exports=r},function(t,e,n){function i(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}var r=n(157),o=n(158),a=n(159),s=n(160),u=n(161);i.prototype.clear=r,i.prototype.delete=o,i.prototype.get=a,i.prototype.has=s,i.prototype.set=u,t.exports=i},function(t,e,n){function i(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}var r=n(57);t.exports=i},function(t,e,n){function i(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}var r=n(163);t.exports=i},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(44)("keys"),r=n(27);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e,n){var i=n(2),r=i[
"__core-js_shared__"]||(i["__core-js_shared__"]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(7),r=n(2).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,n){var i=n(7);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.
exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,r,s,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(n=this._events[t],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,u=0;u<r;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError(
"listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,r,a,s;if(!i(e))throw TypeError(
"listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(s=a;s-->0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.
prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var i=n(113),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()},function(t,e,n){var i=n(4),r=n(120),o=n(45),a=n(43)("IE_PROTO"),s=function(){},u=function(){var t,e=n(46)("iframe"),i=o.length;for(e.style.display="none",n(78).appendChild(e),
e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;i--;)delete u.prototype[o[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(21),r=n(1)("toStringTag"),o="Arguments"==i(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),r))?n:o?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){"use strict";function i(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=r(e),this.reject=r(n)}var r=n(28);t.exports.f=function(t){return new i(t)}},function(t,e,n){function i(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=
n}var r=n(139);t.exports=i},function(t,e,n){function i(t){if(!o(t))return!1;var e=r(t);return e==s||e==u||e==a||e==c}var r=n(23),o=n(10),a="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",c="[object Proxy]";t.exports=i},function(t,e){function n(t,e){return t===e||t!==t&&e!==e}t.exports=n},function(t,e,n){function i(t,e){return r(t)?t:o(t,e)?[t]:a(s(t))}var r=n(11),o=n(59),a=n(147),s=n(167);t.exports=i},function(t,e,n){function i(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!o(t))||(s.test(t)||!a.test(t)||null!=e&&t in Object(e))}var r=n(11),o=n(36),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=i},function(t,e,n){function i(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}var r=n(150),o=n(162),a=n(164),s=n(165),u=n(166);i.prototype.clear=r,i.prototype.delete=o,i.prototype.get=a,i.prototype.has=s,i.prototype.set=u,t.exports=i},function(t,e,n){
var i=n(14),r=n(5),o=i(r,"Map");t.exports=o},function(t,e){function n(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||r.test(t))&&t>-1&&t%1==0&&t<e}var i=9007199254740991,r=/^(?:0|[1-9]\d*)$/;t.exports=n},function(t,e,n){function i(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}var r=n(89);t.exports=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(172),o=i(r),a=n(174),s=i(a),u="function"==typeof s.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t};e.default="function"==typeof s.default&&"symbol"===u(o.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":void 0===t?"undefined":u(t)}},function(t,e,n){e.f=n(1)},function(t,e,n){var i=n(2),r=n(0),o=n(32),a=n(65),s=n(6).f;t.
exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}var i=9007199254740991;t.exports=n},function(t,e,n){function i(t){return a(t)?r(t):o(t)}var r=n(93),o=n(221),a=n(99);t.exports=i},function(t,e,n){t.exports={default:n(106),__esModule:!0}},function(t,e,n){var i=n(12),r=n(15),o=n(108)(!1),a=n(43)("IE_PROTO");t.exports=function(t,e){var n,s=r(t),u=0,c=[];for(n in s)n!=a&&i(s,n)&&c.push(n);for(;e.length>u;)i(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var i=n(21);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){var i=n(42),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){var i=n(3),r=n(0),o=n(16);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],a={};a[t]=e(n),i(i.S+i.F*o(function(){n(1)}),"Object",a)}},function(t,
e,n){t.exports=!n(8)&&!n(16)(function(){return 7!=Object.defineProperty(n(46)("div"),"a",{get:function(){return 7}}).a})},function(t,e){},function(t,e,n){"use strict";var i=n(32),r=n(3),o=n(77),a=n(13),s=n(12),u=n(18),c=n(119),l=n(33),f=n(79),d=n(1)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,v,g,y,m){c(n,e,v);var b,_,w,S=function(t){if(!p&&t in A)return A[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},k=e+" Iterator",E="values"==g,x=!1,A=t.prototype,L=A[d]||A["@@iterator"]||g&&A[g],O=!p&&L||S(g),T=g?E?S("entries"):O:void 0,P="Array"==e?A.entries||L:L;if(P&&(w=f(P.call(new t)))!==Object.prototype&&w.next&&(l(w,k,!0),i||s(w,d)||a(w,d,h)),E&&L&&"values"!==L.name&&(x=!0,O=function(){return L.call(this)}),i&&!m||!p&&!x&&A[d]||a(A,d,O),u[e]=O,u[k]=h,g)if(b={values:E?O:S("values"),keys:y?O:S("keys"),entries:T},m)for(_ in b)_ in A||o(A,_,b[_]);else r(r.P+r.F*(p||x),e,b);
return b}},function(t,e,n){t.exports=n(13)},function(t,e,n){var i=n(2).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(12),r=n(26),o=n(43)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var i=n(53),r=n(1)("iterator"),o=n(18);t.exports=n(0).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[i(t)]}},function(t,e,n){var i=n(4),r=n(28),o=n(1)("species");t.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||void 0==(n=i(a)[o])?e:r(n)}},function(t,e,n){var i,r,o,a=n(22),s=n(129),u=n(78),c=n(46),l=n(2),f=l.process,d=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,v=l.Dispatch,g=0,y={},m=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},b=function(t){m.call(t.data)};d&&p||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.
push(arguments[n++]);return y[++g]=function(){s("function"==typeof t?t:Function(t),e)},i(g),g},p=function(t){delete y[t]},"process"==n(21)(f)?i=function(t){f.nextTick(a(m,t,1))}:v&&v.now?i=function(t){v.now(a(m,t,1))}:h?(r=new h,o=r.port2,r.port1.onmessage=b,i=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(i=function(t){l.postMessage(t+"","*")},l.addEventListener("message",b,!1)):i="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:d,clear:p}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var i=n(4),r=n(7),o=n(54);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){function i(t,e,n){return null==t?t:r(t,e,n)}var r=n(138);t.exports=i},function(t,e,n){function i(t,e,n){var i=t
[e];s.call(t,e)&&o(i,n)&&(void 0!==n||e in t)||r(t,e,n)}var r=n(55),o=n(57),a=Object.prototype,s=a.hasOwnProperty;t.exports=i},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,n(141))},function(t,e){function n(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var i=Function.prototype,r=i.toString;t.exports=n},function(t,e,n){function i(t,e){e=r(e,t);for(var n=0,i=e.length;null!=t&&n<i;)t=t[o(e[n++])];return n&&n==i?t:void 0}var r=n(58),o=n(25);t.exports=i},function(t,e,n){var i=n(70),r=n(45).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){var i=n(30),r=n(29),o=n(15),a=n(47),s=n(12),u=n(74),c=Object.getOwnPropertyDescriptor;e.f=n(8)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){function i(t,e,n){function i(e){var n=m,i=b;return m=b=void 0,E=e,w=t.apply(i,n)}function l(t){
return E=t,S=setTimeout(p,e),x?i(t):w}function f(t){var n=t-k,i=t-E,r=e-n;return A?c(r,_-i):r}function d(t){var n=t-k,i=t-E;return void 0===k||n>=e||n<0||A&&i>=_}function p(){var t=o();if(d(t))return h(t);S=setTimeout(p,f(t))}function h(t){return S=void 0,L&&m?i(t):(m=b=void 0,w)}function v(){void 0!==S&&clearTimeout(S),E=0,m=k=b=S=void 0}function g(){return void 0===S?w:h(o())}function y(){var t=o(),n=d(t);if(m=arguments,b=this,k=t,n){if(void 0===S)return l(k);if(A)return S=setTimeout(p,e),i(k)}return void 0===S&&(S=setTimeout(p,e)),w}var m,b,_,w,S,k,E=0,x=!1,A=!1,L=!0;if("function"!=typeof t)throw new TypeError(s);return e=a(e)||0,r(n)&&(x=!!n.leading,A="maxWait"in n,_=A?u(a(n.maxWait)||0,e):_,L="trailing"in n?!!n.trailing:L),y.cancel=v,y.flush=g,y}var r=n(10),o=n(203),a=n(204),s="Expected a function",u=Math.max,c=Math.min;t.exports=i},function(t,e,n){function i(t,e){var n=a(t),i=!n&&o(t),l=!n&&!i&&s(t),d=!n&&!i&&!l&&c(t),p=n||i||l||d,h=p?r(t.length,String):[],v=h.length;for(var g in
t)!e&&!f.call(t,g)||p&&("length"==g||l&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||u(g,v))||h.push(g);return h}var r=n(208),o=n(94),a=n(11),s=n(95),u=n(62),c=n(97),l=Object.prototype,f=l.hasOwnProperty;t.exports=i},function(t,e,n){var i=n(209),r=n(24),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=i(function(){return arguments}())?i:function(t){return r(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e,n){(function(t){var i=n(5),r=n(210),o="object"==typeof e&&e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,u=s?i.Buffer:void 0,c=u?u.isBuffer:void 0,l=c||r;t.exports=l}).call(e,n(96)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t
}},function(t,e,n){var i=n(211),r=n(212),o=n(213),a=o&&o.isTypedArray,s=a?r(a):i;t.exports=s},function(t,e){function n(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||i)}var i=Object.prototype;t.exports=n},function(t,e,n){function i(t){return null!=t&&o(t.length)&&!r(t)}var r=n(56),o=n(67);t.exports=i},function(t,e,n){function i(t){var e=this.__data__=new r(t);this.size=e.size}var r=n(38),o=n(227),a=n(228),s=n(229),u=n(230),c=n(231);i.prototype.clear=o,i.prototype.delete=a,i.prototype.get=s,i.prototype.has=u,i.prototype.set=c,t.exports=i},function(t,e,n){function i(t,e,n,a,s){return t===e||(null==t||null==e||!o(t)&&!o(e)?t!==t&&e!==e:r(t,e,n,a,i,s))}var r=n(232),o=n(24);t.exports=i},function(t,e,n){function i(t,e,n,i,c,l){var f=n&s,d=t.length,p=e.length;if(d!=p&&!(f&&p>d))return!1;var h=l.get(t);if(h&&l.get(e))return h==e;var v=-1,g=!0,y=n&u?new r:void 0;for(l.set(t,e),l.set(e,t);++v<d;){var m=t[v],b=e[v];if(i)var _=f?i(b,m,v,e,t,l):i(m,b,v,t,e,l);if(void 0!==_
){if(_)continue;g=!1;break}if(y){if(!o(e,function(t,e){if(!a(y,e)&&(m===t||c(m,t,n,i,l)))return y.push(e)})){g=!1;break}}else if(m!==b&&!c(m,b,n,i,l)){g=!1;break}}return l.delete(t),l.delete(e),g}var r=n(233),o=n(236),a=n(237),s=1,u=2;t.exports=i},function(t,e,n){function i(t){return t===t&&!r(t)}var r=n(10);t.exports=i},function(t,e){function n(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}t.exports=n},function(t,e,n){"use strict";function i(t,e,n,i){return{isEnabled:function(){return t.get("opts.playerTracking")},onEvent:function(t,r,o){var a=m()(o,{pv_unique_id:window.pvUID,pv_number:n.pv,country:e.getCountryCode(),skin:n.skin,wsi:_.context.get("slots."+r.position+".targeting.wsi")||"(none)"});i.trackDW(a,"adengplayerinfo")}}}function r(t){t?M.classList.add(P):M.classList.remove(P)}function o(t,e){var n=window.scrollY||window.pageYOffset||0,i=t.getElement();if(e.config&&e.config.aspectRatio){var r=e.config.aspectRatio,o=r.resolved,a=r.default,s=w.
resolvedState.isResolvedState(e)||i.classList.contains(T);return n<=document.body.offsetWidth/(s?o:a)}return n<=i.offsetHeight}function a(){return{autoPlayAllowed:!0,defaultStateAllowed:!0,fullscreenAllowed:!0,onInit:function(t,e){_.context.set("slots."+t.getSlotName()+".options.isVideoMegaEnabled",e.isVideoMegaEnabled)}}}function s(t,e,n,r,o,a,s,c){N.init(a,r),_.scrollListener.init(),_.context.extend({slots:D[c]}),_.context.push("listeners.porvata",i(a,e,o,t)),u(n,s),d(a,o,c);var l=a.get("targeting.wikiIsTop1000")?_.context.get("targeting.s1"):"_not_a_top1k_wiki";_.context.set("custom.wikiIdentifier",l)}function u(t,e){var n={};_.slotService.getBySlotName=function(e){var i=t.get(e);if(e&&i)return n.hasOwnProperty(e)||(n[e]=c(i)),n[e]},_.slotService.legacyEnabled=_.slotService.enable,_.slotService.enable=function(t){e.unblock(t)}}function c(t){var e=_.context.get("slots."+t.name)||{targeting:{}};return t=m()(new b.EventEmitter,t,{config:e,default:{getSlotName:function(){return t.name}}
,getElement:function(){return t.container.parentElement},getId:function(){return t.name},getSlotName:function(){return t.name},getTargeting:function(){return e.targeting},getVideoAdUnit:function(){return B.build(t)},setConfigProperty:function(e,n){_.context.set("slots."+t.name+"."+e,n)}}),t.pre("viewed",function(e){_.slotListener.emitImpressionViewable(e,t)}),t}function l(t){return function(e){if(f().includes(e.type)){-1!==e.slotName.indexOf(",")&&(e.slotName=e.slotName.split(",")[0]);var n=_.slotService.getBySlotName(e.slotName);n.container.parentNode.classList.add("gpt-ad"),_.context.set("slots."+n.getSlotName()+".targeting.src",e.src),_.context.set("slots."+n.getSlotName()+".options.loadedTemplate",e.type),_.context.set("slots."+n.getSlotName()+".options.loadedProduct",e.adProduct),_.templateService.init(e.type,n,e)}else t(e)}}function f(){return F.map(function(t){return t.getName()})}function d(t,e,n){_.context.set("custom.device",_.utils.client.getDeviceType()),_.context.set(
"targeting.skin",n),_.context.set("options.video.moatTracking.enabled",t.get("opts.porvataMoatTrackingEnabled")),_.context.set("options.video.moatTracking.sampling",t.get("opts.porvataMoatTrackingSampling")),g()(e).forEach(function(t){return _.context.set("targeting."+t,e[t])})}function p(t){_.utils.client.checkBlocking(function(){t.initDetection(!0)},function(){t.initDetection(!1)})}function h(t,e){_.slotService.getBySlotName(t).emit(e)}Object.defineProperty(e,"__esModule",{value:!0});var v=n(69),g=n.n(v),y=n(17),m=n.n(y),b=n(49),_=n(9),w=n(19),S=n(50),k=n.n(S),E=n(51),x=n.n(E),A=w.universalAdPackage.CSS_TIMING_EASE_IN_CUBIC,L=w.universalAdPackage.SLIDE_OUT_TIME,O=function(t){return{adsModule:null,adSlot:null,slotParams:null,navbarElement:null,slotsToEnable:["MOBILE_IN_CONTENT","MOBILE_PREFOOTER","MOBILE_BOTTOM_LEADERBOARD","BOTTOM_LEADERBOARD"],adjustPadding:function(t,e){var n=e.aspectRatio,i=Math.max(document.documentElement.clientWidth,window.innerWidth||0),r=n?i/n:t.contentWindow
.document.body.offsetHeight;this.adsModule.setSiteHeadOffset(r)},onReady:function(e){var n=this,i=function(){adjustPadding(e,n.params)},r=document.querySelector(".application-wrapper");r.classList.add("bfaa-template"),this.adjustPadding(e,this.slotParams),window.addEventListener("resize",i),t&&(t.onPageChange(function(){r.classList.remove("bfaa-template"),document.body.classList.remove("vuap-loaded"),document.body.classList.remove("has-bfaa"),document.body.style.paddingTop="",n.adsModule.setSiteHeadOffset(0),window.removeEventListener("resize",i)}),t.onMenuOpen(function(){n.adSlot.emit("unstickImmediately")}))},onInit:function(t,e){var n=this;this.adSlot=t,this.slotParams=e,this.adsModule=window.Mercury.Modules.Ads.getInstance(),this.navbarElement=document.querySelector(".site-head-container .site-head");var i=document.querySelector(".mobile-top-leaderboard");_.context.set("slots."+t.getSlotName()+".options.isVideoMegaEnabled",e.isVideoMegaEnabled),i.style.opacity="0",_.slotTweaker.
onReady(t).then(function(t){i.style.opacity="",n.onReady(t)}),this.adsModule.hideSmartBanner&&this.adsModule.hideSmartBanner()},onBeforeUnstickBfaaCallback:function(){m()(this.navbarElement.style,{transition:"top "+L+"ms "+A,top:"0"})},onAfterUnstickBfaaCallback:function(){m()(this.navbarElement.style,{transition:"",top:""})},moveNavbar:function(t){window.Mercury.Modules.Ads.getInstance().setSiteHeadOffset(t||this.adSlot.getElement().clientHeight),this.navbarElement.style.top=t?t+"px":""}}},T="theme-locked",P="bfaa-pinned",M=document.getElementById("globalNavigation"),I=w.universalAdPackage.CSS_CLASSNAME_STICKY_BFAA,C=w.universalAdPackage.CSS_TIMING_EASE_IN_CUBIC,R=w.universalAdPackage.SLIDE_OUT_TIME,j=function(){return{autoPlayAllowed:!0,defaultStateAllowed:!0,fullscreenAllowed:!0,stickinessAllowed:!0,adSlot:null,slotParams:null,updateNavbarOnScroll:null,slotsToEnable:["BOTTOM_LEADERBOARD","INCONTENT_BOXAD_1","TOP_RIGHT_BOXAD"],onInit:function(t,e){var n=this;this.adSlot=t,this.
slotParams=e,_.context.set("slots."+t.getSlotName()+".options.isVideoMegaEnabled",e.isVideoMegaEnabled);var i=document.getElementById("SPOTLIGHT_FOOTER"),r=document.getElementById("WikiaTopAds");r.style.opacity="0",_.slotTweaker.onReady(t).then(function(){r.style.opacity="",n.updateNavbar()}),this.updateNavbarOnScroll=_.scrollListener.addCallback(function(){return n.updateNavbar()}),window.ads.runtime.disableCommunitySkinOverride||document.body.classList.add("uap-skin"),i&&(i.parentNode.style.display="none")},onAfterStickBfaaCallback:function(){r(!1)},onBeforeUnstickBfaaCallback:function(){_.scrollListener.removeCallback(this.updateNavbarOnScroll),this.updateNavbarOnScroll=null,m()(M.style,{transition:"top "+R+"ms "+C,top:"0"})},onAfterUnstickBfaaCallback:function(){var t=this;m()(M.style,{transition:"",top:""}),this.updateNavbar(),this.updateNavbarOnScroll=_.scrollListener.addCallback(function(){return t.updateNavbar()})},updateNavbar:function(){var t=this.adSlot.getElement(),e=t.
classList.contains(I);r(o(this.adSlot,this.slotParams)&&!e),this.moveNavbar(e?t.offsetHeight:0)},moveNavbar:function(t){M&&(M.style.top=t?t+"px":"")}}},N=function(){function t(){k()(this,t)}return x()(t,null,[{key:"init",value:function(t,e){var n="oasis"!==t.get("targeting.skin"),i=n?O:j;_.templateService.register(w.BigFancyAdAbove,i(e)),_.templateService.register(w.BigFancyAdBelow,a())}}]),t}(),B=function(){function t(){k()(this,t)}return x()(t,null,[{key:"build",value:function(t){var e=t.config.options,n=Object(w.getAdProductInfo)(t.getSlotName(),e.loadedTemplate,e.loadedProduct);return _.utils.stringBuilder.build(_.context.get(e.isVideoMegaEnabled?"vast.megaAdUnitId":"vast.adUnitId"),m()(t.config,n))}}]),t}(),V={adUnitId:"/{custom.dfpId}/wka.{targeting.s0}/{custom.wikiIdentifier}//{targeting.s2}/{src}/{slotName}",custom:{dfpId:"5441"},events:{},listeners:{porvata:[],slot:[]},slots:{},vast:{adUnitId:
"/{custom.dfpId}/wka.{targeting.s0}/{custom.wikiIdentifier}//{targeting.s2}/{targeting.src}/{slotName}",megaAdUnitId:"/{custom.dfpId}/wka1a.{adGroup}/{adProduct}{audioSegment}/{custom.device}/{targeting.skin}-{targeting.s2}/{custom.wikiIdentifier}-{targeting.s0}"},targeting:{outstream:"none",uap:"none"},slotGroups:{LB:["TOP_LEADERBOARD","MOBILE_TOP_LEADERBOARD"],MR:["TOP_RIGHT_BOXAD"],PF:["MOBILE_PREFOOTER","BOTTOM_LEADERBOARD","MOBILE_BOTTOM_LEADERBOARD"],PX:["INVISIBLE_SKIN","INVISIBLE_HIGH_IMPACT","INVISIBLE_HIGH_IMPACT_2"],HiVi:["INCONTENT_BOXAD_1","MOBILE_IN_CONTENT"],VIDEO:["FEATURED","OUTSTREAM","UAP_BFAA","UAP_BFAB","ABCD","VIDEO"]},state:{adStack:window.adsQueue||[],isMobile:!1},options:{customAdLoader:{globalMethodName:"loadCustomAd"},video:{moatTracking:{enabled:!1,partnerCode:"wikiaimajsint377461931603",sampling:0}},porvata:{audio:{exposeToSlot:!0,segment:"-audio",key:"audio"}}}},D={oasis:{TOP_LEADERBOARD:{disabled:!1,slotName:"TOP_LEADERBOARD",sizes:[{viewportSize:[728,0],
sizes:[[3,3],[728,90],[1030,130],[1030,65],[1030,250],[970,365],[970,250],[970,90],[970,66],[970,180],[980,150],[1024,416],[1440,585]]}],options:{},defaultSizes:[[2,2]],targeting:{pos:"TOP_LEADERBOARD",loc:"top"}},BOTTOM_LEADERBOARD:{disabled:!0,slotName:"BOTTOM_LEADERBOARD",sizes:[{viewportSize:[728,0],sizes:[[728,90],[970,250]]}],options:{},defaultSizes:[[2,2]],targeting:{pos:"BOTTOM_LEADERBOARD",loc:"footer"}}},mercury:{BOTTOM_LEADERBOARD:{disabled:!1,slotName:"BOTTOM_LEADERBOARD",sizes:[{viewportSize:[0,0],sizes:[[320,50],[300,250],[300,50]]}],options:{},defaultSizes:[[2,2]],targeting:{pos:["BOTTOM_LEADERBOARD","MOBILE_BOTTOM_LEADERBOARD","MOBILE_PREFOOTER"],loc:"footer"}},MOBILE_BOTTOM_LEADERBOARD:{disabled:!0,slotName:"MOBILE_BOTTOM_LEADERBOARD",sizes:[{viewportSize:[0,0],sizes:[[320,50],[300,250],[300,50]]}],options:{},defaultSizes:[[2,2]],targeting:{pos:"MOBILE_BOTTOM_LEADERBOARD",loc:"footer"}},MOBILE_TOP_LEADERBOARD:{disabled:!1,slotName:"MOBILE_TOP_LEADERBOARD",sizes:[{
viewportSize:[0,0],sizes:[[320,480]]}],options:{},defaultSizes:[[2,2]],targeting:{pos:"MOBILE_TOP_LEADERBOARD",loc:"top"}}}};n(263);n.d(e,"init",function(){return s}),n.d(e,"loadCustomAd",function(){return l}),n.d(e,"checkAdBlocking",function(){return p}),n.d(e,"passSlotEvent",function(){return h}),n.d(e,"context",function(){return _.context}),n.d(e,"universalAdPackage",function(){return w.universalAdPackage}),_.context.extend(V);var F=[w.BigFancyAdAbove,w.BigFancyAdBelow]},function(t,e,n){n(107),t.exports=n(0).Object.keys},function(t,e,n){var i=n(26),r=n(20);n(73)("keys",function(){return function(t){return r(i(t))}})},function(t,e,n){var i=n(15),r=n(72),o=n(109);t.exports=function(t){return function(e,n,a){var s,u=i(e),c=r(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var i=n(42),r=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):o(t,e)}},function(t,e,n
){n(111),t.exports=n(0).Object.assign},function(t,e,n){var i=n(3);i(i.S+i.F,"Object",{assign:n(112)})},function(t,e,n){"use strict";var i=n(20),r=n(48),o=n(30),a=n(26),s=n(71),u=Object.assign;t.exports=!u||n(16)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){for(var n=a(t),u=arguments.length,c=1,l=r.f,f=o.f;u>c;)for(var d,p=s(arguments[c++]),h=l?i(p).concat(l(p)):i(p),v=h.length,g=0;v>g;)f.call(p,d=h[g++])&&(n[d]=p[d]);return n}:u},function(t,e,n){t.exports={default:n(114),__esModule:!0}},function(t,e,n){n(115);var i=n(0).Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},function(t,e,n){var i=n(3);i(i.S+i.F*!n(8),"Object",{defineProperty:n(6).f})},function(t,e,n){t.exports={default:n(117),__esModule:!0}},function(t,e,n){n(75),n(31),n(34),n(124),n(134),n(135),t.exports=n(0).Promise},function(t,e,n){var i=n(42),r=n(41);t.exports=function(t){
return function(e,n){var o,a,s=String(r(e)),u=i(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(t,e,n){"use strict";var i=n(52),r=n(29),o=n(33),a={};n(13)(a,n(1)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var i=n(6),r=n(4),o=n(20);t.exports=n(8)?Object.defineProperties:function(t,e){r(t);for(var n,a=o(e),s=a.length,u=0;s>u;)i.f(t,n=a[u++],e[n]);return t}},function(t,e,n){"use strict";var i=n(122),r=n(123),o=n(18),a=n(15);t.exports=n(76)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):"keys"==e?r(0,n):"values"==e?r(0,t[n]):r(0,[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e){t.exports=function(){}},function
(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var i,r,o,a,s=n(32),u=n(2),c=n(22),l=n(53),f=n(3),d=n(7),p=n(28),h=n(125),v=n(126),g=n(81),y=n(82).set,m=n(130)(),b=n(54),_=n(83),w=n(84),S=u.TypeError,k=u.process,E=u.Promise,x="process"==l(k),A=function(){},L=r=b.f,O=!!function(){try{var t=E.resolve(1),e=(t.constructor={})[n(1)("species")]=function(t){t(A,A)};return(x||"function"==typeof PromiseRejectionEvent)&&t.then(A)instanceof e}catch(t){}}(),T=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},P=function(t,e){if(!t._n){t._n=!0;var n=t._c;m(function(){for(var i=t._v,r=1==t._s,o=0;n.length>o;)!function(e){var n,o,a=r?e.ok:e.fail,s=e.resolve,u=e.reject,c=e.domain;try{a?(r||(2==t._h&&C(t),t._h=1),!0===a?n=i:(c&&c.enter(),n=a(i),c&&c.exit()),n===e.promise?u(S("Promise-chain cycle")):(o=T(n))?o.call(n,s,u):s(n)):u(i)}catch(t){u(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&M(t)})}},M=function(t){y.call(u,function(){var e,n,i,r=t._v,o=I(t);if
(o&&(e=_(function(){x?k.emit("unhandledRejection",r,t):(n=u.onunhandledrejection)?n({promise:t,reason:r}):(i=u.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=x||I(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},I=function(t){return 1!==t._h&&0===(t._a||t._c).length},C=function(t){y.call(u,function(){var e;x?k.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},R=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),P(e,!0))},j=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw S("Promise can't be resolved itself");(e=T(t))?m(function(){var i={_w:n,_d:!1};try{e.call(t,c(j,i,1),c(R,i,1))}catch(t){R.call(i,t)}}):(n._v=t,n._s=1,P(n,!1))}catch(t){R.call({_w:n,_d:!1},t)}}};O||(E=function(t){h(this,E,"Promise","_h"),p(t),i.call(this);try{t(c(j,this,1),c(R,this,1))}catch(t){R.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.
prototype=n(131)(E.prototype,{then:function(t,e){var n=L(g(this,E));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=x?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new i;this.promise=t,this.resolve=c(j,t,1),this.reject=c(R,t,1)},b.f=L=function(t){return t===E||t===a?new o(t):r(t)}),f(f.G+f.W+f.F*!O,{Promise:E}),n(33)(E,"Promise"),n(132)("Promise"),a=n(0).Promise,f(f.S+f.F*!O,"Promise",{reject:function(t){var e=L(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!O),"Promise",{resolve:function(t){return w(s&&this===a?E:this,t)}}),f(f.S+f.F*!(O&&n(133)(function(t){E.all(t).catch(A)})),"Promise",{all:function(t){var e=this,n=L(e),i=n.resolve,r=n.reject,o=_(function(){var n=[],o=0,a=1;v(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||i(n))},r)}),--a||i(n)});return o.e&&r(o.v),n.promise},race:
function(t){var e=this,n=L(e),i=n.reject,r=_(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(22),r=n(127),o=n(128),a=n(4),s=n(72),u=n(80),c={},l={},e=t.exports=function(t,e,n,f,d){var p,h,v,g,y=d?function(){return t}:u(t),m=i(n,f,e?2:1),b=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(p=s(t.length);p>b;b++)if((g=e?m(a(h=t[b])[0],h[1]):m(t[b]))===c||g===l)return g}else for(v=y.call(t);!(h=v.next()).done;)if((g=r(v,m,h.value,e))===c||g===l)return g};e.BREAK=c,e.RETURN=l},function(t,e,n){var i=n(4);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},function(t,e,n){var i=n(18),r=n(1)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},
function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(2),r=n(82).set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,u="process"==n(21)(a);t.exports=function(){var t,e,n,c=function(){var i,r;for(u&&(i=a.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(u)n=function(){a.nextTick(c)};else if(!o||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var l=s.resolve();n=function(){l.then(c)}}else n=function(){r.call(i,c)};else{var f=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},
function(t,e,n){var i=n(13);t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:i(t,r,e[r]);return t}},function(t,e,n){"use strict";var i=n(2),r=n(0),o=n(6),a=n(8),s=n(1)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:i[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var i=n(1)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:n=!0}},o[i]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var i=n(3),r=n(0),o=n(2),a=n(81),s=n(84);i(i.P+i.R,"Promise",{finally:function(t){var e=a(this,r.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var i=n(3),r=n(54),o=n(83);i(i.S,"Promise",
{try:function(t){var e=r.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){t.exports={default:n(137),__esModule:!0}},function(t,e,n){var i=n(0),r=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},function(t,e,n){function i(t,e,n,i){if(!s(t))return t;e=o(e,t);for(var c=-1,l=e.length,f=l-1,d=t;null!=d&&++c<l;){var p=u(e[c]),h=n;if(c!=f){var v=d[p];h=i?i(v,p,d):void 0,void 0===h&&(h=s(v)?v:a(e[c+1])?[]:{})}r(d,p,h),d=d[p]}return t}var r=n(86),o=n(58),a=n(62),s=n(10),u=n(25);t.exports=i},function(t,e,n){var i=n(14),r=function(){try{var t=i(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=r},function(t,e,n){function i(t){return!(!a(t)||o(t))&&(r(t)?h:c).test(s(t))}var r=n(56),o=n(144),a=n(10),s=n(88),u=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,l=Function.prototype,f=Object.prototype,d=l.toString,p=f.hasOwnProperty,h=RegExp("^"+d.call(p).replace(u,"\\$&").replace(
/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=i},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){function i(t){var e=a.call(t,u),n=t[u];try{t[u]=void 0;var i=!0}catch(t){}var r=s.call(t);return i&&(e?t[u]=n:delete t[u]),r}var r=n(35),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=r?r.toStringTag:void 0;t.exports=i},function(t,e){function n(t){return r.call(t)}var i=Object.prototype,r=i.toString;t.exports=n},function(t,e,n){function i(t){return!!o&&o in t}var r=n(145),o=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=i},function(t,e,n){var i=n(5),r=i["__core-js_shared__"];t.exports=r},function(t,e){function n(t,e){return null==t?void 0:t[e]}t.exports=n},function(t,e,n){var i=n(148),r=/^\./,o=
/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=i(function(t){var e=[];return r.test(t)&&e.push(""),t.replace(o,function(t,n,i,r){e.push(i?r.replace(a,"$1"):n||t)}),e});t.exports=s},function(t,e,n){function i(t){var e=r(t,function(t){return n.size===o&&n.clear(),t}),n=e.cache;return e}var r=n(149),o=500;t.exports=i},function(t,e,n){function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(i.Cache||r),n}var r=n(60),o="Expected a function";i.Cache=r,t.exports=i},function(t,e,n){function i(){this.size=0,this.__data__={hash:new r,map:new(a||o),string:new r}}var r=n(151),o=n(38),a=n(61);t.exports=i},function(t,e,n){function i(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}var r=n(
152),o=n(153),a=n(154),s=n(155),u=n(156);i.prototype.clear=r,i.prototype.delete=o,i.prototype.get=a,i.prototype.has=s,i.prototype.set=u,t.exports=i},function(t,e,n){function i(){this.__data__=r?r(null):{},this.size=0}var r=n(37);t.exports=i},function(t,e){function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=n},function(t,e,n){function i(t){var e=this.__data__;if(r){var n=e[t];return n===o?void 0:n}return s.call(e,t)?e[t]:void 0}var r=n(37),o="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;t.exports=i},function(t,e,n){function i(t){var e=this.__data__;return r?void 0!==e[t]:a.call(e,t)}var r=n(37),o=Object.prototype,a=o.hasOwnProperty;t.exports=i},function(t,e,n){function i(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?o:e,this}var r=n(37),o="__lodash_hash_undefined__";t.exports=i},function(t,e){function n(){this.__data__=[],this.size=0}t.exports=n},function(t,e,n){function i(t){var e=this.__data__
,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():a.call(e,n,1),--this.size,!0)}var r=n(39),o=Array.prototype,a=o.splice;t.exports=i},function(t,e,n){function i(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}var r=n(39);t.exports=i},function(t,e,n){function i(t){return r(this.__data__,t)>-1}var r=n(39);t.exports=i},function(t,e,n){function i(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}var r=n(39);t.exports=i},function(t,e,n){function i(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}var r=n(40);t.exports=i},function(t,e){function n(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=n},function(t,e,n){function i(t){return r(this,t).get(t)}var r=n(40);t.exports=i},function(t,e,n){function i(t){return r(this,t).has(t)}var r=n(40);t.exports=i},function(t,e,n){function i(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}var r=n(40);t.exports=i},
function(t,e,n){function i(t){return null==t?"":r(t)}var r=n(168);t.exports=i},function(t,e,n){function i(t){if("string"==typeof t)return t;if(a(t))return o(t,i)+"";if(s(t))return l?l.call(t):"";var e=t+"";return"0"==e&&1/t==-u?"-0":e}var r=n(35),o=n(169),a=n(11),s=n(36),u=1/0,c=r?r.prototype:void 0,l=c?c.toString:void 0;t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}t.exports=n},function(t,e,n){var i,r,o;!function(n){var a=/iPhone/i,s=/iPod/i,u=/iPad/i,c=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,l=/Android/i,f=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,d=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,p=/Windows Phone/i,h=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,v=/BlackBerry/i,g=/BB10/i,y=/Opera Mini/i,m=/(CriOS|Chrome)(?=.*\bMobile\b)/i,b=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,_=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),w=function(t,e){
return t.test(e)},S=function(t){var e=t||navigator.userAgent,n=e.split("[FBAN");if(void 0!==n[1]&&(e=n[0]),n=e.split("Twitter"),void 0!==n[1]&&(e=n[0]),this.apple={phone:w(a,e),ipod:w(s,e),tablet:!w(a,e)&&w(u,e),device:w(a,e)||w(s,e)||w(u,e)},this.amazon={phone:w(f,e),tablet:!w(f,e)&&w(d,e),device:w(f,e)||w(d,e)},this.android={phone:w(f,e)||w(c,e),tablet:!w(f,e)&&!w(c,e)&&(w(d,e)||w(l,e)),device:w(f,e)||w(d,e)||w(c,e)||w(l,e)},this.windows={phone:w(p,e),tablet:w(h,e),device:w(p,e)||w(h,e)},this.other={blackberry:w(v,e),blackberry10:w(g,e),opera:w(y,e),firefox:w(b,e),chrome:w(m,e),device:w(v,e)||w(g,e)||w(y,e)||w(b,e)||w(m,e)},this.seven_inch=w(_,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},k=function(){var t=new S;return t.Class=S,t};void 0!==t&&t
.exports&&"undefined"==typeof window?t.exports=S:void 0!==t&&t.exports&&"undefined"!=typeof window?t.exports=k():(r=[],i=n.isMobile=k(),void 0!==(o="function"==typeof i?i.apply(e,r):i)&&(t.exports=o))}(this)},function(t,e){!function(t){var e=function(e){this._options={checkOnLoad:!1,resetOnEnd:!1,loopCheckTime:50,loopMaxNumber:5,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",debug:!1},this._var={version:"3.2.1",bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}},void 0!==e&&this.setOption(e);var n=this,i=function(){setTimeout(function(){!0===n._options.checkOnLoad&&(!0===n._options.debug&&n._log("onload->eventCallback","A check loading is launched"),null===n._var.bait&&n._creatBait(),setTimeout(function(){n.check()},1))},1)};void 0!==t.addEventListener?t.
addEventListener("load",i,!1):t.attachEvent("onload",i)};e.prototype._options=null,e.prototype._var=null,e.prototype._bait=null,e.prototype._log=function(t,e){console.log("[BlockAdBlock]["+t+"] "+e)},e.prototype.setOption=function(t,e){if(void 0!==e){var n=t;t={},t[n]=e}for(var i in t)this._options[i]=t[i],!0===this._options.debug&&this._log("setOption",'The option "'+i+'" he was assigned to "'+t[i]+'"');return this},e.prototype._creatBait=function(){var e=document.createElement("div");e.setAttribute("class",this._options.baitClass),e.setAttribute("style",this._options.baitStyle),this._var.bait=t.document.body.appendChild(e),this._var.bait.offsetParent,this._var.bait.offsetHeight,this._var.bait.offsetLeft,this._var.bait.offsetTop,this._var.bait.offsetWidth,this._var.bait.clientHeight,this._var.bait.clientWidth,!0===this._options.debug&&this._log("_creatBait","Bait has been created")},e.prototype._destroyBait=function(){t.document.body.removeChild(this._var.bait),this._var.bait=null,!0
===this._options.debug&&this._log("_destroyBait","Bait has been removed")},e.prototype.check=function(t){if(void 0===t&&(t=!0),!0===this._options.debug&&this._log("check","An audit was requested "+(!0===t?"with a":"without")+" loop"),!0===this._var.checking)return!0===this._options.debug&&this._log("check","A check was canceled because there is already an ongoing"),!1;this._var.checking=!0,null===this._var.bait&&this._creatBait();var e=this;return this._var.loopNumber=0,!0===t&&(this._var.loop=setInterval(function(){e._checkBait(t)},this._options.loopCheckTime)),setTimeout(function(){e._checkBait(t)},1),!0===this._options.debug&&this._log("check","A check is in progress ..."),!0},e.prototype._checkBait=function(e){var n=!1;if(null===this._var.bait&&this._creatBait(),null===t.document.body.getAttribute("abp")&&null!==this._var.bait.offsetParent&&0!=this._var.bait.offsetHeight&&0!=this._var.bait.offsetLeft&&0!=this._var.bait.offsetTop&&0!=this._var.bait.offsetWidth&&0!=this._var.bait.
clientHeight&&0!=this._var.bait.clientWidth||(n=!0),void 0!==t.getComputedStyle){var i=t.getComputedStyle(this._var.bait,null);!i||"none"!=i.getPropertyValue("display")&&"hidden"!=i.getPropertyValue("visibility")||(n=!0)}!0===this._options.debug&&this._log("_checkBait","A check ("+(this._var.loopNumber+1)+"/"+this._options.loopMaxNumber+" ~"+(1+this._var.loopNumber*this._options.loopCheckTime)+"ms) was conducted and detection is "+(!0===n?"positive":"negative")),!0===e&&++this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop(),!0===n?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),!0===e&&(this._var.checking=!1)):null!==this._var.loop&&!1!==e||(this._destroyBait(),this.emitEvent(!1),!0===e&&(this._var.checking=!1))},e.prototype._stopLoop=function(t){clearInterval(this._var.loop),this._var.loop=null,this._var.loopNumber=0,!0===this._options.debug&&this._log("_stopLoop","A loop has been stopped")},e.prototype.emitEvent=function(t){!0===this._options.debug&&this._log(
"emitEvent","An event with a "+(!0===t?"positive":"negative")+" detection was called");var e=this._var.event[!0===t?"detected":"notDetected"];for(var n in e)!0===this._options.debug&&this._log("emitEvent","Call function "+(parseInt(n)+1)+"/"+e.length),e.hasOwnProperty(n)&&e[n]();return!0===this._options.resetOnEnd&&this.clearEvent(),this},e.prototype.clearEvent=function(){this._var.event.detected=[],this._var.event.notDetected=[],!0===this._options.debug&&this._log("clearEvent","The event list has been cleared")},e.prototype.on=function(t,e){return this._var.event[!0===t?"detected":"notDetected"].push(e),!0===this._options.debug&&this._log("on",'A type of event "'+(!0===t?"detected":"notDetected")+'" was added'),this},e.prototype.onDetected=function(t){return this.on(!0,t)},e.prototype.onNotDetected=function(t){return this.on(!1,t)},t.BlockAdBlock=e,void 0===t.blockAdBlock&&(t.blockAdBlock=new e({checkOnLoad:!0,resetOnEnd:!0}))}(window)},function(t,e,n){t.exports={default:n(173),
__esModule:!0}},function(t,e,n){n(31),n(34),t.exports=n(65).f("iterator")},function(t,e,n){t.exports={default:n(175),__esModule:!0}},function(t,e,n){n(176),n(75),n(181),n(182),t.exports=n(0).Symbol},function(t,e,n){"use strict";var i=n(2),r=n(12),o=n(8),a=n(3),s=n(77),u=n(177).KEY,c=n(16),l=n(44),f=n(33),d=n(27),p=n(1),h=n(65),v=n(66),g=n(178),y=n(179),m=n(4),b=n(7),_=n(15),w=n(47),S=n(29),k=n(52),E=n(180),x=n(91),A=n(6),L=n(20),O=x.f,T=A.f,P=E.f,M=i.Symbol,I=i.JSON,C=I&&I.stringify,R=p("_hidden"),j=p("toPrimitive"),N={}.propertyIsEnumerable,B=l("symbol-registry"),V=l("symbols"),D=l("op-symbols"),F=Object.prototype,z="function"==typeof M,U=i.QObject,W=!U||!U.prototype||!U.prototype.findChild,H=o&&c(function(){return 7!=k(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=O(F,e);i&&delete F[e],T(t,e,n),i&&t!==F&&T(F,e,i)}:T,G=function(t){var e=V[t]=k(M.prototype);return e._k=t,e},q=z&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:
function(t){return t instanceof M},K=function(t,e,n){return t===F&&K(D,e,n),m(t),e=w(e,!0),m(n),r(V,e)?(n.enumerable?(r(t,R)&&t[R][e]&&(t[R][e]=!1),n=k(n,{enumerable:S(0,!1)})):(r(t,R)||T(t,R,S(1,{})),t[R][e]=!0),H(t,e,n)):T(t,e,n)},Y=function(t,e){m(t);for(var n,i=g(e=_(e)),r=0,o=i.length;o>r;)K(t,n=i[r++],e[n]);return t},J=function(t,e){return void 0===e?k(t):Y(k(t),e)},$=function(t){var e=N.call(this,t=w(t,!0));return!(this===F&&r(V,t)&&!r(D,t))&&(!(e||!r(this,t)||!r(V,t)||r(this,R)&&this[R][t])||e)},Q=function(t,e){if(t=_(t),e=w(e,!0),t!==F||!r(V,e)||r(D,e)){var n=O(t,e);return!n||!r(V,e)||r(t,R)&&t[R][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=P(_(t)),i=[],o=0;n.length>o;)r(V,e=n[o++])||e==R||e==u||i.push(e);return i},X=function(t){for(var e,n=t===F,i=P(n?D:_(t)),o=[],a=0;i.length>a;)!r(V,e=i[a++])||n&&!r(F,e)||o.push(V[e]);return o};z||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=
function(n){this===F&&e.call(D,n),r(this,R)&&r(this[R],t)&&(this[R][t]=!1),H(this,t,S(1,n))};return o&&W&&H(F,t,{configurable:!0,set:e}),G(t)},s(M.prototype,"toString",function(){return this._k}),x.f=Q,A.f=K,n(90).f=E.f=Z,n(30).f=$,n(48).f=X,o&&!n(32)&&s(F,"propertyIsEnumerable",$,!0),h.f=function(t){return G(p(t))}),a(a.G+a.W+a.F*!z,{Symbol:M});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)p(tt[et++]);for(var nt=L(p.store),it=0;nt.length>it;)v(nt[it++]);a(a.S+a.F*!z,"Symbol",{for:function(t){return r(B,t+="")?B[t]:B[t]=M(t)},keyFor:function(t){if(!q(t))throw TypeError(t+" is not a symbol!");for(var e in B)if(B[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!z,"Object",{create:J,defineProperty:K,defineProperties:Y,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:X}),I&&a(a.S+a.F*(!z||c(function(){var t=M();return"[null]"!=
C([t])||"{}"!=C({a:t})||"{}"!=C(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=e=i[1],(b(e)||void 0!==t)&&!q(t))return y(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!q(e))return e}),i[1]=e,C.apply(I,i)}}),M.prototype[j]||n(13)(M.prototype,j,M.prototype.valueOf),f(M,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(t,e,n){var i=n(27)("meta"),r=n(7),o=n(12),a=n(6).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(16)(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,i,{value:{i:"O"+ ++s,w:{}}})},f=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[i].i},d=function(t,e){if(!o(t,i)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[i].w},p=function(t){return c&&h.NEED&&u(t)&&!o(t,i)&&l(t),t},h=t.exports={KEY:i,NEED:!1,fastKey:f,getWeak:d,onFreeze:p}},function(t,e,n){var i=n(20),r=n(
48),o=n(30);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},function(t,e,n){var i=n(21);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(15),r=n(90).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return r(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):r(i(t))}},function(t,e,n){n(66)("asyncIterator")},function(t,e,n){n(66)("observable")},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(184),o=i(r),a=n(187),s=i(a);e.default=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,u=(0,s.default)(t);!(i=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&u.return&&u.return()}finally{if(r)throw o}}return n}return function(e,n){if(Array.
isArray(e))return e;if((0,o.default)(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,n){t.exports={default:n(185),__esModule:!0}},function(t,e,n){n(34),n(31),t.exports=n(186)},function(t,e,n){var i=n(53),r=n(1)("iterator"),o=n(18);t.exports=n(0).isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||o.hasOwnProperty(i(e))}},function(t,e,n){t.exports={default:n(188),__esModule:!0}},function(t,e,n){n(34),n(31),t.exports=n(189)},function(t,e,n){var i=n(4),r=n(80);t.exports=n(0).getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},function(t,e,n){t.exports={default:n(191),__esModule:!0}},function(t,e,n){n(192),t.exports=n(0).Object.getPrototypeOf},function(t,e,n){var i=n(26),r=n(79);n(73)("getPrototypeOf",function(){return function(t){return r(i(t))}})},function(t,e,n){"use strict";e.__esModule=!0;var i=n(64),r=function(t){return t
&&t.__esModule?t:{default:t}}(i);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,r.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(195),o=i(r),a=n(199),s=i(a),u=n(64),c=i(u);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,c.default)(e)));t.prototype=(0,s.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},function(t,e,n){t.exports={default:n(196),__esModule:!0}},function(t,e,n){n(197),t.exports=n(0).Object.setPrototypeOf},function(t,e,n){var i=n(3);i(i.S,"Object",{setPrototypeOf:n(198).set})},function(t,e,n){var i=n(7),r=n(4),o=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError
(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n(22)(Function.call,n(91).f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){t.exports={default:n(200),__esModule:!0}},function(t,e,n){n(201);var i=n(0).Object;t.exports=function(t,e){return i.create(t,e)}},function(t,e,n){var i=n(3);i(i.S,"Object",{create:n(52)})},function(t,e,n){function i(t,e,n){var i=!0,s=!0;if("function"!=typeof t)throw new TypeError(a);return o(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),r(t,e,{leading:i,maxWait:e,trailing:s})}var r=n(92),o=n(10),a="Expected a function";t.exports=i},function(t,e,n){var i=n(5),r=function(){return i.Date.now()};t.exports=r},function(t,e,n){function i(t){if("number"==typeof t)return t;if(o(t))return a;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e
+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var n=c.test(t);return n||l.test(t)?f(t.slice(2),n?2:8):u.test(t)?a:+t}var r=n(10),o=n(36),a=NaN,s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,f=parseInt;t.exports=i},function(t,e,n){function i(t){return r(t,o(t))}var r=n(206),o=n(207);t.exports=i},function(t,e,n){function i(t,e,n,i){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var c=e[s],l=i?i(n[c],t[c],c,n,t):void 0;void 0===l&&(l=t[c]),a?o(n,c,l):r(n,c,l)}return n}var r=n(86),o=n(55);t.exports=i},function(t,e,n){function i(t){return a(t)?r(t,!0):o(t)}var r=n(93),o=n(214),a=n(99);t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}t.exports=n},function(t,e,n){function i(t){return o(t)&&r(t)==a}var r=n(23),o=n(24),a="[object Arguments]";t.exports=i},function(t,e){function n(){return!1}t.exports=n},function(t,e,n){function i(t){return a(t)&&o(t.length)&&!!s[r(t)]}var r=n(23),o=n(67),a=n(24),s={};s[
"[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=i},function(t,e){function n(t){return function(e){return t(e)}}t.exports=n},function(t,e,n){(function(t){var i=n(87),r="object"==typeof e&&e&&!e.nodeType&&e,o=r&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===r,s=a&&i.process,u=function(){try{return s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=u}).call(e,n(96)(t))},function(t,e,n){function i(t){if(!r(t))return a(t);var e=o(t),n=[];for(var i in t)(
"constructor"!=i||!e&&u.call(t,i))&&n.push(i);return n}var r=n(10),o=n(98),a=n(215),s=Object.prototype,u=s.hasOwnProperty;t.exports=i},function(t,e){function n(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}t.exports=n},function(t,e){function n(t){return void 0===t}t.exports=n},function(t,e,n){function i(t,e){var n={};return e=a(e,3),o(t,function(t,i,o){r(n,i,e(t,i,o))}),n}var r=n(55),o=n(218),a=n(224);t.exports=i},function(t,e,n){function i(t,e){return t&&r(t,e,o)}var r=n(219),o=n(68);t.exports=i},function(t,e,n){var i=n(220),r=i();t.exports=r},function(t,e){function n(t){return function(e,n,i){for(var r=-1,o=Object(e),a=i(e),s=a.length;s--;){var u=a[t?s:++r];if(!1===n(o[u],u,o))break}return e}}t.exports=n},function(t,e,n){function i(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))s.call(t,n)&&"constructor"!=n&&e.push(n);return e}var r=n(98),o=n(222),a=Object.prototype,s=a.hasOwnProperty;t.exports=i},function(t,e,n){var i=n(223),r=i(Object.keys,Object);t.
exports=r},function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},function(t,e,n){function i(t){return"function"==typeof t?t:null==t?a:"object"==typeof t?s(t)?o(t[0],t[1]):r(t):u(t)}var r=n(225),o=n(255),a=n(259),s=n(11),u=n(260);t.exports=i},function(t,e,n){function i(t){var e=o(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}var r=n(226),o=n(254),a=n(104);t.exports=i},function(t,e,n){function i(t,e,n,i){var u=n.length,c=u,l=!i;if(null==t)return!c;for(t=Object(t);u--;){var f=n[u];if(l&&f[2]?f[1]!==t[f[0]]:!(f[0]in t))return!1}for(;++u<c;){f=n[u];var d=f[0],p=t[d],h=f[1];if(l&&f[2]){if(void 0===p&&!(d in t))return!1}else{var v=new r;if(i)var g=i(p,h,d,t,e,v);if(!(void 0===g?o(h,p,a|s,i,v):g))return!1}}return!0}var r=n(100),o=n(101),a=1,s=2;t.exports=i},function(t,e,n){function i(){this.__data__=new r,this.size=0}var r=n(38);t.exports=i},function(t,e){function n(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}t.
exports=n},function(t,e){function n(t){return this.__data__.get(t)}t.exports=n},function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},function(t,e,n){function i(t,e){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!o||i.length<s-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(i)}return n.set(t,e),this.size=n.size,this}var r=n(38),o=n(61),a=n(60),s=200;t.exports=i},function(t,e,n){function i(t,e,n,i,g,m){var b=c(t),_=c(e),w=b?h:u(t),S=_?h:u(e);w=w==p?v:w,S=S==p?v:S;var k=w==v,E=S==v,x=w==S;if(x&&l(t)){if(!l(e))return!1;b=!0,k=!1}if(x&&!k)return m||(m=new r),b||f(t)?o(t,e,n,i,g,m):a(t,e,w,n,i,g,m);if(!(n&d)){var A=k&&y.call(t,"__wrapped__"),L=E&&y.call(e,"__wrapped__");if(A||L){var O=A?t.value():t,T=L?e.value():e;return m||(m=new r),g(O,T,n,i,m)}}return!!x&&(m||(m=new r),s(t,e,n,i,g,m))}var r=n(100),o=n(102),a=n(238),s=n(242),u=n(249),c=n(11),l=n(95),f=n(97),d=1,p="[object Arguments]",h="[object Array]",v="[object Object]",g=Object.prototype
,y=g.hasOwnProperty;t.exports=i},function(t,e,n){function i(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}var r=n(60),o=n(234),a=n(235);i.prototype.add=i.prototype.push=o,i.prototype.has=a,t.exports=i},function(t,e){function n(t){return this.__data__.set(t,i),this}var i="__lodash_hash_undefined__";t.exports=n},function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},function(t,e){function n(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}t.exports=n},function(t,e){function n(t,e){return t.has(e)}t.exports=n},function(t,e,n){function i(t,e,n,i,r,k,x){switch(n){case S:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case w:return!(t.byteLength!=e.byteLength||!k(new o(t),new o(e)));case d:case p:case g:return a(+t,+e);case h:return t.name==e.name&&t.message==e.message;case y:case b:return t==e+"";case v:var A=u;case m:var L=i&l;if(A||(A=c),t.size!=e.size&&!L)return!1;var O=x
.get(t);if(O)return O==e;i|=f,x.set(t,e);var T=s(A(t),A(e),i,r,k,x);return x.delete(t),T;case _:if(E)return E.call(t)==E.call(e)}return!1}var r=n(35),o=n(239),a=n(57),s=n(102),u=n(240),c=n(241),l=1,f=2,d="[object Boolean]",p="[object Date]",h="[object Error]",v="[object Map]",g="[object Number]",y="[object RegExp]",m="[object Set]",b="[object String]",_="[object Symbol]",w="[object ArrayBuffer]",S="[object DataView]",k=r?r.prototype:void 0,E=k?k.valueOf:void 0;t.exports=i},function(t,e,n){var i=n(5),r=i.Uint8Array;t.exports=r},function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}t.exports=n},function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}t.exports=n},function(t,e,n){function i(t,e,n,i,a,u){var c=n&o,l=r(t),f=l.length;if(f!=r(e).length&&!c)return!1;for(var d=f;d--;){var p=l[d];if(!(c?p in e:s.call(e,p)))return!1}var h=u.get(t);if(h&&u.get(e))return h==e;var v=!0;u.set(t,e),u.set(e,t);for(var g
=c;++d<f;){p=l[d];var y=t[p],m=e[p];if(i)var b=c?i(m,y,p,e,t,u):i(y,m,p,t,e,u);if(!(void 0===b?y===m||a(y,m,n,i,u):b)){v=!1;break}g||(g="constructor"==p)}if(v&&!g){var _=t.constructor,w=e.constructor;_!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w)&&(v=!1)}return u.delete(t),u.delete(e),v}var r=n(243),o=1,a=Object.prototype,s=a.hasOwnProperty;t.exports=i},function(t,e,n){function i(t){return r(t,a,o)}var r=n(244),o=n(246),a=n(68);t.exports=i},function(t,e,n){function i(t,e,n){var i=e(t);return o(t)?i:r(i,n(t))}var r=n(245),o=n(11);t.exports=i},function(t,e){function n(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}t.exports=n},function(t,e,n){var i=n(247),r=n(248),o=Object.prototype,a=o.propertyIsEnumerable,s=Object.getOwnPropertySymbols,u=s?function(t){return null==t?[]:(t=Object(t),i(s(t),function(e){return a.call(t,e)}))}:r;t.exports=u},function(t,e){function n(t,e){for(var n=-1,i=null==t?0
:t.length,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}t.exports=n},function(t,e){function n(){return[]}t.exports=n},function(t,e,n){var i=n(250),r=n(61),o=n(251),a=n(252),s=n(253),u=n(23),c=n(88),l=c(i),f=c(r),d=c(o),p=c(a),h=c(s),v=u;(i&&"[object DataView]"!=v(new i(new ArrayBuffer(1)))||r&&"[object Map]"!=v(new r)||o&&"[object Promise]"!=v(o.resolve())||a&&"[object Set]"!=v(new a)||s&&"[object WeakMap]"!=v(new s))&&(v=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,i=n?c(n):"";if(i)switch(i){case l:return"[object DataView]";case f:return"[object Map]";case d:return"[object Promise]";case p:return"[object Set]";case h:return"[object WeakMap]"}return e}),t.exports=v},function(t,e,n){var i=n(14),r=n(5),o=i(r,"DataView");t.exports=o},function(t,e,n){var i=n(14),r=n(5),o=i(r,"Promise");t.exports=o},function(t,e,n){var i=n(14),r=n(5),o=i(r,"Set");t.exports=o},function(t,e,n){var i=n(14),r=n(5),o=i(r,"WeakMap");t.exports=o},function(t,e,n){function i(t){for(
var e=o(t),n=e.length;n--;){var i=e[n],a=t[i];e[n]=[i,a,r(a)]}return e}var r=n(103),o=n(68);t.exports=i},function(t,e,n){function i(t,e){return s(t)&&u(e)?c(l(t),e):function(n){var i=o(n,t);return void 0===i&&i===e?a(n,t):r(e,i,f|d)}}var r=n(101),o=n(63),a=n(256),s=n(59),u=n(103),c=n(104),l=n(25),f=1,d=2;t.exports=i},function(t,e,n){function i(t,e){return null!=t&&o(t,e,r)}var r=n(257),o=n(258);t.exports=i},function(t,e){function n(t,e){return null!=t&&e in Object(t)}t.exports=n},function(t,e,n){function i(t,e,n){e=r(e,t);for(var i=-1,l=e.length,f=!1;++i<l;){var d=c(e[i]);if(!(f=null!=t&&n(t,d)))break;t=t[d]}return f||++i!=l?f:!!(l=null==t?0:t.length)&&u(l)&&s(d,l)&&(a(t)||o(t))}var r=n(58),o=n(94),a=n(11),s=n(62),u=n(67),c=n(25);t.exports=i},function(t,e){function n(t){return t}t.exports=n},function(t,e,n){function i(t){return a(t)?r(s(t)):o(t)}var r=n(261),o=n(262),a=n(59),s=n(25);t.exports=i},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}t.exports=n},
function(t,e,n){function i(t){return function(e){return r(e,t)}}var r=n(89);t.exports=i},function(t,e){}])});;

(function(w,d,s,p,v,e,r){w['$igniter_var']=v;w[v]=w[v]||function(){(w[v].q=w[v].q||[]).push(arguments)};w[v].l=1*new Date();e=d.createElement(s),r=d.getElementsByTagName(s)[0];e.async=1;e.src=p+'?ts='+(+new Date()/3600000|0);r.parentNode.insertBefore(e,r)})(window,document,'script','//cdn.petametrics.com/l9ehhrb6mtv75bp2.js','$p');function getLiftIgniterGlobalContext(){var context={};if(window.ads&&window.ads.context&&window.ads.context.targeting){var targeting=window.ads.context.targeting;context={_wCategory:targeting.wikiCategory,_wName:targeting.wikiDbName,_wTop:targeting.wikiIsTop1000,_wikiLanguage:targeting.wikiLanguage,_wVert:targeting.wikiVertical,_pType:targeting.pageType,_pName:targeting.pageName};if(targeting.wikiCustomKeyValues){targeting.wikiCustomKeyValues.split(';').map(function(keyVal){return keyVal.split('=');}).forEach(function(parts){var key='_'+parts[0];if(!context[key]){context[key]=[parts[1]];}else{context[key].push(parts[1]);}})}}if(localStorage.kxallsegs){context
['_kruxTags']=localStorage.kxallsegs.split(',');}return context;}$p("init","l9ehhrb6mtv75bp2",{config:{globalCtx:getLiftIgniterGlobalContext()}});$p("send","pageview");$p("setRequestFields",["rank","thumbnail","title","url","presented_by","author","site_name","type"]);;

define('ext.wikia.recirculation.tracker',['wikia.tracker','wikia.abTest'],function(tracker,abTest){'use strict';function trackClick(label){tracker.track({action:tracker.ACTIONS.CLICK,category:'recirculation',label:label,trackingMethod:'analytics'});}function trackImpression(label){tracker.track({action:tracker.ACTIONS.IMPRESSION,category:'recirculation',label:label,trackingMethod:'analytics'});}return{trackImpression:trackImpression,trackClick:trackClick};});;define('ext.wikia.recirculation.utils',['jquery','wikia.loader','wikia.cache','wikia.mustache'],function($,loader,cache,Mustache){'use strict';var fandomHeartSvg='<svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">'+
'<path d="M12.77.13L9.44 3.5a.66.66 0 0 1-.94 0L5.16.17a.44.44 0 0 0-.63 0L.24 4.4a.77.77 0 0 0-.24.55V9a.77.77 0 0 0 .23.55l8.37 8.37a.44.44 0 0 0 .63 0L17.6 9.5a.77.77 0 0 0 .23-.5V5a.77.77 0 0 0-.22-.54L13.4.13a.44.44 0 0 0-.63 0zm-2.66 4.94a.22.22 0 0 1 0-.3L12 2.88a1.65 1.65 0 0 1 1.41-.47 1.73 1.73 0 0 1 1 .51l1.91 1.91a.22.22 0 0 1 0 .3L13.39 8a.22.22 0 0 1-.3 0zm1 5.24l-1.8 1.8a.22.22 0 0 1-.3 0l-6-6A1.66 1.66 0 0 1 3 3.73l1.8-1.8a.22.22 0 0 1 .3 0l6 6a1.66 1.66 0 0 1 .01 2.38zm5.37-3.11v1.29a.57.57 0 0 1-.16.4l-6.89 7a.51.51 0 0 1-.38.17.54.54 0 0 1-.4-.17l-.49-.46a.22.22 0 0 1 0-.31l8-8a.22.22 0 0 1 .33.09zm-8.63 6a.75.75 0 0 1-.2.54l-.39.36a.33.33 0 0 1-.45 0L1.56 8.92a.69.69 0 0 1-.21-.49v-1A.39.39 0 0 1 2 7.18l5.57 5.5a.81.81 0 0 1 .28.54z"/>'+'</svg>';function loadTemplate(templateName){var dfd=new $.Deferred(),templateLocation='extensions/wikia/Recirculation/templates/'+templateName,cacheKey='RecirculationAssets_'+templateLocation,template=cache.getVersioned(cacheKey);if
(!templateName){return dfd.reject('Invalid template name');}if(template){dfd.resolve(template);}else{loader({type:loader.MULTI,resources:{mustache:templateLocation}}).done(function(data){template=data.mustache[0];dfd.resolve(template);cache.setVersioned(cacheKey,template,86400);});}return dfd.promise();}function loadTemplates(templatesNames){var dfd=new $.Deferred(),templatePath='extensions/wikia/Recirculation/templates/',templateLocations=templatesNames.map(function(templatesName){return templatePath+templatesName;});loader({type:loader.MULTI,resources:{mustache:templateLocations.join(',')}}).done(function(data){dfd.resolve(data.mustache);});return dfd.promise();}function renderTemplate(template,data){return $(Mustache.render(template,data));}function renderTemplateByName(templateName,data){return loadTemplate(templateName).then(function(template){return $(Mustache.render(template,data));});}function buildLabel(element,label){var $parent=$(element).parent(),slot=$parent.data('index')+
1,source=$parent.data('source')||'undefined',isVideo=$parent.hasClass('is-video')?'video':'not-video',parts=[label,'slot-'+slot,source,isVideo];return parts.join('=');}function waitForRail(){var $rail=$('#WikiaRail'),deferred=$.Deferred(),args=Array.prototype.slice.call(arguments);if($rail.find('.loading').exists()){$rail.one('afterLoad.rail',function(){deferred.resolve.apply(null,args);});}else{deferred.resolve.apply(null,args);}return deferred.promise();}return{buildLabel:buildLabel,loadTemplates:loadTemplates,renderTemplate:renderTemplate,renderTemplateByName:renderTemplateByName,waitForRail:waitForRail,fandomHeartSvg:fandomHeartSvg};});;define('ext.wikia.recirculation.helpers.fandom',['jquery','wikia.window','wikia.abTest','wikia.nirvana'],function($,w,abTest,nirvana){'use strict';return function(config){var defaults={limit:3,type:'recent_popular',ignoreError:!1,fill:!1},options=$.extend({},defaults,config);function loadData(){var deferred=$.Deferred();nirvana.sendRequest({
controller:'RecirculationApi',method:'getFandomPosts',format:'json',type:'get',scriptPath:w.wgCdnApiUrl,data:{type:options.type,cityId:w.wgCityId,limit:options.limit,fill:options.fill},callback:function(data){data=formatData(data);if(data.items&&data.items.length>=options.limit){deferred.resolve(data);}else{if(options.ignoreError){deferred.resolve({title:data.title,items:[]});}else{deferred.reject('Recirc widget not shown. Not enough items returned from Fandom API');}}}});return deferred.promise();}function formatData(data){var items=[];$.each(data.posts,function(index,item){if(items.length<options.limit){item.thumbnail=item.image_url||item.thumbnail;item.index=index;items.push(item);}});return{title:data.title,items:items.sort(sortItem)};}function sortItem(a,b){if(a.type==='recent_popular'&&b.type!=='recent_popular'){return 1;}if(b.type==='recent_popular'&&a.type!=='recent_popular'){return-1;}return b.isVideo-a.isVideo;}return{loadData:loadData};};});;define(
'ext.wikia.recirculation.helpers.discussions',['jquery','wikia.window','wikia.abTest','wikia.nirvana'],function($,w,abTest,nirvana){'use strict';var deferred=$.Deferred();function prepare(){return deferred.promise();}function fetch(){nirvana.sendRequest({controller:'Recirculation',method:'discussions',format:'html',type:'get',data:{cityId:w.wgCityId,latest:!0,limit:10,ignoreWgEnableRecirculationDiscussions:!0},callback:function(response){deferred.resolve(response);}});}return{prepare:prepare,fetch:fetch};});;define('ext.wikia.recirculation.helpers.curatedContent',['jquery','underscore','wikia.window','wikia.nirvana','wikia.cache','ext.wikia.recirculation.tracker'],function($,_,w,nirvana,cache,tracker){'use strict';return function(config){var defaults={limit:1},options=$.extend({},defaults,config);function loadData(){var deferred=$.Deferred();nirvana.sendRequest({controller:'RecirculationApi',method:'getFandomPosts',format:'json',type:'get',scriptPath:w.wgCdnApiUrl,data:{type:
'curated'},callback:function(data){data=formatData(data);if(data&&data.length>0){deferred.resolve(data);}else{deferred.reject();}},onErrorCallback:function(){deferred.reject();}});return deferred.promise();}function formatData(data){var items=[];var posts=_.shuffle(data.posts);$.each(posts,function(index,item){if(items.length<options.limit&&!hasSeen(item)){items.push(item);}});return items;}function hasSeen(post){return cache.get(key(post));}function setSeen(post){return cache.set(key(post),true,cache.CACHE_STANDARD);}function key(post){return'recirculation:curated:'+post.id;}function injectContent(data){var deferred=$.Deferred();loadData().then(function(curatedPosts){var randomIndex=Math.floor(Math.random()*data.items.length);data.items.splice(randomIndex,1,curatedPosts[0]);data.items.map(function(item,index){item.index=index;return item;});setSeen(curatedPosts[0]);deferred.resolve(data);}).fail(function(){deferred.resolve(data);});return deferred.promise();}function setupTracking(
$html){var $curatedItem=$html.find('.item-curated'),label,slot,id;if($curatedItem.length){id=$curatedItem.data('id');slot=$curatedItem.data('index')+1;label='CURATED='+id+'=slot_'+slot;tracker.trackImpression(label);$curatedItem.on('mousedown','a',function(){tracker.trackClick(label);});}return $html;}return{injectContent:injectContent,setupTracking:setupTracking,loadData:loadData};};});;define('ext.wikia.recirculation.helpers.liftigniter',['jquery','wikia.window','wikia.thumbnailer'],function($,w,thumbnailer){'use strict';var willFetch={},fetchQueue=[],fetching=!1;var prepare=function(options){var deferred=$.Deferred(),registerOptions={max:options.max,widget:options.widget,callback:function(response){resizeThumbnails(response,options);deferred.resolve(response);fetching=!1;if(fetchQueue.length){setTimeout(function(){fetch(fetchQueue.shift());});}}};if(!w.$p){return deferred.reject('Liftigniter library not found').promise();}if(options.opts){registerOptions.opts=options.opts;}var
module={promise:deferred,options:registerOptions};if(willFetch[options.modelName]){willFetch[options.modelName].push(module)}else{willFetch[options.modelName]=[module];}return deferred.promise();};function resizeThumbnails(data,options){$.each(data.items,function(index,item){if(thumbnailer.isThumbUrl(item.thumbnail)){item.thumbnail=thumbnailer.getThumbURL(item.thumbnail,'image',options.width,options.height);}});}function fetch(modelName){if(willFetch[modelName]&&!fetching){willFetch[modelName].forEach(function(module){w.$p('register',module.options);});fetching=!0;w.$p('fetch');}else if(fetching){fetchQueue.push(modelName);}}function setupTracking(itemsSelector,options){var elements=$(itemsSelector).get(),trackOptions={elements:elements,name:options.widget,source:'LI',};if(options.opts){trackOptions.opts=options.opts}w.$p('track',trackOptions);}return{prepare:prepare,fetch:fetch,setupTracking:setupTracking};});;define('ext.wikia.recirculation.views.premiumRail',['jquery',
'wikia.window','wikia.abTest','ext.wikia.recirculation.tracker','ext.wikia.recirculation.utils','ext.wikia.recirculation.helpers.curatedContent'],function($,w,abTest,tracker,utils,CuratedHelper){'use strict';var options={};function render(data){var curated=new CuratedHelper();return curated.injectContent(data).then(renderTemplate('client/premiumRail.mustache')).then(utils.waitForRail).then(function($html){var $recirculationRail=$('#recirculation-rail');if(options.before){$html=options.before($html);}$recirculationRail.html($html);curated.setupTracking($html);$recirculationRail.trigger('premiumRecirculationRail.ready');return $html;});}function renderTemplate(templateName){return function(data){data.title=data.title||$.msg('recirculation-fandom-title');data.items=data.items.slice(0,5);data.fandomHeartSvg=utils.fandomHeartSvg;return utils.renderTemplateByName(templateName,data);};}function setupTracking(){return function($html){$html.on('mousedown','a',function(){tracker.trackClick(utils
.buildLabel(this,'rail'));});return $html;};}return function(config){$.extend(options,config);return{render:render,setupTracking:setupTracking,itemsSelector:'.premium-recirculation-rail .item'};};});;define('ext.wikia.recirculation.views.mixedFooter',['jquery','wikia.window','wikia.tracker','ext.wikia.recirculation.utils','ext.wikia.recirculation.plista'],function($,w,tracker,utils,plista){'use strict';var track=tracker.buildTrackingFunction({category:'mixed-content-footer',trackingMethod:'analytics'}),$mixedContentFooter=$('#mixed-content-footer');function render(data){var newsAndStoriesList=data.nsItems?data.nsItems.items:[],wikiArticlesList=data.wikiItems.items,templateList=getTemplateList(newsAndStoriesList),templates={},$discussions=$(data.discussions);$('.mcf-discussions-placeholder').replaceWith($discussions);$discussions.find('.discussion-timestamp').timeago();return utils.loadTemplates(templateList).then(function(data){templateList.forEach(function(templateName,index){
templates[templateName]=data[index];});}).then(plista.prepareData(wikiArticlesList)).then(function(){injectTemplates(templates,newsAndStoriesList,wikiArticlesList);setupTracking();})}function injectTemplates(templates,newsAndStoriesList,wikiArticlesList){var $newsAndStoriesHook=$('.mcf-card-ns-placeholder'),$wikiArticleHook=$('.mcf-card-wiki-placeholder');$.each($newsAndStoriesHook,function(index){var $this=$(this),template=templates['client/Recirculation_article.mustache'],newsAndStoriesItem=newsAndStoriesList[index],type;if(newsAndStoriesItem){type=newsAndStoriesItem.type;newsAndStoriesItem.shortTitle=newsAndStoriesItem.title;if(type==='topic'){template=templates['client/Recirculation_topic.mustache'];newsAndStoriesItem.buttonLabel=$.msg('recirculation-explore');}else if(type==='storyStream'){template=templates['client/Recirculation_storyStream.mustache'];newsAndStoriesItem.buttonLabel=$.msg('recirculation-explore-posts');}else if(type==='video'){newsAndStoriesItem.video=!0;}
newsAndStoriesItem.trackingLabels=$this.data('tracking')+','+type;newsAndStoriesItem.liType='ns';newsAndStoriesItem.classes=$this[0].className.replace('mcf-card-ns-placeholder','');$this.replaceWith(utils.renderTemplate(template,newsAndStoriesItem));}});$.each($wikiArticleHook,function(index){var $this=$(this),template=templates['client/Recirculation_article.mustache'],wikiArticle=wikiArticlesList[index];wikiArticle.shortTitle=wikiArticle.title;if(wikiArticle){if(!wikiArticle.thumbnail){wikiArticle.fandomHeartSvg=utils.fandomHeartSvg;}if(wikiArticle.title.length>90){wikiArticle.shortTitle=wikiArticle.title.substring(0,80)+'...';}wikiArticle.trackingLabels=$this.data('tracking')+',wiki-article';wikiArticle.classes=$this[0].className.replace('mcf-card-wiki-placeholder','');wikiArticle.liType='wiki';if(wikiArticle.type==='video'){wikiArticle.video=!0;}$this.replaceWith(utils.renderTemplate(template,wikiArticle));}});}function getTemplateList(newsAndStoriesArticles){var templateList=[
'client/Recirculation_article.mustache'],topicExist=!1,storyStreamExist=!1;newsAndStoriesArticles.forEach(function(article){if(article.type==='topic'&&!topicExist){templateList.push('client/Recirculation_topic.mustache');topicExist=!0;}else if(article.type==='storyStream'&&!storyStreamExist){templateList.push('client/Recirculation_storyStream.mustache');storyStreamExist=!0;}});return templateList;}function setupTracking(){track({action:tracker.ACTIONS.IMPRESSION});$mixedContentFooter.on('click','[data-tracking]',function(){var labels=$(this).data('tracking').split(',');labels.forEach(function(label){track({action:tracker.ACTIONS.CLICK,label:label});});});}return function(){return{render:render,nsItemsSelector:'#mixed-content-footer [data-li-type=ns]',wikiItemsSelector:'#mixed-content-footer [data-li-type=wiki]'};};});;require(['jquery','wikia.window','wikia.log','ext.wikia.recirculation.utils','ext.wikia.recirculation.views.mixedFooter',
'ext.wikia.recirculation.helpers.liftigniter','ext.wikia.recirculation.helpers.discussions','ext.wikia.recirculation.discussions',require.optional('videosmodule.controllers.rail')],function($,window,log,utils,mixedFooter,liftigniter,discussions,oldDiscussions,videosModule){'use strict';var $mixedContentFooter=$('#mixed-content-footer'),$mixedContentFooterContent=$('.mcf-content'),railRecirculation={max:5,widget:'wikia-rail',width:320,height:180,modelName:'ns',opts:{resultType:'cross-domain',domainType:'fandom.wikia.com'}},mixedContentFooter={nsItems:{max:$mixedContentFooter.data('number-of-ns-articles'),widget:'wikia-impactfooter',width:386,height:337,modelName:'ns',opts:{resultType:'cross-domain',domainType:'fandom.wikia.com'}},wikiItems:{max:$mixedContentFooter.data('number-of-wiki-articles'),widget:'wikia-footer-wiki-rec',width:386,height:337,modelName:'wiki',opts:{rule_language:window.wgContentLanguage}}};function prepareEnglishRecirculation(){liftigniter.prepare(railRecirculation)
.done(function(data){require(['ext.wikia.recirculation.views.premiumRail'],function(viewFactory){var view=viewFactory();view.render(data).then(view.setupTracking()).then(function(){liftigniter.setupTracking(view.itemsSelector,railRecirculation);});});});var mixedContentFooterData=[liftigniter.prepare(mixedContentFooter.nsItems),liftigniter.prepare(mixedContentFooter.wikiItems),discussions.prepare()];$.when.apply($,mixedContentFooterData).done(function(nsItems,wikiItems,discussions){$mixedContentFooterContent.show();require(['ext.wikia.recirculation.views.mixedFooter'],function(viewFactory){var view=viewFactory();view.render({nsItems:nsItems,wikiItems:wikiItems,discussions:discussions}).then(function(){liftigniter.setupTracking(view.nsItemsSelector,mixedContentFooter.nsItems);liftigniter.setupTracking(view.wikiItemsSelector,mixedContentFooter.wikiItems);});});});}function prepareInternationalRecirculation(){var mixedContentFooterData=[liftigniter.prepare(mixedContentFooter.wikiItems),
discussions.prepare()];$.when.apply($,mixedContentFooterData).done(function(wikiItems,discussions){$mixedContentFooterContent.show();require(['ext.wikia.recirculation.views.mixedFooter'],function(viewFactory){var view=viewFactory();view.render({wikiItems:wikiItems,discussions:discussions}).then(function(){liftigniter.setupTracking(view.wikiItemsSelector,mixedContentFooter.wikiItems);});});});}if(window.wgContentLanguage==='en'){prepareEnglishRecirculation();liftigniter.fetch('ns');}else{prepareInternationalRecirculation();if(videosModule){videosModule('#recirculation-rail');}}var lazyLoadHandler=$.throttle(50,function(){var mcfOffset=$mixedContentFooter.offset().top,scrollPosition=$(window).scrollTop(),windowInnerHeight=$(window).height(),lazyLoadOffset=500,aproachingMCF=scrollPosition>mcfOffset-windowInnerHeight-lazyLoadOffset;if(aproachingMCF){liftigniter.fetch('wiki');discussions.fetch();window.removeEventListener('scroll',lazyLoadHandler);}});window.addEventListener('scroll',
lazyLoadHandler);lazyLoadHandler();});;define('ext.wikia.recirculation.discussions',['jquery','wikia.window','wikia.abTest','wikia.nirvana','ext.wikia.recirculation.tracker'],function($,w,abTest,nirvana,tracker){'use strict';function injectDiscussions(){nirvana.sendRequest({controller:'Recirculation',method:'discussions',format:'html',type:'get',data:{cityId:w.wgCityId,limit:5},callback:function(response){var $WikiaArticleFooter=$('#WikiaArticleFooter'),$response=$(response);if($WikiaArticleFooter.length){$WikiaArticleFooter.before($response);}else{$('#WikiaMainContentContainer').append($response);}tracker.trackImpression('discussions');$response.find('.discussion-timestamp').timeago();$response.find('.discussion-thread').click(function(){var slot=$(this).index()+1,label='discussions-tile=slot-'+slot+'=discussions';tracker.trackClick(label);w.location=$(this).data('link');});$response.find('.discussion-link').mousedown(function(){tracker.trackClick('discussions-link');});}});}return injectDiscussions
;});;define('ext.wikia.recirculation.plista',['jquery'],function($){function shouldFetchPlista(items){var hasSponsoredContent=items.some(function(item){return item.presented_by;});return!hasSponsoredContent&&['AU','NZ'].indexOf(Geo.getCountryCode())>-1;}function fetchPlista(){return $.getJSON('https://farm.plista.com/recommendation/?publickey=845c651d11cf72a0f766713f&widgetname=api'+'&count=1&adcount=1&image[width]=320&image[height]=180').then(function(data){if(data[0]){return data[0];}else{return $.Deferred().reject('Plista returned no content');}});}function mapPlista(plistaData){return{source:'plista',thumbnail:plistaData.img,title:plistaData.title,url:plistaData.url,presented_by:'Plista',isPlista:!0}}function prepareData(renderData){return function(){var length=renderData.length;if(shouldFetchPlista(renderData)){return fetchPlista().then(mapPlista).then(function(data){renderData.splice(1,0,data);renderData=renderData.slice(0,length);},function(){return $.Deferred().resolve();});}
}}return{prepareData:prepareData}});;

(function(window,document){'use strict';var _kiq=[],createCookie,setABTestProperties;createCookie=function(cookieName){var cookieValue=cookieName+'=true;path=/;domain=',hostName=window.location.host,devDomainIndex=hostName.indexOf('wikia-dev');if(devDomainIndex>-1){cookieValue+='.'+hostName.substr(devDomainIndex);}else{cookieValue+='.wikia.com';}document.cookie=cookieValue;};setABTestProperties=function(){var ABTestPrefix='ABTest_',ABTestProperties={},isAnyABTestActive=!1;Wikia.AbTest.getExperiments().forEach(function(experiment){if(experiment.group){ABTestProperties[ABTestPrefix+experiment.name]=experiment.group.name;isAnyABTestActive=!0;}});if(isAnyABTestActive){_kiq.push(['set',ABTestProperties]);}};function loadQualaroo(){setTimeout(function(){var d=document,f=d.getElementsByTagName('script')[0],s=d.createElement('script');s.type='text/javascript';s.async=!0;s.src=window.wgQualarooUrl;f.parentNode.insertBefore(s,f);},1);}if(window.wgUser){_kiq.push(['identify',window.wgUser]
);}var dartGnreValues=window.dartGnreValues||[];_kiq.push(['set',{'userLanguage':window.wgUserLanguage,'contentLanguage':window.wgContentLanguage,'pageType':window.wikiaPageType,'isCorporatePage':(window.wikiaPageIsCorporate?'Yes':'No'),'verticalName':window.verticalName,'fullVerticalName':window.fullVerticalName,'visitorType':window.visitorType,'isLoggedIn':!!window.wgUserName,'cpBenefitsModalShown':document.cookie.indexOf('cpBenefitsModalShown')>-1,'isContributor':window.isContributor,'isCurrentWikiAdmin':window.isCurrentWikiAdmin,'isDartGnreAdventure':dartGnreValues.indexOf('adventure')>-1,'isDartGnreAction':dartGnreValues.indexOf('action')>-1,'isDartGnreFantasy':dartGnreValues.indexOf('fantasy')>-1,'isDartGnreRpg':dartGnreValues.indexOf('rpg')>-1,'isDartGnreScifi':dartGnreValues.indexOf('scifi')>-1,'isDartGnreOpenworld':dartGnreValues.indexOf('openworld')>-1,'isDartGnreFighting':dartGnreValues.indexOf('fighting')>-1,'isDartGnreDrama':dartGnreValues.indexOf('drama')>-1,
'isDartGnreCasual':dartGnreValues.indexOf('casual')>-1,'isDartGnreAnime':dartGnreValues.indexOf('anime')>-1,'isDartGnreShooter':dartGnreValues.indexOf('shooter')>-1,'isDartGnreCartoon':dartGnreValues.indexOf('cartoon')>-1,'isDartGnreComedy':dartGnreValues.indexOf('comedy')>-1,'isDartGnre3rdpersonshooter':dartGnreValues.indexOf('3rdpersonshooter')>-1,'isDartGnreFps':dartGnreValues.indexOf('fps')>-1,'isDartGnreHorror':dartGnreValues.indexOf('horror')>-1,'isDartGnreDriving':dartGnreValues.indexOf('driving')>-1,'isDartGnreSports':dartGnreValues.indexOf('sports')>-1}]);$('body').on('mousedown','form[id*="ki-"] > div[class*="ki-"]',function(){window._gaq.push(['_setSampleRate','100']);createCookie('qualaroo_survey_submission');});loadQualaroo();setABTestProperties();window._kiq=_kiq;})(window,document);;